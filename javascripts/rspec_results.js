!function(){function e(e,t,r){var n=function(){},$=n.prototype=new e.constructor;t.$$scope=$,t.$$base_module=e.base,$.base=t,$.constructor=n,$.constants=[],r&&(t.$$orig_scope=e,e[r]=e.constructor[r]=t,e.constants.push(r))}function t(e,t){var n=i(null,t,e);return r(e,n)}function r(e,t){function r(){}var $=function(){};$.prototype=e.constructor.prototype,r.prototype=new $;var o=new r;return n(o,r,e,t.prototype),o.$$alloc=t,o.$$proto.$$class=o,o}function n(e,t,r,n){e.$$id=E++,e.$$proto=n,e.constructor=t,e.$$is_class=!0,e.$$super=r,e.$$parent=r,e.$$methods=[],e.$$inc=[]}function $(){function e(){}var t=function(){};t.prototype=M.constructor.prototype,e.prototype=new t;var r=new e,$={};return n(r,e,M,$),r.$$is_mod=!0,r.$$dep=[],r}function o(e){var t=new y.Class.$$alloc;return t.$$class=y.Class,t.$$proto=e.constructor.prototype,t.$$is_singleton=!0,t.$$inc=[],t.$$methods=[],t.$$scope=e.$$scope,e.$$meta=t}function a(e){var t=e.$$class,r="#<Class:#<"+t.$$name+":"+t.$$id+">>",n=function(){},$=b.boot(t,n);return $.$$name=r,$.$$proto=e,$.$$class=t.$$class,$.$$scope=t.$$scope,$.$$parent=t,e.$$meta=$}function i(e,t,r){if(r){var n=function(){};n.prototype=r.$$proto||r.prototype,e&&(n.displayName=e),t.prototype=new n}return t.prototype.constructor=t,t}function s(e,t,r){var $=function(){};$.prototype=r.prototype;var o=function(){};o.prototype=new $,o.displayName="#<Class:"+e+">";var a=new o;return n(a,o,r,t.prototype),a.$$alloc=t,a.$$name=e,t.prototype.$$class=a,b[e]=a,b.constants.push(e),a}function c(t,n){var $=r(O,n);$.$$name=t,e(b,$,t),x.push($);for(var o=R.$$methods.concat(O.$$methods),a=0,i=o.length;i>a;a++){var s=o[a];n.prototype[s]=O.$$proto[s]}return l(n.prototype),$}function l(e){b.stub_subscribers.push(e)}function u(e,t){var r=_(t);e[t]=r}function _(e){function t(){return this.$method_missing.$$p=t.$$p,t.$$p=null,this.$method_missing.apply(this,[e.slice(1)].concat(S.call(arguments)))}return t.$$stub=!0,t}function p(e,t,r){var n=e.$$meta||e.$$class;for(t="$"+t;n&&n.$$proto[t]!==r;)n=n.$$parent;if(!n)throw new Error("could not find current class for super()");for(n=n.$$parent;n;){var $=n.$$proto[t];if($&&$!==r)break;n=n.$$parent}return n.$$proto}function d(e,t){R.$$methods.push(e);for(var r=0,n=x.length;n>r;r++)x[r].$$proto[e]=t}function f(){}function h(){}function m(){}function g(){}function v(){}if("undefined"!=typeof this.Opal)return console.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),this.Opal;var b=this.Opal={},y=b,x=b.bridged_classes=[],k=function(){};k.prototype=b,b.constructor=k,b.constants=[],b.global=this;var w=b.hasOwnProperty,S=b.slice=Array.prototype.slice,E=0;b.uid=function(){return E++},b.cvars={},b.gvars={},b.get=function(e){var t=this[e];return null==t?this.base.$const_missing(e):t},b.create_scope=e,b.klass=function(r,n,$,o){r.$$is_class||(r=r.$$class),null===n&&(n=O);var a=r.$$scope[$];if(w.call(r.$$scope,$)&&a.$$orig_scope===r.$$scope){if(!a.$$is_class)throw b.TypeError.$new($+" is not a class");if(n!==a.$$super&&n!==O)throw b.TypeError.$new("superclass mismatch for class "+$)}else{if("function"==typeof n)return c($,n);a=t(n,o),a.$$name=$,e(r.$$scope,a,$),r[$]=r.$$scope[$]=a,n!==O&&n!==R&&b.donate_constants(n,a),n.$inherited&&n.$inherited(a)}return a},b.boot=t,b.module=function(t,r){var n;if(t.$$is_class||(t=t.$$class),w.call(t.$$scope,r)){if(n=t.$$scope[r],!n.$$is_mod&&n!==O)throw b.TypeError.$new(r+" is not a module")}else n=$(),n.$$name=r,e(t.$$scope,n,r),t[r]=t.$$scope[r]=n;return n},b.get_singleton_class=function(e){return e.$$meta?e.$$meta:e.$$is_class?o(e):a(e)},b.append_features=function(e,t){for(var r=t.$$inc,n=0,$=r.length;$>n;n++)if(r[n]===e)return;r.push(e),e.$$dep.push(t);var o={$$name:e.$$name,$$proto:e.$$proto,$$parent:t.$$parent,$$module:e,$$iclass:!0};t.$$parent=o;for(var a=e.$$proto,i=t.$$proto,s=e.$$methods,c=0,l=s.length;l>c;c++){var u,_=s[c];(!i.hasOwnProperty(_)||(u=i[_]).$$donated||u.$$stub)&&(i[_]=a[_],i[_].$$donated=!0)}t.$$dep&&y.donate(t,s.slice(),!0),y.donate_constants(e,t)},b.casgn=function(e,t,r){var n=e.$$scope;return r.$$is_class&&r.$$name===A&&(r.$$name=t),r.$$is_class&&(r.$$base_module=e),n.constants.push(t),n[t]=r},b.cdecl=function(e,t,r){return e.constants.push(t),e[t]=r},b.cget=function(e,t){null==t&&(t=e,e=b.Object);var r=e;for(t=t.split("::");0!==t.length;)r=r.$const_get(t.shift());return r},b.donate_constants=function(e,t){for(var r=e.$$scope.constants,n=t.$$scope,$=n.constants,o=0,a=r.length;a>o;o++)$.push(r[o]),n[r[o]]=e.$$scope[r[o]]},b.add_stubs=function(e){for(var t,r=b.stub_subscribers,n=0,$=e.length;$>n;n++)for(var o=e[n],a=_(o),i=0;i<r.length;i++)t=r[i],o in t||(t[o]=a)},b.stub_subscribers=[f.prototype],b.add_stub_for=u,b.ac=function(e,t,r,n){var $=(r.$$is_class?r.$$name+".":r.$$class.$$name+"#")+n,o="["+$+"] wrong number of arguments("+e+" for "+t+")";throw b.ArgumentError.$new(o)},b.find_super_dispatcher=function(e,t,r,n,$){var o;return o=$?e.$$is_class?$.$$super:e.$$class.$$proto:e.$$is_class?e.$$super:p(e,t,r),o=o["$"+t],o.$$p=n,o},b.find_iter_super_dispatcher=function(e,t,r,n,$){return r.$$def?b.find_super_dispatcher(e,r.$$jsid,r,n,$):b.find_super_dispatcher(e,t,r,n,$)},b.$return=function(e){throw b.returner.$v=e,b.returner},b.$yield1=function(e,t){if("function"!=typeof e)throw b.LocalJumpError.$new("no block given");return e.length>1&&t.$$is_array?e.apply(null,t):e(t)},b.$yieldX=function(e,t){if("function"!=typeof e)throw b.LocalJumpError.$new("no block given");return e.length>1&&1==t.length&&t[0].$$is_array?e.apply(null,t[0]):(t.$$is_array||(t=S.call(t)),e.apply(null,t))},b.$rescue=function(e,t){for(var r=0;r!=t.length;r++){var n=t[r];if(n.$$is_array){var $=b.$rescue(e,n);if($)return $}else if(n["$==="](e))return n}return null},b.is_a=function(e,t){if(e.$$meta===t)return!0;for(var r=e.$$class;r;){if(r===t)return!0;for(var n=0,$=r.$$inc.length;$>n;n++)if(r.$$inc[n]==t)return!0;r=r.$$super}return!1},b.to_ary=function(e){return e.$$is_array?e:e.$to_ary&&!e.$to_ary.$$stub?e.$to_ary():[e]},b.send=function(e,t){var r=S.call(arguments,2),n=e["$"+t];return n?n.apply(e,r):e.$method_missing.apply(e,[t].concat(r))},b.block_send=function(e,t,r){var n=S.call(arguments,3),$=e["$"+t];return $?($.$$p=r,$.apply(e,n)):e.$method_missing.apply(e,[t].concat(n))},b.donate=function(e,t){var r=e.$$methods,n=e.$$dep;if(e.$$methods=r.concat(t),n)for(var $=0,o=n.length;o>$;$++){for(var a=n[$],i=a.$$proto,s=0,c=t.length;c>s;s++){var l=t[s];i[l]=e.$$proto[l],i[l].$$donated=!0}a.$$dep&&b.donate(a,t,!0)}},b.defn=function(e,t,r){return e.$$is_mod?(e.$$proto[t]=r,b.donate(e,[t])):e.$$is_class?(e.$$proto[t]=r,e===R?d(t,r):e===O&&b.donate(e,[t])):e[t]=r,A},b.defs=function(e,t,r){e.$$is_class||e.$$is_mod?e.constructor.prototype[t]=r:e[t]=r},b.hash=function(){if(1==arguments.length&&arguments[0].$$class==b.Hash)return arguments[0];var e,t,r,n=new b.Hash.$$alloc,$=[],o={};if(n.map=o,n.keys=$,1==arguments.length)if(arguments[0].$$is_array)for(var a=arguments[0],i=0,s=a.length;s>i;i++){var c=a[i];if(2!==c.length)throw b.ArgumentError.$new("value not of length 2: "+c.$inspect());e=c[0],t=c[1],null==o[e]&&$.push(e),o[e]=t}else{t=arguments[0];for(e in t)o[e]=t[e],$.push(e)}else{if(r=arguments.length,0!==r%2)throw b.ArgumentError.$new("odd number of arguments for Hash");for(var l=0;r>l;l++)e=arguments[l],t=arguments[++l],null==o[e]&&$.push(e),o[e]=t}return n},b.hash2=function(e,t){var r=new b.Hash.$$alloc;return r.keys=e,r.map=t,r},b.range=function(e,t,r){var n=new b.Range.$$alloc;return n.begin=e,n.end=t,n.exclude=r,n},function(e){function t(e){return a[e]?!1:(o.push(e),a[e]=!0,!0)}function r(e){var t,r,n=[],$="/";"."!==s&&(e=s.replace(/\/*$/,"/")+e),t=e.split($);for(var o=0,a=t.length;a>o;o++)r=t[o],".."===r?n.pop():n.push(r);return n.join($)}function n(r){t(r);var n=i[r];if(n){var $=c;c=r,n(e),c=$}else{var o=e.dynamic_require_severity||"warning",a="cannot load such file -- "+r;"error"===o?e.LoadError?e.LoadError.$new(a):function(){throw a}():"warning"===o&&e.gvars.stderr.$puts("WARNING: LoadError: "+a)}return!0}function $(e){return a[e]?!1:n(e)}var o=["corelib/runtime.js"],a={"corelib/runtime.js":!0},i={},s=".",c=".";e.modules=i,e.loaded_features=o,e.normalize_loadable_path=r,e.mark_as_loaded=t,e.load=n,e.require=$,e.current_file=c}(b);var R,O,M,q;i("BasicObject",f),i("Object",h,f),i("Module",g,h),i("Class",m,g),R=s("BasicObject",f,m),O=s("Object",h,R.constructor),M=s("Module",g,O.constructor),q=s("Class",m,M.constructor),R.$$class=q,O.$$class=q,M.$$class=q,q.$$class=q,R.$$super=null,O.$$super=R,M.$$super=O,q.$$super=M,R.$$parent=null,O.$$parent=R,M.$$parent=O,q.$$parent=M,O.$$dep=x,b.base=O,R.$$scope=O.$$scope=b,R.$$orig_scope=O.$$orig_scope=b,b.Kernel=O,M.$$scope=O.$$scope,M.$$orig_scope=O.$$orig_scope,q.$$scope=O.$$scope,q.$$orig_scope=O.$$orig_scope,O.$$proto.toString=function(){return this.$to_s()},O.$$proto.$require=b.require,b.top=new O.$$alloc,b.klass(O,O,"NilClass",v);var A=b.nil=new v;A.call=A.apply=function(){throw b.LocalJumpError.$new("no block given")},b.breaker=new Error("unexpected break"),b.returner=new Error("unexpected return"),c("Array",Array),c("Boolean",Boolean),c("Numeric",Number),c("String",String),c("Proc",Function),c("Exception",Error),c("Regexp",RegExp),c("Time",Date),TypeError.$$super=Error}.call(this),"undefined"!=typeof global&&(global.Opal=this.Opal,Opal.global=global),"undefined"!=typeof window&&(window.Opal=this.Opal,Opal.global=window),Opal.mark_as_loaded(Opal.normalize_loadable_path("corelib/runtime")),Opal.modules["corelib/helpers"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module;return e.add_stubs(["$new","$class","$===","$respond_to?","$raise","$type_error","$__send__","$coerce_to","$nil?","$<=>","$name","$inspect"]),function(t){var o=$(t,"Opal"),a=(o.$$proto,o.$$scope);e.defs(o,"$type_error",function(e,t,n,$){var o,i;return null==n&&(n=r),null==$&&($=r),(o=(i=n!==!1&&n!==r)?$:i)===r||o.$$is_boolean&&1!=o?a.get("TypeError").$new("no implicit conversion of "+e.$class()+" into "+t):a.get("TypeError").$new("can't convert "+e.$class()+" into "+t+" ("+e.$class()+"#"+n+" gives "+$.$class())}),e.defs(o,"$coerce_to",function(e,t,n){var $,o=this;return($=t["$==="](e))===r||$.$$is_boolean&&1!=$?((($=e["$respond_to?"](n))===r||$.$$is_boolean&&1!=$)&&o.$raise(o.$type_error(e,t)),e.$__send__(n)):e}),e.defs(o,"$coerce_to!",function(e,t,n){var $,o=this,a=r;return a=o.$coerce_to(e,t,n),(($=t["$==="](a))===r||$.$$is_boolean&&1!=$)&&o.$raise(o.$type_error(e,t,n,a)),a}),e.defs(o,"$coerce_to?",function(e,t,n){var $,o=this,a=r;return($=e["$respond_to?"](n))===r||$.$$is_boolean&&1!=$?r:(a=o.$coerce_to(e,t,n),($=a["$nil?"]())===r||$.$$is_boolean&&1!=$?((($=t["$==="](a))===r||$.$$is_boolean&&1!=$)&&o.$raise(o.$type_error(e,t,n,a)),a):r)}),e.defs(o,"$try_convert",function(e,t,n){var $;return($=t["$==="](e))===r||$.$$is_boolean&&1!=$?($=e["$respond_to?"](n))===r||$.$$is_boolean&&1!=$?r:e.$__send__(n):e}),e.defs(o,"$compare",function(e,t){var n,$=this,o=r;return o=e["$<=>"](t),(n=o===r)===r||n.$$is_boolean&&1!=n||$.$raise(a.get("ArgumentError"),"comparison of "+e.$class().$name()+" with "+t.$class().$name()+" failed"),o}),e.defs(o,"$destructure",function(e){return 1==e.length?e[0]:e.$$is_array?e:n.call(e)}),e.defs(o,"$respond_to?",function(e,t){return null!=e&&e.$$class?e["$respond_to?"](t):!1}),e.defs(o,"$inspect",function(e){return void 0===e?"undefined":null===e?"null":e.$$class?e.$inspect():e.toString()})}(t)},Opal.modules["corelib/module"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.klass;return e.add_stubs(["$attr_reader","$attr_writer","$=~","$raise","$const_missing","$to_str","$to_proc","$append_features","$included","$name","$new","$to_s"]),function(t,$super){function o(){}var a,i,s,c,l=o=$(t,$super,"Module",o),u=l.$$proto,_=l.$$scope;return e.defs(l,"$new",a=function(){function t(){}var n=a.$$p,$=n||r;a.$$p=null;var o=Opal.boot(Opal.Module,t);if(o.$$name=r,o.$$class=Opal.Module,o.$$dep=[],o.$$is_mod=!0,o.$$proto={},e.create_scope(Opal.Module.$$scope,o),$!==r){var i=$.$$s;$.$$s=null,$.call(o),$.$$s=i}return o}),u["$==="]=function(t){var n,$=this;return(n=null==t)===r||n.$$is_boolean&&1!=n?e.is_a(t,$):!1},u["$<"]=function(e){for(var t=this,r=t;r;){if(r===e)return!0;r=r.$$parent}return!1},u.$alias_method=function(t,r){var n=this;return n.$$proto["$"+t]=n.$$proto["$"+r],n.$$methods&&e.donate(n,["$"+t]),n},u.$alias_native=function(e,t){var r=this;return null==t&&(t=e),r.$$proto["$"+e]=r.$$proto[t]},u.$ancestors=function(){for(var e=this,t=e,r=[];t;)r.push(t),r=r.concat(t.$$inc),t=t.$$super;return r},u.$append_features=function(e){var t=this;return Opal.append_features(t,e),t},u.$attr_accessor=function(e){var t,r,$=this;return e=n.call(arguments,0),(t=$).$attr_reader.apply(t,[].concat(e)),(r=$).$attr_writer.apply(r,[].concat(e))},u.$attr_reader=function(t){var $=this;t=n.call(arguments,0);for(var o=$.$$proto,a=$,i=0,s=t.length;s>i;i++)!function(t){o[t]=r;var n=function(){return this[t]};a.$$is_singleton?o.constructor.prototype["$"+t]=n:(o["$"+t]=n,e.donate($,["$"+t]))}(t[i]);return r},u.$attr_writer=function(t){var $=this;t=n.call(arguments,0);for(var o=$.$$proto,a=$,i=0,s=t.length;s>i;i++)!function(t){o[t]=r;var n=function(e){return this[t]=e};a.$$is_singleton?o.constructor.prototype["$"+t+"="]=n:(o["$"+t+"="]=n,e.donate($,["$"+t+"="]))}(t[i]);return r},e.defn(l,"$attr",u.$attr_accessor),u.$autoload=function(e,t){var n,$=this;return(n=$.$$autoload)||(n=$.$$autoload={}),n[e]=t,r},u.$constants=function(){var e=this;return e.$$scope.constants},u["$const_defined?"]=function(e,t){var n,$=this;if(null==t&&(t=!0),((n=e["$=~"](/^[A-Z]\w*$/))===r||n.$$is_boolean&&1!=n)&&$.$raise(_.get("NameError"),"wrong constant name "+e),scopes=[$.$$scope],t||$===Opal.Object)for(var o=$.$$super;o!==Opal.BasicObject;)scopes.push(o.$$scope),o=o.$$super;for(var a=0,i=scopes.length;i>a;a++)if(scopes[a].hasOwnProperty(e))return!0;return!1},u.$const_get=function(e,t){var n,$=this;null==t&&(t=!0),((n=e["$=~"](/^[A-Z]\w*$/))===r||n.$$is_boolean&&1!=n)&&$.$raise(_.get("NameError"),"wrong constant name "+e);var o=[$.$$scope];if(t||$==Opal.Object)for(var a=$.$$super;a!==Opal.BasicObject;)o.push(a.$$scope),a=a.$$super;for(var i=0,s=o.length;s>i;i++)if(o[i].hasOwnProperty(e))return o[i][e];return $.$const_missing(e)},u.$const_missing=function(e){var t,n=this,$=r;return n.$$autoload&&(t=n.$$autoload[e])?(n.$require(t),n.$$scope.get(e)):($=n.$$name,n.$raise(_.get("NameError"),"uninitialized constant "+$+"::"+e))},u.$const_set=function(t,n){var $,o=this;(($=t["$=~"](/^[A-Z]\w*$/))===r||$.$$is_boolean&&1!=$)&&o.$raise(_.get("NameError"),"wrong constant name "+t);try{t=t.$to_str()}catch(a){o.$raise(_.get("TypeError"),"conversion with #to_str failed")}return e.casgn(o,t,n),n},u.$define_method=i=function(t,n){var $=this,o=i.$$p,a=o||r;if(i.$$p=null,n&&(a=n.$to_proc()),a===r)throw new Error("no block given");var s="$"+t;return a.$$jsid=t,a.$$s=null,a.$$def=a,$.$$proto[s]=a,e.donate($,[s]),t},u.$remove_method=function(e){var t=this,r="$"+e;return t.$$proto[r],delete t.$$proto[r],t},u.$include=function(e){var t=this;e=n.call(arguments,0);for(var r=e.length-1;r>=0;r--){var $=e[r];$!==t&&($.$append_features(t),$.$included(t))}return t},u["$include?"]=function(e){for(var t=this,r=t;r;r=r.parent)for(var n=0;n!=r.$$inc.length;n++){var $=r.$$inc[n];if(e===$)return!0}return!1},u.$instance_method=function(e){var t=this,r=t.$$proto["$"+e];return(!r||r.$$stub)&&t.$raise(_.get("NameError"),"undefined method `"+e+"' for class `"+t.$name()+"'"),_.get("UnboundMethod").$new(t,r,e)},u.$instance_methods=function(e){var t=this;null==e&&(e=!1);var r=[],n=t.$$proto;for(var $ in t.$$proto)(e||n.hasOwnProperty($))&&(e||!n[$].$$donated)&&"$"===$.charAt(0)&&r.push($.substr(1));return r},u.$included=function(){return r},u.$extended=function(){return r},u.$module_eval=s=function(){var e=this,t=s.$$p,n=t||r;s.$$p=null,n!==!1&&n!==r||e.$raise(_.get("ArgumentError"),"no block given");var $,o=n.$$s;return n.$$s=null,$=n.call(e),n.$$s=o,$},e.defn(l,"$class_eval",u.$module_eval),u.$module_exec=c=function(){var e=this,t=c.$$p,$=t||r;if(c.$$p=null,$===r)throw new Error("no block given");var o,a=$.$$s;return $.$$s=null,o=$.apply(e,n.call(arguments)),$.$$s=a,o},e.defn(l,"$class_exec",u.$module_exec),u["$method_defined?"]=function(e){var t=this,r=t.$$proto["$"+e];return!!r&&!r.$$stub},u.$module_function=function(e){var t=this;e=n.call(arguments,0);for(var r=0,$=e.length;$>r;r++){var o=e[r],a=t.$$proto["$"+o];t.constructor.prototype["$"+o]=a}return t},u.$name=function(){var t=this;if(t.$$full_name)return t.$$full_name;for(var n=[],$=t;$;){if($.$$name===r)return 0===n.length?r:n.join("::");if(n.unshift($.$$name),$=$.$$base_module,$===e.Object)break}return 0===n.length?r:t.$$full_name=n.join("::")},u.$public=function(){return r},e.defn(l,"$private",u.$public),e.defn(l,"$protected",u.$public),e.defn(l,"$nesting",u.$public),u.$private_class_method=function(e){var t=this;return t["$"+e]||r},e.defn(l,"$public_class_method",u.$private_class_method),u["$private_method_defined?"]=function(){return!1},u.$private_constant=function(){return r},e.defn(l,"$protected_method_defined?",u["$private_method_defined?"]),e.defn(l,"$public_instance_methods",u.$instance_methods),e.defn(l,"$public_method_defined?",u["$method_defined?"]),u.$remove_class_variable=function(){return r},u.$remove_const=function(e){var t=this,r=t.$$scope[e];return delete t.$$scope[e],r},u.$to_s=function(){var e=this;return e.$name().$to_s()},u.$undef_method=function(t){var r=this;return e.add_stub_for(r.$$proto,"$"+t),r},r&&"undef_method"}(t,null)},Opal.modules["corelib/class"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.klass;return e.add_stubs(["$require","$raise","$allocate"]),t.$require("corelib/module"),function(t,$super){function o(){}var a,i,s=o=$(t,$super,"Class",o),c=s.$$proto,l=s.$$scope;return e.defs(s,"$new",a=function(t){function n(){}var $=this,o=a.$$p,i=o||r;null==t&&(t=l.get("Object")),a.$$p=null,(!t.$$is_class||t.$$is_mod)&&$.$raise(l.get("TypeError"),"superclass must be a Class");var s=Opal.boot(t,n);if(s.$$name=r,s.$$parent=t,e.create_scope(t.$$scope,s),t.$inherited(s),i!==r){var c=i.$$s;i.$$s=null,i.call(s),i.$$s=c}return s}),c.$allocate=function(){var e=this,t=new e.$$alloc;return t.$$id=Opal.uid(),t},c.$inherited=function(){return r},c.$new=i=function(e){var t=this,$=i.$$p,o=$||r;e=n.call(arguments,0),i.$$p=null;var a=t.$allocate();return a.$initialize.$$p=o,a.$initialize.apply(a,e),a},c.$superclass=function(){var e=this;return e.$$super||r},r&&"superclass"}(t,null)},Opal.modules["corelib/basic_object"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.klass;return e.add_stubs(["$raise"]),function(t,$super){function o(){}var a,i,s,c,l=o=$(t,$super,"BasicObject",o),u=l.$$proto,_=l.$$scope;return e.defn(l,"$initialize",function(){return r}),e.defn(l,"$==",function(e){var t=this;return t===e}),e.defn(l,"$__id__",function(){var e=this;return e.$$id||(e.$$id=Opal.uid())}),e.defn(l,"$__send__",a=function(e,t){var $=this,o=a.$$p,i=o||r;t=n.call(arguments,1),a.$$p=null;var s=$["$"+e];return s?(i!==r&&(s.$$p=i),s.apply($,t)):(i!==r&&($.$method_missing.$$p=i),$.$method_missing.apply($,[e].concat(t)))}),e.defn(l,"$!",function(){return!1}),e.defn(l,"$eql?",u["$=="]),e.defn(l,"$equal?",u["$=="]),e.defn(l,"$instance_eval",i=function(){var e=this,t=i.$$p,n=t||r;i.$$p=null,n!==!1&&n!==r||_.get("Kernel").$raise(_.get("ArgumentError"),"no block given");var $,o=n.$$s;return n.$$s=null,$=n.call(e,e),n.$$s=o,$}),e.defn(l,"$instance_exec",s=function(e){var t=this,$=s.$$p,o=$||r;e=n.call(arguments,0),s.$$p=null,o!==!1&&o!==r||_.get("Kernel").$raise(_.get("ArgumentError"),"no block given");var a,i=o.$$s;return o.$$s=null,a=o.apply(t,e),o.$$s=i,a}),e.defn(l,"$method_missing",c=function(e,t){return c.$$p,t=n.call(arguments,1),c.$$p=null,_.get("Kernel").$raise(_.get("NoMethodError"),"undefined method `"+e+"' for BasicObject instance")}),r&&"method_missing"}(t,null)},Opal.modules["corelib/kernel"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e.nil,n=e.breaker,$=e.slice,o=e.module,a=e.gvars;return e.add_stubs(["$raise","$inspect","$==","$name","$class","$new","$respond_to?","$to_ary","$to_a","$allocate","$copy_instance_variables","$initialize_clone","$initialize_copy","$singleton_class","$initialize_dup","$for","$to_proc","$append_features","$extended","$to_i","$to_s","$to_f","$*","$===","$empty?","$ArgumentError","$nan?","$infinite?","$to_int","$>","$length","$print","$format","$puts","$each","$<=","$[]","$nil?","$is_a?","$rand","$coerce_to","$respond_to_missing?"]),function(t){var i,s,c,l,u,_,p,d,f=o(t,"Kernel"),h=f.$$proto,m=f.$$scope;h.$method_missing=i=function(e,t){var r=this;return i.$$p,t=$.call(arguments,1),i.$$p=null,r.$raise(m.get("NoMethodError"),"undefined method `"+e+"' for "+r.$inspect())},h["$=~"]=function(){return!1},h["$==="]=function(e){var t=this;return t["$=="](e)},h["$<=>"]=function(e){var t=this;return t["$=="](e)?0:r},h.$method=function(e){var t=this,r=t["$"+e];return(!r||r.$$stub)&&t.$raise(m.get("NameError"),"undefined method `"+e+"' for class `"+t.$class().$name()+"'"),m.get("Method").$new(t,r,e)},h.$methods=function(t){var n=this;null==t&&(t=!0);var $=[];for(var o in n)if("$"==o[0]&&"function"==typeof n[o]){if((0==t||t===r)&&!e.hasOwnProperty.call(n,o))continue;void 0===n[o].$$stub&&$.push(o.substr(1))}return $},h.$Array=s=function(e,t){return s.$$p,t=$.call(arguments,1),s.$$p=null,null==e||e===r?[]:e["$respond_to?"]("to_ary")?e.$to_ary():e["$respond_to?"]("to_a")?e.$to_a():[e]},h.$caller=function(){return[]},h.$class=function(){var e=this;return e.$$class},h.$copy_instance_variables=function(e){var t=this;for(var r in e)"$"!==r.charAt(0)&&(t[r]=e[r])},h.$clone=function(){var e=this,t=r;return t=e.$class().$allocate(),t.$copy_instance_variables(e),t.$initialize_clone(e),t},h.$initialize_clone=function(e){var t=this;return t.$initialize_copy(e)},h.$define_singleton_method=c=function(e){var t=this,n=c.$$p,$=n||r;c.$$p=null,$!==!1&&$!==r||t.$raise(m.get("ArgumentError"),"tried to create Proc object without a block");var o="$"+e;return $.$$jsid=e,$.$$s=null,$.$$def=$,t.$singleton_class().$$proto[o]=$,t},h.$dup=function(){var e=this,t=r;return t=e.$class().$allocate(),t.$copy_instance_variables(e),t.$initialize_dup(e),t},h.$initialize_dup=function(e){var t=this;return t.$initialize_copy(e)},h.$enum_for=l=function(e,t){var n,o,a=this,i=l.$$p,s=i||r;return t=$.call(arguments,1),null==e&&(e="each"),l.$$p=null,(n=(o=m.get("Enumerator")).$for,n.$$p=s.$to_proc(),n).apply(o,[a,e].concat(t))},e.defn(f,"$to_enum",h.$enum_for),h["$equal?"]=function(e){var t=this;return t===e},h.$extend=function(e){var t=this;e=$.call(arguments,0);for(var r=t.$singleton_class(),n=e.length-1;n>=0;n--){var o=e[n];o.$append_features(r),o.$extended(t)}return t},h.$format=function(e,t){t=$.call(arguments,1);var r=0;return e.replace(/%(\d+\$)?([-+ 0]*)(\d*|\*(\d+\$)?)(?:\.(\d*|\*(\d+\$)?))?([cspdiubBoxXfgeEG])|(%%)/g,function(e,n,$,o,a,i,s,c,l){if(l)return"%";var u,_,p,d=-1!="diubBoxX".indexOf(c),f=-1!="eEfgG".indexOf(c),h="";if(void 0===o)u=void 0;else if("*"==o.charAt(0)){var m=r++;a&&(m=parseInt(a,10)-1),u=t[m].$to_i()}else u=parseInt(o,10);if(i)if("*"==i.charAt(0)){var g=r++;s&&(g=parseInt(s,10)-1),_=t[g].$to_i()}else _=parseInt(i,10);else _=f?6:void 0;switch(n&&(r=parseInt(n,10)-1),c){case"c":p=t[r],e=p.$$is_string?p.charAt(0):String.fromCharCode(p.$to_i());break;case"s":e=t[r].$to_s(),void 0!==_&&(e=e.substr(0,_));break;case"p":e=t[r].$inspect(),void 0!==_&&(e=e.substr(0,_));break;case"d":case"i":case"u":e=t[r].$to_i().toString();break;case"b":case"B":e=t[r].$to_i().toString(2);break;case"o":e=t[r].$to_i().toString(8);break;case"x":case"X":e=t[r].$to_i().toString(16);break;case"e":case"E":e=t[r].$to_f().toExponential(_);break;case"f":e=t[r].$to_f().toFixed(_);break;case"g":case"G":e=t[r].$to_f().toPrecision(_)}r++,(d||f)&&("-"==e.charAt(0)?(h="-",e=e.substr(1)):-1!=$.indexOf("+")?h="+":-1!=$.indexOf(" ")&&(h=" ")),d&&void 0!==_&&e.length<_&&(e="0"["$*"](_-e.length)+e);var v=h.length+e.length;void 0!==u&&u>v&&(-1!=$.indexOf("-")?e+=" "["$*"](u-v):-1!=$.indexOf("0")?e="0"["$*"](u-v)+e:h=" "["$*"](u-v)+h);var b=h+e;return-1!="XEG".indexOf(c)&&(b=b.toUpperCase()),b})},h.$hash=function(){var e=this;return e.$$id},h.$initialize_copy=function(){return r},h.$inspect=function(){var e=this;return e.$to_s()},h["$instance_of?"]=function(e){var t=this;return t.$$class===e},h["$instance_variable_defined?"]=function(t){var r=this;return e.hasOwnProperty.call(r,t.substr(1))},h.$instance_variable_get=function(e){var t=this,n=t[e.substr(1)];return null==n?r:n},h.$instance_variable_set=function(e,t){var r=this;return r[e.substr(1)]=t},h.$instance_variables=function(){var e=this,t=[];for(var r in e)"$"!==r.charAt(0)&&"$$class"!==r&&"$$id"!==r&&t.push("@"+r);return t},h.$Integer=function(e,t){var n,$,o=this,a=r;return null==t&&(t=r),(n=m.get("String")["$==="](e))===r||n.$$is_boolean&&1!=n?(t!==!1&&t!==r&&o.$raise(o.$ArgumentError("base is only valid for String values")),function(){return a=e,m.get("Integer")["$==="](a)?e:m.get("Float")["$==="](a)?((n=($=e["$nan?"]())!==!1&&$!==r?$:e["$infinite?"]())===r||n.$$is_boolean&&1!=n||o.$raise(m.get("FloatDomainError"),"unable to coerce "+e+" to Integer"),e.$to_int()):m.get("NilClass")["$==="](a)?o.$raise(m.get("TypeError"),"can't convert nil into Integer"):(n=e["$respond_to?"]("to_int"))===r||n.$$is_boolean&&1!=n?(n=e["$respond_to?"]("to_i"))===r||n.$$is_boolean&&1!=n?o.$raise(m.get("TypeError"),"can't convert "+e.$class()+" into Integer"):e.$to_i():e.$to_int()}()):((n=e["$empty?"]())===r||n.$$is_boolean&&1!=n||o.$raise(m.get("ArgumentError"),"invalid value for Integer: (empty string)"),parseInt(e,(n=t)!==!1&&n!==r?n:void 0))},h.$Float=function(e){var t,n=this;return(t=m.get("String")["$==="](e))===r||t.$$is_boolean&&1!=t?(t=e["$respond_to?"]("to_f"))===r||t.$$is_boolean&&1!=t?n.$raise(m.get("TypeError"),"can't convert "+e.$class()+" into Float"):e.$to_f():parseFloat(e)},h["$is_a?"]=function(t){var r=this;return e.is_a(r,t)},e.defn(f,"$kind_of?",h["$is_a?"]),h.$lambda=u=function(){var e=u.$$p,t=e||r;return u.$$p=null,t.$$is_lambda=!0,t},h.$loop=_=function(){var e=this,t=_.$$p,$=t||r;for(_.$$p=null;;)if($()===n)return n.$v;return e},h["$nil?"]=function(){return!1},e.defn(f,"$object_id",h.$__id__),h.$printf=function(e){var t,n=this;return e=$.call(arguments,0),e.$length()["$>"](0)&&n.$print((t=n).$format.apply(t,[].concat(e))),r},h.$private_methods=function(){return[]},e.defn(f,"$private_instance_methods",h.$private_methods),h.$proc=p=function(){var e=this,t=p.$$p,n=t||r;return p.$$p=null,n!==!1&&n!==r||e.$raise(m.get("ArgumentError"),"tried to create Proc object without a block"),n.$$is_lambda=!1,n},h.$puts=function(e){var t;return null==a.stdout&&(a.stdout=r),e=$.call(arguments,0),(t=a.stdout).$puts.apply(t,[].concat(e))},h.$p=function(e){var t,n,o,i=this;return e=$.call(arguments,0),(t=(n=e).$each,t.$$p=(o=function(e){return o.$$s||this,null==a.stdout&&(a.stdout=r),null==e&&(e=r),a.stdout.$puts(e.$inspect())},o.$$s=i,o),t).call(n),e.$length()["$<="](1)?e["$[]"](0):e},h.$print=function(e){var t;return null==a.stdout&&(a.stdout=r),e=$.call(arguments,0),(t=a.stdout).$print.apply(t,[].concat(e))},h.$warn=function(e){var t,n;return null==a.VERBOSE&&(a.VERBOSE=r),null==a.stderr&&(a.stderr=r),e=$.call(arguments,0),(t=(n=a.VERBOSE["$nil?"]())!==!1&&n!==r?n:e["$empty?"]())===r||t.$$is_boolean&&1!=t?(t=a.stderr).$puts.apply(t,[].concat(e)):r},h.$raise=function(e,t){throw null==a["!"]&&(a["!"]=r),null==e&&a["!"]?e=a["!"]:e.$$is_string?e=m.get("RuntimeError").$new(e):e["$is_a?"](m.get("Exception"))||(e=e.$new(t)),a["!"]=e,e},e.defn(f,"$fail",h.$raise),h.$rand=function(e){var t=this;if(void 0===e)return Math.random();if(e.$$is_range){var r=e.$to_a();return r[t.$rand(r.length)]}return Math.floor(Math.random()*Math.abs(m.get("Opal").$coerce_to(e,m.get("Integer"),"to_int")))},e.defn(f,"$srand",h.$rand),h["$respond_to?"]=function(e,t){var n,$=this;if(null==t&&(t=!1),(n=$["$respond_to_missing?"](e))!==r&&(!n.$$is_boolean||1==n))return!0;var o=$["$"+e];return"function"!=typeof o||o.$$stub?!1:!0},e.defn(f,"$send",h.$__send__),e.defn(f,"$public_send",h.$__send__),h.$singleton_class=function(){var t=this;return e.get_singleton_class(t)},e.defn(f,"$sprintf",h.$format),h.$String=function(e){return String(e)},h.$tap=d=function(){var t=this,$=d.$$p,o=$||r;return d.$$p=null,e.$yield1(o,t)===n?n.$v:t},h.$to_proc=function(){var e=this;return e},h.$to_s=function(){var e=this;return"#<"+e.$class().$name()+":"+e.$$id+">"},h.$freeze=function(){var e=this;return e.___frozen___=!0,e},h["$frozen?"]=function(){var e,t=this;return null==t.___frozen___&&(t.___frozen___=r),(e=t.___frozen___)!==!1&&e!==r?e:!1},h["$respond_to_missing?"]=function(){return!1},h.$require=function(t){return e.require(e.normalize_loadable_path(t))},h.$require_tree=function(t){var n,$=Object.keys(e.modules);t=t.replace(/\/?$/,"/");for(var o=0;o<$.length;o++)n=$[o],n["$start_with?"](t)&&e.require(n);return r},h.$load=function(t){return e.load(e.normalize_loadable_path(t))},e.donate(f,["$method_missing","$=~","$===","$<=>","$method","$methods","$Array","$caller","$class","$copy_instance_variables","$clone","$initialize_clone","$define_singleton_method","$dup","$initialize_dup","$enum_for","$to_enum","$equal?","$extend","$format","$hash","$initialize_copy","$inspect","$instance_of?","$instance_variable_defined?","$instance_variable_get","$instance_variable_set","$instance_variables","$Integer","$Float","$is_a?","$kind_of?","$lambda","$loop","$nil?","$object_id","$printf","$private_methods","$private_instance_methods","$proc","$puts","$p","$print","$warn","$raise","$fail","$rand","$srand","$respond_to?","$send","$public_send","$singleton_class","$sprintf","$String","$tap","$to_proc","$to_s","$freeze","$frozen?","$respond_to_missing?","$require","$require_tree","$load"])}(t)},Opal.modules["corelib/nil_class"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e,n=e.nil,$=(e.breaker,e.slice,e.klass);return e.add_stubs(["$raise"]),function(t,$super){function r(){}var o=r=$(t,$super,"NilClass",r),a=o.$$proto,i=o.$$scope;return a["$!"]=function(){return!0},a["$&"]=function(){return!1},a["$|"]=function(e){return e!==!1&&e!==n},a["$^"]=function(e){return e!==!1&&e!==n},a["$=="]=function(e){return e===n},a.$dup=function(){var e=this;return e.$raise(i.get("TypeError"))},a.$inspect=function(){return"nil"},a["$nil?"]=function(){return!0},a.$singleton_class=function(){return i.get("NilClass")},a.$to_a=function(){return[]},a.$to_h=function(){return e.hash()},a.$to_i=function(){return 0},e.defn(o,"$to_f",a.$to_i),a.$to_s=function(){return""},a.$object_id=function(){return i.get("NilClass").$$id||(i.get("NilClass").$$id=e.uid())},e.defn(o,"$hash",a.$object_id)}(t,null),e.cdecl(r,"NIL",n)},Opal.modules["corelib/boolean"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e,n=e.nil,$=(e.breaker,e.slice,e.klass);return e.add_stubs(["$undef_method"]),function(t,$super){function r(){}var o=r=$(t,$super,"Boolean",r),a=o.$$proto;return o.$$scope,a.$$is_boolean=!0,function(e){return e.$$scope,e.$$proto,e.$undef_method("new")}(o.$singleton_class()),a["$!"]=function(){var e=this;return 1!=e},a["$&"]=function(e){var t=this;return 1==t?e!==!1&&e!==n:!1},a["$|"]=function(e){var t=this;return 1==t?!0:e!==!1&&e!==n},a["$^"]=function(e){var t=this;return 1==t?e===!1||e===n:e!==!1&&e!==n},a["$=="]=function(e){var t=this;return 1==t===e.valueOf()},e.defn(o,"$equal?",a["$=="]),e.defn(o,"$singleton_class",a.$class),a.$to_s=function(){var e=this;return 1==e?"true":"false"},n&&"to_s"}(t,null),e.cdecl(r,"TrueClass",r.get("Boolean")),e.cdecl(r,"FalseClass",r.get("Boolean")),e.cdecl(r,"TRUE",!0),e.cdecl(r,"FALSE",!1)},Opal.modules["corelib/error"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e,n=e.nil,$=(e.breaker,e.slice,e.klass),o=e.module;return e.add_stubs(["$attr_reader","$name","$class"]),function(t,$super){function r(){}var o=r=$(t,$super,"Exception",r),a=o.$$proto;return o.$$scope,a.message=n,o.$attr_reader("message"),e.defs(o,"$new",function(e){var t=this;null==e&&(e="");var r=new Error(e);return r.$$class=t,r.name=t.$$name,r}),a.$backtrace=function(){var e=this,t=e.stack;return"string"==typeof t?t.split("\n").slice(0,15):t?t.slice(0,15):[]},a.$inspect=function(){var e=this;return"#<"+e.$class().$name()+": '"+e.message+"'>"},e.defn(o,"$to_s",a.$message)}(t,null),function(e,$super){function t(){}var r=t=$(e,$super,"ScriptError",t);return r.$$proto,r.$$scope,n}(t,r.get("Exception")),function(e,$super){function t(){}var r=t=$(e,$super,"SyntaxError",t);
return r.$$proto,r.$$scope,n}(t,r.get("ScriptError")),function(e,$super){function t(){}var r=t=$(e,$super,"LoadError",t);return r.$$proto,r.$$scope,n}(t,r.get("ScriptError")),function(e,$super){function t(){}var r=t=$(e,$super,"NotImplementedError",t);return r.$$proto,r.$$scope,n}(t,r.get("ScriptError")),function(e,$super){function t(){}var r=t=$(e,$super,"SystemExit",t);return r.$$proto,r.$$scope,n}(t,r.get("Exception")),function(e,$super){function t(){}var r=t=$(e,$super,"StandardError",t);return r.$$proto,r.$$scope,n}(t,r.get("Exception")),function(e,$super){function t(){}var r=t=$(e,$super,"NameError",t);return r.$$proto,r.$$scope,n}(t,r.get("StandardError")),function(e,$super){function t(){}var r=t=$(e,$super,"NoMethodError",t);return r.$$proto,r.$$scope,n}(t,r.get("NameError")),function(e,$super){function t(){}var r=t=$(e,$super,"RuntimeError",t);return r.$$proto,r.$$scope,n}(t,r.get("StandardError")),function(e,$super){function t(){}var r=t=$(e,$super,"LocalJumpError",t);return r.$$proto,r.$$scope,n}(t,r.get("StandardError")),function(e,$super){function t(){}var r=t=$(e,$super,"TypeError",t);return r.$$proto,r.$$scope,n}(t,r.get("StandardError")),function(e,$super){function t(){}var r=t=$(e,$super,"ArgumentError",t);return r.$$proto,r.$$scope,n}(t,r.get("StandardError")),function(e,$super){function t(){}var r=t=$(e,$super,"IndexError",t);return r.$$proto,r.$$scope,n}(t,r.get("StandardError")),function(e,$super){function t(){}var r=t=$(e,$super,"StopIteration",t);return r.$$proto,r.$$scope,n}(t,r.get("IndexError")),function(e,$super){function t(){}var r=t=$(e,$super,"KeyError",t);return r.$$proto,r.$$scope,n}(t,r.get("IndexError")),function(e,$super){function t(){}var r=t=$(e,$super,"RangeError",t);return r.$$proto,r.$$scope,n}(t,r.get("StandardError")),function(e,$super){function t(){}var r=t=$(e,$super,"FloatDomainError",t);return r.$$proto,r.$$scope,n}(t,r.get("RangeError")),function(e,$super){function t(){}var r=t=$(e,$super,"IOError",t);return r.$$proto,r.$$scope,n}(t,r.get("StandardError")),function(e,$super){function t(){}var r=t=$(e,$super,"SystemCallError",t);return r.$$proto,r.$$scope,n}(t,r.get("StandardError")),function(t){var r=o(t,"Errno"),a=(r.$$proto,r.$$scope);!function(t,$super){function r(){}var o,a=r=$(t,$super,"EINVAL",r);return a.$$proto,a.$$scope,e.defs(a,"$new",o=function(){var t=this;return o.$$p,o.$$p=null,e.find_super_dispatcher(t,"new",o,null,r).apply(t,["Invalid argument"])}),n&&"new"}(r,a.get("SystemCallError"))}(t)},Opal.modules["corelib/regexp"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.klass,o=e.gvars;return e.add_stubs(["$respond_to?","$to_str","$to_s","$coerce_to","$new","$raise","$class","$call"]),function(t,$super){function a(){}var i,s=a=$(t,$super,"Regexp",a),c=s.$$proto,l=s.$$scope;return c.$$is_regexp=!0,function(e){return e.$$scope,e.$$proto,e.$$proto.$escape=function(e){return e.replace(/([-[\]/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")},e.$$proto.$quote=e.$$proto.$escape,e.$$proto.$union=function(e){return e=n.call(arguments,0),new RegExp(e.join(""))},e.$$proto.$new=function(e,t){return new RegExp(e,t)},r&&"new"}(s.$singleton_class()),c["$=="]=function(e){var t=this;return e.constructor==RegExp&&t.toString()===e.toString()},c["$==="]=function(e){var t=this;return!e.$$is_string&&e["$respond_to?"]("to_str")&&(e=e.$to_str()),e.$$is_string?t.test(e):!1},c["$=~"]=function(e){var t,n=this;if((t=e===r)!==r&&(!t.$$is_boolean||1==t))return o["~"]=o["`"]=o["'"]=r,r;e=l.get("Opal").$coerce_to(e,l.get("String"),"to_str").$to_s();var $=n;$.global?$.lastIndex=0:$=new RegExp($.source,"g"+($.multiline?"m":"")+($.ignoreCase?"i":""));var a=$.exec(e);return o["~"]=a?l.get("MatchData").$new($,a):o["`"]=o["'"]=r,a?a.index:r},e.defn(s,"$eql?",c["$=="]),c.$inspect=function(){var e=this;return e.toString()},c.$match=i=function(e){var t,n=this,$=i.$$p,a=$||r;if(i.$$p=null,(t=e===r)!==r&&(!t.$$is_boolean||1==t))return o["~"]=o["`"]=o["'"]=r,r;(t=null==e.$$is_string)===r||t.$$is_boolean&&1!=t||(((t=e["$respond_to?"]("to_str"))===r||t.$$is_boolean&&1!=t)&&n.$raise(l.get("TypeError"),"no implicit conversion of "+e.$class()+" into String"),e=e.$to_str());var s=n;s.global?s.lastIndex=0:s=new RegExp(s.source,"g"+(s.multiline?"m":"")+(s.ignoreCase?"i":""));var c=s.exec(e);return c?(c=o["~"]=l.get("MatchData").$new(s,c),a===r?c:a.$call(c)):o["~"]=o["`"]=o["'"]=r},c.$source=function(){var e=this;return e.source},e.defn(s,"$to_s",c.$source)}(t,null)},Opal.modules["corelib/comparable"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module);return e.add_stubs(["$===","$>","$<","$equal?","$<=>","$==","$normalize","$raise","$class","$>=","$<="]),function(t){var $=n(t,"Comparable"),o=$.$$proto,a=$.$$scope;e.defs($,"$normalize",function(e){var t;return(t=a.get("Integer")["$==="](e))===r||t.$$is_boolean&&1!=t?e["$>"](0)?1:e["$<"](0)?-1:0:e}),o["$=="]=function(t){var n,$=this,o=r;try{return(n=$["$equal?"](t))===r||n.$$is_boolean&&1!=n?(n=o=$["$<=>"](t))===r||n.$$is_boolean&&1!=n?!1:a.get("Comparable").$normalize(o)["$=="](0):!0}catch(i){if(e.$rescue(i,[a.get("StandardError")]))return!1;throw i}},o["$>"]=function(e){var t,n=this,$=r;return((t=$=n["$<=>"](e))===r||t.$$is_boolean&&1!=t)&&n.$raise(a.get("ArgumentError"),"comparison of "+n.$class()+" with "+e.$class()+" failed"),a.get("Comparable").$normalize($)["$>"](0)},o["$>="]=function(e){var t,n=this,$=r;return((t=$=n["$<=>"](e))===r||t.$$is_boolean&&1!=t)&&n.$raise(a.get("ArgumentError"),"comparison of "+n.$class()+" with "+e.$class()+" failed"),a.get("Comparable").$normalize($)["$>="](0)},o["$<"]=function(e){var t,n=this,$=r;return((t=$=n["$<=>"](e))===r||t.$$is_boolean&&1!=t)&&n.$raise(a.get("ArgumentError"),"comparison of "+n.$class()+" with "+e.$class()+" failed"),a.get("Comparable").$normalize($)["$<"](0)},o["$<="]=function(e){var t,n=this,$=r;return((t=$=n["$<=>"](e))===r||t.$$is_boolean&&1!=t)&&n.$raise(a.get("ArgumentError"),"comparison of "+n.$class()+" with "+e.$class()+" failed"),a.get("Comparable").$normalize($)["$<="](0)},o["$between?"]=function(e,t){var r=this;return r["$<"](e)?!1:r["$>"](t)?!1:!0},e.donate($,["$==","$>","$>=","$<","$<=","$between?"])}(t)},Opal.modules["corelib/enumerable"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e.nil,n=e.breaker,$=e.slice,o=e.module;return e.add_stubs(["$raise","$enum_for","$flatten","$map","$==","$destructure","$nil?","$coerce_to!","$coerce_to","$===","$new","$<<","$[]","$[]=","$inspect","$__send__","$yield","$enumerator_size","$respond_to?","$size","$private","$compare","$<=>","$dup","$sort","$call","$first","$zip","$to_a"]),function(t){var a,i,s,c,l,u,_,p,d,f,h,m,g,v,b,y,x,k,w,S,E,R,O,M,q,A,C,T,I,z,j,N,F,B,P,D=o(t,"Enumerable"),H=D.$$proto,L=D.$$scope;H["$all?"]=a=function(){var t,$=this,o=a.$$p,i=o||r;a.$$p=null;var s=!0;return $.$each.$$p=i!==r?function(){var $=e.$yieldX(i,arguments);return $===n?(s=n.$v,n):(t=$)===r||t.$$is_boolean&&0==t?(s=!1,n):void 0}:function(e){return 1==arguments.length&&((t=e)===r||t.$$is_boolean&&0==t)?(s=!1,n):void 0},$.$each(),s},H["$any?"]=i=function(){var t,$=this,o=i.$$p,a=o||r;i.$$p=null;var s=!1;return $.$each.$$p=a!==r?function(){var $=e.$yieldX(a,arguments);return $===n?(s=n.$v,n):(t=$)===r||t.$$is_boolean&&1!=t?void 0:(s=!0,n)}:function(e){return 1==arguments.length&&((t=e)===r||t.$$is_boolean&&1!=t)?void 0:(s=!0,n)},$.$each(),s},H.$chunk=s=function(){var e=this;return s.$$p,s.$$p=null,e.$raise(L.get("NotImplementedError"))},H.$collect=c=function(){var t=this,$=c.$$p,o=$||r;if(c.$$p=null,o===r)return t.$enum_for("collect");var a=[];return t.$each.$$p=function(){var t=e.$yieldX(o,arguments);return t===n?(a=n.$v,n):(a.push(t),void 0)},t.$each(),a},H.$collect_concat=l=function(){var t,$,o,a=this,i=l.$$p,s=i||r;return l.$$p=null,s===r?a.$enum_for("collect_concat"):(t=($=a).$map,t.$$p=(o=function(t){var $;return o.$$s||this,null==t&&(t=r),$=e.$yield1(s,t),$===n?$:$},o.$$s=a,o),t).call($).$flatten(1)},H.$count=u=function(t){var $,o=this,a=u.$$p,i=a||r;u.$$p=null;var s=0;return null!=t?i=function(){return L.get("Opal").$destructure(arguments)["$=="](t)}:i===r&&(i=function(){return!0}),o.$each.$$p=function(){var t=e.$yieldX(i,arguments);return t===n?(s=n.$v,n):(($=t)===r||$.$$is_boolean&&1!=$||s++,void 0)},o.$each(),s},H.$cycle=_=function(t){var $,o=this,a=_.$$p,i=a||r;if(null==t&&(t=r),_.$$p=null,i===!1||i===r)return o.$enum_for("cycle",t);if(($=t["$nil?"]())===r||$.$$is_boolean&&1!=$){if(t=L.get("Opal")["$coerce_to!"](t,L.get("Integer"),"to_int"),($=0>=t)!==r&&(!$.$$is_boolean||1==$))return r}else;var s,c=[];if(o.$each.$$p=function(){var t=L.get("Opal").$destructure(arguments),r=e.$yield1(i,t);return r===n?(s=n.$v,n):(c.push(t),void 0)},o.$each(),void 0!==s)return s;if(0===c.length)return r;if(($=t["$nil?"]())===r||$.$$is_boolean&&1!=$)for(;t>1;){for(var l=0,u=c.length;u>l;l++){var p=e.$yield1(i,c[l]);if(p===n)return n.$v}t--}else for(;;)for(var l=0,u=c.length;u>l;l++){var p=e.$yield1(i,c[l]);if(p===n)return n.$v}},H.$detect=p=function(t){var $,o=this,a=p.$$p,i=a||r;if(p.$$p=null,i===r)return o.$enum_for("detect",t);var s=void 0;return o.$each.$$p=function(){var t=L.get("Opal").$destructure(arguments),o=e.$yield1(i,t);return o===n?(s=n.$v,n):($=o)===r||$.$$is_boolean&&1!=$?void 0:(s=t,n)},o.$each(),void 0===s&&void 0!==t&&(s="function"==typeof t?t():t),void 0===s?r:s},H.$drop=function(e){var t,n=this;e=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int"),(t=0>e)===r||t.$$is_boolean&&1!=t||n.$raise(L.get("ArgumentError"),"attempt to drop negative size");var $=[],o=0;return n.$each.$$p=function(){o>=e&&$.push(L.get("Opal").$destructure(arguments)),o++},n.$each(),$},H.$drop_while=d=function(){var t,$=this,o=d.$$p,a=o||r;if(d.$$p=null,a===r)return $.$enum_for("drop_while");var i=[],s=!0;return $.$each.$$p=function(){var $=L.get("Opal").$destructure(arguments);if(s){var o=e.$yield1(a,$);if(o===n)return i=n.$v,n;((t=o)===r||t.$$is_boolean&&0==t)&&(s=!1,i.push($))}else i.push($)},$.$each(),i},H.$each_cons=f=function(){var e=this;return f.$$p,f.$$p=null,e.$raise(L.get("NotImplementedError"))},H.$each_entry=h=function(){var e=this;return h.$$p,h.$$p=null,e.$raise(L.get("NotImplementedError"))},H.$each_slice=m=function(t){var $,o=this,a=m.$$p,i=a||r;if(m.$$p=null,t=L.get("Opal").$coerce_to(t,L.get("Integer"),"to_int"),($=0>=t)===r||$.$$is_boolean&&1!=$||o.$raise(L.get("ArgumentError"),"invalid slice size"),i===r)return o.$enum_for("each_slice",t);var s,c=[];return o.$each.$$p=function(){var r=L.get("Opal").$destructure(arguments);if(c.push(r),c.length===t){if(e.$yield1(i,c)===n)return s=n.$v,n;c=[]}},o.$each(),void 0!==s?s:c.length>0&&e.$yield1(i,c)===n?n.$v:r},H.$each_with_index=g=function(e){var t,o=this,a=g.$$p,i=a||r;if(e=$.call(arguments,0),g.$$p=null,i===r)return(t=o).$enum_for.apply(t,["each_with_index"].concat(e));var s,c=0;return o.$each.$$p=function(){var e=L.get("Opal").$destructure(arguments),t=i(e,c);return t===n?(s=n.$v,n):(c++,void 0)},o.$each.apply(o,e),void 0!==s?s:o},H.$each_with_object=v=function(e){var t=this,$=v.$$p,o=$||r;if(v.$$p=null,o===r)return t.$enum_for("each_with_object",e);var a;return t.$each.$$p=function(){var t=L.get("Opal").$destructure(arguments),r=o(t,e);return r===n?(a=n.$v,n):void 0},t.$each(),void 0!==a?a:e},H.$entries=function(e){var t=this;e=$.call(arguments,0);var r=[];return t.$each.$$p=function(){r.push(L.get("Opal").$destructure(arguments))},t.$each.apply(t,e),r},e.defn(D,"$find",H.$detect),H.$find_all=b=function(){var t,$=this,o=b.$$p,a=o||r;if(b.$$p=null,a===r)return $.$enum_for("find_all");var i=[];return $.$each.$$p=function(){var $=L.get("Opal").$destructure(arguments),o=e.$yield1(a,$);return o===n?(i=n.$v,n):((t=o)===r||t.$$is_boolean&&1!=t||i.push($),void 0)},$.$each(),i},H.$find_index=y=function(t){var $,o=this,a=y.$$p,i=a||r;if(y.$$p=null,($=void 0===t&&i===r)!==r&&(!$.$$is_boolean||1==$))return o.$enum_for("find_index");var s=r,c=0;return null!=t?o.$each.$$p=function(){var e=L.get("Opal").$destructure(arguments);return e["$=="](t)?(s=c,n):(c+=1,void 0)}:i!==r&&(o.$each.$$p=function(){var t=e.$yieldX(i,arguments);return t===n?(s=n.$v,n):($=t)===r||$.$$is_boolean&&1!=$?(c+=1,void 0):(s=c,n)}),o.$each(),s},H.$first=function(e){var t,$=this,o=r;if((t=void 0===e)===r||t.$$is_boolean&&1!=t){if(o=[],e=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int"),(t=0>e)===r||t.$$is_boolean&&1!=t||$.$raise(L.get("ArgumentError"),"attempt to take negative size"),(t=0==e)!==r&&(!t.$$is_boolean||1==t))return[];var a=0,e=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int");$.$each.$$p=function(){return o.push(L.get("Opal").$destructure(arguments)),e<=++a?n:void 0},$.$each()}else o=r,$.$each.$$p=function(){return o=L.get("Opal").$destructure(arguments),n},$.$each();return o},e.defn(D,"$flat_map",H.$collect_concat),H.$grep=x=function(t){var $,o=this,a=x.$$p,i=a||r;x.$$p=null;var s=[];return o.$each.$$p=i!==r?function(){var o=L.get("Opal").$destructure(arguments),a=t["$==="](o);if(($=a)!==r&&(!$.$$is_boolean||1==$)){if(a=e.$yield1(i,o),a===n)return s=n.$v,n;s.push(a)}}:function(){var e=L.get("Opal").$destructure(arguments),n=t["$==="](e);($=n)===r||$.$$is_boolean&&1!=$||s.push(e)},o.$each(),s},H.$group_by=k=function(){var t,$,o,a=this,i=k.$$p,s=i||r,c=r;if(k.$$p=null,s===r)return a.$enum_for("group_by");c=L.get("Hash").$new();var l;return a.$each.$$p=function(){var a=L.get("Opal").$destructure(arguments),i=e.$yield1(s,a);return i===n?(l=n.$v,n):(t=i,$=c,(o=$["$[]"](t))!==!1&&o!==r?o:$["$[]="](t,[])["$<<"](a),void 0)},a.$each(),void 0!==l?l:c},H["$include?"]=function(e){var t=this,r=!1;return t.$each.$$p=function(){var t=L.get("Opal").$destructure(arguments);return t["$=="](e)?(r=!0,n):void 0},t.$each(),r},H.$inject=w=function(t,$){var o=this,a=w.$$p,i=a||r;w.$$p=null;var s=t;return i!==r&&void 0===$?o.$each.$$p=function(){var t=L.get("Opal").$destructure(arguments);return void 0===s?(s=t,void 0):(t=e.$yieldX(i,[s,t]),t===n?(s=n.$v,n):(s=t,void 0))}:(void 0===$&&(L.get("Symbol")["$==="](t)||o.$raise(L.get("TypeError"),""+t.$inspect()+" is not a Symbol"),$=t,s=void 0),o.$each.$$p=function(){var e=L.get("Opal").$destructure(arguments);return void 0===s?(s=e,void 0):(s=s.$__send__($,e),void 0)}),o.$each(),void 0==s?r:s},H.$lazy=function(){var e,t,n,o=this;return(e=(t=L.get("Enumerator").$$scope.get("Lazy")).$new,e.$$p=(n=function(e,t){var o;return n.$$s||this,null==e&&(e=r),t=$.call(arguments,1),(o=e).$yield.apply(o,[].concat(t))},n.$$s=o,n),e).call(t,o,o.$enumerator_size())},H.$enumerator_size=function(){var e,t=this;return(e=t["$respond_to?"]("size"))===r||e.$$is_boolean&&1!=e?r:t.$size()},D.$private("enumerator_size"),e.defn(D,"$map",H.$collect),H.$max=S=function(){var e=this,t=S.$$p,$=t||r;S.$$p=null;var o;return e.$each.$$p=$!==r?function(){var t=L.get("Opal").$destructure(arguments);if(void 0===o)return o=t,void 0;var a=$(t,o);return a===n?(o=n.$v,n):(a===r&&e.$raise(L.get("ArgumentError"),"comparison failed"),a>0&&(o=t),void 0)}:function(){var e=L.get("Opal").$destructure(arguments);return void 0===o?(o=e,void 0):(L.get("Opal").$compare(e,o)>0&&(o=e),void 0)},e.$each(),void 0===o?r:o},H.$max_by=E=function(){var t=this,$=E.$$p,o=$||r;if(E.$$p=null,o===!1||o===r)return t.$enum_for("max_by");var a,i;return t.$each.$$p=function(){var t=L.get("Opal").$destructure(arguments),r=e.$yield1(o,t);return void 0===a?(a=t,i=r,void 0):r===n?(a=n.$v,n):(r["$<=>"](i)>0&&(a=t,i=r),void 0)},t.$each(),void 0===a?r:a},e.defn(D,"$member?",H["$include?"]),H.$min=R=function(){var e=this,t=R.$$p,$=t||r;R.$$p=null;var o;return e.$each.$$p=$!==r?function(){var t=L.get("Opal").$destructure(arguments);if(void 0===o)return o=t,void 0;var a=$(t,o);return a===n?(o=n.$v,n):(a===r&&e.$raise(L.get("ArgumentError"),"comparison failed"),0>a&&(o=t),void 0)}:function(){var e=L.get("Opal").$destructure(arguments);return void 0===o?(o=e,void 0):(L.get("Opal").$compare(e,o)<0&&(o=e),void 0)},e.$each(),void 0===o?r:o},H.$min_by=O=function(){var t=this,$=O.$$p,o=$||r;if(O.$$p=null,o===!1||o===r)return t.$enum_for("min_by");var a,i;return t.$each.$$p=function(){var t=L.get("Opal").$destructure(arguments),r=e.$yield1(o,t);return void 0===a?(a=t,i=r,void 0):r===n?(a=n.$v,n):(r["$<=>"](i)<0&&(a=t,i=r),void 0)},t.$each(),void 0===a?r:a},H.$minmax=M=function(){var e=this;return M.$$p,M.$$p=null,e.$raise(L.get("NotImplementedError"))},H.$minmax_by=q=function(){var e=this;return q.$$p,q.$$p=null,e.$raise(L.get("NotImplementedError"))},H["$none?"]=A=function(){var t,$=this,o=A.$$p,a=o||r;A.$$p=null;var i=!0;return $.$each.$$p=a!==r?function(){var $=e.$yieldX(a,arguments);return $===n?(i=n.$v,n):(t=$)===r||t.$$is_boolean&&1!=t?void 0:(i=!1,n)}:function(){var e=L.get("Opal").$destructure(arguments);return(t=e)===r||t.$$is_boolean&&1!=t?void 0:(i=!1,n)},$.$each(),i},H["$one?"]=C=function(){var t,$=this,o=C.$$p,a=o||r;C.$$p=null;var i=!1;return $.$each.$$p=a!==r?function(){var $=e.$yieldX(a,arguments);if($===n)return i=n.$v,n;if((t=$)!==r&&(!t.$$is_boolean||1==t)){if(i===!0)return i=!1,n;i=!0}}:function(){var e=L.get("Opal").$destructure(arguments);if((t=e)!==r&&(!t.$$is_boolean||1==t)){if(i===!0)return i=!1,n;i=!0}},$.$each(),i},H.$partition=T=function(){var t,$=this,o=T.$$p,a=o||r;if(T.$$p=null,a===r)return $.$enum_for("partition");var i=[],s=[];return $.$each.$$p=function(){var $=L.get("Opal").$destructure(arguments),o=e.$yield1(a,$);return o===n?(result=n.$v,n):((t=o)===r||t.$$is_boolean&&1!=t?s.push($):i.push($),void 0)},$.$each(),[i,s]},e.defn(D,"$reduce",H.$inject),H.$reject=I=function(){var t,$=this,o=I.$$p,a=o||r;if(I.$$p=null,a===r)return $.$enum_for("reject");var i=[];return $.$each.$$p=function(){var $=L.get("Opal").$destructure(arguments),o=e.$yield1(a,$);return o===n?(i=n.$v,n):(((t=o)===r||t.$$is_boolean&&0==t)&&i.push($),void 0)},$.$each(),i},H.$reverse_each=z=function(){var t=this,n=z.$$p,$=n||r;if(z.$$p=null,$===r)return t.$enum_for("reverse_each");var o=[];t.$each.$$p=function(){o.push(arguments)},t.$each();for(var a=o.length-1;a>=0;a--)e.$yieldX($,o[a]);return o},e.defn(D,"$select",H.$find_all),H.$slice_before=j=function(t){var n,$,o,a=this,i=j.$$p,s=i||r;return j.$$p=null,(n=void 0===t&&s===r||arguments.length>1)===r||n.$$is_boolean&&1!=n||a.$raise(L.get("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),(n=($=L.get("Enumerator")).$new,n.$$p=(o=function(n){var $,a=o.$$s||this;null==n&&(n=r);var i=[];a.$each.$$p=s!==r?void 0===t?function(){var t=L.get("Opal").$destructure(arguments),o=e.$yield1(s,t);($=o)!==r&&(!$.$$is_boolean||1==$)&&i.length>0&&(n["$<<"](i),i=[]),i.push(t)}:function(){var e=L.get("Opal").$destructure(arguments),o=s(e,t.$dup());($=o)!==r&&(!$.$$is_boolean||1==$)&&i.length>0&&(n["$<<"](i),i=[]),i.push(e)}:function(){var e=L.get("Opal").$destructure(arguments),o=t["$==="](e);($=o)!==r&&(!$.$$is_boolean||1==$)&&i.length>0&&(n["$<<"](i),i=[]),i.push(e)},a.$each(),i.length>0&&n["$<<"](i)},o.$$s=a,o),n).call($)},H.$sort=N=function(){var e=this;return N.$$p,N.$$p=null,e.$raise(L.get("NotImplementedError"))},H.$sort_by=F=function(){var e,t,n,$,o,a,i,s,c,l=this,u=F.$$p,_=u||r;return F.$$p=null,_===r?l.$enum_for("sort_by"):(e=(t=($=(o=(i=(s=l).$map,i.$$p=(c=function(){return c.$$s||this,arg=L.get("Opal").$destructure(arguments),[_.$call(arg),arg]},c.$$s=l,c),i).call(s)).$sort,$.$$p=(a=function(e,t){return a.$$s||this,null==e&&(e=r),null==t&&(t=r),e["$[]"](0)["$<=>"](t["$[]"](0))},a.$$s=l,a),$).call(o)).$map,e.$$p=(n=function(e){return n.$$s||this,null==e&&(e=r),e[1]},n.$$s=l,n),e).call(t)},H.$take=function(e){var t=this;return t.$first(e)},H.$take_while=B=function(){var t,$=this,o=B.$$p,a=o||r;if(B.$$p=null,a===!1||a===r)return $.$enum_for("take_while");var i=[];return $.$each.$$p=function(){var $=L.get("Opal").$destructure(arguments),o=e.$yield1(a,$);return o===n?(i=n.$v,n):(t=o)===r||t.$$is_boolean&&0==t?n:(i.push($),void 0)},$.$each(),i},e.defn(D,"$to_a",H.$entries),H.$zip=P=function(e){var t,r=this;return P.$$p,e=$.call(arguments,0),P.$$p=null,(t=r.$to_a()).$zip.apply(t,[].concat(e))},e.donate(D,["$all?","$any?","$chunk","$collect","$collect_concat","$count","$cycle","$detect","$drop","$drop_while","$each_cons","$each_entry","$each_slice","$each_with_index","$each_with_object","$entries","$find","$find_all","$find_index","$first","$flat_map","$grep","$group_by","$include?","$inject","$lazy","$enumerator_size","$map","$max","$max_by","$member?","$min","$min_by","$minmax","$minmax_by","$none?","$one?","$partition","$reduce","$reject","$reverse_each","$select","$slice_before","$sort","$sort_by","$take","$take_while","$to_a","$zip"])}(t)},Opal.modules["corelib/enumerator"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e.nil,n=e.breaker,$=e.slice,o=e.klass;return e.add_stubs(["$require","$include","$allocate","$new","$to_proc","$coerce_to","$nil?","$empty?","$+","$class","$__send__","$===","$call","$enum_for","$destructure","$name","$inspect","$[]","$raise","$yield","$each","$enumerator_size","$respond_to?","$try_convert","$<","$for"]),t.$require("corelib/enumerable"),function(t,$super){function a(){}var i,s,c,l,u=a=o(t,$super,"Enumerator",a),_=u.$$proto,p=u.$$scope;return _.size=_.args=_.object=_.method=r,u.$include(p.get("Enumerable")),e.defs(u,"$for",i=function(e,t,n){var o=this,a=i.$$p,s=a||r;n=$.call(arguments,2),null==t&&(t="each"),i.$$p=null;var c=o.$allocate();return c.object=e,c.size=s,c.method=t,c.args=n,c}),_.$initialize=s=function(){var e,t,n=this,o=s.$$p,a=o||r;return s.$$p=null,a!==!1&&a!==r?(n.object=(e=(t=p.get("Generator")).$new,e.$$p=a.$to_proc(),e).call(t),n.method="each",n.args=[],n.size=arguments[0]||r,(e=n.size)===r||e.$$is_boolean&&1!=e?r:n.size=p.get("Opal").$coerce_to(n.size,p.get("Integer"),"to_int")):(n.object=arguments[0],n.method=arguments[1]||"each",n.args=$.call(arguments,2),n.size=r)},_.$each=c=function(e){var t,n,o,a=this,i=c.$$p,s=i||r;return e=$.call(arguments,0),c.$$p=null,n=s["$nil?"](),(t=n!==!1&&n!==r?e["$empty?"]():n)===r||t.$$is_boolean&&1!=t?(e=a.args["$+"](e),(t=s["$nil?"]())===r||t.$$is_boolean&&1!=t?(n=(o=a.object).$__send__,n.$$p=s.$to_proc(),n).apply(o,[a.method].concat(e)):(t=a.$class()).$new.apply(t,[a.object,a.method].concat(e))):a},_.$size=function(){var e,t=this;return(e=p.get("Proc")["$==="](t.size))===r||e.$$is_boolean&&1!=e?t.size:(e=t.size).$call.apply(e,[].concat(t.args))},_.$with_index=l=function(e){var t=this,$=l.$$p,o=$||r;if(null==e&&(e=0),l.$$p=null,e=e!==!1&&e!==r?p.get("Opal").$coerce_to(e,p.get("Integer"),"to_int"):0,o===!1||o===r)return t.$enum_for("with_index",e);var a;return t.$each.$$p=function(){var e=p.get("Opal").$destructure(arguments),t=o(e,index);return t===n?(a=n.$v,n):(index++,void 0)},t.$each(),void 0!==a?a:void 0},e.defn(u,"$with_object",_.$each_with_object),_.$inspect=function(){var e,t=this,n=r;return n="#<"+t.$class().$name()+": "+t.object.$inspect()+":"+t.method,((e=t.args["$empty?"]())===r||e.$$is_boolean&&1!=e)&&(n=n["$+"]("("+t.args.$inspect()["$[]"](p.get("Range").$new(1,-2))+")")),n["$+"](">")},function(t,$super){function a(){}var i,s,c=a=o(t,$super,"Generator",a),l=c.$$proto,u=c.$$scope;return l.block=r,c.$include(u.get("Enumerable")),l.$initialize=i=function(){var e=this,t=i.$$p,n=t||r;return i.$$p=null,n!==!1&&n!==r||e.$raise(u.get("LocalJumpError"),"no block given"),e.block=n},l.$each=s=function(t){var o,a,i=this,c=s.$$p,l=c||r,_=r;t=$.call(arguments,0),s.$$p=null,_=(o=(a=u.get("Yielder")).$new,o.$$p=l.$to_proc(),o).call(a);try{if(t.unshift(_),e.$yieldX(i.block,t)===n)return n.$v}catch(p){if(p===n)return n.$v;throw p}return i},r&&"each"}(u,null),function(t,$super){function a(){}var i,s=a=o(t,$super,"Yielder",a),c=s.$$proto;return s.$$scope,c.block=r,c.$initialize=i=function(){var e=this,t=i.$$p,n=t||r;return i.$$p=null,e.block=n},c.$yield=function(t){var r=this;t=$.call(arguments,0);var o=e.$yieldX(r.block,t);if(o===n)throw n;return o},c["$<<"]=function(e){var t,r=this;return e=$.call(arguments,0),(t=r).$yield.apply(t,[].concat(e)),r},r&&"<<"}(u,null),function(t,$super){function a(){}var i,s,c,l,u,_,p,d,f,h=a=o(t,$super,"Lazy",a),m=h.$$proto,g=h.$$scope;return m.enumerator=r,function(e,$super){function t(){}var n=t=o(e,$super,"StopLazyError",t);return n.$$proto,n.$$scope,r}(h,g.get("Exception")),m.$initialize=i=function(t,o){var a,s=this,c=i.$$p,l=c||r;return null==o&&(o=r),i.$$p=null,l!==r||s.$raise(g.get("ArgumentError"),"tried to call lazy new without a block"),s.enumerator=t,e.find_super_dispatcher(s,"initialize",i,(a=function(o,i){var s,c,u,_=a.$$s||this;null==o&&(o=r),i=$.call(arguments,1);try{return(s=(c=t).$each,s.$$p=(u=function(t){return u.$$s||this,t=$.call(arguments,0),t.unshift(o),e.$yieldX(l,t)===n?n:void 0},u.$$s=_,u),s).apply(c,[].concat(i))}catch(p){if(e.$rescue(p,[g.get("Exception")]))return r;throw p}},a.$$s=s,a)).apply(s,[o])},e.defn(h,"$force",m.$to_a),m.$lazy=function(){var e=this;return e},m.$collect=s=function(){var t,o,a,i=this,c=s.$$p,l=c||r;return s.$$p=null,l!==!1&&l!==r||i.$raise(g.get("ArgumentError"),"tried to call lazy map without a block"),(t=(o=g.get("Lazy")).$new,t.$$p=(a=function(t,o){a.$$s||this,null==t&&(t=r),o=$.call(arguments,1);var i=e.$yieldX(l,o);return i===n?n:(t.$yield(i),void 0)},a.$$s=i,a),t).call(o,i,i.$enumerator_size())},m.$collect_concat=c=function(){var t,o,a,i=this,s=c.$$p,l=s||r;return c.$$p=null,l!==!1&&l!==r||i.$raise(g.get("ArgumentError"),"tried to call lazy map without a block"),(t=(o=g.get("Lazy")).$new,t.$$p=(a=function(t,o){var i,s,c,u,_,p=a.$$s||this;null==t&&(t=r),o=$.call(arguments,1);var d=e.$yieldX(l,o);if(d===n)return n;if(d["$respond_to?"]("force")&&d["$respond_to?"]("each"))(i=(s=d).$each,i.$$p=(c=function(e){return c.$$s||this,null==e&&(e=r),t.$yield(e)},c.$$s=p,c),i).call(s);else{var f=g.get("Opal").$try_convert(d,g.get("Array"),"to_ary");f===r?t.$yield(d):(i=(u=d).$each,i.$$p=(_=function(e){return _.$$s||this,null==e&&(e=r),t.$yield(e)},_.$$s=p,_),i).call(u)}},a.$$s=i,a),t).call(o,i,r)},m.$drop=function(e){var t,n,o,a=this,i=r,s=r,c=r;return e=g.get("Opal").$coerce_to(e,g.get("Integer"),"to_int"),e["$<"](0)&&a.$raise(g.get("ArgumentError"),"attempt to drop negative size"),i=a.$enumerator_size(),s=function(){return(t=g.get("Integer")["$==="](i))===r||t.$$is_boolean&&1!=t?i:e["$<"](i)?e:i}(),c=0,(t=(n=g.get("Lazy")).$new,t.$$p=(o=function(t,n){var a;return o.$$s||this,null==t&&(t=r),n=$.call(arguments,1),c["$<"](e)?c=c["$+"](1):(a=t).$yield.apply(a,[].concat(n))},o.$$s=a,o),t).call(n,a,s)},m.$drop_while=l=function(){var t,o,a,i=this,s=l.$$p,c=s||r,u=r;return l.$$p=null,c!==!1&&c!==r||i.$raise(g.get("ArgumentError"),"tried to call lazy drop_while without a block"),u=!0,(t=(o=g.get("Lazy")).$new,t.$$p=(a=function(t,o){var i,s;if(a.$$s||this,null==t&&(t=r),o=$.call(arguments,1),u===!1||u===r)return(s=t).$yield.apply(s,[].concat(o));var l=e.$yieldX(c,o);return l===n?n:(((i=l)===r||i.$$is_boolean&&0==i)&&(u=!1,(i=t).$yield.apply(i,[].concat(o))),void 0)},a.$$s=i,a),t).call(o,i,r)},m.$enum_for=u=function(e,t){var n,o,a=this,i=u.$$p,s=i||r;return t=$.call(arguments,1),null==e&&(e="each"),u.$$p=null,(n=(o=a.$class()).$for,n.$$p=s.$to_proc(),n).apply(o,[a,e].concat(t))},m.$find_all=_=function(){var t,o,a,i=this,s=_.$$p,c=s||r;return _.$$p=null,c!==!1&&c!==r||i.$raise(g.get("ArgumentError"),"tried to call lazy select without a block"),(t=(o=g.get("Lazy")).$new,t.$$p=(a=function(t,o){var i;a.$$s||this,null==t&&(t=r),o=$.call(arguments,1);var s=e.$yieldX(c,o);return s===n?n:((i=s)===r||i.$$is_boolean&&1!=i||(i=t).$yield.apply(i,[].concat(o)),void 0)},a.$$s=i,a),t).call(o,i,r)},e.defn(h,"$flat_map",m.$collect_concat),m.$grep=p=function(t){var o,a,i,s,c,l=this,u=p.$$p,_=u||r;return p.$$p=null,_!==!1&&_!==r?(o=(a=g.get("Lazy")).$new,o.$$p=(i=function(o,a){var s;i.$$s||this,null==o&&(o=r),a=$.call(arguments,1);var c=g.get("Opal").$destructure(a),l=t["$==="](c);if((s=l)!==r&&(!s.$$is_boolean||1==s)){if(l=e.$yield1(_,c),l===n)return n;o.$yield(e.$yield1(_,c))}},i.$$s=l,i),o).call(a,l,r):(o=(s=g.get("Lazy")).$new,o.$$p=(c=function(e,n){var o;c.$$s||this,null==e&&(e=r),n=$.call(arguments,1);var a=g.get("Opal").$destructure(n),i=t["$==="](a);(o=i)===r||o.$$is_boolean&&1!=o||e.$yield(a)},c.$$s=l,c),o).call(s,l,r)},e.defn(h,"$map",m.$collect),e.defn(h,"$select",m.$find_all),m.$reject=d=function(){var t,o,a,i=this,s=d.$$p,c=s||r;return d.$$p=null,c!==!1&&c!==r||i.$raise(g.get("ArgumentError"),"tried to call lazy reject without a block"),(t=(o=g.get("Lazy")).$new,t.$$p=(a=function(t,o){var i;a.$$s||this,null==t&&(t=r),o=$.call(arguments,1);var s=e.$yieldX(c,o);return s===n?n:(((i=s)===r||i.$$is_boolean&&0==i)&&(i=t).$yield.apply(i,[].concat(o)),void 0)},a.$$s=i,a),t).call(o,i,r)},m.$take=function(e){var t,n,o,a=this,i=r,s=r,c=r;return e=g.get("Opal").$coerce_to(e,g.get("Integer"),"to_int"),e["$<"](0)&&a.$raise(g.get("ArgumentError"),"attempt to take negative size"),i=a.$enumerator_size(),s=function(){return(t=g.get("Integer")["$==="](i))===r||t.$$is_boolean&&1!=t?i:e["$<"](i)?e:i}(),c=0,(t=(n=g.get("Lazy")).$new,t.$$p=(o=function(t,n){var a,i=o.$$s||this;return null==t&&(t=r),n=$.call(arguments,1),c["$<"](e)?((a=t).$yield.apply(a,[].concat(n)),c=c["$+"](1)):i.$raise(g.get("StopLazyError"))},o.$$s=a,o),t).call(n,a,s)},m.$take_while=f=function(){var t,o,a,i=this,s=f.$$p,c=s||r;return f.$$p=null,c!==!1&&c!==r||i.$raise(g.get("ArgumentError"),"tried to call lazy take_while without a block"),(t=(o=g.get("Lazy")).$new,t.$$p=(a=function(t,o){var i,s=a.$$s||this;null==t&&(t=r),o=$.call(arguments,1);var l=e.$yieldX(c,o);return l===n?n:((i=l)===r||i.$$is_boolean&&1!=i?s.$raise(g.get("StopLazyError")):(i=t).$yield.apply(i,[].concat(o)),void 0)},a.$$s=i,a),t).call(o,i,r)},e.defn(h,"$to_enum",m.$enum_for),m.$inspect=function(){var e=this;return"#<"+e.$class().$name()+": "+e.enumerator.$inspect()+">"},r&&"inspect"}(u,u)}(t,null)},Opal.modules["corelib/array"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e.nil,n=e.breaker,$=e.slice,o=e.klass,a=e.gvars,i=e.range;return e.add_stubs(["$require","$include","$new","$class","$raise","$===","$to_a","$respond_to?","$to_ary","$coerce_to","$coerce_to?","$==","$to_str","$clone","$hash","$<=>","$inspect","$empty?","$enum_for","$nil?","$coerce_to!","$initialize_clone","$initialize_dup","$replace","$eql?","$length","$begin","$end","$exclude_end?","$flatten","$object_id","$[]","$to_s","$join","$delete_if","$to_proc","$each","$reverse","$!","$map","$rand","$keep_if","$shuffle!","$>","$<","$sort","$times","$[]=","$<<","$at"]),t.$require("corelib/enumerable"),function(t,$super){function s(){}var c,l,u,_,p,d,f,h,m,g,v,b,y,x,k,w,S,E,R,O,M,q=s=o(t,$super,"Array",s),A=q.$$proto,C=q.$$scope;return A.length=r,q.$include(C.get("Enumerable")),A.$$is_array=!0,e.defs(q,"$[]",function(e){return e=$.call(arguments,0)}),A.$initialize=function(e){var t,r=this;return e=$.call(arguments,0),(t=r.$class()).$new.apply(t,[].concat(e))},e.defs(q,"$new",c=function(e,t){var $,o=this,a=c.$$p,i=a||r;if(null==e&&(e=r),null==t&&(t=r),c.$$p=null,($=arguments.length>2)===r||$.$$is_boolean&&1!=$||o.$raise(C.get("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),($=0===arguments.length)!==r&&(!$.$$is_boolean||1==$))return[];if(($=1===arguments.length)!==r&&(!$.$$is_boolean||1==$)){if(!(($=C.get("Array")["$==="](e))===r||$.$$is_boolean&&1!=$))return e.$to_a();if(($=e["$respond_to?"]("to_ary"))!==r&&(!$.$$is_boolean||1==$))return e.$to_ary()}e=C.get("Opal").$coerce_to(e,C.get("Integer"),"to_int"),($=0>e)===r||$.$$is_boolean&&1!=$||o.$raise(C.get("ArgumentError"),"negative array size");var s=[];if(i===r)for(var l=0;e>l;l++)s.push(t);else for(var u,l=0;e>l;l++){if(u=i(l),u===n)return n.$v;s[l]=u}return s}),e.defs(q,"$try_convert",function(e){return C.get("Opal")["$coerce_to?"](e,C.get("Array"),"to_ary")}),A["$&"]=function(e){var t,n=this;e=(t=C.get("Array")["$==="](e))===r||t.$$is_boolean&&1!=t?C.get("Opal").$coerce_to(e,C.get("Array"),"to_ary").$to_a():e.$to_a();for(var $=[],o={},a=0,i=n.length;i>a;a++){var s=n[a];if(!o[s])for(var c=0,l=e.length;l>c;c++){var u=e[c];!o[u]&&s["$=="](u)&&(o[s]=!0,$.push(s))}}return $},A["$|"]=function(e){var t,n=this;e=(t=C.get("Array")["$==="](e))===r||t.$$is_boolean&&1!=t?C.get("Opal").$coerce_to(e,C.get("Array"),"to_ary").$to_a():e.$to_a();for(var $=[],o={},a=0,i=n.length;i>a;a++){var s=n[a];o[s]||(o[s]=!0,$.push(s))}for(var a=0,i=e.length;i>a;a++){var s=e[a];o[s]||(o[s]=!0,$.push(s))}return $},A["$*"]=function(e){var t,n=this;if((t=e["$respond_to?"]("to_str"))!==r&&(!t.$$is_boolean||1==t))return n.join(e.$to_str());((t=e["$respond_to?"]("to_int"))===r||t.$$is_boolean&&1!=t)&&n.$raise(C.get("TypeError"),"no implicit conversion of "+e.$class()+" into Integer"),e=C.get("Opal").$coerce_to(e,C.get("Integer"),"to_int"),(t=0>e)===r||t.$$is_boolean&&1!=t||n.$raise(C.get("ArgumentError"),"negative argument");
for(var $=[],o=0;e>o;o++)$=$.concat(n);return $},A["$+"]=function(e){var t,n=this;return e=(t=C.get("Array")["$==="](e))===r||t.$$is_boolean&&1!=t?C.get("Opal").$coerce_to(e,C.get("Array"),"to_ary").$to_a():e.$to_a(),n.concat(e)},A["$-"]=function(e){var t,n=this;if(e=(t=C.get("Array")["$==="](e))===r||t.$$is_boolean&&1!=t?C.get("Opal").$coerce_to(e,C.get("Array"),"to_ary").$to_a():e.$to_a(),(t=0===n.length)!==r&&(!t.$$is_boolean||1==t))return[];if((t=0===e.length)!==r&&(!t.$$is_boolean||1==t))return n.$clone();for(var $={},o=[],a=0,i=e.length;i>a;a++)$[e[a]]=!0;for(var a=0,i=n.length;i>a;a++){var s=n[a];$[s]||o.push(s)}return o},A["$<<"]=function(e){var t=this;return t.push(e),t},A["$<=>"]=function(e){var t,n=this;if((t=C.get("Array")["$==="](e))===r||t.$$is_boolean&&1!=t){if((t=e["$respond_to?"]("to_ary"))===r||t.$$is_boolean&&1!=t)return r;e=e.$to_ary().$to_a()}else e=e.$to_a();if(n.$hash()===e.$hash())return 0;if(n.length!=e.length)return n.length>e.length?1:-1;for(var $=0,o=n.length;o>$;$++){var a=n[$]["$<=>"](e[$]);if(0!==a)return a}return 0},A["$=="]=function(e){var t,n=this;if((t=n===e)!==r&&(!t.$$is_boolean||1==t))return!0;if((t=C.get("Array")["$==="](e))===r||t.$$is_boolean&&1!=t)return(t=e["$respond_to?"]("to_ary"))===r||t.$$is_boolean&&1!=t?!1:e["$=="](n);if(e=e.$to_a(),(t=n.length===e.length)===r||t.$$is_boolean&&1!=t)return!1;for(var $=0,o=n.length;o>$;$++){var a=n[$],i=e[$];if(!(a.$$is_array&&i.$$is_array&&a===n||a["$=="](i)))return!1}return!0},A["$[]"]=function(e,t){var n,$=this;if((n=C.get("Range")["$==="](e))===r||n.$$is_boolean&&1!=n){e=C.get("Opal").$coerce_to(e,C.get("Integer"),"to_int");var o=$.length;return 0>e&&(e+=o,0>e)?r:void 0===t?e>=o||0>e?r:$[e]:(t=C.get("Opal").$coerce_to(t,C.get("Integer"),"to_int"),0>t||e>o||0>e?r:$.slice(e,e+t))}var o=$.length,a=e.exclude,i=C.get("Opal").$coerce_to(e.begin,C.get("Integer"),"to_int"),s=C.get("Opal").$coerce_to(e.end,C.get("Integer"),"to_int");return 0>i&&(i+=o,0>i)?r:i>o?r:0>s&&(s+=o,0>s)?[]:(a||(s+=1),$.slice(i,s))},A["$[]="]=function(e,t,n){var $,o=this,a=r,i=r;if(($=C.get("Range")["$==="](e))===r||$.$$is_boolean&&1!=$){($=void 0===n)===r||$.$$is_boolean&&1!=$?(i=t,t=n,a=($=C.get("Array")["$==="](t))===r||$.$$is_boolean&&1!=$?($=t["$respond_to?"]("to_ary"))===r||$.$$is_boolean&&1!=$?[t]:t.$to_ary().$to_a():t.$to_a()):i=1;var s,c=o.length,e=C.get("Opal").$coerce_to(e,C.get("Integer"),"to_int"),i=C.get("Opal").$coerce_to(i,C.get("Integer"),"to_int");if(0>e&&(s=e,e+=c,0>e&&o.$raise(C.get("IndexError"),"index "+s+" too small for array; minimum "+-o.length)),0>i&&o.$raise(C.get("IndexError"),"negative length ("+i+")"),e>c)for(var l=c;e>l;l++)o[l]=r;return void 0===n?o[e]=t:o.splice.apply(o,[e,i].concat(a)),t}a=($=C.get("Array")["$==="](t))===r||$.$$is_boolean&&1!=$?($=t["$respond_to?"]("to_ary"))===r||$.$$is_boolean&&1!=$?[t]:t.$to_ary().$to_a():t.$to_a();var c=o.length,u=e.exclude,_=C.get("Opal").$coerce_to(e.begin,C.get("Integer"),"to_int"),p=C.get("Opal").$coerce_to(e.end,C.get("Integer"),"to_int");if(0>_&&(_+=c,0>_&&o.$raise(C.get("RangeError"),""+e.$inspect()+" out of range")),0>p&&(p+=c),u||(p+=1),_>c)for(var l=c;_>l;l++)o[l]=r;return 0>p?o.splice.apply(o,[_,0].concat(a)):o.splice.apply(o,[_,p-_].concat(a)),t},A.$assoc=function(e){for(var t,n=this,$=0,o=n.length;o>$;$++)if(t=n[$],t.length&&t[0]["$=="](e))return t;return r},A.$at=function(e){var t=this;return e=C.get("Opal").$coerce_to(e,C.get("Integer"),"to_int"),0>e&&(e+=t.length),0>e||e>=t.length?r:t[e]},A.$cycle=l=function(t){var $,o,a=this,i=l.$$p,s=i||r;if(null==t&&(t=r),l.$$p=null,($=(o=a["$empty?"]())!==!1&&o!==r?o:t["$=="](0))!==r&&(!$.$$is_boolean||1==$))return r;if(s===!1||s===r)return a.$enum_for("cycle",t);if(($=t["$nil?"]())===r||$.$$is_boolean&&1!=$){if(t=C.get("Opal")["$coerce_to!"](t,C.get("Integer"),"to_int"),0>=t)return a;for(;t>0;){for(var c=0,u=a.length;u>c;c++){var _=e.$yield1(s,a[c]);if(_===n)return n.$v}t--}}else for(;;)for(var c=0,u=a.length;u>c;c++){var _=e.$yield1(s,a[c]);if(_===n)return n.$v}return a},A.$clear=function(){var e=this;return e.splice(0,e.length),e},A.$clone=function(){var e=this,t=r;return t=[],t.$initialize_clone(e),t},A.$dup=function(){var e=this,t=r;return t=[],t.$initialize_dup(e),t},A.$initialize_copy=function(e){var t=this;return t.$replace(e)},A.$collect=u=function(){var e=this,t=u.$$p,$=t||r;if(u.$$p=null,$===r)return e.$enum_for("collect");for(var o=[],a=0,i=e.length;i>a;a++){var s=Opal.$yield1($,e[a]);if(s===n)return n.$v;o.push(s)}return o},A["$collect!"]=_=function(){var e=this,t=_.$$p,$=t||r;if(_.$$p=null,$===r)return e.$enum_for("collect!");for(var o=0,a=e.length;a>o;o++){var i=Opal.$yield1($,e[o]);if(i===n)return n.$v;e[o]=i}return e},A.$compact=function(){for(var e,t=this,n=[],$=0,o=t.length;o>$;$++)(e=t[$])!==r&&n.push(e);return n},A["$compact!"]=function(){for(var e=this,t=e.length,n=0,$=e.length;$>n;n++)e[n]===r&&(e.splice(n,1),$--,n--);return e.length===t?r:e},A.$concat=function(e){var t,n=this;e=(t=C.get("Array")["$==="](e))===r||t.$$is_boolean&&1!=t?C.get("Opal").$coerce_to(e,C.get("Array"),"to_ary").$to_a():e.$to_a();for(var $=0,o=e.length;o>$;$++)n.push(e[$]);return n},A.$delete=function(e){for(var t=this,n=t.length,$=0,o=n;o>$;$++)t[$]["$=="](e)&&(t.splice($,1),o--,$--);return t.length===n?r:e},A.$delete_at=function(e){var t=this;if(e=C.get("Opal").$coerce_to(e,C.get("Integer"),"to_int"),0>e&&(e+=t.length),0>e||e>=t.length)return r;var n=t[e];return t.splice(e,1),n},A.$delete_if=p=function(){var e=this,t=p.$$p,$=t||r;if(p.$$p=null,$===r)return e.$enum_for("delete_if");for(var o,a=0,i=e.length;i>a;a++){if((o=$(e[a]))===n)return n.$v;o!==!1&&o!==r&&(e.splice(a,1),i--,a--)}return e},A.$drop=function(e){var t=this;return 0>e&&t.$raise(C.get("ArgumentError")),t.slice(e)},e.defn(q,"$dup",A.$clone),A.$each=d=function(){var t=this,$=d.$$p,o=$||r;if(d.$$p=null,o===r)return t.$enum_for("each");for(var a=0,i=t.length;i>a;a++){var s=e.$yield1(o,t[a]);if(s==n)return n.$v}return t},A.$each_index=f=function(){var t=this,$=f.$$p,o=$||r;if(f.$$p=null,o===r)return t.$enum_for("each_index");for(var a=0,i=t.length;i>a;a++){var s=e.$yield1(o,a);if(s===n)return n.$v}return t},A["$empty?"]=function(){var e=this;return 0===e.length},A["$eql?"]=function(e){var t,n=this;if((t=n===e)!==r&&(!t.$$is_boolean||1==t))return!0;if((t=C.get("Array")["$==="](e))===r||t.$$is_boolean&&1!=t)return!1;if(e=e.$to_a(),(t=n.length===e.length)===r||t.$$is_boolean&&1!=t)return!1;for(var $=0,o=n.length;o>$;$++){var a=n[$],i=e[$];if(!(a.$$is_array&&i.$$is_array&&a===n||a["$eql?"](i)))return!1}return!0},A.$fetch=h=function(e,t){var n=this,$=h.$$p,o=$||r;h.$$p=null;var a=e;return e=C.get("Opal").$coerce_to(e,C.get("Integer"),"to_int"),0>e&&(e+=n.length),e>=0&&e<n.length?n[e]:o!==r?o(a):null!=t?t:(0===n.length?n.$raise(C.get("IndexError"),"index "+a+" outside of array bounds: 0...0"):n.$raise(C.get("IndexError"),"index "+a+" outside of array bounds: -"+n.length+"..."+n.length),void 0)},A.$fill=m=function(t){var o,a=this,i=m.$$p,s=i||r,c=r,l=r,u=r,_=r,p=r;if(t=$.call(arguments,0),m.$$p=null,s!==!1&&s!==r?((o=t.length>2)===r||o.$$is_boolean&&1!=o||a.$raise(C.get("ArgumentError"),"wrong number of arguments ("+t.$length()+" for 0..2)"),o=e.to_ary(t),c=null==o[0]?r:o[0],l=null==o[1]?r:o[1]):((o=0==t.length)===r||o.$$is_boolean&&1!=o?(o=t.length>3)===r||o.$$is_boolean&&1!=o||a.$raise(C.get("ArgumentError"),"wrong number of arguments ("+t.$length()+" for 1..3)"):a.$raise(C.get("ArgumentError"),"wrong number of arguments (0 for 1..3)"),o=e.to_ary(t),u=null==o[0]?r:o[0],c=null==o[1]?r:o[1],l=null==o[2]?r:o[2]),(o=C.get("Range")["$==="](c))===r||o.$$is_boolean&&1!=o)if(c!==!1&&c!==r)if(_=C.get("Opal").$coerce_to(c,C.get("Integer"),"to_int"),(o=0>_)===r||o.$$is_boolean&&1!=o||(_+=a.length),(o=0>_)===r||o.$$is_boolean&&1!=o||(_=0),l!==!1&&l!==r){if(p=C.get("Opal").$coerce_to(l,C.get("Integer"),"to_int"),(o=0==p)!==r&&(!o.$$is_boolean||1==o))return a;p+=_}else p=a.length;else _=0,p=a.length;else if(l!==!1&&l!==r&&a.$raise(C.get("TypeError"),"length invalid with range"),_=C.get("Opal").$coerce_to(c.$begin(),C.get("Integer"),"to_int"),(o=0>_)===r||o.$$is_boolean&&1!=o||(_+=a.length),(o=0>_)===r||o.$$is_boolean&&1!=o||a.$raise(C.get("RangeError"),""+c.$inspect()+" out of range"),p=C.get("Opal").$coerce_to(c.$end(),C.get("Integer"),"to_int"),(o=0>p)===r||o.$$is_boolean&&1!=o||(p+=a.length),((o=c["$exclude_end?"]())===r||o.$$is_boolean&&1!=o)&&(p+=1),(o=_>=p)!==r&&(!o.$$is_boolean||1==o))return a;if((o=_>a.length)!==r&&(!o.$$is_boolean||1==o))for(var d=a.length;p>d;d++)a[d]=r;if((o=p>a.length)===r||o.$$is_boolean&&1!=o||(a.length=p),s!==!1&&s!==r)for(a.length;p>_;_++){var f=s(_);if(f===n)return n.$v;a[_]=f}else for(a.length;p>_;_++)a[_]=u;return a},A.$first=function(e){var t=this;return null==e?0===t.length?r:t[0]:(e=C.get("Opal").$coerce_to(e,C.get("Integer"),"to_int"),0>e&&t.$raise(C.get("ArgumentError"),"negative array size"),t.slice(0,e))},A.$flatten=function(e){for(var t=this,r=[],n=0,$=t.length;$>n;n++){var o=t[n];C.get("Opal")["$respond_to?"](o,"to_ary")?(o=o.$to_ary(),null==e?r.push.apply(r,o.$flatten().$to_a()):0==e?r.push(o):r.push.apply(r,o.$flatten(e-1).$to_a())):r.push(o)}return r},A["$flatten!"]=function(e){var t=this,n=t.$flatten(e);if(t.length==n.length){for(var $=0,o=t.length;o>$&&t[$]===n[$];$++);if($==o)return r}return t.$replace(n),t},A.$hash=function(){var e=this;return e.$$id||(e.$$id=Opal.uid())},A["$include?"]=function(e){for(var t=this,r=0,n=t.length;n>r;r++)if(t[r]["$=="](e))return!0;return!1},A.$index=g=function(e){var t=this,$=g.$$p,o=$||r;if(g.$$p=null,null!=e){for(var a=0,i=t.length;i>a;a++)if(t[a]["$=="](e))return a}else{if(o===r)return t.$enum_for("index");for(var s,a=0,i=t.length;i>a;a++){if((s=o(t[a]))===n)return n.$v;if(s!==!1&&s!==r)return a}}return r},A.$insert=function(e,t){var n=this;if(t=$.call(arguments,1),e=C.get("Opal").$coerce_to(e,C.get("Integer"),"to_int"),t.length>0){if(0>e&&(e+=n.length+1,0>e&&n.$raise(C.get("IndexError"),""+e+" is out of bounds")),e>n.length)for(var o=n.length;e>o;o++)n.push(r);n.splice.apply(n,[e,0].concat(t))}return n},A.$inspect=function(){var e,t,r,n,$,o,a=this;for(t=[],o=a.$object_id(),$=a.length,e=0;$>e;e++)r=a["$[]"](e),n=r.$object_id()===o?"[...]":r.$inspect(),t.push(n);return"["+t.join(", ")+"]"},A.$join=function(e){var t,n=this;if(null==a[","]&&(a[","]=r),null==e&&(e=r),(t=0===n.length)!==r&&(!t.$$is_boolean||1==t))return"";(t=e===r)===r||t.$$is_boolean&&1!=t||(e=a[","]);for(var $=[],o=0,i=n.length;i>o;o++){var s=n[o];if(C.get("Opal")["$respond_to?"](s,"to_str")){var c=s.$to_str();if(c!==r){$.push(c.$to_s());continue}}if(C.get("Opal")["$respond_to?"](s,"to_ary")){var c=s.$to_ary();if(c!==r){$.push(c.$join(e));continue}}if(C.get("Opal")["$respond_to?"](s,"to_s")){var c=s.$to_s();if(c!==r){$.push(c);continue}}n.$raise(C.get("NoMethodError"),""+C.get("Opal").$inspect(s)+" doesn't respond to #to_str, #to_ary or #to_s")}return e===r?$.join(""):$.join(C.get("Opal")["$coerce_to!"](e,C.get("String"),"to_str").$to_s())},A.$keep_if=v=function(){var e=this,t=v.$$p,$=t||r;if(v.$$p=null,$===r)return e.$enum_for("keep_if");for(var o,a=0,i=e.length;i>a;a++){if((o=$(e[a]))===n)return n.$v;(o===!1||o===r)&&(e.splice(a,1),i--,a--)}return e},A.$last=function(e){var t=this;return null==e?0===t.length?r:t[t.length-1]:(e=C.get("Opal").$coerce_to(e,C.get("Integer"),"to_int"),0>e&&t.$raise(C.get("ArgumentError"),"negative array size"),e>t.length&&(e=t.length),t.slice(t.length-e,t.length))},A.$length=function(){var e=this;return e.length},e.defn(q,"$map",A.$collect),e.defn(q,"$map!",A["$collect!"]),A.$pop=function(e){var t,n=this;return(t=void 0===e)===r||t.$$is_boolean&&1!=t?(e=C.get("Opal").$coerce_to(e,C.get("Integer"),"to_int"),(t=0>e)===r||t.$$is_boolean&&1!=t||n.$raise(C.get("ArgumentError"),"negative array size"),(t=0===n.length)===r||t.$$is_boolean&&1!=t?(t=e>n.length)===r||t.$$is_boolean&&1!=t?n.splice(n.length-e,n.length):n.splice(0,n.length):[]):(t=0===n.length)===r||t.$$is_boolean&&1!=t?n.pop():r},A.$push=function(e){var t=this;e=$.call(arguments,0);for(var r=0,n=e.length;n>r;r++)t.push(e[r]);return t},A.$rassoc=function(e){for(var t,n=this,$=0,o=n.length;o>$;$++)if(t=n[$],t.length&&void 0!==t[1]&&t[1]["$=="](e))return t;return r},A.$reject=b=function(){var e=this,t=b.$$p,$=t||r;if(b.$$p=null,$===r)return e.$enum_for("reject");for(var o,a=[],i=0,s=e.length;s>i;i++){if((o=$(e[i]))===n)return n.$v;(o===!1||o===r)&&a.push(e[i])}return a},A["$reject!"]=y=function(){var e,t,n=this,$=y.$$p,o=$||r,a=r;return y.$$p=null,o===r?n.$enum_for("reject!"):(a=n.$length(),(e=(t=n).$delete_if,e.$$p=o.$to_proc(),e).call(t),n.$length()["$=="](a)?r:n)},A.$replace=function(e){var t,n=this;return e=(t=C.get("Array")["$==="](e))===r||t.$$is_boolean&&1!=t?C.get("Opal").$coerce_to(e,C.get("Array"),"to_ary").$to_a():e.$to_a(),n.splice(0,n.length),n.push.apply(n,e),n},A.$reverse=function(){var e=this;return e.slice(0).reverse()},A["$reverse!"]=function(){var e=this;return e.reverse()},A.$reverse_each=x=function(){var e,t,n=this,$=x.$$p,o=$||r;return x.$$p=null,o===r?n.$enum_for("reverse_each"):((e=(t=n.$reverse()).$each,e.$$p=o.$to_proc(),e).call(t),n)},A.$rindex=k=function(e){var t=this,$=k.$$p,o=$||r;if(k.$$p=null,null!=e){for(var a=t.length-1;a>=0;a--)if(t[a]["$=="](e))return a}else if(o!==r)for(var i,a=t.length-1;a>=0;a--){if((i=o(t[a]))===n)return n.$v;if(i!==!1&&i!==r)return a}else if(null==e)return t.$enum_for("rindex");return r},A.$sample=function(e){var t,n,$,o=this;return null==e&&(e=r),n=e["$!"](),(t=n!==!1&&n!==r?o["$empty?"]():n)===r||t.$$is_boolean&&1!=t?(t=(n=e!==!1&&e!==r)?o["$empty?"]():n)===r||t.$$is_boolean&&1!=t?e!==!1&&e!==r?(t=(n=i(1,e,!1)).$map,t.$$p=($=function(){var e=$.$$s||this;return e["$[]"](e.$rand(e.$length()))},$.$$s=o,$),t).call(n):o["$[]"](o.$rand(o.$length())):[]:r},A.$select=w=function(){var t=this,$=w.$$p,o=$||r;if(w.$$p=null,o===r)return t.$enum_for("select");for(var a,i,s=[],c=0,l=t.length;l>c;c++){if(a=t[c],(i=e.$yield1(o,a))===n)return n.$v;i!==!1&&i!==r&&s.push(a)}return s},A["$select!"]=S=function(){var e,t,n=this,$=S.$$p,o=$||r;if(S.$$p=null,o===r)return n.$enum_for("select!");var a=n.length;return(e=(t=n).$keep_if,e.$$p=o.$to_proc(),e).call(t),n.length===a?r:n},A.$shift=function(e){var t,n=this;return(t=void 0===e)===r||t.$$is_boolean&&1!=t?(e=C.get("Opal").$coerce_to(e,C.get("Integer"),"to_int"),(t=0>e)===r||t.$$is_boolean&&1!=t||n.$raise(C.get("ArgumentError"),"negative array size"),(t=0===n.length)===r||t.$$is_boolean&&1!=t?n.splice(0,e):[]):(t=0===n.length)===r||t.$$is_boolean&&1!=t?n.shift():r},e.defn(q,"$size",A.$length),A.$shuffle=function(){var e=this;return e.$clone()["$shuffle!"]()},A["$shuffle!"]=function(){for(var e=this,t=e.length-1;t>0;t--){var r=e[t],n=Math.floor(Math.random()*(t+1));e[t]=e[n],e[n]=r}return e},e.defn(q,"$slice",A["$[]"]),A["$slice!"]=function(e,t){var n=this;return 0>e&&(e+=n.length),null!=t?n.splice(e,t):0>e||e>=n.length?r:n.splice(e,1)[0]},A.$sort=E=function(){var e,t=this,$=E.$$p,o=$||r;if(E.$$p=null,(e=t.length>1)===r||e.$$is_boolean&&1!=e)return t;o===r&&(o=function(e,t){return e["$<=>"](t)});try{return t.slice().sort(function(e,$){var a=o(e,$);if(a===n)throw n;return a===r&&t.$raise(C.get("ArgumentError"),"comparison of "+e.$inspect()+" with "+$.$inspect()+" failed"),a["$>"](0)?1:a["$<"](0)?-1:0})}catch(a){if(a===n)return n.$v;throw a}},A["$sort!"]=R=function(){var e,t,n=this,$=R.$$p,o=$||r;R.$$p=null;var a;a=o!==r?(e=(t=n.slice()).$sort,e.$$p=o.$to_proc(),e).call(t):n.slice().$sort(),n.length=0;for(var i=0,s=a.length;s>i;i++)n.push(a[i]);return n},A.$take=function(e){var t=this;return 0>e&&t.$raise(C.get("ArgumentError")),t.slice(0,e)},A.$take_while=O=function(){var e=this,t=O.$$p,$=t||r;O.$$p=null;for(var o,a,i=[],s=0,c=e.length;c>s;s++){if(o=e[s],(a=$(o))===n)return n.$v;if(a===!1||a===r)return i;i.push(o)}return i},A.$to_a=function(){var e=this;return e},e.defn(q,"$to_ary",A.$to_a),e.defn(q,"$to_s",A.$inspect),A.$transpose=function(){var e,t,n,$=this,o=r,a=r;return(e=$["$empty?"]())===r||e.$$is_boolean&&1!=e?(o=[],a=r,(e=(t=$).$each,e.$$p=(n=function(e){var t,$,i,s=n.$$s||this;return null==e&&(e=r),e=(t=C.get("Array")["$==="](e))===r||t.$$is_boolean&&1!=t?C.get("Opal").$coerce_to(e,C.get("Array"),"to_ary").$to_a():e.$to_a(),(t=a)!==!1&&t!==r?t:a=e.length,(t=e.length["$=="](a)["$!"]())===r||t.$$is_boolean&&1!=t||s.$raise(C.get("IndexError"),"element size differs ("+e.length+" should be "+a),(t=($=e.length).$times,t.$$p=(i=function(t){var n,$,a,s=(i.$$s||this,r);return null==t&&(t=r),n=t,$=o,s=(a=$["$[]"](n))!==!1&&a!==r?a:$["$[]="](n,[]),s["$<<"](e.$at(t))},i.$$s=s,i),t).call($)},n.$$s=$,n),e).call(t),o):[]},A.$uniq=function(){for(var e,t,r=this,n=[],$={},o=0,a=r.length;a>o;o++)e=r[o],t=e,$[t]||($[t]=!0,n.push(e));return n},A["$uniq!"]=function(){for(var e,t,n=this,$=n.length,o={},a=0,i=$;i>a;a++)e=n[a],t=e,o[t]?(n.splice(a,1),i--,a--):o[t]=!0;return n.length===$?r:n},A.$unshift=function(e){var t=this;e=$.call(arguments,0);for(var r=e.length-1;r>=0;r--)t.unshift(e[r]);return t},A.$zip=M=function(e){var t=this,n=M.$$p,o=n||r;e=$.call(arguments,0),M.$$p=null;for(var a,i,s=[],c=t.length,l=0;c>l;l++){a=[t[l]];for(var u=0,_=e.length;_>u;u++)i=e[u][l],null==i&&(i=r),a[u+1]=i;s[l]=a}if(o!==r){for(var l=0;c>l;l++)o(s[l]);return r}return s},r&&"zip"}(t,null)},Opal.modules["corelib/array/inheritance"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e,n=e.nil,$=(e.breaker,e.slice),o=e.klass;return e.add_stubs(["$new","$allocate","$initialize","$to_proc","$__send__","$clone","$respond_to?","$==","$eql?","$inspect","$*","$class","$slice","$uniq","$flatten"]),function(t,$super){function r(){}var $=r=o(t,$super,"Array",r),a=($.$$proto,$.$$scope);return e.defs($,"$inherited",function(e){var t=n;t=a.get("Class").$new(a.get("Array").$$scope.get("Wrapper")),e.$$proto=t.$$proto,e.$$proto.$$class=e,e.$$alloc=t.$$alloc,e.$$parent=a.get("Array").$$scope.get("Wrapper"),e.$allocate=t.$allocate,e.$new=t.$new,e["$[]"]=t["$[]"]}),n&&"inherited"}(t,null),function(t,$super){function r(){}var a,i,s,c,l,u=r=o(t,$super,"Wrapper",r),_=u.$$proto,p=u.$$scope;return _.literal=n,e.defs(u,"$allocate",a=function(t){var $=this,o=(a.$$p,n);return null==t&&(t=[]),a.$$p=null,o=e.find_super_dispatcher($,"allocate",a,null,r).apply($,[]),o.literal=t,o}),e.defs(u,"$new",i=function(e){var t,r,o=this,a=i.$$p,s=a||n,c=n;return e=$.call(arguments,0),i.$$p=null,c=o.$allocate(),(t=(r=c).$initialize,t.$$p=s.$to_proc(),t).apply(r,[].concat(e)),c}),e.defs(u,"$[]",function(e){var t=this;return e=$.call(arguments,0),t.$allocate(e)}),_.$initialize=s=function(e){var t,r,o=this,a=s.$$p,i=a||n;return e=$.call(arguments,0),s.$$p=null,o.literal=(t=(r=p.get("Array")).$new,t.$$p=i.$to_proc(),t).apply(r,[].concat(e))},_.$method_missing=c=function(e){var t,r,o=this,a=c.$$p,i=a||n,s=n;return e=$.call(arguments,0),c.$$p=null,s=(t=(r=o.literal).$__send__,t.$$p=i.$to_proc(),t).apply(r,[].concat(e)),(t=s===o.literal)===n||t.$$is_boolean&&1!=t?s:o},_.$initialize_copy=function(e){var t=this;return t.literal=e.literal.$clone()},_["$respond_to?"]=l=function(t){var r,o=$.call(arguments,0),a=this,i=l.$$p;return l.$$p=null,(r=e.find_super_dispatcher(a,"respond_to?",l,i).apply(a,o))!==!1&&r!==n?r:a.literal["$respond_to?"](t)},_["$=="]=function(e){var t=this;return t.literal["$=="](e)},_["$eql?"]=function(e){var t=this;return t.literal["$eql?"](e)},_.$to_a=function(){var e=this;return e.literal},_.$to_ary=function(){var e=this;return e},_.$inspect=function(){var e=this;return e.literal.$inspect()},_["$*"]=function(e){var t=this,r=t.literal["$*"](e);return r.$$is_array?t.$class().$allocate(r):r},_["$[]"]=function(e,t){var r=this,n=r.literal.$slice(e,t);return n.$$is_array&&(e.$$is_range||void 0!==t)?r.$class().$allocate(n):n},e.defn(u,"$slice",_["$[]"]),_.$uniq=function(){var e=this;return e.$class().$allocate(e.literal.$uniq())},_.$flatten=function(e){var t=this;return t.$class().$allocate(t.literal.$flatten(e))},n&&"flatten"}(r.get("Array"),null)},Opal.modules["corelib/hash"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e.nil,n=e.breaker,$=e.slice,o=e.klass;return e.add_stubs(["$require","$include","$!","$==","$call","$coerce_to!","$lambda?","$abs","$arity","$raise","$enum_for","$flatten","$inspect","$===","$alias_method","$clone"]),t.$require("corelib/enumerable"),function(t,$super){function a(){}var i,s,c,l,u,_,p,d,f,h,m,g,v,b=a=o(t,$super,"Hash",a),y=b.$$proto,x=b.$$scope;return y.proc=y.none=r,b.$include(x.get("Enumerable")),e.defs(b,"$[]",function(t){return t=$.call(arguments,0),e.hash.apply(null,t)}),e.defs(b,"$allocate",function(){var e=this,t=new e.$$alloc;return t.map={},t.keys=[],t.none=r,t.proc=r,t}),y.$initialize=i=function(e){var t=this,n=i.$$p,$=n||r;return i.$$p=null,t.none=void 0===e?r:e,t.proc=$,t},y["$=="]=function(e){var t=this;if(t===e)return!0;if(!e.map||!e.keys)return!1;if(t.keys.length!==e.keys.length)return!1;for(var r=t.map,n=e.map,$=0,o=t.keys.length;o>$;$++){var a=t.keys[$],i=r[a],s=n[a];if(void 0===s||i["$=="](s)["$!"]())return!1}return!0},y["$[]"]=function(t){var n=this,$=n.map;if(e.hasOwnProperty.call($,t))return $[t];var o=n.proc;return o!==r?o.$call(n,t):n.none},y["$[]="]=function(t,r){var n=this,$=n.map;return e.hasOwnProperty.call($,t)||n.keys.push(t),$[t]=r,r},y.$assoc=function(e){for(var t,n=this,$=n.keys,o=0,a=$.length;a>o;o++)if(t=$[o],t["$=="](e))return[t,n.map[t]];return r},y.$clear=function(){var e=this;return e.map={},e.keys=[],e},y.$clone=function(){for(var e=this,t={},r=[],n=0,$=e.keys.length;$>n;n++){var o=e.keys[n],a=e.map[o];r.push(o),t[o]=a}var i=new e.$$class.$$alloc;return i.map=t,i.keys=r,i.none=e.none,i.proc=e.proc,i},y.$default=function(e){var t=this;return void 0!==e&&t.proc!==r?t.proc.$call(t,e):t.none},y["$default="]=function(e){var t=this;return t.proc=r,t.none=e},y.$default_proc=function(){var e=this;return e.proc},y["$default_proc="]=function(e){var t=this;return e!==r&&(e=x.get("Opal")["$coerce_to!"](e,x.get("Proc"),"to_proc"),e["$lambda?"]()&&2!=e.$arity().$abs()&&t.$raise(x.get("TypeError"),"default_proc takes two arguments")),t.none=r,t.proc=e},y.$delete=s=function(e){var t=this,n=s.$$p,$=n||r;s.$$p=null;var o=t.map,a=o[e];return null!=a?(delete o[e],t.keys.$delete(e),a):$!==r?$.$call(e):r},y.$delete_if=c=function(){var e=this,t=c.$$p,$=t||r;if(c.$$p=null,$===!1||$===r)return e.$enum_for("delete_if");for(var o,a=e.map,i=e.keys,s=0,l=i.length;l>s;s++){var u=i[s],_=a[u];if((o=$(u,_))===n)return n.$v;o!==!1&&o!==r&&(i.splice(s,1),delete a[u],l--,s--)}return e},e.defn(b,"$dup",y.$clone),y.$each=l=function(){var t=this,$=l.$$p,o=$||r;if(l.$$p=null,o===!1||o===r)return t.$enum_for("each");for(var a=t.map,i=t.keys,s=0,c=i.length;c>s;s++){var u=i[s],_=e.$yield1(o,[u,a[u]]);if(_===n)return n.$v}return t},y.$each_key=u=function(){var e=this,t=u.$$p,$=t||r;if(u.$$p=null,$===!1||$===r)return e.$enum_for("each_key");for(var o=e.keys,a=0,i=o.length;i>a;a++){var s=o[a];if($(s)===n)return n.$v}return e},e.defn(b,"$each_pair",y.$each),y.$each_value=_=function(){var e=this,t=_.$$p,$=t||r;if(_.$$p=null,$===!1||$===r)return e.$enum_for("each_value");for(var o=e.map,a=e.keys,i=0,s=a.length;s>i;i++)if($(o[a[i]])===n)return n.$v;return e},y["$empty?"]=function(){var e=this;return 0===e.keys.length},e.defn(b,"$eql?",y["$=="]),y.$fetch=p=function(e,t){var $=this,o=p.$$p,a=o||r;p.$$p=null;var i=$.map[e];if(null!=i)return i;if(a!==r){var i;return(i=a(e))===n?n.$v:i}return null!=t?t:($.$raise(x.get("KeyError"),"key not found"),void 0)},y.$flatten=function(e){for(var t=this,r=t.map,n=t.keys,$=[],o=0,a=n.length;a>o;o++){var i=n[o],s=r[i];$.push(i),s.$$is_array?null==e||1===e?$.push(s):$=$.concat(s.$flatten(e-1)):$.push(s)}return $},y["$has_key?"]=function(t){var r=this;return e.hasOwnProperty.call(r.map,t)},y["$has_value?"]=function(e){var t=this;for(var r in t.map)if(t.map[r]["$=="](e))return!0;return!1},y.$hash=function(){var e=this;return e.$$id},e.defn(b,"$include?",y["$has_key?"]),y.$index=function(e){for(var t=this,n=t.map,$=t.keys,o=0,a=$.length;a>o;o++){var i=$[o];if(n[i]["$=="](e))return i}return r},y.$indexes=function(e){var t=this;e=$.call(arguments,0);for(var r,n=[],o=t.map,a=0,i=e.length;i>a;a++){var s=e[a],r=o[s];null!=r?n.push(r):n.push(t.none)}return n},e.defn(b,"$indices",y.$indexes),y.$inspect=function(){for(var e=this,t=[],r=e.keys,n=e.map,$=0,o=r.length;o>$;$++){var a=r[$],i=n[a];i===e?t.push(a.$inspect()+"=>"+"{...}"):t.push(a.$inspect()+"=>"+n[a].$inspect())}return"{"+t.join(", ")+"}"},y.$invert=function(){for(var t=this,r=e.hash(),n=t.keys,$=t.map,o=r.keys,a=r.map,i=0,s=n.length;s>i;i++){var c=n[i],l=$[c];o.push(l),a[l]=c}return r},y.$keep_if=d=function(){var e=this,t=d.$$p,$=t||r;if(d.$$p=null,$===!1||$===r)return e.$enum_for("keep_if");for(var o,a=e.map,i=e.keys,s=0,c=i.length;c>s;s++){var l=i[s],u=a[l];if((o=$(l,u))===n)return n.$v;(o===!1||o===r)&&(i.splice(s,1),delete a[l],c--,s--)}return e},e.defn(b,"$key",y.$index),e.defn(b,"$key?",y["$has_key?"]),y.$keys=function(){var e=this;return e.keys.slice(0)},y.$length=function(){var e=this;return e.keys.length},e.defn(b,"$member?",y["$has_key?"]),y.$merge=f=function(t){var n=this,$=f.$$p,o=$||r;f.$$p=null,x.get("Hash")["$==="](t)||(t=x.get("Opal")["$coerce_to!"](t,x.get("Hash"),"to_hash"));for(var a=n.keys,i=n.map,s=e.hash(),c=s.keys,l=s.map,u=0,_=a.length;_>u;u++){var p=a[u];c.push(p),l[p]=i[p]}var a=t.keys,i=t.map;if(o===r)for(var u=0,_=a.length;_>u;u++){var p=a[u];null==l[p]&&c.push(p),l[p]=i[p]}else for(var u=0,_=a.length;_>u;u++){var p=a[u];null==l[p]?(c.push(p),l[p]=i[p]):l[p]=o(p,l[p],i[p])}return s},y["$merge!"]=h=function(e){var t=this,n=h.$$p,$=n||r;h.$$p=null,x.get("Hash")["$==="](e)||(e=x.get("Opal")["$coerce_to!"](e,x.get("Hash"),"to_hash"));var o=t.keys,a=t.map,i=e.keys,s=e.map;if($===r)for(var c=0,l=i.length;l>c;c++){var u=i[c];null==a[u]&&o.push(u),a[u]=s[u]}else for(var c=0,l=i.length;l>c;c++){var u=i[c];null==a[u]?(o.push(u),a[u]=s[u]):a[u]=$(u,a[u],s[u])}return t},y.$rassoc=function(e){for(var t=this,n=t.keys,$=t.map,o=0,a=n.length;a>o;o++){var i=n[o],s=$[i];if(s["$=="](e))return[i,s]}return r},y.$reject=m=function(){var t=this,$=m.$$p,o=$||r;if(m.$$p=null,o===!1||o===r)return t.$enum_for("reject");for(var a=t.keys,i=t.map,s=e.hash(),c=s.map,l=s.keys,u=0,_=a.length;_>u;u++){var p,d=a[u],f=i[d];if((p=o(d,f))===n)return n.$v;(p===!1||p===r)&&(l.push(d),c[d]=f)}return s},y.$replace=function(e){for(var t=this,r=t.map={},n=t.keys=[],$=0,o=e.keys.length;o>$;$++){var a=e.keys[$];n.push(a),r[a]=e.map[a]}return t},y.$select=g=function(){var t=this,$=g.$$p,o=$||r;if(g.$$p=null,o===!1||o===r)return t.$enum_for("select");for(var a=t.keys,i=t.map,s=e.hash(),c=s.map,l=s.keys,u=0,_=a.length;_>u;u++){var p,d=a[u],f=i[d];if((p=o(d,f))===n)return n.$v;p!==!1&&p!==r&&(l.push(d),c[d]=f)}return s},y["$select!"]=v=function(){var e=this,t=v.$$p,$=t||r;if(v.$$p=null,$===!1||$===r)return e.$enum_for("select!");for(var o,a=e.map,i=e.keys,s=r,c=0,l=i.length;l>c;c++){var u=i[c],_=a[u];if((o=$(u,_))===n)return n.$v;(o===!1||o===r)&&(i.splice(c,1),delete a[u],l--,c--,s=e)}return s},y.$shift=function(){var e=this,t=e.keys,n=e.map;if(t.length){var $=t[0],o=n[$];return delete n[$],t.splice(0,1),[$,o]}return r},e.defn(b,"$size",y.$length),b.$alias_method("store","[]="),y.$to_a=function(){for(var e=this,t=e.keys,r=e.map,n=[],$=0,o=t.length;o>$;$++){var a=t[$];n.push([a,r[a]])}return n},y.$to_h=function(){var e=this,t=new Opal.Hash.$$alloc,r=e.$clone();return t.map=r.map,t.keys=r.keys,t.none=r.none,t.proc=r.proc,t},y.$to_hash=function(){var e=this;return e},e.defn(b,"$to_s",y.$inspect),e.defn(b,"$update",y["$merge!"]),e.defn(b,"$value?",y["$has_value?"]),e.defn(b,"$values_at",y.$indexes),y.$values=function(){var e=this,t=e.map,r=[];for(var n in t)r.push(t[n]);return r},r&&"values"}(t,null)},Opal.modules["corelib/string"]=function($opal){$opal.dynamic_require_severity="error";var self=$opal.top,$scope=$opal,nil=$opal.nil,$breaker=$opal.breaker,$slice=$opal.slice,$klass=$opal.klass,$gvars=$opal.gvars;return $opal.add_stubs(["$require","$include","$to_str","$===","$format","$coerce_to","$to_s","$respond_to?","$<=>","$raise","$=~","$empty?","$ljust","$ceil","$/","$+","$rjust","$floor","$to_a","$each_char","$to_proc","$coerce_to!","$initialize_clone","$initialize_dup","$enum_for","$split","$chomp","$escape","$class","$to_i","$name","$!","$each_line","$match","$new","$try_convert","$chars","$&","$join","$is_a?","$[]","$str","$value","$proc","$shift","$send"]),self.$require("corelib/comparable"),function($base,$super){function $String(){}function convertReplace(e){return e.replace(/(^|[^\\])\\\\(\d)/g,"$1\\$2").replace(/(^|[^\\])(\\\\)+\\\\(\d)/g,"$1$2\\$3").replace(/(^|[^\\])(?:(\\)\\)+([^\\]|$)/g,"$1$2$3")}var self=$String=$klass($base,$super,"String",$String),def=self.$$proto,$scope=self.$$scope,TMP_1,TMP_2,TMP_3,TMP_4,TMP_5,TMP_6,TMP_7;return def.length=nil,self.$include($scope.get("Comparable")),def.$$is_string=!0,$opal.defs(self,"$try_convert",function(e){try{return e.$to_str()}catch(t){return nil}}),$opal.defs(self,"$new",function(e){return null==e&&(e=""),new String(e)}),def["$%"]=function(e){var t,r=this;return(t=$scope.get("Array")["$==="](e))===nil||t.$$is_boolean&&1!=t?r.$format(r,e):(t=r).$format.apply(t,[r].concat(e))},def["$*"]=function(e){var t=this;if(1>e)return"";for(var r="",n=t;e>0;)1&e&&(r+=n),e>>=1,n+=n;return r},def["$+"]=function(e){var t=this;return e=$scope.get("Opal").$coerce_to(e,$scope.get("String"),"to_str"),t+e.$to_s()},def["$<=>"]=function(e){var t,r=this;if((t=e["$respond_to?"]("to_str"))===nil||t.$$is_boolean&&1!=t){var n=e["$<=>"](r);return n===nil?nil:n>0?-1:0>n?1:0}return e=e.$to_str().$to_s(),r>e?1:e>r?-1:0},def["$=="]=function(e){var t,r=this;return(t=$scope.get("String")["$==="](e))===nil||t.$$is_boolean&&1!=t?!1:r.$to_s()==e.$to_s()},$opal.defn(self,"$eql?",def["$=="]),$opal.defn(self,"$===",def["$=="]),def["$=~"]=function(e){var t=this;return e.$$is_string&&t.$raise($scope.get("TypeError"),"type mismatch: String given"),e["$=~"](t)},def["$[]"]=function(e,t){var r=this,n=r.length;if(e.$$is_range){var $=e.exclude,t=e.end,e=e.begin;return 0>e&&(e+=n),0>t&&(t+=n),$||(t+=1),e>n?nil:(t-=e,0>t&&(t=0),r.substr(e,t))}return 0>e&&(e+=r.length),null==t?e>=r.length||0>e?nil:r.substr(e,1):e>r.length||0>e?nil:r.substr(e,t)},def.$capitalize=function(){var e=this;return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()},def.$casecmp=function(e){var t=this;return e=$scope.get("Opal").$coerce_to(e,$scope.get("String"),"to_str").$to_s(),t.toLowerCase()["$<=>"](e.toLowerCase())},def.$center=function(e,t){var r,n=this;if(null==t&&(t=" "),e=$scope.get("Opal").$coerce_to(e,$scope.get("Integer"),"to_int"),t=$scope.get("Opal").$coerce_to(t,$scope.get("String"),"to_str").$to_s(),(r=t["$empty?"]())===nil||r.$$is_boolean&&1!=r||n.$raise($scope.get("ArgumentError"),"zero width padding"),(r=e<=n.length)!==nil&&(!r.$$is_boolean||1==r))return n;var $=n.$ljust(e["$+"](n.length)["$/"](2).$ceil(),t),o=n.$rjust(e["$+"](n.length)["$/"](2).$floor(),t);return o+$.slice(n.length)},def.$chars=TMP_1=function(){var e,t,r=this,n=TMP_1.$$p,$=n||nil;return TMP_1.$$p=null,$===!1||$===nil?r.$each_char().$to_a():(e=(t=r).$each_char,e.$$p=$.$to_proc(),e).call(t)},def.$chomp=function(e){var t,r=this;if(null==$gvars["/"]&&($gvars["/"]=nil),null==e&&(e=$gvars["/"]),(t=e===nil||0===r.length)!==nil&&(!t.$$is_boolean||1==t))return r;if(e=$scope.get("Opal")["$coerce_to!"](e,$scope.get("String"),"to_str").$to_s(),"\n"===e)return r.replace(/\r?\n?$/,"");if(""===e)return r.replace(/(\r?\n)+$/,"");if(r.length>e.length){var n=r.substr(r.length-e.length,e.length);if(n===e)return r.substr(0,r.length-e.length)}return r},def.$chop=function(){var e=this,t=e.length;return 1>=t?"":"\n"===e.charAt(t-1)&&"\r"===e.charAt(t-2)?e.substr(0,t-2):e.substr(0,t-1)},def.$chr=function(){var e=this;return e.charAt(0)},def.$clone=function(){var e=this,t=nil;return t=e.slice(),t.$initialize_clone(e),t},def.$dup=function(){var e=this,t=nil;return t=e.slice(),t.$initialize_dup(e),t},def.$count=function(e){var t=this;return(t.length-t.replace(new RegExp(e,"g"),"").length)/e.length},$opal.defn(self,"$dup",def.$clone),def.$downcase=function(){var e=this;return e.toLowerCase()},def.$each_char=TMP_2=function(){var e,t=this,r=TMP_2.$$p,n=r||nil;if(TMP_2.$$p=null,n===nil)return t.$enum_for("each_char");for(var $=0,o=t.length;o>$;$++)(e=$opal.$yield1(n,t.charAt($)))===$breaker?$breaker.$v:e;return t},def.$each_line=TMP_3=function(e){var t,r=this,n=TMP_3.$$p,$=n||nil;if(null==$gvars["/"]&&($gvars["/"]=nil),null==e&&(e=$gvars["/"]),TMP_3.$$p=null,$===nil)return r.$split(e);for(var o=r.$chomp(),a=r.length!=o.length,i=o.split(e),s=0,c=i.length;c>s;s++)c-1>s||a?(t=$opal.$yield1($,i[s]+e))===$breaker?$breaker.$v:t:(t=$opal.$yield1($,i[s]))===$breaker?$breaker.$v:t;
return r},def["$empty?"]=function(){var e=this;return 0===e.length},def["$end_with?"]=function(e){var t=this;e=$slice.call(arguments,0);for(var r=0,n=e.length;n>r;r++){var $=$scope.get("Opal").$coerce_to(e[r],$scope.get("String"),"to_str").$to_s();if(t.length>=$.length&&t.substr(t.length-$.length,$.length)==$)return!0}return!1},$opal.defn(self,"$eql?",def["$=="]),$opal.defn(self,"$equal?",def["$==="]),def.$gsub=TMP_4=function(e,t){var r,n,$=this,o=TMP_4.$$p,a=o||nil;TMP_4.$$p=null,(r=(n=$scope.get("String")["$==="](e))!==!1&&n!==nil?n:e["$respond_to?"]("to_str"))===nil||r.$$is_boolean&&1!=r||(e=new RegExp(""+$scope.get("Regexp").$escape(e.$to_str()))),((r=$scope.get("Regexp")["$==="](e))===nil||r.$$is_boolean&&1!=r)&&$.$raise($scope.get("TypeError"),"wrong argument type "+e.$class()+" (expected Regexp)");var e=e.toString(),i=e.substr(e.lastIndexOf("/")+1)+"g",s=e.substr(1,e.lastIndexOf("/")-1);return $.$sub.$$p=a,$.$sub(new RegExp(s,i),t)},def.$hash=function(){var e=this;return e.toString()},def.$hex=function(){var e=this;return e.$to_i(16)},def["$include?"]=function(e){var t,r=this;return e.$$is_string?-1!==r.indexOf(e):(((t=e["$respond_to?"]("to_str"))===nil||t.$$is_boolean&&1!=t)&&r.$raise($scope.get("TypeError"),"no implicit conversion of "+e.$class().$name()+" into String"),-1!==r.indexOf(e.$to_str()))},def.$index=function(e,t){var r,n=this,$=nil;if(null==t&&(t=nil),(r=$scope.get("String")["$==="](e))===nil||r.$$is_boolean&&1!=r?(r=e["$respond_to?"]("to_str"))===nil||r.$$is_boolean&&1!=r?(r=$scope.get("Regexp")["$==="](e)["$!"]())===nil||r.$$is_boolean&&1!=r||n.$raise($scope.get("TypeError"),"type mismatch: "+e.$class()+" given"):e=e.$to_str().$to_s():e=e.$to_s(),$=-1,t!==!1&&t!==nil){t=$scope.get("Opal").$coerce_to(t,$scope.get("Integer"),"to_int");var o=n.length;if(0>t&&(t+=o),t>o)return nil;$=(r=$scope.get("Regexp")["$==="](e))===nil||r.$$is_boolean&&1!=r?n.substr(t).indexOf(e):(r=e["$=~"](n.substr(t)))!==!1&&r!==nil?r:-1,-1!==$&&($+=t)}else $=(r=$scope.get("Regexp")["$==="](e))===nil||r.$$is_boolean&&1!=r?n.indexOf(e):(r=e["$=~"](n))!==!1&&r!==nil?r:-1;return(r=-1===$)===nil||r.$$is_boolean&&1!=r?$:nil},def.$inspect=function(){var e=this,t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return t.lastIndex=0,t.test(e)?'"'+e.replace(t,function(e){var t=r[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'},def.$intern=function(){var e=this;return e},def.$lines=function(e){var t=this;return null==$gvars["/"]&&($gvars["/"]=nil),null==e&&(e=$gvars["/"]),t.$each_line(e).$to_a()},def.$length=function(){var e=this;return e.length},def.$ljust=function(e,t){var r,n=this;if(null==t&&(t=" "),e=$scope.get("Opal").$coerce_to(e,$scope.get("Integer"),"to_int"),t=$scope.get("Opal").$coerce_to(t,$scope.get("String"),"to_str").$to_s(),(r=t["$empty?"]())===nil||r.$$is_boolean&&1!=r||n.$raise($scope.get("ArgumentError"),"zero width padding"),(r=e<=n.length)!==nil&&(!r.$$is_boolean||1==r))return n;var $=-1,o="";for(e-=n.length;++$<e;)o+=t;return n+o.slice(0,e)},def.$lstrip=function(){var e=this;return e.replace(/^\s*/,"")},def.$match=TMP_5=function(e,t){var r,n,$=this,o=TMP_5.$$p,a=o||nil;return TMP_5.$$p=null,(r=(n=$scope.get("String")["$==="](e))!==!1&&n!==nil?n:e["$respond_to?"]("to_str"))===nil||r.$$is_boolean&&1!=r||(e=new RegExp(""+$scope.get("Regexp").$escape(e.$to_str()))),((r=$scope.get("Regexp")["$==="](e))===nil||r.$$is_boolean&&1!=r)&&$.$raise($scope.get("TypeError"),"wrong argument type "+e.$class()+" (expected Regexp)"),(r=(n=e).$match,r.$$p=a.$to_proc(),r).call(n,$,t)},def.$next=function(){var e=this;if(0===e.length)return"";var t=e.substr(0,e.length-1),r=String.fromCharCode(e.charCodeAt(e.length-1)+1);return t+r},def.$ord=function(){var e=this;return e.charCodeAt(0)},def.$partition=function(e){var t=this,r=t.split(e),n=r[0].length===t.length?"":e;return[r[0],n,r.slice(1).join(e.toString())]},def.$reverse=function(){var e=this;return e.split("").reverse().join("")},def.$rindex=function(e,t){var r=this,n=null==e?Opal.NilClass:e.constructor;if(n!=String&&n!=RegExp){var $="type mismatch: "+n+" given";r.$raise($scope.get("TypeError").$new($))}if(0==r.length)return 0==e.length?0:nil;var o=-1;return null!=t?(0>t&&(t=r.length+t),n==String?o=r.lastIndexOf(e,t):(o=r.substr(0,t+1).$reverse().search(e),-1!==o&&(o=t-o))):n==String?o=r.lastIndexOf(e):(o=r.$reverse().search(e),-1!==o&&(o=r.length-1-o)),-1===o?nil:o},def.$rjust=function(e,t){var r,n=this;if(null==t&&(t=" "),e=$scope.get("Opal").$coerce_to(e,$scope.get("Integer"),"to_int"),t=$scope.get("Opal").$coerce_to(t,$scope.get("String"),"to_str").$to_s(),(r=t["$empty?"]())===nil||r.$$is_boolean&&1!=r||n.$raise($scope.get("ArgumentError"),"zero width padding"),(r=e<=n.length)!==nil&&(!r.$$is_boolean||1==r))return n;var $=Math.floor(e-n.length),o=Math.floor($/t.length),a=Array(o+1).join(t),i=$-a.length;return a+t.slice(0,i)+n},def.$rstrip=function(){var e=this;return e.replace(/\s*$/,"")},def.$scan=TMP_6=function(e){var t=this,r=TMP_6.$$p,n=r||nil;TMP_6.$$p=null,e.global?e.lastIndex=0:e=new RegExp(e.source,"g"+(e.multiline?"m":"")+(e.ignoreCase?"i":""));for(var $,o=[];null!=($=e.exec(t));)$scope.get("MatchData").$new(e,$),n===nil?1==$.length?o.push($[0]):o.push($.slice(1)):1==$.length?n($[0]):n.apply(t,$.slice(1));return n!==nil?t:o},$opal.defn(self,"$size",def.$length),$opal.defn(self,"$slice",def["$[]"]),def.$split=function(pattern,limit){var self=this,$a;null==$gvars[";"]&&($gvars[";"]=nil),null==pattern&&(pattern=($a=$gvars[";"])!==!1&&$a!==nil?$a:" "),(pattern===nil||void 0===pattern)&&(pattern=$gvars[";"]);var result=[];if(void 0!==limit&&(limit=$scope.get("Opal")["$coerce_to!"](limit,$scope.get("Integer"),"to_int")),0===self.length)return[];if(1===limit)return[self];if(pattern&&pattern.$$is_regexp){var pattern_str=pattern.toString(),blank_pattern="/^/"==pattern_str.substr(0,3)||"/(?:)/"==pattern_str.substr(0,6);if(void 0===limit||0===limit)result=self.split(blank_pattern?/(?:)/:pattern);else{pattern.global||(pattern=eval(pattern_str+"g"));var match_data,prev_index=0;for(pattern.lastIndex=0;null!==(match_data=pattern.exec(self));){var segment=self.slice(prev_index,match_data.index);if(result.push(segment),prev_index=pattern.lastIndex,0===match_data[0].length){blank_pattern&&(pattern=/(?:)/),result=self.split(pattern),void 0!==limit&&0>limit&&blank_pattern&&result.push(""),prev_index=void 0;break}if(void 0!==limit&&limit>1&&result.length+1==limit)break}void 0!==prev_index&&result.push(self.slice(prev_index,self.length))}}else{var splitted=0,start=0,lim=0;pattern=pattern===nil||void 0===pattern?" ":$scope.get("Opal").$try_convert(pattern,$scope.get("String"),"to_str").$to_s();for(var string=" "==pattern?self.replace(/[\r\n\t\v]\s+/g," "):self,cursor=-1;(cursor=string.indexOf(pattern,start))>-1&&cursor<string.length&&splitted+1!==limit;)" "!=pattern||cursor!=start?(result.push(string.substr(start,pattern.length?cursor-start:1)),splitted++,start=cursor+(pattern.length?pattern.length:1)):start=cursor+1;string.length>0&&(0>limit||string.length>start)&&(string.length==start?result.push(""):result.push(string.substr(start,string.length)))}if(void 0===limit||0===limit)for(;""===result[result.length-1];)result.length=result.length-1;if(limit>0){var tail=result.slice(limit-1).join("");result.splice(limit-1,result.length-1,tail)}return result},def.$squeeze=function(e){var t=this;if(e=$slice.call(arguments,0),0===e.length)return t.replace(/(.)\1+/g,"$1");for(var r=$scope.get("Opal").$coerce_to(e[0],$scope.get("String"),"to_str").$chars(),n=1,$=e.length;$>n;n++)r=r["$&"]($scope.get("Opal").$coerce_to(e[n],$scope.get("String"),"to_str").$chars());return 0===r.length?t:t.replace(new RegExp("(["+$scope.get("Regexp").$escape(r.$join())+"])\\1+","g"),"$1")},def["$start_with?"]=function(e){var t=this;e=$slice.call(arguments,0);for(var r=0,n=e.length;n>r;r++){var $=$scope.get("Opal").$coerce_to(e[r],$scope.get("String"),"to_str").$to_s();if(0===t.indexOf($))return!0}return!1},def.$strip=function(){var e=this;return e.replace(/^\s*/,"").replace(/\s*$/,"")},def.$sub=TMP_7=function(e,t){var r=this,n=TMP_7.$$p,$=n||nil;return TMP_7.$$p=null,"string"==typeof e||e.$$is_regexp||(e=$scope.get("Opal")["$coerce_to!"](e,$scope.get("String"),"to_str")),void 0!==t?t["$is_a?"]($scope.get("Hash"))?r.replace(e,function(){var e=t["$[]"](r.$str());return null==e?nil:r.$value().$to_s()}):("string"!=typeof t&&(t=$scope.get("Opal")["$coerce_to!"](t,$scope.get("String"),"to_str")),t=convertReplace(t),r.replace(e,t)):null!=$&&$!==nil?r.replace(e,function(){for(var e=[],t=0,r=arguments.length;r>t;t++){var n=arguments[t];void 0==n?e.push(nil):e.push(n)}e.pop(),e.pop();for(var o=e.length,t=1;o>t;t++)Opal.gvars[String(t)]=e[t];return $gvars["&"]=e[0],$gvars["~"]=e,$(e[0])}):(r.$raise($scope.get("ArgumentError"),"wrong number of arguments (1 for 2)"),void 0)},$opal.defn(self,"$succ",def.$next),def.$sum=function(e){var t=this;null==e&&(e=16);for(var r=0,n=0,$=t.length;$>n;n++)r+=t.charCodeAt(n)%((1<<e)-1);return r},def.$swapcase=function(){var e=this,t=e.replace(/([a-z]+)|([A-Z]+)/g,function(e,t){return t?e.toUpperCase():e.toLowerCase()});return e.constructor===String?t:e.$class().$new(t)},def.$to_f=function(){var e=this;if("_"===e.charAt(0))return 0;var t=parseFloat(e.replace(/_/g,""));return isNaN(t)||1/0==t||t==-1/0?0:t},def.$to_i=function(e){var t=this;null==e&&(e=10);var r=parseInt(t,e);return isNaN(r)?0:r},def.$to_proc=function(){var e,t,r,n=this,$=nil;return $=n,(e=(t=n).$proc,e.$$p=(r=function(e){var t,n,o,a=r.$$s||this,i=nil;return e=$slice.call(arguments,0),t=r.$$p||nil,r.$$p=null,(n=e["$empty?"]())===nil||n.$$is_boolean&&1!=n||a.$raise($scope.get("ArgumentError"),"no receiver given"),i=e.$shift(),(n=(o=i).$send,n.$$p=t.$to_proc(),n).apply(o,[$].concat(e))},r.$$s=n,r),e).call(t)},def.$to_s=function(){var e=this;return e.toString()},$opal.defn(self,"$to_str",def.$to_s),$opal.defn(self,"$to_sym",def.$intern),def.$tr=function(e,t){var r=this;if(0==e.length||e===t)return r;var n={},$=e.split(""),o=$.length,a=t.split(""),i=a.length,s=!1,c=null;"^"===$[0]&&(s=!0,$.shift(),c=a[i-1],o-=1);for(var l=[],u=null,_=!1,p=0;o>p;p++){var d=$[p];if(null==u)u=d,l.push(d);else if("-"===d)"-"===u?(l.push("-"),l.push("-")):p==o-1?l.push("-"):_=!0;else if(_){for(var f=u.charCodeAt(0)+1,h=d.charCodeAt(0),m=f;h>m;m++)l.push(String.fromCharCode(m));l.push(d),_=null,u=null}else l.push(d)}if($=l,o=$.length,s)for(var p=0;o>p;p++)n[$[p]]=!0;else{if(i>0){for(var g=[],v=null,_=!1,p=0;i>p;p++){var d=a[p];if(null==u)u=d,g.push(d);else if("-"===d)"-"===v?(g.push("-"),g.push("-")):p==i-1?g.push("-"):_=!0;else if(_){for(var f=u.charCodeAt(0)+1,h=d.charCodeAt(0),m=f;h>m;m++)g.push(String.fromCharCode(m));g.push(d),_=null,u=null}else g.push(d)}a=g,i=a.length}var b=o-i;if(b>0)for(var y=i>0?a[i-1]:"",p=0;b>p;p++)a.push(y);for(var p=0;o>p;p++)n[$[p]]=a[p]}for(var x="",p=0,k=r.length;k>p;p++){var d=r.charAt(p),w=n[d];x+=s?null==w?c:d:null!=w?w:d}return x},def.$tr_s=function(e,t){var r=this;if(0==e.length)return r;var n={},$=e.split(""),o=$.length,a=t.split(""),i=a.length,s=!1,c=null;"^"===$[0]&&(s=!0,$.shift(),c=a[i-1],o-=1);for(var l=[],u=null,_=!1,p=0;o>p;p++){var d=$[p];if(null==u)u=d,l.push(d);else if("-"===d)"-"===u?(l.push("-"),l.push("-")):p==o-1?l.push("-"):_=!0;else if(_){for(var f=u.charCodeAt(0)+1,h=d.charCodeAt(0),m=f;h>m;m++)l.push(String.fromCharCode(m));l.push(d),_=null,u=null}else l.push(d)}if($=l,o=$.length,s)for(var p=0;o>p;p++)n[$[p]]=!0;else{if(i>0){for(var g=[],v=null,_=!1,p=0;i>p;p++){var d=a[p];if(null==u)u=d,g.push(d);else if("-"===d)"-"===v?(g.push("-"),g.push("-")):p==i-1?g.push("-"):_=!0;else if(_){for(var f=u.charCodeAt(0)+1,h=d.charCodeAt(0),m=f;h>m;m++)g.push(String.fromCharCode(m));g.push(d),_=null,u=null}else g.push(d)}a=g,i=a.length}var b=o-i;if(b>0)for(var y=i>0?a[i-1]:"",p=0;b>p;p++)a.push(y);for(var p=0;o>p;p++)n[$[p]]=a[p]}for(var x="",k=null,p=0,w=r.length;w>p;p++){var d=r.charAt(p),S=n[d];s?null==S?null==k&&(x+=c,k=!0):(x+=d,k=null):null!=S?(null==k||k!==S)&&(x+=S,k=S):(x+=d,k=null)}return x},def.$upcase=function(){var e=this;return e.toUpperCase()},def.$freeze=function(){var e=this;return e},def["$frozen?"]=function(){return!0},nil&&"frozen?"}(self,null),$opal.cdecl($scope,"Symbol",$scope.get("String"))},Opal.modules["corelib/string/inheritance"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e,n=e.nil,$=(e.breaker,e.slice),o=e.klass;return e.add_stubs(["$new","$allocate","$initialize","$to_proc","$__send__","$class","$clone","$respond_to?","$==","$inspect"]),function(t,$super){function r(){}var $=r=o(t,$super,"String",r),a=($.$$proto,$.$$scope);return e.defs($,"$inherited",function(e){var t=n;t=a.get("Class").$new(a.get("String").$$scope.get("Wrapper")),e.$$proto=t.$$proto,e.$$proto.$$class=e,e.$$alloc=t.$$alloc,e.$$parent=a.get("String").$$scope.get("Wrapper"),e.$allocate=t.$allocate,e.$new=t.$new}),n&&"inherited"}(t,null),function(t,$super){function r(){}var a,i,s,c,l=r=o(t,$super,"Wrapper",r),u=l.$$proto;return l.$$scope,u.literal=n,e.defs(l,"$allocate",a=function(t){var $=this,o=(a.$$p,n);return null==t&&(t=""),a.$$p=null,o=e.find_super_dispatcher($,"allocate",a,null,r).apply($,[]),o.literal=t,o}),e.defs(l,"$new",i=function(e){var t,r,o=this,a=i.$$p,s=a||n,c=n;return e=$.call(arguments,0),i.$$p=null,c=o.$allocate(),(t=(r=c).$initialize,t.$$p=s.$to_proc(),t).apply(r,[].concat(e)),c}),e.defs(l,"$[]",function(e){var t=this;return e=$.call(arguments,0),t.$allocate(e)}),u.$initialize=function(e){var t=this;return null==e&&(e=""),t.literal=e},u.$method_missing=s=function(e){var t,r,o=this,a=s.$$p,i=a||n,c=n;return e=$.call(arguments,0),s.$$p=null,c=(t=(r=o.literal).$__send__,t.$$p=i.$to_proc(),t).apply(r,[].concat(e)),(t=null!=c.$$is_string)===n||t.$$is_boolean&&1!=t?c:(t=c==o.literal)===n||t.$$is_boolean&&1!=t?o.$class().$allocate(c):o},u.$initialize_copy=function(e){var t=this;return t.literal=e.literal.$clone()},u["$respond_to?"]=c=function(t){var r,o=$.call(arguments,0),a=this,i=c.$$p;return c.$$p=null,(r=e.find_super_dispatcher(a,"respond_to?",c,i).apply(a,o))!==!1&&r!==n?r:a.literal["$respond_to?"](t)},u["$=="]=function(e){var t=this;return t.literal["$=="](e)},e.defn(l,"$eql?",u["$=="]),e.defn(l,"$===",u["$=="]),u.$to_s=function(){var e=this;return e.literal},u.$to_str=function(){var e=this;return e},u.$inspect=function(){var e=this;return e.literal.$inspect()},n&&"inspect"}(r.get("String"),null)},Opal.modules["corelib/match_data"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.klass,o=e.gvars;return e.add_stubs(["$attr_reader","$pre_match","$post_match","$[]","$===","$!","$==","$raise","$inspect"]),function(t,$super){function a(){}var i,s=a=$(t,$super,"MatchData",a),c=s.$$proto,l=s.$$scope;return c.string=c.matches=c.begin=r,s.$attr_reader("post_match","pre_match","regexp","string"),e.defs(s,"$new",i=function(t,n){var $=this,s=(i.$$p,r);return i.$$p=null,s=e.find_super_dispatcher($,"new",i,null,a).apply($,[t,n]),o["`"]=s.$pre_match(),o["'"]=s.$post_match(),o["~"]=s,s}),c.$initialize=function(e,t){var n=this;n.regexp=e,n.begin=t.index,n.string=t.input,n.pre_match=n.string.substr(0,e.lastIndex-t[0].length),n.post_match=n.string.substr(e.lastIndex),n.matches=[];for(var $=0,o=t.length;o>$;$++){var a=t[$];null==a?n.matches.push(r):n.matches.push(a)}},c["$[]"]=function(e){var t,r=this;return e=n.call(arguments,0),(t=r.matches)["$[]"].apply(t,[].concat(e))},c["$=="]=function(e){var t,n,$,o,a=this;return(t=l.get("MatchData")["$==="](e))===r||t.$$is_boolean&&1!=t?!1:(o=a.string==e.string,$=o!==!1&&o!==r?a.regexp==e.regexp:o,n=$!==!1&&$!==r?a.pre_match==e.pre_match:$,t=n!==!1&&n!==r?a.post_match==e.post_match:n,t!==!1&&t!==r?a.begin==e.begin:t)},c.$begin=function(e){var t,n,$=this;return n=e["$=="](0)["$!"](),(t=n!==!1&&n!==r?e["$=="](1)["$!"]():n)===r||t.$$is_boolean&&1!=t||$.$raise(l.get("ArgumentError"),"MatchData#begin only supports 0th element"),$.begin},c.$captures=function(){var e=this;return e.matches.slice(1)},c.$inspect=function(){for(var e=this,t="#<MatchData "+e.matches[0].$inspect(),r=1,n=e.matches.length;n>r;r++)t+=" "+r+":"+e.matches[r].$inspect();return t+">"},c.$length=function(){var e=this;return e.matches.length},e.defn(s,"$size",c.$length),c.$to_a=function(){var e=this;return e.matches},c.$to_s=function(){var e=this;return e.matches[0]},c.$values_at=function(e){var t=this;e=n.call(arguments,0);for(var $=[],o=t.matches.length,a=0,i=e.length;i>a;a++){var s=e[a];s>=0?$.push(t.matches[s]):(s+=o,s>0?$.push(t.matches[s]):$.push(r))}return $},r&&"values_at"}(t,null)},Opal.modules["corelib/numeric"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e,n=e.nil,$=e.breaker,o=e.slice,a=e.klass;return e.add_stubs(["$require","$include","$coerce","$===","$raise","$class","$__send__","$send_coerced","$coerce_to!","$-@","$**","$-","$respond_to?","$==","$enum_for","$gcd","$lcm","$<","$>","$floor","$/","$%"]),t.$require("corelib/comparable"),function(t,$super){function r(){}var i,s,c,l,u,_,p=r=a(t,$super,"Numeric",r),d=p.$$proto,f=p.$$scope;return p.$include(f.get("Comparable")),d.$$is_number=!0,d.$coerce=function(e,t){var r=this,$=n;null==t&&(t="operation");try{return e.$$is_number?[r,e]:e.$coerce(r)}catch(o){return function(){return $=t,"operation"["$==="]($)?r.$raise(f.get("TypeError"),""+e.$class()+" can't be coerced into Numeric"):"comparison"["$==="]($)?r.$raise(f.get("ArgumentError"),"comparison of "+r.$class()+" with "+e.$class()+" failed"):n}()}},d.$send_coerced=function(t,r){var $,o=this,a=n,i=n,s=n,c=n;return a=function(){return i=t,"+"["$==="](i)||"-"["$==="](i)||"*"["$==="](i)||"/"["$==="](i)||"%"["$==="](i)||"&"["$==="](i)||"|"["$==="](i)||"^"["$==="](i)||"**"["$==="](i)?"operation":">"["$==="](i)||">="["$==="](i)||"<"["$==="](i)||"<="["$==="](i)||"<=>"["$==="](i)?"comparison":n}(),$=e.to_ary(o.$coerce(r,a)),s=null==$[0]?n:$[0],c=null==$[1]?n:$[1],s.$__send__(t,c)},d["$+"]=function(e){var t=this;return e.$$is_number?t+e:t.$send_coerced("+",e)},d["$-"]=function(e){var t=this;return e.$$is_number?t-e:t.$send_coerced("-",e)},d["$*"]=function(e){var t=this;return e.$$is_number?t*e:t.$send_coerced("*",e)},d["$/"]=function(e){var t=this;return e.$$is_number?t/e:t.$send_coerced("/",e)},d["$%"]=function(e){var t=this;return e.$$is_number?0>e||0>t?(t%e+e)%e:t%e:t.$send_coerced("%",e)},d["$&"]=function(e){var t=this;return e.$$is_number?t&e:t.$send_coerced("&",e)},d["$|"]=function(e){var t=this;return e.$$is_number?t|e:t.$send_coerced("|",e)},d["$^"]=function(e){var t=this;return e.$$is_number?t^e:t.$send_coerced("^",e)},d["$<"]=function(e){var t=this;return e.$$is_number?e>t:t.$send_coerced("<",e)},d["$<="]=function(e){var t=this;return e.$$is_number?e>=t:t.$send_coerced("<=",e)},d["$>"]=function(e){var t=this;return e.$$is_number?t>e:t.$send_coerced(">",e)},d["$>="]=function(e){var t=this;return e.$$is_number?t>=e:t.$send_coerced(">=",e)},d["$<=>"]=function(t){var r=this;try{return t.$$is_number?r>t?1:t>r?-1:0:r.$send_coerced("<=>",t)}catch($){if(e.$rescue($,[f.get("ArgumentError")]))return n;throw $}},d["$<<"]=function(e){var t=this;return e=f.get("Opal")["$coerce_to!"](e,f.get("Integer"),"to_int"),e>0?t<<e:t>>-e},d["$>>"]=function(e){var t=this;return e=f.get("Opal")["$coerce_to!"](e,f.get("Integer"),"to_int"),e>0?t>>e:t<<-e},d["$[]"]=function(e){var t=this,r=n,$=n;return e=f.get("Opal")["$coerce_to!"](e,f.get("Integer"),"to_int"),r=2["$**"](30)["$-@"](),$=2["$**"](30)["$-"](1),r>e||e>$?0:(t>>e)%2},d["$+@"]=function(){var e=this;return+e},d["$-@"]=function(){var e=this;return-e},d["$~"]=function(){var e=this;return~e},d["$**"]=function(e){var t=this;return e.$$is_number?Math.pow(t,e):t.$send_coerced("**",e)},d["$=="]=function(e){var t=this;return e.$$is_number?t==Number(e):e["$respond_to?"]("==")?e["$=="](t):!1},d.$abs=function(){var e=this;return Math.abs(e)},d.$ceil=function(){var e=this;return Math.ceil(e)},d.$chr=function(){var e=this;return String.fromCharCode(e)},d.$conj=function(){var e=this;return e},e.defn(p,"$conjugate",d.$conj),d.$downto=i=function(e){var t=this,r=i.$$p,o=r||n;if(i.$$p=null,o===!1||o===n)return t.$enum_for("downto",e);for(var a=t;a>=e;a--)if(o(a)===$)return $.$v;return t},e.defn(p,"$eql?",d["$=="]),e.defn(p,"$equal?",d["$=="]),d["$even?"]=function(){var e=this;return 0===e%2},d.$floor=function(){var e=this;return Math.floor(e)},d.$gcd=function(e){var t,r=this;((t=f.get("Integer")["$==="](e))===n||t.$$is_boolean&&1!=t)&&r.$raise(f.get("TypeError"),"not an integer");for(var $=Math.abs(r),o=Math.abs(e);$>0;){var a=$;$=o%$,o=a}return o},d.$gcdlcm=function(){var e=this;return[e.$gcd(),e.$lcm()]},d.$hash=function(){var e=this;return e.toString()},d["$integer?"]=function(){var e=this;return 0===e%1},d["$is_a?"]=s=function(t){var r,$,a=o.call(arguments,0),i=this,c=s.$$p;return s.$$p=null,(r=($=t["$=="](f.get("Fixnum")))?f.get("Integer")["$==="](i):$)===n||r.$$is_boolean&&1!=r?(r=($=t["$=="](f.get("Integer")))?f.get("Integer")["$==="](i):$)===n||r.$$is_boolean&&1!=r?(r=($=t["$=="](f.get("Float")))?f.get("Float")["$==="](i):$)===n||r.$$is_boolean&&1!=r?e.find_super_dispatcher(i,"is_a?",s,c).apply(i,a):!0:!0:!0},e.defn(p,"$kind_of?",d["$is_a?"]),d["$instance_of?"]=c=function(t){var r,$,a=o.call(arguments,0),i=this,s=c.$$p;return c.$$p=null,(r=($=t["$=="](f.get("Fixnum")))?f.get("Integer")["$==="](i):$)===n||r.$$is_boolean&&1!=r?(r=($=t["$=="](f.get("Integer")))?f.get("Integer")["$==="](i):$)===n||r.$$is_boolean&&1!=r?(r=($=t["$=="](f.get("Float")))?f.get("Float")["$==="](i):$)===n||r.$$is_boolean&&1!=r?e.find_super_dispatcher(i,"instance_of?",c,s).apply(i,a):!0:!0:!0},d.$lcm=function(e){var t,r=this;return((t=f.get("Integer")["$==="](e))===n||t.$$is_boolean&&1!=t)&&r.$raise(f.get("TypeError"),"not an integer"),0==r||0==e?0:Math.abs(r*e/r.$gcd(e))},e.defn(p,"$magnitude",d.$abs),e.defn(p,"$modulo",d["$%"]),d.$next=function(){var e=this;return e+1},d["$nonzero?"]=function(){var e=this;return 0==e?n:e},d["$odd?"]=function(){var e=this;return 0!==e%2},d.$ord=function(){var e=this;return e},d.$pred=function(){var e=this;return e-1},d.$round=function(){var e=this;return Math.round(e)},d.$step=l=function(e,t){var r,$=this,o=l.$$p,a=o||n;if(null==t&&(t=1),l.$$p=null,a===!1||a===n)return $.$enum_for("step",e,t);(r=0==t)===n||r.$$is_boolean&&1!=r||$.$raise(f.get("ArgumentError"),"step cannot be 0");var i=$;if(t>0)for(;e>=i;)a(i),i+=t;else for(;i>=e;)a(i),i+=t;return $},e.defn(p,"$succ",d.$next),d.$times=u=function(){var e=this,t=u.$$p,r=t||n;if(u.$$p=null,r===!1||r===n)return e.$enum_for("times");for(var o=0;e>o;o++)if(r(o)===$)return $.$v;return e},d.$to_f=function(){var e=this;return e},d.$to_i=function(){var e=this;return parseInt(e)},e.defn(p,"$to_int",d.$to_i),d.$to_s=function(e){var t,r,$=this;return null==e&&(e=10),(t=(r=e["$<"](2))!==!1&&r!==n?r:e["$>"](36))===n||t.$$is_boolean&&1!=t||$.$raise(f.get("ArgumentError"),"base must be between 2 and 36"),$.toString(e)},e.defn(p,"$inspect",d.$to_s),d.$divmod=function(e){var t=this,r=n,$=n;return r=t["$/"](e).$floor(),$=t["$%"](e),[r,$]},d.$upto=_=function(e){var t=this,r=_.$$p,o=r||n;if(_.$$p=null,o===!1||o===n)return t.$enum_for("upto",e);for(var a=t;e>=a;a++)if(o(a)===$)return $.$v;return t},d["$zero?"]=function(){var e=this;return 0==e},d.$size=function(){return 4},d["$nan?"]=function(){var e=this;return isNaN(e)},d["$finite?"]=function(){var e=this;return 1/0!=e&&e!=-1/0},d["$infinite?"]=function(){var e=this;return 1/0==e?1:e==-1/0?-1:n},d["$positive?"]=function(){var e=this;return 1/e>0},d["$negative?"]=function(){var e=this;return 0>1/e},n&&"negative?"}(t,null),e.cdecl(r,"Fixnum",r.get("Numeric")),function(t,$super){function r(){}var $=r=a(t,$super,"Integer",r);return $.$$proto,$.$$scope,e.defs($,"$===",function(e){return e.$$is_number?0===e%1:!1}),n&&"==="}(t,r.get("Numeric")),function(t,$super){function r(){}var $,o=r=a(t,$super,"Float",r),i=(o.$$proto,o.$$scope);return e.defs(o,"$===",function(e){return!!e.$$is_number}),e.cdecl(i,"INFINITY",1/0),e.cdecl(i,"NAN",0/0),($="undefined"!=typeof Number.EPSILON)===n||$.$$is_boolean&&1!=$?e.cdecl(i,"EPSILON",2.220446049250313e-16):e.cdecl(i,"EPSILON",Number.EPSILON)}(t,r.get("Numeric"))},Opal.modules["corelib/complex"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e,n=e.nil,$=(e.breaker,e.slice,e.klass);return e.add_stubs([]),function(e,$super){function t(){}var r=t=$(e,$super,"Complex",t);return r.$$proto,r.$$scope,n}(t,r.get("Numeric"))},Opal.modules["corelib/rational"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e,n=e.nil,$=(e.breaker,e.slice,e.klass);return e.add_stubs([]),function(e,$super){function t(){}var r=t=$(e,$super,"Rational",t);return r.$$proto,r.$$scope,n}(t,r.get("Numeric"))},Opal.modules["corelib/proc"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e.nil,n=e.breaker,$=e.slice,o=e.klass;return e.add_stubs(["$raise"]),function(t,$super){function a(){}var i,s,c=a=o(t,$super,"Proc",a),l=c.$$proto,u=c.$$scope;return l.$$is_proc=!0,l.$$is_lambda=!1,e.defs(c,"$new",i=function(){var e=this,t=i.$$p,n=t||r;return i.$$p=null,n!==!1&&n!==r||e.$raise(u.get("ArgumentError"),"tried to create a Proc object without a block"),n}),l.$call=s=function(e){var t=this,o=s.$$p,a=o||r;e=$.call(arguments,0),s.$$p=null,a!==r&&(t.$$p=a);var i;return i=t.$$is_lambda?t.apply(null,e):Opal.$yieldX(t,e),i===n?n.$v:i},e.defn(c,"$[]",l.$call),l.$to_proc=function(){var e=this;return e},l["$lambda?"]=function(){var e=this;return!!e.$$is_lambda},l.$arity=function(){var e=this;return e.length},r&&"arity"}(t,null)},Opal.modules["corelib/method"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.klass;return e.add_stubs(["$attr_reader","$class","$arity","$new","$name"]),function(t,$super){function o(){}var a,i=o=$(t,$super,"Method",o),s=i.$$proto,c=i.$$scope;return s.method=s.receiver=s.owner=s.name=s.obj=r,i.$attr_reader("owner","receiver","name"),s.$initialize=function(e,t,r){var n=this;return n.receiver=e,n.owner=e.$class(),n.name=r,n.method=t},s.$arity=function(){var e=this;return e.method.$arity()},s.$call=a=function(e){var t=this,$=a.$$p,o=$||r;return e=n.call(arguments,0),a.$$p=null,t.method.$$p=o,t.method.apply(t.receiver,e)},e.defn(i,"$[]",s.$call),s.$unbind=function(){var e=this;return c.get("UnboundMethod").$new(e.owner,e.method,e.name)},s.$to_proc=function(){var e=this;return e.method},s.$inspect=function(){var e=this;return"#<Method: "+e.obj.$class().$name()+"#"+e.name+"}>"},r&&"inspect"}(t,null),function(e,$super){function t(){}var n=t=$(e,$super,"UnboundMethod",t),o=n.$$proto,a=n.$$scope;return o.method=o.name=o.owner=r,n.$attr_reader("owner","name"),o.$initialize=function(e,t,r){var n=this;return n.owner=e,n.method=t,n.name=r},o.$arity=function(){var e=this;return e.method.$arity()},o.$bind=function(e){var t=this;return a.get("Method").$new(e,t.method,t.name)},o.$inspect=function(){var e=this;return"#<UnboundMethod: "+e.owner.$name()+"#"+e.name+">"},r&&"inspect"}(t,null)},Opal.modules["corelib/range"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e.nil,n=e.breaker,$=e.slice,o=e.klass;return e.add_stubs(["$require","$include","$attr_reader","$<=>","$raise","$include?","$<=","$<","$enum_for","$succ","$!","$==","$===","$exclude_end?","$eql?","$begin","$end","$-","$abs","$to_i","$inspect"]),t.$require("corelib/enumerable"),function(t,$super){function a(){}var i,s,c,l=a=o(t,$super,"Range",a),u=l.$$proto,_=l.$$scope;return u.begin=u.exclude=u.end=r,l.$include(_.get("Enumerable")),u.$$is_range=!0,l.$attr_reader("begin","end"),u.$initialize=function(e,t,n){var $,o=this;return null==n&&(n=!1),(($=e["$<=>"](t))===r||$.$$is_boolean&&1!=$)&&o.$raise(_.get("ArgumentError")),o.begin=e,o.end=t,o.exclude=n},u["$=="]=function(e){var t=this;return e.$$is_range?t.exclude===e.exclude&&t.begin==e.begin&&t.end==e.end:!1},u["$==="]=function(e){var t=this;return t["$include?"](e)},u["$cover?"]=function(e){var t,n,$=this;return(t=$.begin["$<="](e))?function(){return(n=$.exclude)===r||n.$$is_boolean&&1!=n?e["$<="]($.end):e["$<"]($.end)}():t},u.$each=i=function(){var t,$,o=this,a=i.$$p,s=a||r,c=r,l=r;if(i.$$p=null,s===r)return o.$enum_for("each");for(c=o.begin,l=o.end;c["$<"](l);){if(e.$yield1(s,c)===n)return n.$v;c=c.$succ()}return $=o.exclude["$!"](),(t=$!==!1&&$!==r?c["$=="](l):$)===r||t.$$is_boolean&&1!=t||e.$yield1(s,c)!==n?o:n.$v},u["$eql?"]=function(e){var t,n,$=this;return(t=_.get("Range")["$==="](e))===r||t.$$is_boolean&&1!=t?!1:(n=$.exclude["$==="](e["$exclude_end?"]()),t=n!==!1&&n!==r?$.begin["$eql?"](e.$begin()):n,t!==!1&&t!==r?$.end["$eql?"](e.$end()):t)},u["$exclude_end?"]=function(){var e=this;return e.exclude},e.defn(l,"$first",u.$begin),e.defn(l,"$include?",u["$cover?"]),e.defn(l,"$last",u.$end),u.$max=s=function(){var t=$.call(arguments,0),n=this,o=s.$$p,a=o||r;return s.$$p=null,a!==r?e.find_super_dispatcher(n,"max",s,o).apply(n,t):n.exclude?n.end-1:n.end},e.defn(l,"$member?",u["$cover?"]),u.$min=c=function(){var t=$.call(arguments,0),n=this,o=c.$$p,a=o||r;return c.$$p=null,a!==r?e.find_super_dispatcher(n,"min",c,o).apply(n,t):n.begin},e.defn(l,"$member?",u["$include?"]),u.$size=function(){var e,t,n=this,$=r,o=r,a=r;return $=n.begin,o=n.end,(e=n.exclude)===r||e.$$is_boolean&&1!=e||(o=o["$-"](1)),t=_.get("Numeric")["$==="]($),(e=t!==!1&&t!==r?_.get("Numeric")["$==="](o):t)===r||e.$$is_boolean&&1!=e?r:o["$<"]($)?0:(a=_.get("Float").$$scope.get("INFINITY"),(e=(t=a["$=="]($.$abs()))!==!1&&t!==r?t:o.$abs()["$=="](a))===r||e.$$is_boolean&&1!=e?(Math.abs(o-$)+1).$to_i():a)},u.$step=function(e){var t=this;return null==e&&(e=1),t.$raise(_.get("NotImplementedError"))},u.$to_s=function(){var e=this;return e.begin.$inspect()+(e.exclude?"...":"..")+e.end.$inspect()},e.defn(l,"$inspect",u.$to_s)}(t,null)},Opal.modules["corelib/time"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.klass;return e.add_stubs(["$require","$include","$kind_of?","$to_i","$coerce_to","$between?","$raise","$new","$compact","$nil?","$===","$<=>","$to_f","$strftime","$is_a?","$zero?","$wday","$utc?","$warn","$year","$mon","$day","$yday","$hour","$min","$sec","$rjust","$ljust","$zone","$month","$isdst"]),t.$require("corelib/comparable"),function(t,$super){function o(){}var a=o=$(t,$super,"Time",o),i=a.$$proto,s=a.$$scope;i.tz_offset=r,a.$include(s.get("Comparable"));var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],l=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],_=["January","February","March","April","May","June","July","August","September","October","November","December"];return e.defs(a,"$at",function(e,t){return null==t&&(t=0),new Date(1e3*e+t)}),e.defs(a,"$new",function(e,t,r,n,$,o){switch(arguments.length){case 1:return new Date(e,0);case 2:return new Date(e,t-1);case 3:return new Date(e,t-1,r);case 4:return new Date(e,t-1,r,n);case 5:return new Date(e,t-1,r,n,$);case 6:return new Date(e,t-1,r,n,$,o);case 7:return new Date(e,t-1,r,n,$,o);default:return new Date}}),e.defs(a,"$local",function(e,t,$,o,a,i,c){var l,u=this;if(null==t&&(t=r),null==$&&($=r),null==o&&(o=r),null==a&&(a=r),null==i&&(i=r),null==c&&(c=r),(l=10===arguments.length)!==r&&(!l.$$is_boolean||1==l)){var _=n.call(arguments).reverse();i=_[9],a=_[8],o=_[7],$=_[6],t=_[5],e=_[4]}return e=function(){return(l=e["$kind_of?"](s.get("String")))===r||l.$$is_boolean&&1!=l?s.get("Opal").$coerce_to(e,s.get("Integer"),"to_int"):e.$to_i()}(),t=function(){return(l=t["$kind_of?"](s.get("String")))===r||l.$$is_boolean&&1!=l?s.get("Opal").$coerce_to((l=t)!==!1&&l!==r?l:1,s.get("Integer"),"to_int"):t.$to_i()}(),((l=t["$between?"](1,12))===r||l.$$is_boolean&&1!=l)&&u.$raise(s.get("ArgumentError"),"month out of range: "+t),$=function(){return(l=$["$kind_of?"](s.get("String")))===r||l.$$is_boolean&&1!=l?s.get("Opal").$coerce_to((l=$)!==!1&&l!==r?l:1,s.get("Integer"),"to_int"):$.$to_i()}(),((l=$["$between?"](1,31))===r||l.$$is_boolean&&1!=l)&&u.$raise(s.get("ArgumentError"),"day out of range: "+$),o=function(){return(l=o["$kind_of?"](s.get("String")))===r||l.$$is_boolean&&1!=l?s.get("Opal").$coerce_to((l=o)!==!1&&l!==r?l:0,s.get("Integer"),"to_int"):o.$to_i()}(),((l=o["$between?"](0,24))===r||l.$$is_boolean&&1!=l)&&u.$raise(s.get("ArgumentError"),"hour out of range: "+o),a=function(){return(l=a["$kind_of?"](s.get("String")))===r||l.$$is_boolean&&1!=l?s.get("Opal").$coerce_to((l=a)!==!1&&l!==r?l:0,s.get("Integer"),"to_int"):a.$to_i()}(),((l=a["$between?"](0,59))===r||l.$$is_boolean&&1!=l)&&u.$raise(s.get("ArgumentError"),"minute out of range: "+a),i=function(){return(l=i["$kind_of?"](s.get("String")))===r||l.$$is_boolean&&1!=l?s.get("Opal").$coerce_to((l=i)!==!1&&l!==r?l:0,s.get("Integer"),"to_int"):i.$to_i()
}(),((l=i["$between?"](0,59))===r||l.$$is_boolean&&1!=l)&&u.$raise(s.get("ArgumentError"),"second out of range: "+i),(l=u).$new.apply(l,[].concat([e,t,$,o,a,i].$compact()))}),e.defs(a,"$gm",function(e,t,n,$,o,a){var i,c=this;(i=e["$nil?"]())===r||i.$$is_boolean&&1!=i||c.$raise(s.get("TypeError"),"missing year (got nil)"),(t>12||n>31||$>24||o>59||a>59)&&c.$raise(s.get("ArgumentError"));var l=new Date(Date.UTC(e,(t||1)-1,n||1,$||0,o||0,a||0));return l.tz_offset=0,l}),function(e){return e.$$scope,e.$$proto,e.$$proto.$mktime=e.$$proto.$local,e.$$proto.$utc=e.$$proto.$gm}(a.$singleton_class()),e.defs(a,"$now",function(){return new Date}),i["$+"]=function(e){var t,n=this;(t=s.get("Time")["$==="](e))===r||t.$$is_boolean&&1!=t||n.$raise(s.get("TypeError"),"time + time?"),e=s.get("Opal").$coerce_to(e,s.get("Integer"),"to_int");var $=new Date(n.getTime()+1e3*e);return $.tz_offset=n.tz_offset,$},i["$-"]=function(e){var t,n=this;if((t=s.get("Time")["$==="](e))!==r&&(!t.$$is_boolean||1==t))return(n.getTime()-e.getTime())/1e3;e=s.get("Opal").$coerce_to(e,s.get("Integer"),"to_int");var $=new Date(n.getTime()-1e3*e);return $.tz_offset=n.tz_offset,$},i["$<=>"]=function(e){var t=this;return t.$to_f()["$<=>"](e.$to_f())},i["$=="]=function(e){var t=this;return t.$to_f()===e.$to_f()},i.$asctime=function(){var e=this;return e.$strftime("%a %b %e %H:%M:%S %Y")},e.defn(a,"$ctime",i.$asctime),i.$day=function(){var e=this;return 0===e.tz_offset?e.getUTCDate():e.getDate()},i.$yday=function(){var e=this,t=new Date(e.getFullYear(),0,1);return Math.ceil((e-t)/864e5)},i.$isdst=function(){var e=this;return e.$raise(s.get("NotImplementedError"))},i["$eql?"]=function(e){var t,n=this;return t=e["$is_a?"](s.get("Time")),t!==!1&&t!==r?n["$<=>"](e)["$zero?"]():t},i["$friday?"]=function(){var e=this;return 5==e.$wday()},i.$hour=function(){var e=this;return 0===e.tz_offset?e.getUTCHours():e.getHours()},i.$inspect=function(){var e,t=this;return(e=t["$utc?"]())===r||e.$$is_boolean&&1!=e?t.$strftime("%Y-%m-%d %H:%M:%S %z"):t.$strftime("%Y-%m-%d %H:%M:%S UTC")},e.defn(a,"$mday",i.$day),i.$min=function(){var e=this;return 0===e.tz_offset?e.getUTCMinutes():e.getMinutes()},i.$mon=function(){var e=this;return 0===e.tz_offset?e.getUTCMonth()+1:e.getMonth()+1},i["$monday?"]=function(){var e=this;return 1==e.$wday()},e.defn(a,"$month",i.$mon),i["$saturday?"]=function(){var e=this;return 6==e.$wday()},i.$sec=function(){var e=this;return 0===e.tz_offset?e.getUTCSeconds():e.getSeconds()},i.$usec=function(){var e=this;return e.$warn("Microseconds are not supported"),0},i.$zone=function(){var e,t=this,r=t.toString();return e=-1==r.indexOf("(")?r.match(/[A-Z]{3,4}/)[0]:r.match(/\([^)]+\)/)[0].match(/[A-Z]/g).join(""),"GMT"==e&&/(GMT\W*\d{4})/.test(r)?RegExp.$1:e},i.$getgm=function(){var e=this,t=new Date(e.getTime());return t.tz_offset=0,t},i["$gmt?"]=function(){var e=this;return 0===e.tz_offset},i.$gmt_offset=function(){var e=this;return 60*-e.getTimezoneOffset()},i.$strftime=function(e){var t=this;return e.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(e,r,n,$,o){var a="",n=parseInt(n),i=-1!==r.indexOf("0"),s=-1===r.indexOf("-"),p=-1!==r.indexOf("_"),d=-1!==r.indexOf("^"),f=-1!==r.indexOf("#"),h=(r.match(":")||[]).length;switch(i&&p&&(r.indexOf("0")<r.indexOf("_")?i=!1:p=!1),o){case"Y":a+=t.$year();break;case"C":i=!p,a+=Match.round(t.$year()/100);break;case"y":i=!p,a+=t.$year()%100;break;case"m":i=!p,a+=t.$mon();break;case"B":a+=_[t.$mon()-1];break;case"b":case"h":p=!i,a+=u[t.$mon()-1];break;case"d":i=!p,a+=t.$day();break;case"e":p=!i,a+=t.$day();break;case"j":a+=t.$yday();break;case"H":i=!p,a+=t.$hour();break;case"k":p=!i,a+=t.$hour();break;case"I":i=!p,a+=t.$hour()%12||12;break;case"l":p=!i,a+=t.$hour()%12||12;break;case"P":a+=t.$hour()>=12?"pm":"am";break;case"p":a+=t.$hour()>=12?"PM":"AM";break;case"M":i=!p,a+=t.$min();break;case"S":i=!p,a+=t.$sec();break;case"L":i=!p,n=isNaN(n)?3:n,a+=t.getMilliseconds();break;case"N":n=isNaN(n)?9:n,a+=t.getMilliseconds().toString().$rjust(3,"0"),a=a.$ljust(n,"0");break;case"z":var m=t.getTimezoneOffset(),g=Math.floor(Math.abs(m)/60),v=Math.abs(m)%60;a+=0>m?"+":"-",a+=10>g?"0":"",a+=g,h>0&&(a+=":"),a+=10>v?"0":"",a+=v,h>1&&(a+=":00");break;case"Z":a+=t.$zone();break;case"A":a+=c[t.$wday()];break;case"a":a+=l[t.$wday()];break;case"u":a+=t.$wday()+1;break;case"w":a+=t.$wday();break;case"s":a+=t.$to_i();break;case"n":a+="\n";break;case"t":a+="	";break;case"%":a+="%";break;case"c":a+=t.$strftime("%a %b %e %T %Y");break;case"D":case"x":a+=t.$strftime("%m/%d/%y");break;case"F":a+=t.$strftime("%Y-%m-%d");break;case"v":a+=t.$strftime("%e-%^b-%4Y");break;case"r":a+=t.$strftime("%I:%M:%S %p");break;case"R":a+=t.$strftime("%H:%M");break;case"T":case"X":a+=t.$strftime("%H:%M:%S");break;default:return e}return d&&(a=a.toUpperCase()),f&&(a=a.replace(/[A-Z]/,function(e){e.toLowerCase()}).replace(/[a-z]/,function(e){e.toUpperCase()})),s&&(i||p)&&(a=a.$rjust(isNaN(n)?2:n,p?" ":"0")),a})},i["$sunday?"]=function(){var e=this;return 0==e.$wday()},i["$thursday?"]=function(){var e=this;return 4==e.$wday()},i.$to_a=function(){var e=this;return[e.$sec(),e.$min(),e.$hour(),e.$day(),e.$month(),e.$year(),e.$wday(),e.$yday(),e.$isdst(),e.$zone()]},i.$to_f=function(){var e=this;return e.getTime()/1e3},i.$to_i=function(){var e=this;return parseInt(e.getTime()/1e3)},e.defn(a,"$to_s",i.$inspect),i["$tuesday?"]=function(){var e=this;return 2==e.$wday()},e.defn(a,"$utc?",i["$gmt?"]),e.defn(a,"$utc_offset",i.$gmt_offset),i.$wday=function(){var e=this;return 0===e.tz_offset?e.getUTCDay():e.getDay()},i["$wednesday?"]=function(){var e=this;return 3==e.$wday()},i.$year=function(){var e=this;return 0===e.tz_offset?e.getUTCFullYear():e.getFullYear()},r&&"year"}(t,null)},Opal.modules["corelib/struct"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e.nil,n=e.breaker,$=e.slice,o=e.klass;return e.add_stubs(["$==","$[]","$upcase","$const_set","$new","$unshift","$each","$define_struct_attribute","$instance_eval","$to_proc","$raise","$<<","$members","$define_method","$instance_variable_get","$instance_variable_set","$include","$each_with_index","$class","$===","$>=","$size","$include?","$to_sym","$enum_for","$hash","$all?","$length","$map","$+","$name","$join","$inspect","$each_pair"]),function(t,$super){function a(){}var i,s,c,l=a=o(t,$super,"Struct",a),u=l.$$proto,_=l.$$scope;return e.defs(l,"$new",i=function(t,n){var o,s,c,l,u=$.call(arguments,0),p=this,d=i.$$p,f=d||r;return n=$.call(arguments,1),i.$$p=null,p["$=="](_.get("Struct"))?t["$[]"](0)["$=="](t["$[]"](0).$upcase())?_.get("Struct").$const_set(t,(o=p).$new.apply(o,[].concat(n))):(n.$unshift(t),(s=(c=_.get("Class")).$new,s.$$p=(l=function(){var e,t,$,o,a=l.$$s||this;return(e=(t=n).$each,e.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=r),t.$define_struct_attribute(e)},$.$$s=a,$),e).call(t),f!==!1&&f!==r?(e=(o=a).$instance_eval,e.$$p=f.$to_proc(),e).call(o):r},l.$$s=p,l),s).call(c,p)):e.find_super_dispatcher(p,"new",i,d,a).apply(p,u)}),e.defs(l,"$define_struct_attribute",function(e){var t,n,$,o,a,i=this;return i["$=="](_.get("Struct"))&&i.$raise(_.get("ArgumentError"),"you cannot define attributes to the Struct class"),i.$members()["$<<"](e),(t=(n=i).$define_method,t.$$p=($=function(){var t=$.$$s||this;return t.$instance_variable_get("@"+e)},$.$$s=i,$),t).call(n,e),(t=(o=i).$define_method,t.$$p=(a=function(t){var n=a.$$s||this;return null==t&&(t=r),n.$instance_variable_set("@"+e,t)},a.$$s=i,a),t).call(o,""+e+"=")}),e.defs(l,"$members",function(){var e,t=this;return null==t.members&&(t.members=r),t["$=="](_.get("Struct"))&&t.$raise(_.get("ArgumentError"),"the Struct class has no members"),(e=t.members)!==!1&&e!==r?e:t.members=[]}),e.defs(l,"$inherited",function(e){var t,n,$,o=this,a=r;return null==o.members&&(o.members=r),o["$=="](_.get("Struct"))?r:(a=o.members,(t=(n=e).$instance_eval,t.$$p=($=function(){var e=$.$$s||this;return e.members=a},$.$$s=o,$),t).call(n))}),function(e){return e.$$scope,e.$$proto,e.$$proto["$[]"]=e.$$proto.$new}(l.$singleton_class()),l.$include(_.get("Enumerable")),u.$initialize=function(e){var t,n,o,a=this;return e=$.call(arguments,0),(t=(n=a.$members()).$each_with_index,t.$$p=(o=function(t,n){var $=o.$$s||this;return null==t&&(t=r),null==n&&(n=r),$.$instance_variable_set("@"+t,e["$[]"](n))},o.$$s=a,o),t).call(n)},u.$members=function(){var e=this;return e.$class().$members()},u["$[]"]=function(e){var t,n=this;return(t=_.get("Integer")["$==="](e))===r||t.$$is_boolean&&1!=t?((t=n.$members()["$include?"](e.$to_sym()))===r||t.$$is_boolean&&1!=t)&&n.$raise(_.get("NameError"),"no member '"+e+"' in struct"):(e["$>="](n.$members().$size())&&n.$raise(_.get("IndexError"),"offset "+e+" too large for struct(size:"+n.$members().$size()+")"),e=n.$members()["$[]"](e)),n.$instance_variable_get("@"+e)},u["$[]="]=function(e,t){var n,$=this;return(n=_.get("Integer")["$==="](e))===r||n.$$is_boolean&&1!=n?((n=$.$members()["$include?"](e.$to_sym()))===r||n.$$is_boolean&&1!=n)&&$.$raise(_.get("NameError"),"no member '"+e+"' in struct"):(e["$>="]($.$members().$size())&&$.$raise(_.get("IndexError"),"offset "+e+" too large for struct(size:"+$.$members().$size()+")"),e=$.$members()["$[]"](e)),$.$instance_variable_set("@"+e,t)},u.$each=s=function(){var t,$,o,a=this,i=s.$$p,c=i||r;return s.$$p=null,c===r?a.$enum_for("each"):((t=($=a.$members()).$each,t.$$p=(o=function(t){var $,a=o.$$s||this;return null==t&&(t=r),$=e.$yield1(c,a["$[]"](t)),$===n?$:$},o.$$s=a,o),t).call($),a)},u.$each_pair=c=function(){var t,$,o,a=this,i=c.$$p,s=i||r;return c.$$p=null,s===r?a.$enum_for("each_pair"):((t=($=a.$members()).$each,t.$$p=(o=function(t){var $,a=o.$$s||this;return null==t&&(t=r),$=e.$yieldX(s,[t,a["$[]"](t)]),$===n?$:$},o.$$s=a,o),t).call($),a)},u["$eql?"]=function(e){var t,n,$,o,a=this;return(t=a.$hash()["$=="](e.$hash()))!==!1&&t!==r?t:(n=($=e.$each_with_index())["$all?"],n.$$p=(o=function(e,t){var n=o.$$s||this;return null==e&&(e=r),null==t&&(t=r),n["$[]"](n.$members()["$[]"](t))["$=="](e)},o.$$s=a,o),n).call($)},u.$length=function(){var e=this;return e.$members().$length()},e.defn(l,"$size",u.$length),u.$to_a=function(){var e,t,n,$=this;return(e=(t=$.$members()).$map,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=r),t["$[]"](e)},n.$$s=$,n),e).call(t)},e.defn(l,"$values",u.$to_a),u.$inspect=function(){var e,t,n,$=this,o=r;return o="#<struct ",$.$class()["$=="](_.get("Struct"))&&(o=o["$+"](""+$.$class().$name()+" ")),o=o["$+"]((e=(t=$.$each_pair()).$map,e.$$p=(n=function(e,t){return n.$$s||this,null==e&&(e=r),null==t&&(t=r),""+e+"="+t.$inspect()},n.$$s=$,n),e).call(t).$join(", ")),o=o["$+"](">")},e.defn(l,"$to_s",u.$inspect)}(t,null)},Opal.modules["corelib/io"]=function(e){e.dynamic_require_severity="error";var t,r,n=e.top,$=e,o=e.nil,a=(e.breaker,e.slice),i=e.klass,s=e.module,c=e.gvars;return null==c.stdout&&(c.stdout=o),null==c.stderr&&(c.stderr=o),e.add_stubs(["$attr_accessor","$size","$write","$join","$map","$String","$concat","$chomp","$getbyte","$getc","$raise","$new","$write_proc=","$extend"]),function(t,$super){function r(){}var n=r=i(t,$super,"IO",r),$=n.$$proto,l=n.$$scope;return e.cdecl(l,"SEEK_SET",0),e.cdecl(l,"SEEK_CUR",1),e.cdecl(l,"SEEK_END",2),n.$attr_accessor("write_proc"),$.$write=function(e){var t=this;return t.write_proc(e),e.$size()},function(t){var r=s(t,"Writable"),n=r.$$proto;r.$$scope,n["$<<"]=function(e){var t=this;return t.$write(e),t},n.$print=function(e){var t,r,n,$=this;return null==c[","]&&(c[","]=o),e=a.call(arguments,0),$.$write((t=(r=e).$map,t.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=o),t.$String(e)},n.$$s=$,n),t).call(r).$join(c[","])),o},n.$puts=function(e){var t,r,n,$=this,i=o;return null==c["/"]&&(c["/"]=o),e=a.call(arguments,0),i=c["/"],$.$write((t=(r=e).$map,t.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=o),t.$String(e).$chomp()},n.$$s=$,n),t).call(r).$concat([o]).$join(i)),o},e.donate(r,["$<<","$print","$puts"])}(n),function(t){var r=s(t,"Readable"),n=r.$$proto,$=r.$$scope;n.$readbyte=function(){var e=this;return e.$getbyte()},n.$readchar=function(){var e=this;return e.$getc()},n.$readline=function(e){var t=this;return null==c["/"]&&(c["/"]=o),null==e&&(e=c["/"]),t.$raise($.get("NotImplementedError"))},n.$readpartial=function(e,t){var r=this;return null==t&&(t=o),r.$raise($.get("NotImplementedError"))},e.donate(r,["$readbyte","$readchar","$readline","$readpartial"])}(n)}(n,null),e.cdecl($,"STDERR",c.stderr=$.get("IO").$new()),e.cdecl($,"STDIN",c.stdin=$.get("IO").$new()),e.cdecl($,"STDOUT",c.stdout=$.get("IO").$new()),t=["object"==typeof process?function(e){process.stdout.write(e)}:function(e){console.log(e)}],r=c.stdout,r["$write_proc="].apply(r,t),t[t.length-1],t=["object"==typeof process?function(e){process.stderr.write(e)}:function(e){console.warn(e)}],r=c.stderr,r["$write_proc="].apply(r,t),t[t.length-1],c.stdout.$extend($.get("IO").$$scope.get("Writable")),c.stderr.$extend($.get("IO").$$scope.get("Writable"))},Opal.modules["corelib/main"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e,n=e.nil;return e.breaker,e.slice,e.add_stubs(["$include"]),e.defs(t,"$to_s",function(){return"main"}),e.defs(t,"$include",function(e){return r.get("Object").$include(e)}),n&&"include"},Opal.modules["corelib/variables"]=function(e){e.dynamic_require_severity="error";var t=(e.top,e),r=e.nil,n=(e.breaker,e.slice,e.gvars),$=e.hash2;return e.add_stubs(["$new"]),n["&"]=n["~"]=n["`"]=n["'"]=r,n.LOADED_FEATURES=n['"']=Opal.loaded_features,n.LOAD_PATH=n[":"]=[],n["/"]="\n",n[","]=r,e.cdecl(t,"ARGV",[]),e.cdecl(t,"ARGF",t.get("Object").$new()),e.cdecl(t,"ENV",$([],{})),n.VERBOSE=!1,n.DEBUG=!1,n.SAFE=0,e.cdecl(t,"RUBY_PLATFORM","opal"),e.cdecl(t,"RUBY_ENGINE","opal"),e.cdecl(t,"RUBY_VERSION","2.1.1"),e.cdecl(t,"RUBY_ENGINE_VERSION","0.6.1"),e.cdecl(t,"RUBY_RELEASE_DATE","2014-04-15")},Opal.modules["corelib/dir"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e.nil,n=e.breaker,$=(e.slice,e.klass);return e.add_stubs(["$[]"]),function(t,$super){function o(){}var a=o=$(t,$super,"Dir",o);return a.$$proto,a.$$scope,function(t){var $=t.$$scope;return t.$$proto,t.$$proto.$chdir=TMP_1=function(t){var $,o=TMP_1.$$p,a=o||r,i=r;TMP_1.$$p=null;try{return i=e.current_dir,e.current_dir=t,$=e.$yieldX(a,[]),$===n?$:$}finally{e.current_dir=i}},t.$$proto.$pwd=function(){var t;return(t=e.current_dir)!==!1&&t!==r?t:"."},t.$$proto.$getwd=t.$$proto.$pwd,t.$$proto.$home=function(){var e;return(e=$.get("ENV")["$[]"]("HOME"))!==!1&&e!==r?e:"."},r&&"home"}(a.$singleton_class())}(t,null)},Opal.modules["corelib/file"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e,n=e.nil,$=(e.breaker,e.slice),o=e.klass,a=e.range;return e.add_stubs(["$join","$compact","$split","$==","$first","$[]=","$home","$each","$pop","$<<","$[]","$gsub","$find","$=~"]),function(t,$super){function r(){}var i=r=o(t,$super,"File",r),s=(i.$$proto,i.$$scope);return e.cdecl(s,"Separator",e.cdecl(s,"SEPARATOR","/")),function(e){var t=e.$$scope;return e.$$proto,e.$$proto.$expand_path=function(e,r){var $,o,a,i=this,s=n,c=n;return null==r&&(r=n),e=[r,e].$compact().$join(t.get("SEPARATOR")),s=e.$split(t.get("SEPARATOR")),c=[],s.$first()["$=="]("~")&&s["$[]="](0,t.get("Dir").$home()),($=(o=s).$each,$.$$p=(a=function(e){return a.$$s||this,null==e&&(e=n),e["$=="]("..")?c.$pop():c["$<<"](e)},a.$$s=i,a),$).call(o),c.$join(t.get("SEPARATOR"))},e.$$proto.$dirname=function(e){var t=this;return t.$split(e)["$[]"](a(0,-2,!1))},e.$$proto.$basename=function(e){var t=this;return t.$split(e)["$[]"](-1)},e.$$proto["$exist?"]=function(e){return null!=Opal.modules[e]},e.$$proto["$exists?"]=e.$$proto["$exist?"],e.$$proto["$directory?"]=function(e){var r,$,o,a=this,i=n,s=n;i=[];for(var c in Opal.modules)i.push(c);return e=e.$gsub(new RegExp("(^."+t.get("SEPARATOR")+"+|"+t.get("SEPARATOR")+"+$)")),s=(r=($=i).$find,r.$$p=(o=function(t){return o.$$s||this,null==t&&(t=n),t["$=~"](new RegExp("^"+e))},o.$$s=a,o),r).call($)},e.$$proto.$join=function(e){return e=$.call(arguments,0),e.$join(t.get("SEPARATOR")).$gsub(new RegExp(""+t.get("SEPARATOR")+"+"),t.get("SEPARATOR"))},e.$$proto.$split=function(e){return e.$split(t.get("SEPARATOR"))},n&&"split"}(i.$singleton_class())}(t,r.get("IO"))},Opal.modules.opal=function(e){e.dynamic_require_severity="error";var t=e.top;return e.nil,e.breaker,e.slice,e.add_stubs(["$require"]),t.$require("corelib/runtime"),t.$require("corelib/helpers"),t.$require("corelib/module"),t.$require("corelib/class"),t.$require("corelib/basic_object"),t.$require("corelib/kernel"),t.$require("corelib/nil_class"),t.$require("corelib/boolean"),t.$require("corelib/error"),t.$require("corelib/regexp"),t.$require("corelib/comparable"),t.$require("corelib/enumerable"),t.$require("corelib/enumerator"),t.$require("corelib/array"),t.$require("corelib/array/inheritance"),t.$require("corelib/hash"),t.$require("corelib/string"),t.$require("corelib/string/inheritance"),t.$require("corelib/match_data"),t.$require("corelib/numeric"),t.$require("corelib/complex"),t.$require("corelib/rational"),t.$require("corelib/proc"),t.$require("corelib/method"),t.$require("corelib/range"),t.$require("corelib/time"),t.$require("corelib/struct"),t.$require("corelib/io"),t.$require("corelib/main"),t.$require("corelib/variables"),t.$require("corelib/dir"),t.$require("corelib/file")},Opal.modules.file=function(e){e.dynamic_require_severity="error";var t=e.top;return e.nil,e.breaker,e.slice,e.add_stubs(["$warn"]),t.$warn("File is already part of corelib now, you don't need to require it anymore.")},Opal.modules.thread=function(e){e.dynamic_require_severity="error";var t=e.top,r=e,n=e.nil,$=e.breaker,o=e.slice,a=e.klass,i=e.hash2;return e.add_stubs(["$allocate","$core_initialize!","$current","$fail","$[]","$coerce_key_name","$[]=","$key?","$keys","$private","$coerce_to!","$public","$clear","$empty?","$size","$shift","$push","$locked?","$lock","$unlock"]),function(e,$super){function t(){}var r=t=a(e,$super,"ThreadError",t);return r.$$proto,r.$$scope,n}(t,r.get("StandardError")),function(t,$super){function r(){}var $=r=a(t,$super,"Thread",r),s=$.$$proto,c=$.$$scope;return s.fiber_locals=s.thread_locals=n,e.defs($,"$current",function(){var e,t=this;return null==t.current&&(t.current=n),((e=t.current)===n||e.$$is_boolean&&1!=e)&&(t.current=t.$allocate(),t.current["$core_initialize!"]()),t.current}),e.defs($,"$list",function(){var e=this;return[e.$current()]}),s.$initialize=function(e){var t=this;return e=o.call(arguments,0),t.$fail(c.get("NotImplementedError"),"Thread creation not available")},s["$[]"]=function(e){var t=this;return t.fiber_locals["$[]"](t.$coerce_key_name(e))},s["$[]="]=function(e,t){var r=this;return r.fiber_locals["$[]="](r.$coerce_key_name(e),t)},s["$key?"]=function(e){var t=this;return t.fiber_locals["$key?"](t.$coerce_key_name(e))},s.$keys=function(){var e=this;return e.fiber_locals.$keys()},s.$thread_variable_get=function(e){var t=this;return t.thread_locals["$[]"](t.$coerce_key_name(e))},s.$thread_variable_set=function(e,t){var r=this;return r.thread_locals["$[]="](r.$coerce_key_name(e),t)},s["$thread_variable?"]=function(e){var t=this;return t.thread_locals["$key?"](t.$coerce_key_name(e))},s.$thread_variables=function(){var e=this;return e.thread_locals.$keys()},$.$private(),s["$core_initialize!"]=function(){var e=this;return e.thread_locals=i([],{}),e.fiber_locals=i([],{})},s.$coerce_key_name=function(e){return c.get("Opal")["$coerce_to!"](e,c.get("String"),"to_s")},$.$public(),function(t,$super){function r(){}var $=r=a(t,$super,"Queue",r),o=$.$$proto,i=$.$$scope;return o.storage=n,o.$initialize=function(){var e=this;return e.$clear()},o.$clear=function(){var e=this;return e.storage=[]},o["$empty?"]=function(){var e=this;return e.storage["$empty?"]()},o.$size=function(){var e=this;return e.storage.$size()},e.defn($,"$length",o.$size),o.$pop=function(e){var t,r=this;return null==e&&(e=!1),(t=r["$empty?"]())===n||t.$$is_boolean&&1!=t||(e!==!1&&e!==n&&r.$fail(i.get("ThreadError"),"Queue empty"),r.$fail(i.get("ThreadError"),"Deadlock")),r.storage.$shift()},e.defn($,"$shift",o.$pop),e.defn($,"$deq",o.$pop),o.$push=function(e){var t=this;return t.storage.$push(e)},e.defn($,"$<<",o.$push),e.defn($,"$enq",o.$push)}($,null)}(t,null),e.cdecl(r,"Queue",r.get("Thread").$$scope.get("Queue")),function(t,$super){function r(){}var o,i=r=a(t,$super,"Mutex",r),s=i.$$proto,c=i.$$scope;return s.locked=n,s.$initialize=function(){var e=this;return e.locked=!1},s.$lock=function(){var e,t=this;return(e=t.locked)===n||e.$$is_boolean&&1!=e||t.$fail(c.get("ThreadError"),"Deadlock"),t.locked=!0,t},s["$locked?"]=function(){var e=this;return e.locked},s["$owned?"]=function(){var e=this;return e.locked},s.$try_lock=function(){var e,t=this;return(e=t["$locked?"]())===n||e.$$is_boolean&&1!=e?(t.$lock(),!0):!1},s.$unlock=function(){var e,t=this;return((e=t.locked)===n||e.$$is_boolean&&1!=e)&&t.$fail(c.get("ThreadError"),"Mutex not locked"),t.locked=!1,t},s.$synchronize=o=function(){var t,r=this,a=o.$$p,i=a||n;o.$$p=null,r.$lock();try{return t=e.$yieldX(i,[]),t===$?t:t}finally{r.$unlock()}},n&&"synchronize"}(t,null)},Opal.modules.set=function(e){e.dynamic_require_severity="error";var t=e.top,r=e.nil,n=e.breaker,$=e.slice,o=e.klass,a=e.module;return e.add_stubs(["$include","$new","$nil?","$===","$raise","$do_with_enum","$add","$[]","$merge","$join","$to_a","$equal?","$instance_of?","$class","$==","$instance_variable_get","$is_a?","$size","$all?","$include?","$[]=","$delete","$enum_for","$each","$select","$each_key","$to_proc","$empty?","$clear","$keys"]),function(t,$super){function a(){}var i,s,c,l,u=a=o(t,$super,"Set",a),_=u.$$proto,p=u.$$scope;return _.hash=r,u.$include(p.get("Enumerable")),e.defs(u,"$[]",function(e){var t=this;return e=$.call(arguments,0),t.$new(e)}),_.$initialize=i=function(e){var t,n,$,o=this,a=i.$$p,s=a||r;return null==e&&(e=r),i.$$p=null,o.hash=p.get("Hash").$new(),(t=e["$nil?"]())===r||t.$$is_boolean&&1!=t?(((t=p.get("Enumerable")["$==="](e))===r||t.$$is_boolean&&1!=t)&&o.$raise(p.get("ArgumentError"),"value must be enumerable"),s!==!1&&s!==r?(t=(n=o).$do_with_enum,t.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=r),t.$add(s["$[]"](e))},$.$$s=o,$),t).call(n,e):o.$merge(e)):r},_.$inspect=function(){var e=this;return"#<Set: {"+e.$to_a().$join(",")+"}>"},_["$=="]=function(e){var t,n,$,o=this;return(t=o["$equal?"](e))===r||t.$$is_boolean&&1!=t?(t=e["$instance_of?"](o.$class()))===r||t.$$is_boolean&&1!=t?(n=e["$is_a?"](p.get("Set")),(t=n!==!1&&n!==r?o.$size()["$=="](e.$size()):n)===r||t.$$is_boolean&&1!=t?!1:(t=(n=e)["$all?"],t.$$p=($=function(e){var t=$.$$s||this;return null==t.hash&&(t.hash=r),null==e&&(e=r),t.hash["$include?"](e)},$.$$s=o,$),t).call(n)):o.hash["$=="](e.$instance_variable_get("@hash")):!0},_.$add=function(e){var t=this;return t.hash["$[]="](e,!0),t},e.defn(u,"$<<",_.$add),_.$delete=function(e){var t=this;return t.hash.$delete(e),t},_["$delete?"]=function(e){var t,n=this;return(t=n["$include?"](e))===r||t.$$is_boolean&&1!=t?r:(n.$delete(e),n)},_.$delete_if=s=function(){try{var t,$,o,a,i,c,l=this,u=s.$$p,_=u||r;return s.$$p=null,(t=_!==r)!=!1&&t!==r?t:e.$return(l.$enum_for("delete_if")),(t=($=(a=(i=l).$select,a.$$p=(c=function(t){var $;return c.$$s||this,null==t&&(t=r),$=e.$yield1(_,t),$===n?$:$},c.$$s=l,c),a).call(i)).$each,t.$$p=(o=function(e){var t=o.$$s||this;return null==t.hash&&(t.hash=r),null==e&&(e=r),t.hash.$delete(e)},o.$$s=l,o),t).call($),l}catch(p){if(p===e.returner)return p.$v;throw p}},_["$add?"]=function(e){var t,n=this;return(t=n["$include?"](e))===r||t.$$is_boolean&&1!=t?n.$add(e):r},_.$each=c=function(){var e,t,n=this,$=c.$$p,o=$||r;return c.$$p=null,o===r?n.$enum_for("each"):((e=(t=n.hash).$each_key,e.$$p=o.$to_proc(),e).call(t),n)},_["$empty?"]=function(){var e=this;return e.hash["$empty?"]()},_.$clear=function(){var e=this;return e.hash.$clear(),e},_["$include?"]=function(e){var t=this;return t.hash["$include?"](e)},e.defn(u,"$member?",_["$include?"]),_.$merge=function(e){var t,n,$,o=this;return(t=(n=o).$do_with_enum,t.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=r),t.$add(e)},$.$$s=o,$),t).call(n,e),o},_.$do_with_enum=l=function(e){var t,n,$=l.$$p,o=$||r;return l.$$p=null,(t=(n=e).$each,t.$$p=o.$to_proc(),t).call(n)},_.$size=function(){var e=this;return e.hash.$size()},e.defn(u,"$length",_.$size),_.$to_a=function(){var e=this;return e.hash.$keys()},r&&"to_a"}(t,null),function(t){var n,o=a(t,"Enumerable"),i=o.$$proto,s=o.$$scope;i.$to_set=n=function(e,t){var o,a,i=this,c=n.$$p,l=c||r;return t=$.call(arguments,1),null==e&&(e=s.get("Set")),n.$$p=null,(o=(a=e).$new,o.$$p=l.$to_proc(),o).apply(a,[i].concat(t))},e.donate(o,["$to_set"])}(t)},Opal.modules.time=function(e){e.dynamic_require_severity="error";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.klass);return e.add_stubs(["$strftime"]),function(t,$super){function $(){}var o=$=n(t,$super,"Time",$),a=o.$$proto;return o.$$scope,e.defs(o,"$parse",function(e){return new Date(Date.parse(e))}),a.$iso8601=function(){var e=this;return e.$strftime("%FT%T%z")},r&&"iso8601"}(t,null)},Opal.modules.rbconfig=function(e){e.dynamic_require_severity="error";var t=e.top,r=e,n=e.nil,$=(e.breaker,e.slice,e.module),o=e.hash2;return e.add_stubs(["$split","$[]"]),function(t){var r=$(t,"RbConfig"),a=(r.$$proto,r.$$scope),i=n;i=a.get("RUBY_VERSION").$split("."),e.cdecl(a,"CONFIG",o(["ruby_version","MAJOR","MINOR","TEENY","RUBY","RUBY_INSTALL_NAME","RUBY_SO_NAME","target_os","host_os","PATH_SEPARATOR"],{ruby_version:a.get("RUBY_VERSION"),MAJOR:i["$[]"](0),MINOR:i["$[]"](1),TEENY:i["$[]"](2),RUBY:a.get("RUBY_ENGINE"),RUBY_INSTALL_NAME:a.get("RUBY_ENGINE"),RUBY_SO_NAME:a.get("RUBY_ENGINE"),target_os:"ECMA-262",host_os:"ECMA-262",PATH_SEPARATOR:":"}))}(t),e.cdecl(r,"RUBY_NAME","opal"),e.cdecl(r,"RUBY_EXE","opal"),e.cdecl(r,"RUBY_PATCHLEVEL","327")},Opal.modules.pathname=function(e){e.dynamic_require_severity="error";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.klass),$=e.module;return e.add_stubs(["$==","$raise","$attr_reader","$path","$start_with?","$!","$absolute?"]),function(t,$super){function $(){}var o=$=n(t,$super,"Pathname",$),a=o.$$proto,i=o.$$scope;return a.path=r,a.$initialize=function(e){var t=this;return e["$=="]("\0")&&t.$raise(i.get("ArgumentError")),t.path=e},o.$attr_reader("path"),a["$=="]=function(e){var t=this;return e.$path()["$=="](t.path)},a["$absolute?"]=function(){var e=this;return e.path["$start_with?"]("/")},a["$relative?"]=function(){var e=this;return e["$absolute?"]()["$!"]()},a.$to_path=function(){var e=this;return e.path},e.defn(o,"$to_str",a.$to_path),e.defn(o,"$to_s",a.$to_path)}(t,null),function(t){var n=$(t,"Kernel"),o=n.$$proto;n.$$scope,o.$Pathname=function(){return r},e.donate(n,["$Pathname"])}(t)},Opal.modules["rspec/version"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=(e.nil,e.breaker,e.slice,e.module);return e.add_stubs([]),function(t){var n=r(t,"RSpec");n.$$proto,n.$$scope,function(t){var n=r(t,"Version"),$=(n.$$proto,n.$$scope);e.cdecl($,"STRING","3.0.0.beta1")}(n)}(t)},Opal.modules.rspec=function(e){e.dynamic_require_severity="warning";var t=e.top;return e.nil,e.breaker,e.slice,e.add_stubs(["$require"]),t.$require("rspec/core"),t.$require("rspec/version")},Opal.modules["rspec/autorun"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e;return e.nil,e.breaker,e.slice,e.add_stubs(["$require","$autorun"]),t.$require("rspec/core"),r.get("RSpec").$$scope.get("Core").$$scope.get("Runner").$autorun()},Opal.modules["rspec/core/backport_random"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=e.breaker,$=(e.slice,e.module),o=e.klass,a=e.range;return e.add_stubs(["$kind_of?","$__send__","$raise","$inspect","$message","$class","$coerce_to","$new","$-","$seed=","$times","$|","$&","$[]","$+","$[]=","$^","$>>","$odd?","$===","$each","$*","$>=","$size","$max","$next_state","$<<","$/","$random_32_bits","$>","$mask_32_bits","$<","$map","$pack","$each_with_index","$state_as_bignum","$left","$abs","$==","$pop","$first","$convert_seed","$private","$attr_reader","$seed_rand","$coerce_to_int","$nonzero?","$new_seed","$random_float","$<=","$_rand_range","$random_integer","$random_bytes","$is_a?","$seed","$send","$state","$marshal_dump","$allocate","$marshal_load","$end","$begin","$!","$respond_to?","$exclude_end?","$loop","$**","$rand","$include"]),function(t){var s=$(t,"RSpec");s.$$proto,s.$$scope,function(t){var s=$(t,"Core");s.$$proto,s.$$scope,function(t){var s=$(t,"Backports"),c=(s.$$proto,s.$$scope);e.defs(s,"$coerce_to",function(t,n,$){var o,a=this,i=r,s=r;if((o=t["$kind_of?"](n))!==r&&(!o.$$is_boolean||1==o))return t;try{i=t.$__send__($)}catch(l){if(!e.$rescue(l,[c.get("Exception")]))throw l;s=l,a.$raise(c.get("TypeError"),"Coercion error: "+t.$inspect()+"."+$+" => "+n+" failed:\n"+("("+s.$message()+")"))}return((o=i["$kind_of?"](n))===r||o.$$is_boolean&&1!=o)&&a.$raise(c.get("TypeError"),"Coercion error: obj."+$+" did NOT return a "+n+" (was "+i.$class()+")"),i}),e.defs(s,"$coerce_to_int",function(e){var t=this;return t.$coerce_to(e,c.get("Integer"),"to_int")}),e.cdecl(c,"Undefined",c.get("Object").$new()),function(t,$super){function s(){}var c=s=o(t,$super,"Random",s),l=(c.$$proto,c.$$scope);return function(t,$super){function n(){}var $=n=o(t,$super,"MT19937",n),s=$.$$proto,c=$.$$scope;return s.state=s.last_read=r,e.cdecl(c,"STATE_SIZE",624),e.cdecl(c,"LAST_STATE",c.get("STATE_SIZE")["$-"](1)),e.cdecl(c,"PAD_32_BITS",4294967295),s.$initialize=function(e){var t,r,n=this;return t=[e],r=n,r["$seed="].apply(r,t),t[t.length-1]},e.cdecl(c,"LAST_31_BITS",2147483647),e.cdecl(c,"OFFSET",397),s.$next_state=function(){var e,t,n,$=this;return(e=(t=c.get("STATE_SIZE")).$times,e.$$p=(n=function(e){var t,$,o=n.$$s||this,a=r;return null==o.state&&(o.state=r),null==e&&(e=r),a=o.state["$[]"](e)["$&"](2147483648)["$|"](o.state["$[]"](e["$+"](1)["$-"](c.get("STATE_SIZE")))["$&"](2147483647)),o.state["$[]="](e,o.state["$[]"](e["$+"](c.get("OFFSET"))["$-"](c.get("STATE_SIZE")))["$^"](a["$>>"](1))),(t=a["$odd?"]())===r||t.$$is_boolean&&1!=t?r:(t=e,$=o.state,$["$[]="](t,$["$[]"](t)["$^"](2567483615)))},n.$$s=$,n),e).call(t),$.last_read=-1},s["$seed="]=function(e){var t,n,$,o,s,l,u,_=this,p=r,d=r;return function(){return p=e,c.get("Integer")["$==="](p)?(_.state=c.get("Array").$new(c.get("STATE_SIZE")),_.state["$[]="](0,e["$&"](c.get("PAD_32_BITS"))),(t=(n=a(1,c.get("LAST_STATE"),!1)).$each,t.$$p=($=function(e){var t=$.$$s||this;return null==t.state&&(t.state=r),null==e&&(e=r),t.state["$[]="](e,1812433253["$*"](t.state["$[]"](e["$-"](1))["$^"](t.state["$[]"](e["$-"](1))["$>>"](30)))["$+"](e)["$&"](c.get("PAD_32_BITS")))},$.$$s=_,$),t).call(n),_.last_read=c.get("LAST_STATE")):c.get("Array")["$==="](p)?(t=[19650218],o=_,o["$seed="].apply(o,t),t[t.length-1],i=1,d=0,(t=(o=[c.get("STATE_SIZE"),e.$size()].$max()).$times,t.$$p=(s=function(){var t=s.$$s||this;return null==t.state&&(t.state=r),t.state["$[]="](i,t.state["$[]"](i)["$^"](t.state["$[]"](i["$-"](1))["$^"](t.state["$[]"](i["$-"](1))["$>>"](30))["$*"](1664525))["$+"](d)["$+"](e["$[]"](d))["$&"](c.get("PAD_32_BITS"))),(i=i["$+"](1))["$>="](c.get("STATE_SIZE"))&&(t.state["$[]="](0,t.state["$[]"](-1)),i=1),(d=d["$+"](1))["$>="](e.$size())?d=0:r},s.$$s=_,s),t).call(o),(t=(l=c.get("STATE_SIZE")["$-"](1)).$times,t.$$p=(u=function(){var e=u.$$s||this;return null==e.state&&(e.state=r),e.state["$[]="](i,e.state["$[]"](i)["$^"](e.state["$[]"](i["$-"](1))["$^"](e.state["$[]"](i["$-"](1))["$>>"](30))["$*"](1566083941))["$-"](i)["$&"](c.get("PAD_32_BITS"))),(i=i["$+"](1))["$>="](c.get("STATE_SIZE"))?(e.state["$[]="](0,e.state["$[]"](-1)),i=1):r},u.$$s=_,u),t).call(l),_.state["$[]="](0,2147483648)):_.$raise(c.get("ArgumentError"),"Seed must be an Integer or an Array")}()},s.$random_32_bits=function(){var e=this,t=r;return e.last_read["$>="](c.get("LAST_STATE"))&&e.$next_state(),e.last_read=e.last_read["$+"](1),t=e.state["$[]"](e.last_read),t=t["$^"](t["$>>"](11)),t=t["$^"](t["$<<"](7)["$&"](2636928640)),t=t["$^"](t["$<<"](15)["$&"](4022730752)),t=t["$^"](t["$>>"](18))},e.cdecl(c,"FLOAT_FACTOR",1["$/"](9007199254740992)),s.$random_float=function(){var e=this;return e.$random_32_bits()["$>>"](5)["$*"](67108864)["$+"](e.$random_32_bits()["$>>"](6))["$*"](c.get("FLOAT_FACTOR"))},s.$random_integer=function(e){var t,n,$,o=this,a=r,i=r,s=r,l=r;for(a=e["$-"](1),i=0;a["$>"](c.get("PAD_32_BITS"));)a=a["$>>"](32),i=i["$+"](1);for(s=o.$mask_32_bits(a);!l["$<"](e);)l=o.$random_32_bits()["$&"](s),(t=(n=i).$times,t.$$p=($=function(){var e=$.$$s||this;return l=l["$<<"](32),l=l["$|"](e.$random_32_bits())},$.$$s=o,$),t).call(n);return l},s.$random_bytes=function(e){var t,n,$,o=this,a=r,i=r;return a=e["$+"](3)["$/"](4),i=(t=(n=a.$times()).$map,t.$$p=($=function(){var e=$.$$s||this;
return e.$random_32_bits()},$.$$s=o,$),t).call(n),i.$pack("L"["$*"](a))["$[]"](0,e)},s.$state_as_bignum=function(){var e,t,n,$=this,o=r;return o=0,(e=(t=$.state).$each_with_index,e.$$p=(n=function(e,t){return n.$$s||this,null==e&&(e=r),null==t&&(t=r),o=o["$|"](e["$<<"](32["$*"](t)))},n.$$s=$,n),e).call(t),o},s.$left=function(){var e=this;return c.get("MT19937").$$scope.get("STATE_SIZE")["$-"](e.last_read)},s.$marshal_dump=function(){var e=this;return[e.$state_as_bignum(),e.$left()]},s.$marshal_load=function(t){var n,$,o,a=this,i=r,s=r;return n=e.to_ary(t),i=null==n[0]?r:n[0],s=null==n[1]?r:n[1],a.last_read=c.get("MT19937").$$scope.get("STATE_SIZE")["$-"](s),a.state=c.get("Array").$new(c.get("STATE_SIZE")),(n=($=c.get("STATE_SIZE")).$times,n.$$p=(o=function(e){var t=o.$$s||this;return null==t.state&&(t.state=r),null==e&&(e=r),t.state["$[]="](e,i["$&"](c.get("PAD_32_BITS"))),i=i["$>>"](32)},o.$$s=a,o),n).call($)},e.defs($,"$convert_seed",function(e){var t,n,$=r;for(e=e.$abs(),$=[];!e["$=="](0);)$["$<<"](e["$&"](c.get("PAD_32_BITS"))),e=e["$>>"](32);return(t=(n=$["$[]"](-1)["$=="](1))?$.$size()["$>"](1):n)===r||t.$$is_boolean&&1!=t||$.$pop(),$.$size()["$>"](1)?$:$.$first()}),e.defs($,"$[]",function(e){var t=this;return t.$new(t.$convert_seed(e))}),$.$private(),e.cdecl(c,"MASK_BY",[1,2,4,8,16]),s.$mask_32_bits=function(e){var t,n,$,o=this;return(t=(n=c.get("MASK_BY")).$each,t.$$p=($=function(t){return $.$$s||this,null==t&&(t=r),e=e["$|"](e["$>>"](t))},$.$$s=o,$),t).call(n),e},r&&"mask_32_bits"}(c,null),function(t){var o,a=$(t,"Implementation"),i=a.$$proto,s=a.$$scope;a.$attr_reader("seed"),i.$initialize=o=function(t){var r=this;return o.$$p,null==t&&(t=0),o.$$p=null,e.find_super_dispatcher(r,"initialize",o,null).apply(r,[]),r.$seed_rand(t)},i.$seed_rand=function(e){var t,n,$=this,o=r;return null==$.seed&&($.seed=r),null==e&&(e=0),e=s.get("Backports").$coerce_to_int(e),n=$.seed,((t=null!=n&&n!==r?"instance-variable":r)===r||t.$$is_boolean&&1!=t)&&($.seed=r),t=[$.seed,(n=e["$nonzero?"]())!==!1&&n!==r?n:s.get("Random").$new_seed()],o=t[0],$.seed=t[1],$.mt=s.get("MT19937")["$[]"]($.seed),o},i.$rand=function(e){var t,n=this,$=r;return null==n.mt&&(n.mt=r),null==e&&(e=s.get("Backports").$$scope.get("Undefined")),(t=function(){return $=e,s.get("Backports").$$scope.get("Undefined")["$==="]($)?n.mt.$random_float():s.get("Float")["$==="]($)?e["$<="](0)?r:e["$*"](n.mt.$random_float()):s.get("Range")["$==="]($)?n.$_rand_range(e):(e=s.get("Backports").$coerce_to_int(e),e["$<="](0)?r:n.mt.$random_integer(e))}())!==!1&&t!==r?t:n.$raise(s.get("ArgumentError"),"invalid argument "+e)},i.$bytes=function(e){var t=this;return null==t.mt&&(t.mt=r),e=s.get("Backports").$coerce_to_int(e),e["$<"](0)&&t.$raise(s.get("ArgumentError"),"negative size"),t.mt.$random_bytes(e)},i["$=="]=function(e){var t,n,$,o=this;return $=e["$is_a?"](s.get("Random")),n=$!==!1&&$!==r?o.$seed()["$=="](e.$seed()):$,t=n!==!1&&n!==r?o.$left()["$=="](e.$send("left")):n,t!==!1&&t!==r?o.$state()["$=="](e.$send("state")):t},i.$marshal_dump=function(){var e=this;return null==e.mt&&(e.mt=r),null==e.seed&&(e.seed=r),e.mt.$marshal_dump()["$<<"](e.seed)},i.$marshal_load=function(e){var t=this;return null==t.mt&&(t.mt=r),t.seed=e.$pop(),t.mt=s.get("MT19937").$allocate(),t.mt.$marshal_load(e)},a.$private(),i.$state=function(){var e=this;return null==e.mt&&(e.mt=r),e.mt.$state_as_bignum()},i.$left=function(){var e=this;return null==e.mt&&(e.mt=r),e.mt.$left()},i.$_rand_range=function(e){var t,$,o,a,i=this,c=r;return null==i.mt&&(i.mt=r),c=e.$end()["$-"](e.$begin()),o=c["$is_a?"](s.get("Float"))["$!"](),$=o!==!1&&o!==r?c["$respond_to?"]("to_int"):o,(t=$!==!1&&$!==r?c=s.get("Backports").$coerce_to_int(c):$)===r||t.$$is_boolean&&1!=t?(t=c=s.get("Backports").$coerce_to(c,s.get("Float"),"to_f"))===r||t.$$is_boolean&&1!=t?r:c["$<"](0)?r:(t=e["$exclude_end?"]())===r||t.$$is_boolean&&1!=t?(t=($=i).$loop,t.$$p=(a=function(){var t=a.$$s||this,$=r;return null==t.mt&&(t.mt=r),$=t.mt.$random_float()["$*"](c)["$*"](1.0001),$["$>"](c)?r:(n.$v=e.$begin()["$+"]($),n)},a.$$s=i,a),t).call($):c["$<="](0)?r:e.$begin()["$+"](i.mt.$random_float()["$*"](c)):(((t=e["$exclude_end?"]())===r||t.$$is_boolean&&1!=t)&&(c=c["$+"](1)),c["$<="](0)?r:e.$begin()["$+"](i.mt.$random_integer(c)))},e.donate(a,["$initialize","$seed_rand","$rand","$bytes","$==","$marshal_dump","$marshal_load","$state","$left","$_rand_range"])}(c),e.defs(c,"$new_seed",function(){return 2["$**"](62)["$+"](l.get("Kernel").$rand(2["$**"](62)))}),r&&"new_seed"}(s,null),function(e,$super){function t(){}var r=t=o(e,$super,"Random",t),n=(r.$$proto,r.$$scope);return r.$include(n.get("Implementation")),function(e){var t=e.$$scope;return e.$$proto,e.$include(t.get("Implementation"))}(r.$singleton_class())}(s,null)}(s)}(s)}(t)},Opal.modules["rspec/core/backtrace_formatter"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass,o=e.hash2;return e.add_stubs(["$format_backtrace","$backtrace_formatter","$configuration","$attr_accessor","$<<","$union","$map","$new","$gsub","$getwd","$empty?","$[]","$tap","$concat","$compact","$backtrace_line","$take_while","$!","$==","$exclude?","$relative_path","$any?","$=~","$none?"]),function(t){var a=n(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=n(t,"Core");a.$$proto,a.$$scope,function(t,$super){function n(){}var a=n=$(t,$super,"BacktraceFormatter",n),i=a.$$proto,s=a.$$scope;return i.full_backtrace=i.exclusion_patterns=i.inclusion_patterns=r,e.defs(a,"$format_backtrace",function(e,t){return null==t&&(t=o([],{})),s.get("RSpec").$configuration().$backtrace_formatter().$format_backtrace(e,t)}),a.$attr_accessor("exclusion_patterns","inclusion_patterns"),i.$initialize=function(){var e,t,n,$,o=this;return o.full_backtrace=!1,o.exclusion_patterns=[]["$<<"]((e=s.get("Regexp")).$union.apply(e,[].concat((t=(n=["/libd*/ruby/","org/jruby/","bin/","/gems/","lib/rspec/(core|expectations|matchers|mocks)"]).$map,t.$$p=($=function(e){return $.$$s||this,null==e&&(e=r),s.get("Regexp").$new(e.$gsub("/",s.get("File").$$scope.get("SEPARATOR")))},$.$$s=o,$),t).call(n)))),o.inclusion_patterns=[s.get("Regexp").$new(s.get("Dir").$getwd())]},i["$full_backtrace="]=function(e){var t=this;return t.full_backtrace=e},i["$full_backtrace?"]=function(){var e,t=this;return(e=t.full_backtrace)!==!1&&e!==r?e:t.exclusion_patterns["$empty?"]()},i.$format_backtrace=function(e,t){var n,$,a,i,c,l,u,_,p,d=this;return null==t&&(t=o([],{})),(n=t["$[]"]("full_backtrace"))===r||n.$$is_boolean&&1!=n?(n=($=(i=(c=(u=(_=e).$take_while,u.$$p=(p=function(e){return p.$$s||this,null==e&&(e=r),e["$=="](s.get("RSpec").$$scope.get("Core").$$scope.get("Runner").$$scope.get("AT_EXIT_HOOK_BACKTRACE_LINE"))["$!"]()},p.$$s=d,p),u).call(_)).$map,i.$$p=(l=function(e){var t=l.$$s||this;return null==e&&(e=r),t.$backtrace_line(e)},l.$$s=d,l),i).call(c).$compact()).$tap,n.$$p=(a=function(t){var n;return a.$$s||this,null==t&&(t=r),(n=t["$empty?"]())===r||n.$$is_boolean&&1!=n?r:(t.$concat(e),t["$<<"](""),t["$<<"]("  Showing full backtrace because every line was filtered out."),t["$<<"]("  See docs for RSpec::Configuration#backtrace_exclusion_patterns and"),t["$<<"]("  RSpec::Configuration#backtrace_inclusion_patterns for more information."))},a.$$s=d,a),n).call($):e},i.$backtrace_line=function(t){var n,$=this;try{return(n=$["$exclude?"](t))===r||n.$$is_boolean&&1!=n?s.get("RSpec").$$scope.get("Core").$$scope.get("Metadata").$relative_path(t):r}catch(o){if(e.$rescue(o,[s.get("SecurityError")]))return r;throw o}},i["$exclude?"]=function(e){var t,n,$,o,a,i,s=this;return(t=s.full_backtrace)===r||t.$$is_boolean&&1!=t?(t=(n=($=s.exclusion_patterns)["$any?"],n.$$p=(o=function(t){return o.$$s||this,null==t&&(t=r),t["$=~"](e)},o.$$s=s,o),n).call($),t!==!1&&t!==r?(n=(a=s.inclusion_patterns)["$none?"],n.$$p=(i=function(t){return i.$$s||this,null==t&&(t=r),t["$=~"](e)},i.$$s=s,i),n).call(a):t):!1},r&&"exclude?"}(a,null)}(a)}(t)},Opal.modules["rspec/core/command_line"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass,o=e.gvars;return e.add_stubs(["$===","$new","$parse_options","$configuration","$world","$error_stream=","$==","$output_stream","$output_stream=","$configure","$load_spec_files","$announce_filters","$report","$run_hook","$all?","$map","$run","$ordered_example_groups","$failure_exit_code","$reporter","$example_count"]),function(e){var t=n(e,"RSpec");t.$$proto,t.$$scope,function(e){var t=n(e,"Core");t.$$proto,t.$$scope,function(e,$super){function t(){}var n=t=$(e,$super,"CommandLine",t),a=n.$$proto,i=n.$$scope;return a.configuration=a.options=a.world=r,a.$initialize=function(e,t,n){var $,o=this;return null==t&&(t=i.get("RSpec").$configuration()),null==n&&(n=i.get("RSpec").$world()),($=i.get("Array")["$==="](e))===r||$.$$is_boolean&&1!=$||(e=i.get("ConfigurationOptions").$new(e),e.$parse_options()),o.options=e,o.configuration=t,o.world=n},a.$run=function(e,t){var n,$,a,i=this;return null==o.stdout&&(o.stdout=r),n=[e],$=i.configuration,$["$error_stream="].apply($,n),n[n.length-1],i.configuration.$output_stream()["$=="](o.stdout)&&(n=[t],$=i.configuration,$["$output_stream="].apply($,n),n[n.length-1]),i.options.$configure(i.configuration),i.configuration.$load_spec_files(),i.world.$announce_filters(),(n=($=i.configuration.$reporter()).$report,n.$$p=(a=function(e){var t,n,$,o,i=a.$$s||this;null==i.configuration&&(i.configuration=r),null==i.world&&(i.world=r),null==e&&(e=r);try{return i.configuration.$run_hook("before","suite"),(t=(n=($=i.world.$ordered_example_groups()).$map,n.$$p=(o=function(t){return o.$$s||this,null==t&&(t=r),t.$run(e)},o.$$s=i,o),n).call($)["$all?"]())===r||t.$$is_boolean&&1!=t?i.configuration.$failure_exit_code():0}finally{i.configuration.$run_hook("after","suite")}},a.$$s=i,a),n).call($,i.world.$example_count())},r&&"run"}(t,null)}(t)}(t)},Opal.modules["rspec/core/configuration"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=e.breaker,$=e.slice,o=e.module,a=e.klass,i=e.hash2,s=e.gvars,c=e.range;return e.add_stubs(["$require","$include","$define_method","$instance_variable_defined?","$instance_variable_get","$value_for","$deprecate","$alias_method","$define_predicate_for","$each","$has_key?","$raise","$[]","$deprecate_alias_key","$define_aliases","$attr_writer","$define_reader","$Array","$add_setting","$!","$equal?","$warn","$+","$inspect","$output_stream","$first_non_rspec_line","$warning","$attr_accessor","$attr_reader","$new","$force","$ordering_manager","$merge!","$warnings=","$clear","$delete","$class_eval","$send","$mock_with","$exclusion_patterns","$exclusion_patterns=","$inclusion_patterns","$inclusion_patterns=","$===","$to_s","$map","$respond_to?","$framework_name","$==","$assert_no_example_groups_defined","$configuration","$empty?","$expect_with","$expecting_with_rspec=","$any?","$-","$>","$length","$first","$push","$full_backtrace?","$full_backtrace=","$output_to_tty?","$windows_os?","$unshift","$filter_run","$to_i","$fetch","$filter","$union","$built_in_formatter","$custom_formatter","$<<","$formatters","$file_at","$add_formatter","$deprecation_stream","$is_a?","$flatten","$command","$running_in_drb?","$default_path","$files_to_run=","$get_files_to_run","$build_hash_from","$alias_example_to","$alias_it_behaves_like_to","$include_with_low_priority","$filter_manager","$include!","$inclusions","$exclude_with_low_priority","$exclude!","$exclusions","$include_or_extend_modules","$any_apply?","$<","$select","$directory?","$add_to_load_path","$>=","$to_f","$extend","$include?","$included_modules","$mock_framework","$expectation_frameworks","$load","$expand_path","$uniq","$files_to_run","$lambda","$__send__","$to_proc","$delegate_to_ordering_manager","$module_eval","$let","$deprecation_stream=","$private","$sort","$flat_map","$gsub","$gather_directories","$extract_location","$pattern","$=~","$escape","$split","$add_location","$last","$example_groups","$world","$tty?","$string_const?","$inject","$const_get","$path_for","$retry","$underscore_with_fix_for_non_standard_rspec_naming","$sub","$underscore","$dup","$gsub!","$tr!","$downcase!","$mkdir_p","$dirname"]),t.$require("fileutils"),t.$require("rspec/core/backtrace_formatter"),t.$require("rspec/core/ruby_project"),t.$require("rspec/core/formatters/deprecation_formatter"),function(t){var l=o(t,"RSpec");l.$$proto,l.$$scope,function(t){var l=o(t,"Core");l.$$proto,l.$$scope,function(t,$super){function l(){}var u,_,p,d,f,h,m=l=a(t,$super,"Configuration",l),g=m.$$proto,v=m.$$scope;return g.reporter=g.output_stream=g.spec_files_loaded=g.preferred_options=g.formatters=g.mock_framework=g.backtrace_formatter=g.expectation_frameworks=g.color=g.requires=g.profile_examples=g.format_docstrings_block=r,m.$include(v.get("RSpec").$$scope.get("Core").$$scope.get("Hooks")),function(e,$super){function t(){}var n=t=a(e,$super,"MustBeConfiguredBeforeExampleGroupsError",t);return n.$$proto,n.$$scope,r}(m,v.get("StandardError")),e.defs(m,"$define_reader",function(e){var t,n,$,o=this;return(t=(n=o).$define_method,t.$$p=($=function(){var t,n=$.$$s||this,o=r;return o=function(){return(t=n["$instance_variable_defined?"]("@"+e))===r||t.$$is_boolean&&1!=t?r:n.$instance_variable_get("@"+e)}(),n.$value_for(e,o)},$.$$s=o,$),t).call(n,e)}),e.defs(m,"$deprecate_alias_key",function(){return v.get("RSpec").$deprecate("add_setting with :alias option",i(["replacement"],{replacement:":alias_with"}))}),e.defs(m,"$define_aliases",function(e,t){var r=this;return r.$alias_method(t,e),r.$alias_method(""+t+"=",""+e+"="),r.$define_predicate_for(t)}),e.defs(m,"$define_predicate_for",function(e){var t,n,o,a=this;return e=$.call(arguments,0),(t=(n=e).$each,t.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=r),t.$alias_method(""+e+"?",e)},o.$$s=a,o),t).call(n)}),e.defs(m,"$add_setting",function(e,t){var n,$,o,a=this;return null==t&&(t=i([],{})),(n=t["$has_key?"]("default"))===r||n.$$is_boolean&&1!=n||a.$raise("Use the instance add_setting method if you want to set a default"),(n=t["$[]"]("alias"))===r||n.$$is_boolean&&1!=n?(a.$attr_writer(e),a.$define_reader(e),a.$define_predicate_for(e)):(a.$deprecate_alias_key(),a.$define_aliases(t["$[]"]("alias"),e)),(n=($=a.$Array(t["$[]"]("alias_with"))).$each,n.$$p=(o=function(t){var n=o.$$s||this;return null==t&&(t=r),n.$define_aliases(e,t)},o.$$s=a,o),n).call($)}),m.$add_setting("default_path"),m.$add_setting("drb"),m.$add_setting("drb_port"),m.$add_setting("error_stream"),m.$add_setting("deprecation_stream"),m.$add_setting("fail_fast"),m.$add_setting("dry_run"),m.$add_setting("failure_exit_code"),m.$define_reader("requires"),m.$define_reader("libs"),m.$define_reader("output_stream"),g["$output_stream="]=function(e){var t,n,$=this;return n=$.reporter,(t=n!==!1&&n!==r?e["$equal?"]($.output_stream)["$!"]():n)===r||t.$$is_boolean&&1!=t?$.output_stream=e:$.$warn("RSpec's reporter has already been initialized with "["$+"](""+$.$output_stream().$inspect()+" as the output stream, so your change to ")["$+"]("`output_stream` will be ignored. You should configure it earlier for ")["$+"]("it to take effect. (Called from "+v.get("CallerFilter").$first_non_rspec_line()+")"))},m.$add_setting("pattern",i(["alias_with"],{alias_with:"filename_pattern"})),g["$pattern="]=function(e){var t,n=this;return(t=n.spec_files_loaded)===r||t.$$is_boolean&&1!=t||v.get("RSpec").$warning("Configuring `pattern` to "+e+" has no effect since RSpec has already loaded the spec files."),n.pattern=e},e.defn(m,"$filename_pattern=",g["$pattern="]),m.$add_setting("profile_examples"),m.$add_setting("run_all_when_everything_filtered"),m.$add_setting("success_color"),m.$add_setting("pending_color"),m.$add_setting("failure_color"),m.$add_setting("default_color"),m.$add_setting("fixed_color"),m.$add_setting("detail_color"),m.$add_setting("show_failures_in_pending_blocks"),g["$treat_symbols_as_metadata_keys_with_true_values="]=function(){return v.get("RSpec").$deprecate("RSpec::Core::Configuration#treat_symbols_as_metadata_keys_with_true_values=")},m.$add_setting("tty"),m.$add_setting("include_or_extend_modules"),m.$add_setting("files_to_run"),m.$add_setting("expecting_with_rspec"),m.$attr_accessor("filter_manager"),m.$attr_reader("backtrace_formatter","ordering_manager"),e.defn(m,"$backtrace_cleaner",g.$backtrace_formatter),g.$initialize=function(){var e=this;return null==s.stderr&&(s.stderr=r),null==s.stdout&&(s.stdout=r),e.expectation_frameworks=[],e.include_or_extend_modules=[],e.mock_framework=r,e.files_to_run=[],e.formatters=[],e.color=!1,e.pattern="**/*_spec.rb",e.failure_exit_code=1,e.spec_files_loaded=!1,e.backtrace_formatter=v.get("BacktraceFormatter").$new(),e.default_path="spec",e.deprecation_stream=s.stderr,e.output_stream=s.stdout,e.reporter=r,e.filter_manager=v.get("FilterManager").$new(),e.ordering_manager=v.get("Ordering").$$scope.get("ConfigurationManager").$new(),e.preferred_options=i([],{}),e.failure_color="red",e.success_color="green",e.pending_color="yellow",e.default_color="white",e.fixed_color="blue",e.detail_color="cyan",e.profile_examples=!1,e.requires=[],e.libs=[]},g.$force=function(e){var t,n,$=this;return $.$ordering_manager().$force(e),$.preferred_options["$merge!"](e),t=[$.$value_for("warnings",r)],n=$,n["$warnings="].apply(n,t),t[t.length-1]},g.$reset=function(){var e=this;return e.spec_files_loaded=!1,e.reporter=r,e.formatters.$clear()},g.$add_setting=function(e,t){var n,$,o,a=this,s=r;return null==t&&(t=i([],{})),s=t.$delete("default"),(n=($=function(e){return e.$$scope,e.$$proto,e}(a.$singleton_class())).$class_eval,n.$$p=(o=function(){var r=o.$$s||this;return r.$add_setting(e,t)},o.$$s=a,o),n).call($),s!==!1&&s!==r?a.$send(""+e+"=",s):r},g.$mock_framework=function(){var e,t=this;return((e=t.mock_framework)===r||e.$$is_boolean&&1!=e)&&t.$mock_with("rspec"),t.mock_framework},g["$mock_framework="]=function(e){var t=this;return t.$mock_with(e)},g.$backtrace_exclusion_patterns=function(){var e=this;return e.backtrace_formatter.$exclusion_patterns()},g["$backtrace_exclusion_patterns="]=function(e){var t,r,n=this;return t=[e],r=n.backtrace_formatter,r["$exclusion_patterns="].apply(r,t),t[t.length-1]},g.$backtrace_inclusion_patterns=function(){var e=this;return e.backtrace_formatter.$inclusion_patterns()},g["$backtrace_inclusion_patterns="]=function(e){var t,r,n=this;return t=[e],r=n.backtrace_formatter,r["$inclusion_patterns="].apply(r,t),t[t.length-1]},g.$mock_with=u=function(t){var $,o,a,i,s=this,c=u.$$p,l=c||r,_=r,p=r,d=r,f=r;return u.$$p=null,_=function(){return p=t,v.get("Module")["$==="](p)?t:v.get("String")["$==="](p)||v.get("Symbol")["$==="](p)?(s.$require(function(){return p=t.$to_s(),/rspec/i["$==="](p)?"rspec/core/mocking/with_rspec":/mocha/i["$==="](p)?"rspec/core/mocking/with_mocha":/rr/i["$==="](p)?"rspec/core/mocking/with_rr":/flexmock/i["$==="](p)?"rspec/core/mocking/with_flexmock":"rspec/core/mocking/with_absolutely_nothing"}()),v.get("RSpec").$$scope.get("Core").$$scope.get("MockFrameworkAdapter")):r}(),$=e.to_ary((o=(a=[_,s.mock_framework]).$map,o.$$p=(i=function(e){var t;return i.$$s||this,null==e&&(e=r),(t=e["$respond_to?"]("framework_name"))===r||t.$$is_boolean&&1!=t?"unnamed":e.$framework_name()},i.$$s=s,i),o).call(a)),d=null==$[0]?r:$[0],f=null==$[1]?r:$[1],d["$=="](f)||s.$assert_no_example_groups_defined("mock_framework"),l!==r&&((($=_["$respond_to?"]("configuration"))===r||$.$$is_boolean&&1!=$)&&s.$raise(""+_+" must respond to `configuration` so that mock_with can yield it."),e.$yield1(l,_.$configuration())===n)?n.$v:s.mock_framework=_},g.$expectation_frameworks=function(){var e,t=this;return(e=t.expectation_frameworks["$empty?"]())===r||e.$$is_boolean&&1!=e||t.$expect_with("rspec"),t.expectation_frameworks},g["$expectation_framework="]=function(e){var t=this;return t.$expect_with(e)},g.$expect_with=_=function(t){var o,a,i,s=this,c=_.$$p,l=c||r,u=r;return t=$.call(arguments,0),_.$$p=null,u=(o=(a=t).$map,o.$$p=(i=function(e){var t,n,$=i.$$s||this,o=r;return null==e&&(e=r),function(){return o=e,v.get("Module")["$==="](o)?e:"rspec"["$==="](o)?($.$require("rspec/expectations"),t=[!0],n=$,n["$expecting_with_rspec="].apply(n,t),t[t.length-1],Opal.get("RSpec").$$scope.get("Matchers")):"stdlib"["$==="](o)?($.$require("test/unit/assertions"),Opal.get("Test").$$scope.get("Unit").$$scope.get("Assertions")):$.$raise(v.get("ArgumentError"),""+e.$inspect()+" is not supported")}()},i.$$s=s,i),o).call(a),(o=u["$-"](s.expectation_frameworks)["$any?"]())===r||o.$$is_boolean&&1!=o||s.$assert_no_example_groups_defined("expect_with"),l!==r&&(u.$length()["$>"](1)&&s.$raise("expect_with only accepts a block with a single argument. Call expect_with "+u.$length()+" times, once with each argument, instead."),((o=u.$first()["$respond_to?"]("configuration"))===r||o.$$is_boolean&&1!=o)&&s.$raise(""+u.$first()+" must respond to `configuration` so that expect_with can yield it."),e.$yield1(l,u.$first().$configuration())===n)?n.$v:(o=s.expectation_frameworks).$push.apply(o,[].concat(u))},g["$full_backtrace?"]=function(){var e=this;return e.backtrace_formatter["$full_backtrace?"]()},g["$full_backtrace="]=function(e){var t,r,n=this;return t=[e],r=n.backtrace_formatter,r["$full_backtrace="].apply(r,t),t[t.length-1]},g.$color=function(e){var t,n=this;return null==e&&(e=n.$output_stream()),(t=n["$output_to_tty?"](e))===r||t.$$is_boolean&&1!=t?!1:n.$value_for("color",n.color)},g["$color="]=function(e){var t,n,$=this;return e!==!1&&e!==r?(n=v.get("RSpec")["$windows_os?"](),(t=n!==!1&&n!==r?v.get("ENV")["$[]"]("ANSICON")["$!"]():n)===r||t.$$is_boolean&&1!=t?$.color=!0:(v.get("RSpec").$warning("You must use ANSICON 1.31 or later (http://adoxa.3eeweb.com/ansicon/) to use colour on Windows"),$.color=!1)):r},m.$alias_method("color_enabled","color"),m.$alias_method("color_enabled=","color="),m.$define_predicate_for("color_enabled","color"),g["$libs="]=function(e){var t,n,$,o=this;return(t=(n=e).$map,t.$$p=($=function(e){var t=$.$$s||this;return null==t.libs&&(t.libs=r),null==s.LOAD_PATH&&(s.LOAD_PATH=r),null==e&&(e=r),t.libs.$unshift(e),s.LOAD_PATH.$unshift(e)},$.$$s=o,$),t).call(n)},g["$requires="]=function(e){var t,n,$,o=this;return v.get("RSpec").$deprecate("RSpec::Core::Configuration#requires=(paths)",i(["replacement"],{replacement:"paths.each {|path| require path}"})),(t=(n=e).$map,t.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=r),t.$require(e)},$.$$s=o,$),t).call(n),o.requires=o.requires["$+"](e)},g["$line_numbers="]=function(e){var t,n,$,o=this;return o.$filter_run(i(["line_numbers"],{line_numbers:(t=(n=e).$map,t.$$p=($=function(e){return $.$$s||this,null==e&&(e=r),e.$to_i()},$.$$s=o,$),t).call(n)}))},g.$line_numbers=function(){var e=this;return e.$filter().$fetch("line_numbers",[])},g["$full_description="]=function(e){var t,n,$,o,a=this;return a.$filter_run(i(["full_description"],{full_description:(t=v.get("Regexp")).$union.apply(t,[].concat((n=($=a.$Array(e)).$map,n.$$p=(o=function(e){return o.$$s||this,null==e&&(e=r),v.get("Regexp").$new(e)},o.$$s=a,o),n).call($)))}))},g.$full_description=function(){var e=this;return e.$filter().$fetch("full_description",r)},g.$add_formatter=function(e,t){var n,o,a,i,s=this,c=r;return t=$.call(arguments,1),c=(n=(o=s.$built_in_formatter(e))!==!1&&o!==r?o:s.$custom_formatter(e))!==!1&&n!==r?n:s.$raise(v.get("ArgumentError"),"Formatter '"+e+"' unknown - maybe you meant 'documentation' or 'progress'?."),(n=t["$empty?"]())===r||n.$$is_boolean&&1!=n||t["$<<"](s.$output_stream()),s.$formatters()["$<<"]((n=c).$new.apply(n,[].concat((o=(a=t).$map,o.$$p=(i=function(e){var t,n=i.$$s||this;return null==e&&(e=r),(t=v.get("String")["$==="](e))===r||t.$$is_boolean&&1!=t?e:n.$file_at(e)},i.$$s=s,i),o).call(a))))},m.$alias_method("formatter=","add_formatter"),g.$formatters=function(){var e,t=this;return(e=t.formatters)!==!1&&e!==r?e:t.formatters=[]},g.$reporter=function(){var e,t,n=this;return(e=n.reporter)!==!1&&e!==r?e:n.reporter=function(){return(t=n.$formatters()["$empty?"]())===r||t.$$is_boolean&&1!=t||n.$add_formatter("progress"),n.$add_formatter(v.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("DeprecationFormatter"),n.$deprecation_stream(),n.$output_stream()),(t=v.get("Reporter")).$new.apply(t,[n].concat(n.$formatters()))}()},g.$profile_examples=function(){var e,t,n=this,$=r;return $=n.$value_for("profile_examples",n.profile_examples),(e=(t=$!==!1&&$!==r)?$["$is_a?"](v.get("Integer"))["$!"]():t)===r||e.$$is_boolean&&1!=e?$:10},g["$files_or_directories_to_run="]=function(e){var t,n,o,a,i=this;return e=$.call(arguments,0),e=e.$flatten(),o=(a=i.$command()["$=="]("rspec"))!==!1&&a!==r?a:v.get("Runner")["$running_in_drb?"](),n=o!==!1&&o!==r?i.$default_path():o,(t=n!==!1&&n!==r?e["$empty?"]():n)===r||t.$$is_boolean&&1!=t||e["$<<"](i.$default_path()),t=[i.$get_files_to_run(e)],n=i,n["$files_to_run="].apply(n,t),t[t.length-1]},g.$alias_example_to=function(e,t){var n=r;return t=$.call(arguments,1),n=v.get("Metadata").$build_hash_from(t),v.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup").$alias_example_to(e,n)},g.$alias_it_behaves_like_to=function(e,t){return null==t&&(t=""),v.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup").$alias_it_behaves_like_to(e,t)},m.$alias_method("alias_it_should_behave_like_to","alias_it_behaves_like_to"),g.$filter_run_including=function(e){var t=this;return e=$.call(arguments,0),t.$filter_manager().$include_with_low_priority(v.get("Metadata").$build_hash_from(e))},m.$alias_method("filter_run","filter_run_including"),g["$inclusion_filter="]=function(e){var t=this;return t.$filter_manager()["$include!"](v.get("Metadata").$build_hash_from([e]))},m.$alias_method("filter=","inclusion_filter="),g.$inclusion_filter=function(){var e=this;return e.$filter_manager().$inclusions()},m.$alias_method("filter","inclusion_filter"),g.$filter_run_excluding=function(e){var t=this;return e=$.call(arguments,0),t.$filter_manager().$exclude_with_low_priority(v.get("Metadata").$build_hash_from(e))},g["$exclusion_filter="]=function(e){var t=this;return t.$filter_manager()["$exclude!"](v.get("Metadata").$build_hash_from([e]))},g.$exclusion_filter=function(){var e=this;return e.$filter_manager().$exclusions()},g.$include=function(e,t){var r=this;return t=$.call(arguments,1),r.$include_or_extend_modules()["$<<"](["include",e,v.get("Metadata").$build_hash_from(t)])},g.$extend=function(e,t){var r=this;return t=$.call(arguments,1),r.$include_or_extend_modules()["$<<"](["extend",e,v.get("Metadata").$build_hash_from(t)])},g.$configure_group=function(e){var t,n,$,o=this;return(t=(n=o.$include_or_extend_modules()).$each,t.$$p=($=function(t,n,o){var a,i,s=$.$$s||this;return null==t&&(t=r),null==n&&(n=r),null==o&&(o=r),(a=(i=o["$empty?"]())!==!1&&i!==r?i:e["$any_apply?"](o))===r||a.$$is_boolean&&1!=a?r:s.$send("safe_"+t,n,e)},$.$$s=o,$),t).call(n)},g.$safe_include=function(e,t){return t["$<"](e)?r:t.$send("include",e)},g.$setup_load_path_and_require=function(e){var t,n,$,o,a,i,s=this,c=r;return c=(t=(n=["lib",s.$default_path()]).$select,t.$$p=($=function(e){return $.$$s||this,null==e&&(e=r),v.get("File")["$directory?"](e)},$.$$s=s,$),t).call(n),(t=v.get("RSpec").$$scope.get("Core").$$scope.get("RubyProject")).$add_to_load_path.apply(t,[].concat(c)),(o=(a=e).$each,o.$$p=(i=function(e){var t=i.$$s||this;return null==e&&(e=r),t.$require(e)},i.$$s=s,i),o).call(a),s.requires=s.requires["$+"](e)},g.$safe_extend=v.get("RUBY_VERSION").$to_f()["$>="](1.9)?function(e,t){return function(e){return e.$$scope,e.$$proto,e}(t.$singleton_class())["$<"](e)?r:t.$extend(e)}:function(e,t){var n;return(n=function(e){return e.$$scope,e.$$proto,e}(t.$singleton_class()).$included_modules()["$include?"](e))===r||n.$$is_boolean&&1!=n?t.$extend(e):r},g.$configure_mock_framework=function(){var e=this;return v.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup").$send("include",e.$mock_framework())},g.$configure_expectation_framework=function(){var e,t,n,$=this;return(e=(t=$.$expectation_frameworks()).$each,e.$$p=(n=function(e){return n.$$s||this,null==e&&(e=r),v.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup").$send("include",e)},n.$$s=$,n),e).call(t)},g.$load_spec_files=function(){var e,t,n,$=this;return(e=(t=$.$files_to_run().$uniq()).$each,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=r),t.$load(v.get("File").$expand_path(e))},n.$$s=$,n),e).call(t),$.spec_files_loaded=!0},e.cdecl(v,"DEFAULT_FORMATTER",(p=(d=m).$lambda,p.$$p=(f=function(e){return f.$$s||this,null==e&&(e=r),e},f.$$s=m,f),p).call(d)),g.$format_docstrings=h=function(){var e=this,t=h.$$p,n=t||r;return h.$$p=null,e.format_docstrings_block=function(){return n!==r?n:v.get("DEFAULT_FORMATTER")}()},g.$format_docstrings_block=function(){var e,t=this;return(e=t.format_docstrings_block)!==!1&&e!==r?e:t.format_docstrings_block=v.get("DEFAULT_FORMATTER")},e.defs(m,"$delegate_to_ordering_manager",function(e){var t,n,o,a=this;return e=$.call(arguments,0),(t=(n=e).$each,t.$$p=(o=function(e){var t,n,a,i=o.$$s||this;return null==e&&(e=r),(t=(n=i).$define_method,t.$$p=(a=function(t){var n,o,i,s=a.$$s||this;return t=$.call(arguments,0),n=a.$$p||r,a.$$p=null,(o=(i=s.$ordering_manager()).$__send__,o.$$p=n.$to_proc(),o).apply(i,[e].concat(t))},a.$$s=i,a),t).call(n,e)},o.$$s=a,o),t).call(n)}),m.$delegate_to_ordering_manager("seed="),m.$delegate_to_ordering_manager("seed"),m.$delegate_to_ordering_manager("order="),m.$delegate_to_ordering_manager("register_ordering"),m.$delegate_to_ordering_manager("seed_used?","ordering_registry"),g["$warnings="]=function(e){return s.VERBOSE=e["$!"]()["$!"]()},g.$warnings=function(){return null==s.VERBOSE&&(s.VERBOSE=r),s.VERBOSE},g.$expose_current_running_example_as=function(e){var t,n,$,o=this;return(t=(n=v.get("ExposeCurrentExample")).$module_eval,t.$$p=($=function(){var t,n,o,a=$.$$s||this;return a.$extend(v.get("RSpec").$$scope.get("SharedContext")),(t=(n=a).$let,t.$$p=(o=function(e){return o.$$s||this,null==e&&(e=r),e},o.$$s=a,o),t).call(n,e)},$.$$s=o,$),t).call(n),o.$include(v.get("ExposeCurrentExample"))},function(e){var t=o(e,"ExposeCurrentExample");t.$$proto,t.$$scope}(m),g["$raise_errors_for_deprecations!"]=function(){var e,t,r=this;return e=[v.get("Formatters").$$scope.get("DeprecationFormatter").$$scope.get("RaiseErrorStream").$new()],t=r,t["$deprecation_stream="].apply(t,e),e[e.length-1]},m.$private(),g.$get_files_to_run=function(e){var t,n,$,o=this;return(t=(n=v.get("FlatMap")).$flat_map,t.$$p=($=function(e){var t,n=$.$$s||this;return null==e&&(e=r),(t=v.get("File").$$scope.get("ALT_SEPARATOR"))===r||t.$$is_boolean&&1!=t||(e=e.$gsub(v.get("File").$$scope.get("ALT_SEPARATOR"),v.get("File").$$scope.get("SEPARATOR"))),(t=v.get("File")["$directory?"](e))===r||t.$$is_boolean&&1!=t?n.$extract_location(e):n.$gather_directories(e)},$.$$s=o,$),t).call(n,e).$sort()},g.$gather_directories=function(e){var t,n=this,$=r,o=r;return $="{"+n.$pattern().$gsub(/\s*,\s*/,",")+"}",o=function(){return(t=n.$pattern()["$=~"](new RegExp("^"+v.get("Regexp").$escape(e))))===r||t.$$is_boolean&&1!=t?v.get("Dir")["$[]"](""+e+"/"+$):v.get("Dir")["$[]"]($)}(),o.$sort()},g.$extract_location=function(e){var t,n,$,o,a=this,i=r;return(t=e["$=~"](/^(.*?)((?:\:\d+)+)$/))===r||t.$$is_boolean&&1!=t||(t=[r,(n=($=r["$[]"](c(1,-1,!1)).$split(":")).$map,n.$$p=(o=function(e){return o.$$s||this,null==e&&(e=r),e.$to_i()},o.$$s=a,o),n).call($)],e=t[0],i=t[1],a.$filter_manager().$add_location(e,i)),e},g.$command=function(){return null==s["0"]&&(s["0"]=r),s["0"].$split(v.get("File").$$scope.get("SEPARATOR")).$last()},g.$value_for=function(e,t){var n,$=this;return null==t&&(t=r),(n=$.preferred_options["$has_key?"](e))===r||n.$$is_boolean&&1!=n?t:$.preferred_options["$[]"](e)},g.$assert_no_example_groups_defined=function(e){var t,n=this;return(t=v.get("RSpec").$world().$example_groups()["$any?"]())===r||t.$$is_boolean&&1!=t?r:n.$raise(v.get("MustBeConfiguredBeforeExampleGroupsError").$new(("RSpec's "+e+" configuration option must be configured before ")["$+"]("any example groups are defined, but you have already defined a group.")))},g["$output_to_tty?"]=function(e){var t,n,$=this;return null==e&&(e=$.$output_stream()),(t=$["$tty?"]())!==!1&&t!==r?t:(n=e["$respond_to?"]("tty?"),n!==!1&&n!==r?e["$tty?"]():n)},g.$built_in_formatter=function(e){var t=this,n=r;return function(){return n=e.$to_s(),"d"["$==="](n)||"doc"["$==="](n)||"documentation"["$==="](n)||"s"["$==="](n)||"n"["$==="](n)||"spec"["$==="](n)||"nested"["$==="](n)?(t.$require("rspec/core/formatters/documentation_formatter"),v.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("DocumentationFormatter")):"h"["$==="](n)||"html"["$==="](n)?(t.$require("rspec/core/formatters/html_formatter"),v.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("HtmlFormatter")):"p"["$==="](n)||"progress"["$==="](n)?(t.$require("rspec/core/formatters/progress_formatter"),v.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("ProgressFormatter")):"j"["$==="](n)||"json"["$==="](n)?(t.$require("rspec/core/formatters/json_formatter"),v.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("JsonFormatter")):r
}()},g.$custom_formatter=function(t){var n,$,o,a=this;if(!((n=v.get("Class")["$==="](t))===r||n.$$is_boolean&&1!=n))return t;if((n=a["$string_const?"](t))===r||n.$$is_boolean&&1!=n)return r;try{return(n=($=t.$gsub(/^::/,"").$split("::")).$inject,n.$$p=(o=function(e,t){return o.$$s||this,null==e&&(e=r),null==t&&(t=r),e.$const_get(t)},o.$$s=a,o),n).call($,v.get("Object"))}catch(i){if(e.$rescue(i,[v.get("NameError")]))return(n=a.$require(a.$path_for(t)))===r||n.$$is_boolean&&1!=n?a.$raise():a.$retry();throw i}},g["$string_const?"]=function(e){var t;return t=e["$is_a?"](v.get("String")),t!==!1&&t!==r?/\A[A-Z][a-zA-Z0-9_:]*\z/["$=~"](e):t},g.$path_for=function(e){var t=this;return t.$underscore_with_fix_for_non_standard_rspec_naming(e)},g.$underscore_with_fix_for_non_standard_rspec_naming=function(e){var t=this;return t.$underscore(e).$sub(/(^|\/)r_spec($|\/)/,"\\1rspec\\2")},g.$underscore=function(e){var t=r;return t=e.$to_s().$dup(),t["$gsub!"](/::/,"/"),t["$gsub!"](/([A-Z]+)([A-Z][a-z])/,"\\1_\\2"),t["$gsub!"](/([a-z\d])([A-Z])/,"\\1_\\2"),t["$tr!"]("-","_"),t["$downcase!"](),t},g.$file_at=function(e){return v.get("FileUtils").$mkdir_p(v.get("File").$dirname(e)),v.get("File").$new(e,"w")},r&&"file_at"}(l,null)}(l)}(t)},Opal.modules["rspec/core/configuration_options"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash,i=e.hash2;return e.add_stubs(["$require","$attr_reader","$map","$sub","$filter_manager=","$filter_manager","$libs=","$[]","$options","$setup_load_path_and_require","$process_options_into","$load_formatters_into","$inject","$merge","$include?","$+","$each","$has_key?","$include","$delete","$exclude","$<<","$file_options","$command_line_options","$env_options","$new","$configuration","$private","$to_set","$!","$unshift","$reverse","$reject","$force?","$force","$send","$order","$keys","$add_formatter","$custom_options_file","$custom_options","$global_options","$project_options","$local_options","$parse!","$split","$options_from","$local_options_file","$project_options_file","$global_options_file","$parse","$args_from_options_file","$exist?","$options_file_as_erb_string","$flat_map","$to_proc","$result","$read","$binding","$join","$expand_path","$warning"]),t.$require("erb"),t.$require("shellwords"),function(t){var s=$(t,"RSpec");s.$$proto,s.$$scope,function(t){var s=$(t,"Core");s.$$proto,s.$$scope,function(t,$super){function $(){}var s=$=o(t,$super,"ConfigurationOptions",$),c=s.$$proto,l=s.$$scope;return c.filter_manager=c.command_line_options=c.args=c.local_options=c.project_options=c.global_options=r,s.$attr_reader("options"),c.$initialize=function(e){var t,n,$,o=this;return o.args=(t=(n=e).$map,t.$$p=($=function(e){return $.$$s||this,null==e&&(e=r),e.$sub("default_path","default-path").$sub("line_number","line-number")},$.$$s=o,$),t).call(n)},c.$configure=function(e){var t,n,$,o=this;return t=[o.$filter_manager()],n=e,n["$filter_manager="].apply(n,t),t[t.length-1],t=[($=o.$options()["$[]"]("libs"))!==!1&&$!==r?$:[]],n=e,n["$libs="].apply(n,t),t[t.length-1],e.$setup_load_path_and_require((t=o.$options()["$[]"]("requires"))!==!1&&t!==r?t:[]),o.$process_options_into(e),o.$load_formatters_into(e)},c.$parse_options=function(){var e,t,n,$,o,a,i=this;return i.options=(e=(t=($=(o=i.$file_options()["$<<"](i.$command_line_options())["$<<"](i.$env_options())).$each,$.$$p=(a=function(e){var t,n=a.$$s||this;return null==e&&(e=r),(t=e["$has_key?"]("inclusion_filter"))===r||t.$$is_boolean&&1!=t||n.$filter_manager().$include(e.$delete("inclusion_filter")),(t=e["$has_key?"]("exclusion_filter"))===r||t.$$is_boolean&&1!=t?r:n.$filter_manager().$exclude(e.$delete("exclusion_filter"))},a.$$s=i,a),$).call(o)).$inject,e.$$p=(n=function(e,t){var $,o,a,i=n.$$s||this;return null==e&&(e=r),null==t&&(t=r),($=(o=e).$merge,$.$$p=(a=function(e,t,n){var $;return a.$$s||this,null==e&&(e=r),null==t&&(t=r),null==n&&(n=r),($=["libs","requires"]["$include?"](e))===r||$.$$is_boolean&&1!=$?n:t["$+"](n)},a.$$s=i,a),$).call(o,t)},n.$$s=i,n),e).call(t)},c.$drb_argv=function(){var e=this;return l.get("DrbOptions").$new(e.$options(),e.$filter_manager()).$options()},c.$filter_manager=function(){var e,t=this;return(e=t.filter_manager)!==!1&&e!==r?e:t.filter_manager=l.get("RSpec").$configuration().$filter_manager()},s.$private(),e.cdecl(l,"UNFORCED_OPTIONS",["requires","profile","drb","libs","files_or_directories_to_run","line_numbers","full_description","full_backtrace","tty"].$to_set()),e.cdecl(l,"UNPROCESSABLE_OPTIONS",["libs","formatters","requires"].$to_set()),c["$force?"]=function(e){return l.get("UNFORCED_OPTIONS")["$include?"](e)["$!"]()},c.$order=function(e,t){var $,o,a,i=this;return t=n.call(arguments,1),($=(o=t.$reverse()).$each,$.$$p=(a=function(t){var n;return a.$$s||this,null==t&&(t=r),(n=e.$delete(t))===r||n.$$is_boolean&&1!=n?r:e.$unshift(t)},a.$$s=i,a),$).call(o),e},c.$process_options_into=function(e){var t,n,$,o,i,s=this,c=r;return c=(t=(n=s.$options()).$reject,t.$$p=($=function(e,t){return $.$$s||this,null==e&&(e=r),null==t&&(t=r),l.get("UNPROCESSABLE_OPTIONS")["$include?"](e)},$.$$s=s,$),t).call(n),(t=(o=s.$order(c.$keys(),"default_path","pattern")).$each,t.$$p=(i=function(t){var n,$=i.$$s||this;return null==t&&(t=r),(n=$["$force?"](t))===r||n.$$is_boolean&&1!=n?e.$send(""+t+"=",c["$[]"](t)):e.$force(a(t,c["$[]"](t)))},i.$$s=s,i),t).call(o)},c.$load_formatters_into=function(e){var t,n,$,o=this;return(t=o.$options()["$[]"]("formatters"))===r||t.$$is_boolean&&1!=t?r:(t=(n=o.$options()["$[]"]("formatters")).$each,t.$$p=($=function(t){var n;return $.$$s||this,null==t&&(t=r),(n=e).$add_formatter.apply(n,[].concat(t))},$.$$s=o,$),t).call(n)},c.$file_options=function(){var e,t=this;return(e=t.$custom_options_file())===r||e.$$is_boolean&&1!=e?[t.$global_options(),t.$project_options(),t.$local_options()]:[t.$custom_options()]},c.$env_options=function(){var e;return(e=l.get("ENV")["$[]"]("SPEC_OPTS"))===r||e.$$is_boolean&&1!=e?i([],{}):l.get("Parser")["$parse!"](l.get("Shellwords").$split(l.get("ENV")["$[]"]("SPEC_OPTS")))},c.$command_line_options=function(){var e,t=this;return(e=t.command_line_options)!==!1&&e!==r?e:t.command_line_options=l.get("Parser")["$parse!"](t.args).$merge(i(["files_or_directories_to_run"],{files_or_directories_to_run:t.args}))},c.$custom_options=function(){var e=this;return e.$options_from(e.$custom_options_file())},c.$local_options=function(){var e,t=this;return(e=t.local_options)!==!1&&e!==r?e:t.local_options=t.$options_from(t.$local_options_file())},c.$project_options=function(){var e,t=this;return(e=t.project_options)!==!1&&e!==r?e:t.project_options=t.$options_from(t.$project_options_file())},c.$global_options=function(){var e,t=this;return(e=t.global_options)!==!1&&e!==r?e:t.global_options=t.$options_from(t.$global_options_file())},c.$options_from=function(e){var t=this;return l.get("Parser").$parse(t.$args_from_options_file(e))},c.$args_from_options_file=function(e){var t,n,$=this,o=r;return(t=(n=e!==!1&&e!==r)?l.get("File")["$exist?"](e):n)===r||t.$$is_boolean&&1!=t?[]:(o=$.$options_file_as_erb_string(e),(t=(n=l.get("FlatMap")).$flat_map,t.$$p="shellsplit".$to_proc(),t).call(n,o.$split(/\n+/)))},c.$options_file_as_erb_string=function(e){var t=this;return l.get("ERB").$new(l.get("File").$read(e),r,"-").$result(t.$binding())},c.$custom_options_file=function(){var e=this;return e.$command_line_options()["$[]"]("custom_options_file")},c.$project_options_file=function(){return".rspec"},c.$local_options_file=function(){return".rspec-local"},c.$global_options_file=function(){try{return l.get("File").$join(l.get("File").$expand_path("~"),".rspec")}catch(t){if(e.$rescue(t,[l.get("ArgumentError")]))return l.get("RSpec").$warning("Unable to find ~/.rspec because the HOME environment variable is not set"),r;throw t}},r&&"global_options_file"}(s,null)}(s)}(t)},Opal.modules["rspec/core/drb_command_line"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$require","$[]","$options","$start_service","$new_with_uri","$drb_port","$run","$drb_argv"]),t.$require("drb/drb"),t.$require("rspec/core/drb_options"),function(t){var o=n(t,"RSpec");o.$$proto,o.$$scope,function(t){var o=n(t,"Core");o.$$proto,o.$$scope,function(t,$super){function n(){}var o=n=$(t,$super,"DRbCommandLine",n),a=o.$$proto,i=o.$$scope;return a.options=r,a.$initialize=function(e){var t=this;return t.options=e},a.$drb_port=function(){var e,t,n=this;return(e=(t=n.options.$options()["$[]"]("drb_port"))!==!1&&t!==r?t:i.get("ENV")["$[]"]("RSPEC_DRB"))!==!1&&e!==r?e:8989},a.$run=function(t,n){var $=this,o=r;try{i.get("DRb").$start_service("druby://localhost:0")}catch(a){if(!e.$rescue(a,[i.get("SocketError"),i.get("Errno").$$scope.get("EADDRNOTAVAIL")]))throw a;i.get("DRb").$start_service("druby://:0")}return o=i.get("DRbObject").$new_with_uri("druby://127.0.0.1:"+$.$drb_port()),o.$run($.options.$drb_argv(),t,n)},r&&"run"}(o,null)}(o)}(t)},Opal.modules["rspec/core/drb_options"]=function(e){e.dynamic_require_severity="warning";var t=(e.top,e),r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$[]","$<<","$add_failure_exit_code","$add_full_description","$add_line_numbers","$add_filter","$inclusions","$exclusions","$add_formatters","$add_libs","$add_requires","$+","$to_s","$each","$delete","$source","$push","$inject","$empty?","$each_pair","$include?","$==","$is_a?"]),function(t){var o=n(t,"Core");o.$$proto,o.$$scope,function(t,$super){function n(){}var o=n=$(t,$super,"DrbOptions",n),a=o.$$proto,i=o.$$scope;return a.submitted_options=a.filter_manager=r,a.$initialize=function(e,t){var r=this;return r.submitted_options=e,r.filter_manager=t},a.$options=function(){var e,t=this,n=r;return n=[],(e=t.submitted_options["$[]"]("color"))===r||e.$$is_boolean&&1!=e||n["$<<"]("--color"),(e=t.submitted_options["$[]"]("profile_examples"))===r||e.$$is_boolean&&1!=e||n["$<<"]("--profile"),(e=t.submitted_options["$[]"]("full_backtrace"))===r||e.$$is_boolean&&1!=e||n["$<<"]("--backtrace"),(e=t.submitted_options["$[]"]("tty"))===r||e.$$is_boolean&&1!=e||n["$<<"]("--tty"),(e=t.submitted_options["$[]"]("fail_fast"))===r||e.$$is_boolean&&1!=e||n["$<<"]("--fail-fast"),(e=t.submitted_options["$[]"]("custom_options_file"))===r||e.$$is_boolean&&1!=e||n["$<<"]("--options")["$<<"](t.submitted_options["$[]"]("custom_options_file")),(e=t.submitted_options["$[]"]("order"))===r||e.$$is_boolean&&1!=e||n["$<<"]("--order")["$<<"](t.submitted_options["$[]"]("order")),t.$add_failure_exit_code(n),t.$add_full_description(n),t.$add_line_numbers(n),t.$add_filter(n,"inclusion",t.filter_manager.$inclusions()),t.$add_filter(n,"exclusion",t.filter_manager.$exclusions()),t.$add_formatters(n),t.$add_libs(n),t.$add_requires(n),n["$+"](t.submitted_options["$[]"]("files_or_directories_to_run"))},a.$add_failure_exit_code=function(e){var t,n=this;return(t=n.submitted_options["$[]"]("failure_exit_code"))===r||t.$$is_boolean&&1!=t?r:e["$<<"]("--failure-exit-code")["$<<"](n.submitted_options["$[]"]("failure_exit_code").$to_s())},a.$add_full_description=function(e){var t,n,$,o=this;return(t=o.submitted_options["$[]"]("full_description"))===r||t.$$is_boolean&&1!=t?r:(t=(n=o.submitted_options["$[]"]("full_description")).$each,t.$$p=($=function(t){return $.$$s||this,null==t&&(t=r),e["$<<"]("--example")["$<<"](t.$source().$delete("\\"))},$.$$s=o,$),t).call(n)},a.$add_line_numbers=function(e){var t,n,$,o,a=this;return(t=a.submitted_options["$[]"]("line_numbers"))===r||t.$$is_boolean&&1!=t?r:(t=e).$push.apply(t,[].concat((n=($=a.submitted_options["$[]"]("line_numbers")).$inject,n.$$p=(o=function(e,t){return o.$$s||this,null==e&&(e=r),null==t&&(t=r),e["$<<"]("--line_number")["$<<"](t)},o.$$s=a,o),n).call($,[])))},e.cdecl(i,"CONDITIONAL_FILTERS",["if","unless"]),a.$add_filter=function(e,t,n){var $,o,a,s=this;return($=n["$empty?"]())===r||$.$$is_boolean&&1!=$?($=(o=n).$each_pair,$.$$p=(a=function(n,$){var o,s=(a.$$s||this,r);return null==n&&(n=r),null==$&&($=r),(o=i.get("CONDITIONAL_FILTERS")["$include?"](n))===r||o.$$is_boolean&&1!=o?(s=function(){return t["$=="]("inclusion")?n.$to_s():"~"+n}(),(o=$["$is_a?"](i.get("String")))===r||o.$$is_boolean&&1!=o||s["$<<"](":"+$),e["$<<"]("--tag")["$<<"](s)):r},a.$$s=s,a),$).call(o):r},a.$add_formatters=function(e){var t,n,$,o=this;return(t=o.submitted_options["$[]"]("formatters"))===r||t.$$is_boolean&&1!=t?r:(t=(n=o.submitted_options["$[]"]("formatters")).$each,t.$$p=($=function(t){var n;return $.$$s||this,null==t&&(t=r),e["$<<"]("--format")["$<<"](t["$[]"](0)),(n=t["$[]"](1))===r||n.$$is_boolean&&1!=n?r:e["$<<"]("--out")["$<<"](t["$[]"](1))},$.$$s=o,$),t).call(n)},a.$add_libs=function(e){var t,n,$,o=this;return(t=o.submitted_options["$[]"]("libs"))===r||t.$$is_boolean&&1!=t?r:(t=(n=o.submitted_options["$[]"]("libs")).$each,t.$$p=($=function(t){return $.$$s||this,null==t&&(t=r),e["$<<"]("-I")["$<<"](t)},$.$$s=o,$),t).call(n)},a.$add_requires=function(e){var t,n,$,o=this;return(t=o.submitted_options["$[]"]("requires"))===r||t.$$is_boolean&&1!=t?r:(t=(n=o.submitted_options["$[]"]("requires")).$each,t.$$p=($=function(t){return $.$$s||this,null==t&&(t=r),e["$<<"]("--require")["$<<"](t)},$.$$s=o,$),t).call(n)},r&&"add_requires"}(o,null)}(t.get("RSpec"))},Opal.modules["rspec/core/dsl"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e,n=e.nil,$=(e.breaker,e.slice),o=e.module;return e.add_stubs(["$register","$describe","$to_proc","$extend","$send"]),function(t){var r=o(t,"RSpec");r.$$proto,r.$$scope,function(t){var r=o(t,"Core");r.$$proto,r.$$scope,function(t){var r,a=o(t,"DSL"),i=a.$$proto,s=a.$$scope;i.$describe=r=function(e){var t,o,a=r.$$p,i=a||n;return e=$.call(arguments,0),r.$$p=null,(t=(o=s.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup")).$describe,t.$$p=i.$to_proc(),t).apply(o,[].concat(e)).$register()},e.donate(a,["$describe"])}(r)}(r)}(t),t.$extend(r.get("RSpec").$$scope.get("Core").$$scope.get("DSL")),r.get("Module").$send("include",r.get("RSpec").$$scope.get("Core").$$scope.get("DSL"))},Opal.modules["rspec/core/example"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=e.breaker,$=e.slice,o=e.module,a=e.klass,i=e.hash2;return e.add_stubs(["$each","$define_method","$[]","$delegate_to_metadata","$empty?","$to_s","$metadata","$location","$call","$format_docstrings_block","$configuration","$attr_reader","$for_example","$alias_method","$current_example=","$start","$pending","$dry_run?","$with_around_each_hooks","$run_before_each","$instance_exec","$to_proc","$message","$set_exception","$run_after_each","$instance_variable_set","$instance_variables","$assign_generated_description","$finish","$__send__","$public_instance_methods","$new","$class","$any_apply?","$all_apply?","$around_each_hooks_for","$example_group","$!","$==","$first","$backtrace","$reporter","$instance_exec_with_rescue","$private","$around_each_hooks","$run_around_each_hooks","$example_started","$record","$now","$record_finished","$example_failed","$example_pending","$===","$example_passed","$merge","$to_f","$-","$execution_result","$setup_mocks_for_rspec","$run_before_each_hooks","$run_after_each_hooks","$verify_mocks","$teardown_mocks_for_rspec","$verify_mocks_for_rspec","$expecting_with_rspec?","$pending?","$<<","$generated_description","$clear_generated_description","$update"]),function(t){var s=o(t,"RSpec");s.$$proto,s.$$scope,function(t){var s=o(t,"Core");s.$$proto,s.$$scope,function(t,$super){function o(){}var s,c,l,u=o=a(t,$super,"Example",o),_=u.$$proto,p=u.$$scope;return _.example_group_class=_.options=_.example_group_instance=_.metadata=_.around_each_hooks=_.exception=_.pending_declared_in_example=r,e.defs(u,"$delegate_to_metadata",function(e){var t,n,o,a=this;return e=$.call(arguments,0),(t=(n=e).$each,t.$$p=(o=function(e){var t,n,$,a=o.$$s||this;return null==e&&(e=r),(t=(n=a).$define_method,t.$$p=($=function(){var t=$.$$s||this;return null==t.metadata&&(t.metadata=r),t.metadata["$[]"](e)},$.$$s=a,$),t).call(n,e)},o.$$s=a,o),t).call(n)}),u.$delegate_to_metadata("full_description","execution_result","file_path","pending","location"),_.$description=function(){var e,t=this,n=r;return n=function(){return(e=t.$metadata()["$[]"]("description").$to_s()["$empty?"]())===r||e.$$is_boolean&&1!=e?t.$metadata()["$[]"]("description"):"example at "+t.$location()}(),p.get("RSpec").$configuration().$format_docstrings_block().$call(n)},u.$attr_reader("exception"),u.$attr_reader("metadata"),u.$attr_reader("example_group_instance"),_.$initialize=function(e,t,n,$){var o,a=this;return null==$&&($=r),o=[e,n,$],a.example_group_class=o[0],a.options=o[1],a.example_block=o[2],a.metadata=a.example_group_class.$metadata().$for_example(t,n),a.example_group_instance=a.exception=r,a.pending_declared_in_example=!1},_.$options=function(){var e=this;return e.options},_.$example_group=function(){var e=this;return e.example_group_class},u.$alias_method("pending?","pending"),_.$run=function(t,n){var $,o,a,i,s,c,l=this,u=r;try{l.example_group_instance=t,$=[l],o=p.get("RSpec"),o["$current_example="].apply(o,$),$[$.length-1],l.$start(n);try{try{(($=(o=l.$pending())!==!1&&o!==r?o:p.get("RSpec").$configuration()["$dry_run?"]())===r||$.$$is_boolean&&1!=$)&&($=(o=l).$with_around_each_hooks,$.$$p=(a=function(){var t,n,$=a.$$s||this,o=r;null==$.example_block&&($.example_block=r),null==$.example_group_instance&&($.example_group_instance=r);try{try{return $.$run_before_each(),(t=(n=$.example_group_instance).$instance_exec,t.$$p=$.example_block.$to_proc(),t).call(n,$)}catch(i){if(e.$rescue(i,[p.get("Pending").$$scope.get("PendingDeclaredInExample")]))return o=i,$.pending_declared_in_example=o.$message();if(!e.$rescue(i,[p.get("Exception")]))throw i;o=i,$.$set_exception(o)}}finally{$.$run_after_each()}},a.$$s=l,a),$).call(o)}catch(_){if(!e.$rescue(_,[p.get("Exception")]))throw _;u=_,l.$set_exception(u)}}finally{($=(i=l.example_group_instance.$instance_variables()).$each,$.$$p=(s=function(e){var t=s.$$s||this;return null==t.example_group_instance&&(t.example_group_instance=r),null==e&&(e=r),t.example_group_instance.$instance_variable_set(e,r)},s.$$s=l,s),$).call(i),l.example_group_instance=r;try{l.$assign_generated_description()}catch(_){if(!e.$rescue(_,[p.get("Exception")]))throw _;u=_,l.$set_exception(u,"while assigning the example description")}}return l.$finish(n)}finally{$=[r],c=p.get("RSpec"),c["$current_example="].apply(c,$),$[$.length-1]}},function(t,$super){function n(){}var o,i,s,c,l,u=n=a(t,$super,"Procsy",n),_=u.$$proto,p=u.$$scope;return u.$attr_reader("metadata"),(o=(i=p.get("Proc").$public_instance_methods(!1)).$each,o.$$p=(s=function(e){var t,n,o,a=s.$$s||this;return null==e&&(e=r),(t=(n=a).$define_method,t.$$p=(o=function(t){var n,a,i,s=o.$$s||this;return null==s.proc&&(s.proc=r),t=$.call(arguments,0),n=o.$$p||r,o.$$p=null,(a=(i=s.proc).$__send__,a.$$p=n.$to_proc(),a).apply(i,[e].concat(t))},o.$$s=a,o),t).call(n,e)},s.$$s=u,s),o).call(i),e.defn(u,"$run",_.$call),_.$initialize=c=function(e){var t=this,n=c.$$p,$=n||r;return c.$$p=null,t.metadata=e,t.proc=$},_.$wrap=l=function(){var e,t,n=this,$=l.$$p,o=$||r;return l.$$p=null,(e=(t=n.$class()).$new,e.$$p=o.$to_proc(),e).call(t,n.$metadata())},r&&"wrap"}(u,null),_["$any_apply?"]=function(e){var t=this;return t.$metadata()["$any_apply?"](e)},_["$all_apply?"]=function(e){var t,n=this;return(t=n.metadata["$all_apply?"](e))!==!1&&t!==r?t:n.example_group_class["$all_apply?"](e)},_.$around_each_hooks=function(){var e,t=this;return(e=t.around_each_hooks)!==!1&&e!==r?e:t.around_each_hooks=t.$example_group().$around_each_hooks_for(t)},_.$set_exception=function(e,t){var n,$,o=this,a=r;return null==t&&(t=r),$=o.exception,(n=$!==!1&&$!==r?t["$=="]("dont_print")["$!"]():$)===r||n.$$is_boolean&&1!=n||(a="\nAn error occurred "+t+"\n  "+e.$class()+": "+e.$message()+"\n  occurred at "+e.$backtrace().$first()+"\n\n",p.get("RSpec").$configuration().$reporter().$message(a)),(n=o.exception)!==!1&&n!==r?n:o.exception=e},_.$fail_with_exception=function(e,t){var r=this;return r.$start(e),r.$set_exception(t),r.$finish(e)},_.$instance_exec_with_rescue=s=function(e){var t,n,$=this,o=s.$$p,a=o||r;return null==e&&(e=r),s.$$p=null,(t=(n=$.example_group_instance).$instance_exec_with_rescue,t.$$p=a.$to_proc(),t).call(n,$,e)},_.$instance_exec=c=function(e){var t,n,o=this,a=c.$$p,i=a||r;return e=$.call(arguments,0),c.$$p=null,(t=(n=o.example_group_instance).$instance_exec,t.$$p=i.$to_proc(),t).apply(n,[].concat(e))},u.$private(),_.$with_around_each_hooks=l=function(){var t,$,o=this,a=l.$$p,i=a||r,s=r;l.$$p=null;try{return(t=o.$around_each_hooks()["$empty?"]())===r||t.$$is_boolean&&1!=t?o.example_group_class.$run_around_each_hooks(o,(t=($=p.get("Procsy")).$new,t.$$p=i.$to_proc(),t).call($,o.$metadata())):(t=e.$yieldX(i,[]),t===n?t:t)}catch(c){if(e.$rescue(c,[p.get("Exception")]))return s=c,o.$set_exception(s,"in an around(:each) hook");throw c}},_.$start=function(e){var t=this;return e.$example_started(t),t.$record(i(["started_at"],{started_at:p.get("RSpec").$$scope.get("Core").$$scope.get("Time").$now()}))},_.$finish=function(e){var t,n=this;return(t=n.exception)===r||t.$$is_boolean&&1!=t?(t=n.pending_declared_in_example)===r||t.$$is_boolean&&1!=t?(t=n.$pending())===r||t.$$is_boolean&&1!=t?(n.$record_finished("passed"),e.$example_passed(n),!0):(n.$record_finished("pending",i(["pending_message"],{pending_message:function(){return(t=p.get("String")["$==="](n.$pending()))===r||t.$$is_boolean&&1!=t?p.get("Pending").$$scope.get("NO_REASON_GIVEN"):n.$pending()}()})),e.$example_pending(n),!0):(n.$record_finished("pending",i(["pending_message"],{pending_message:n.pending_declared_in_example})),e.$example_pending(n),!0):(n.$record_finished("failed",i(["exception"],{exception:n.exception})),e.$example_failed(n),!1)},_.$record_finished=function(e,t){var n=this,$=r;return null==t&&(t=i([],{})),$=p.get("RSpec").$$scope.get("Core").$$scope.get("Time").$now(),n.$record(t.$merge(i(["status","finished_at","run_time"],{status:e,finished_at:$,run_time:$["$-"](n.$execution_result()["$[]"]("started_at")).$to_f()})))},_.$run_before_each=function(){var e=this;return e.example_group_instance.$setup_mocks_for_rspec(),e.example_group_class.$run_before_each_hooks(e)},_.$run_after_each=function(){var t=this,n=r;try{try{return t.example_group_class.$run_after_each_hooks(t),t.$verify_mocks()}catch($){if(e.$rescue($,[p.get("Exception")]))return n=$,t.$set_exception(n,"in an after(:each) hook");throw $}}finally{t.example_group_instance.$teardown_mocks_for_rspec()}},_.$verify_mocks=function(){var t=this,n=r;try{return t.example_group_instance.$verify_mocks_for_rspec()}catch($){if(e.$rescue($,[p.get("Exception")]))return n=$,t.$set_exception(n,"dont_print");throw $}},_.$assign_generated_description=function(){var e,t,n=this;return(e=p.get("RSpec").$configuration()["$expecting_with_rspec?"]())===r||e.$$is_boolean&&1!=e?r:(t=n.$metadata()["$[]"]("description_args")["$empty?"](),(e=t!==!1&&t!==r?n["$pending?"]()["$!"]():t)===r||e.$$is_boolean&&1!=e||n.$metadata()["$[]"]("description_args")["$<<"](p.get("RSpec").$$scope.get("Matchers").$generated_description()),p.get("RSpec").$$scope.get("Matchers").$clear_generated_description())},_.$record=function(e){var t=this;return null==e&&(e=i([],{})),t.$execution_result().$update(e)},r&&"record"}(s,null)}(s)}(t)},Opal.modules["rspec/core/example_group"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$extend","$include","$world","$register","$each","$define_method","$[]","$metadata","$call","$format_docstrings_block","$configuration","$delegate_to_metadata","$alias_method","$build_hash_from","$update","$<<","$examples","$new","$last","$define_example_method","$describe","$find_and_eval_shared","$to_proc","$[]=","$define_nested_shared_group_method","$shared_example_groups","$raise","$inspect","$module_exec","$module_eval","$filtered_examples","$+","$inject","$descendant_filtered_examples","$children","$respond_to?","$superclass","$is_a?","$subclass","$set_it_up","$assign_const","$define_helpers_on","$descendants","$select","$<","$ancestors","$==","$configure_mock_framework","$configure_expectation_framework","$ensure_example_groups_are_configured","$first","$shift","$unshift","$process","$superclass_metadata","$register_globals","$hooks","$configure_group","$empty?","$instance_variables","$before_all_ivars","$instance_variable_get","$instance_variable_set","$assign_before_all_ivars","$isolate_for_all_hook","$run_hook","$store_before_all_ivars","$wants_to_quit","$top_level?","$clear_remaining_example_groups","$example_group_started","$run_before_all_hooks","$run_examples","$all?","$map","$run","$order","$ordering_strategy","$fail_fast?","$wants_to_quit=","$fail_filtered_examples","$run_after_all_hooks","$clear","$example_group_finished","$fetch","$ordering_registry","$warn","$gsub","$set_ivars","$!","$fail_with_exception","$any_apply?","$all_apply?","$collect","$declaration_line_numbers","$description","$parent_groups","$described_class","$class","$instance_exec","$current_example","$set_exception","$base_name_for","$constant_scope_for","$disambiguate","$const_set","$gsub!","$upcase","$lstrip!","$const_defined?","$next!"]),function(t){var i=$(t,"RSpec");i.$$proto,i.$$scope,function(t){var i=$(t,"Core");i.$$proto,i.$$scope,function(t,$super){function $(){}var i,s,c,l,u,_,p=$=o(t,$super,"ExampleGroup",$),d=p.$$proto,f=p.$$scope;return p.$extend(f.get("Hooks")),p.$include(f.get("MemoizedHelpers")),p.$include(f.get("Pending")),p.$extend(f.get("SharedExampleGroup")),e.defs(p,"$world",function(){return f.get("RSpec").$world()}),e.defs(p,"$register",function(){var e=this;return e.$world().$register(e)}),function(t){var $=t.$$scope;return t.$$proto,e.defs(t,"$delegate_to_metadata",function(e){var t,$,o,a=this;return e=n.call(arguments,0),(t=($=e).$each,t.$$p=(o=function(e){var t,n,$,a=o.$$s||this;return null==e&&(e=r),(t=(n=a).$define_method,t.$$p=($=function(){var t=$.$$s||this;return t.$metadata()["$[]"]("example_group")["$[]"](e)},$.$$s=a,$),t).call(n,e)},o.$$s=a,o),t).call($)}),t.$$proto.$description=function(){var e=this,t=r;return t=e.$metadata()["$[]"]("example_group")["$[]"]("description"),$.get("RSpec").$configuration().$format_docstrings_block().$call(t)},t.$delegate_to_metadata("described_class","file_path"),t.$alias_method("display_name","description"),t.$alias_method("describes","described_class"),e.defs(t,"$define_example_method",function(e,t){var o,i,s,c=this;return null==t&&(t=a([],{})),(o=(i=c).$define_method,o.$$p=(s=function(e){var o,i,c=s.$$s||this,l=r,u=r,_=r;return e=n.call(arguments,0),o=s.$$p||r,s.$$p=null,(i=e).$to_a&&!i.$to_a.$$stub?i=i.$to_a():i.$$is_array?i:i=[i],l=null==i[0]?r:i[0],u=n.call(i,1),_=$.get("Metadata").$build_hash_from(u),o!==!1&&o!==r||_.$update(a(["pending"],{pending:$.get("RSpec").$$scope.get("Core").$$scope.get("Pending").$$scope.get("NOT_YET_IMPLEMENTED")})),_.$update(t),c.$examples()["$<<"]($.get("RSpec").$$scope.get("Core").$$scope.get("Example").$new(c,l,_,o)),c.$examples().$last()},s.$$s=c,s),o).call(i,e)}),t.$define_example_method("example"),t.$define_example_method("it"),t.$define_example_method("specify"),t.$define_example_method("focus",a(["focused","focus"],{focused:!0,focus:!0})),t.$define_example_method("focused",a(["focused","focus"],{focused:!0,focus:!0})),t.$define_example_method("fit",a(["focused","focus"],{focused:!0,focus:!0})),t.$define_example_method("pending",a(["pending"],{pending:!0})),t.$define_example_method("xexample",a(["pending"],{pending:"Temporarily disabled with xexample"})),t.$define_example_method("xit",a(["pending"],{pending:"Temporarily disabled with xit"})),t.$define_example_method("xspecify",a(["pending"],{pending:"Temporarily disabled with xspecify"})),t.$$proto.$alias_example_to=function(e,t){var r=this;return null==t&&(t=a([],{})),function(e){return e.$$scope,e.$$proto,e}(r.$singleton_class()).$define_example_method(e,t)},e.defs(t,"$define_nested_shared_group_method",function(e,t){var $,o,a,i=this;return null==t&&(t="it should behave like"),($=(o=i).$define_method,$.$$p=(a=function(e,$){var o,i,s,c,l=a.$$s||this,u=r;return null==e&&(e=r),$=n.call(arguments,1),o=a.$$p||r,a.$$p=null,u=(i=(s=l).$describe,i.$$p=(c=function(){var t,r,n=c.$$s||this;return(t=(r=n).$find_and_eval_shared,t.$$p=o.$to_proc(),t).apply(r,["examples",e].concat($))},c.$$s=l,c),i).call(s,""+t+" "+e),u.$metadata()["$[]="]("shared_group_name",e),u},a.$$s=i,a),$).call(o,e)}),t.$define_nested_shared_group_method("it_behaves_like","behaves like"),t.$define_nested_shared_group_method("it_should_behave_like"),t.$$proto.$alias_it_behaves_like_to=TMP_6=function(e,t){var $,o,a=this,i=TMP_6.$$p,s=i||r;return t=n.call(arguments,1),TMP_6.$$p=null,($=(o=function(e){return e.$$scope,e.$$proto,e}(a.$singleton_class())).$define_nested_shared_group_method,$.$$p=s.$to_proc(),$).apply(o,[e].concat(t))},r&&"alias_it_behaves_like_to"}(p.$singleton_class()),e.defs(p,"$include_context",i=function(e,t){var $,o,a=this,s=i.$$p,c=s||r;return t=n.call(arguments,1),i.$$p=null,($=(o=a).$find_and_eval_shared,$.$$p=c.$to_proc(),$).apply(o,["context",e].concat(t))}),e.defs(p,"$include_examples",s=function(e,t){var $,o,a=this,i=s.$$p,c=i||r;return t=n.call(arguments,1),s.$$p=null,($=(o=a).$find_and_eval_shared,$.$$p=c.$to_proc(),$).apply(o,["examples",e].concat(t))}),e.defs(p,"$find_and_eval_shared",c=function(e,t,$){var o,a,i,s=this,l=c.$$p,u=l||r,_=r;return $=n.call(arguments,2),c.$$p=null,((o=_=s.$shared_example_groups()["$[]"](t))===r||o.$$is_boolean&&1!=o)&&s.$raise(f.get("ArgumentError"),"Could not find shared "+e+" "+t.$inspect()),(o=(a=s).$module_exec,o.$$p=_.$to_proc(),o).apply(a,[].concat($)),u!==!1&&u!==r?(o=(i=s).$module_eval,o.$$p=u.$to_proc(),o).call(i):r}),e.defs(p,"$examples",function(){var e,t=this;return null==t.examples&&(t.examples=r),(e=t.examples)!==!1&&e!==r?e:t.examples=[]}),e.defs(p,"$filtered_examples",function(){var e=this;return e.$world().$filtered_examples()["$[]"](e)}),e.defs(p,"$descendant_filtered_examples",function(){var e,t,n,$,o=this;return null==o.descendant_filtered_examples&&(o.descendant_filtered_examples=r),(e=o.descendant_filtered_examples)!==!1&&e!==r?e:o.descendant_filtered_examples=o.$filtered_examples()["$+"]((t=(n=o.$children()).$inject,t.$$p=($=function(e,t){return $.$$s||this,null==e&&(e=r),null==t&&(t=r),e["$+"](t.$descendant_filtered_examples())},$.$$s=o,$),t).call(n,[]))}),e.defs(p,"$metadata",function(){var e,t,n=this;return null==n.metadata&&(n.metadata=r),t=n.metadata,(e=null!=t&&t!==r?"instance-variable":r)===r||e.$$is_boolean&&1!=e?r:n.metadata}),e.defs(p,"$superclass_metadata",function(){var e,t,n=this;return null==n.superclass_metadata&&(n.superclass_metadata=r),(e=n.superclass_metadata)!==!1&&e!==r?e:n.superclass_metadata=function(){return(t=n.$superclass()["$respond_to?"]("metadata"))===r||t.$$is_boolean&&1!=t?r:n.$superclass().$metadata()}()}),e.defs(p,"$describe",l=function(e){var t,$,o=this,i=l.$$p,s=i||r,c=r;return e=n.call(arguments,0),l.$$p=null,((t=e.$last()["$is_a?"](f.get("Hash")))===r||t.$$is_boolean&&1!=t)&&e["$<<"](a([],{})),e.$last().$update(a(["example_group_block"],{example_group_block:s})),c=(t=($=o).$subclass,t.$$p=s.$to_proc(),t).call($,o,e),o.$children()["$<<"](c),c}),function(e){return e.$$scope,e.$$proto,e.$alias_method("context","describe")}(p.$singleton_class()),e.defs(p,"$subclass",u=function(e,t){var n,$,o,a=u.$$p,i=a||r,s=r;return u.$$p=null,s=f.get("Class").$new(e),(n=s).$set_it_up.apply(n,[].concat(t)),f.get("ExampleGroups").$assign_const(s),i!==!1&&i!==r&&($=(o=s).$module_eval,$.$$p=i.$to_proc(),$).call(o),f.get("MemoizedHelpers").$define_helpers_on(s),s}),e.defs(p,"$children",function(){var e,t=this;return null==t.children&&(t.children=r),(e=t.children)!==!1&&e!==r?e:t.children=[]}),e.defs(p,"$descendants",function(){var e,t,n,$,o=this;return null==o._descendants&&(o._descendants=r),(e=o._descendants)!==!1&&e!==r?e:o._descendants=[o]["$+"]((t=(n=o.$children()).$inject,t.$$p=($=function(e,t){return $.$$s||this,null==e&&(e=r),null==t&&(t=r),e["$+"](t.$descendants())},$.$$s=o,$),t).call(n,[]))}),e.defs(p,"$parent_groups",function(){var e,t,n,$,o=this;return null==o.parent_groups&&(o.parent_groups=r),(e=o.parent_groups)!==!1&&e!==r?e:o.parent_groups=(t=(n=o.$ancestors()).$select,t.$$p=($=function(e){return $.$$s||this,null==e&&(e=r),e["$<"](f.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup"))},$.$$s=o,$),t).call(n)}),e.defs(p,"$top_level?",function(){var e,t=this;return null==t.top_level&&(t.top_level=r),(e=t.top_level)!==!1&&e!==r?e:t.top_level=t.$superclass()["$=="](f.get("ExampleGroup"))}),e.defs(p,"$ensure_example_groups_are_configured",function(){var t;
return(t=null!=e.cvars["@@example_groups_configured"]?"class variable":r)===r||t.$$is_boolean&&1!=t?(f.get("RSpec").$configuration().$configure_mock_framework(),f.get("RSpec").$configuration().$configure_expectation_framework(),e.cvars["@@example_groups_configured"]=!0):r}),e.defs(p,"$set_it_up",function(e){var t,$=this,o=r;return e=n.call(arguments,0),$.$ensure_example_groups_are_configured(),(t=e.$first()["$is_a?"](f.get("Symbol")))===r||t.$$is_boolean&&1!=t||(o=e.$shift()),e["$<<"](f.get("Metadata").$build_hash_from(e)),o!==!1&&o!==r&&e.$unshift(o),$.metadata=(t=f.get("RSpec").$$scope.get("Core").$$scope.get("Metadata").$new($.$superclass_metadata())).$process.apply(t,[].concat(e)),$.order=r,$.$hooks().$register_globals($,f.get("RSpec").$configuration().$hooks()),$.$world().$configure_group($)}),e.defs(p,"$before_all_ivars",function(){var e,t=this;return null==t.before_all_ivars&&(t.before_all_ivars=r),(e=t.before_all_ivars)!==!1&&e!==r?e:t.before_all_ivars=a([],{})}),e.defs(p,"$store_before_all_ivars",function(e){var t,n,$,o=this;return(t=e.$instance_variables()["$empty?"]())===r||t.$$is_boolean&&1!=t?(t=(n=e.$instance_variables()).$each,t.$$p=($=function(t){var n=$.$$s||this;return null==t&&(t=r),n.$before_all_ivars()["$[]="](t,e.$instance_variable_get(t))},$.$$s=o,$),t).call(n):r}),e.defs(p,"$assign_before_all_ivars",function(e,t){var n,$,o,a=this;return(n=($=e).$each,n.$$p=(o=function(e,n){return o.$$s||this,null==e&&(e=r),null==n&&(n=r),t.$instance_variable_set(e,n)},o.$$s=a,o),n).call($)}),e.defs(p,"$run_before_all_hooks",function(e){var t,n,$,o=this;if((t=o.$descendant_filtered_examples()["$empty?"]())!==r&&(!t.$$is_boolean||1==t))return r;try{return o.$assign_before_all_ivars(o.$superclass().$before_all_ivars(),e),(t=(n=f.get("AllHookMemoizedHash").$$scope.get("Before")).$isolate_for_all_hook,t.$$p=($=function(){var t=$.$$s||this;return t.$run_hook("before","all",e)},$.$$s=o,$),t).call(n,e)}finally{o.$store_before_all_ivars(e)}}),e.defs(p,"$run_around_each_hooks",function(e,t){var r=this;return r.$run_hook("around","each",e,t)}),e.defs(p,"$run_before_each_hooks",function(e){var t=this;return t.$run_hook("before","each",e)}),e.defs(p,"$run_after_each_hooks",function(e){var t=this;return t.$run_hook("after","each",e)}),e.defs(p,"$run_after_all_hooks",function(e){var t,n,$,o=this;return(t=o.$descendant_filtered_examples()["$empty?"]())===r||t.$$is_boolean&&1!=t?(o.$assign_before_all_ivars(o.$before_all_ivars(),e),(t=(n=f.get("AllHookMemoizedHash").$$scope.get("After")).$isolate_for_all_hook,t.$$p=($=function(){var t=$.$$s||this;return t.$run_hook("after","all",e)},$.$$s=o,$),t).call(n,e)):r}),e.defs(p,"$run",function(t){var n,$,o,a,i=this,s=r,c=r,l=r;if((n=f.get("RSpec").$wants_to_quit())!==r&&(!n.$$is_boolean||1==n))return(n=i["$top_level?"]())===r||n.$$is_boolean&&1!=n||f.get("RSpec").$clear_remaining_example_groups(),r;t.$example_group_started(i);try{try{return i.$run_before_all_hooks(i.$new()),s=i.$run_examples(t),c=(n=($=i.$ordering_strategy().$order(i.$children())).$map,n.$$p=(o=function(e){return o.$$s||this,null==e&&(e=r),e.$run(t)},o.$$s=i,o),n).call($)["$all?"](),(n=s!==!1&&s!==r)?c:n}catch(u){if(e.$rescue(u,[f.get("Exception")]))return l=u,(n=i["$fail_fast?"]())===r||n.$$is_boolean&&1!=n||(n=[!0],a=f.get("RSpec"),a["$wants_to_quit="].apply(a,n),n[n.length-1]),i.$fail_filtered_examples(l,t);throw u}}finally{i.$run_after_all_hooks(i.$new()),i.$before_all_ivars().$clear(),t.$example_group_finished(i)}}),e.defs(p,"$ordering_strategy",function(){var e,t,n,$=this,o=r,a=r;return o=$.$metadata().$fetch("order","global"),a=f.get("RSpec").$configuration().$ordering_registry(),(e=(t=a).$fetch,e.$$p=(n=function(){var e=n.$$s||this;return e.$warn(("            |WARNING: Ignoring unknown ordering specified using `:order => "+o.$inspect()+"` metadata.\n            |         Falling back to configured global ordering.\n            |         Unrecognized ordering specified at: "+e.$metadata()["$[]"]("example_group")["$[]"]("location")+"\n").$gsub(/^ +\|/,"")),a.$fetch("global")},n.$$s=$,n),e).call(t,o)}),e.defs(p,"$run_examples",function(e){var t,n,$,o=this;return(t=(n=o.$ordering_strategy().$order(o.$filtered_examples())).$map,t.$$p=($=function(t){var n,o,a=$.$$s||this,i=r,s=r;return null==t&&(t=r),(n=f.get("RSpec").$wants_to_quit())===r||n.$$is_boolean&&1!=n?(i=a.$new(),a.$set_ivars(i,a.$before_all_ivars()),s=t.$run(i,e),o=a["$fail_fast?"](),(n=o!==!1&&o!==r?s["$!"]():o)===r||n.$$is_boolean&&1!=n||(n=[!0],o=f.get("RSpec"),o["$wants_to_quit="].apply(o,n),n[n.length-1]),s):r},$.$$s=o,$),t).call(n)["$all?"]()}),e.defs(p,"$fail_filtered_examples",function(e,t){var n,$,o,a,i,s=this;return(n=($=s.$filtered_examples()).$each,n.$$p=(o=function(n){return o.$$s||this,null==n&&(n=r),n.$fail_with_exception(t,e)},o.$$s=s,o),n).call($),(n=(a=s.$children()).$each,n.$$p=(i=function(n){return i.$$s||this,null==n&&(n=r),t.$example_group_started(n),n.$fail_filtered_examples(e,t),t.$example_group_finished(n)},i.$$s=s,i),n).call(a),!1}),e.defs(p,"$fail_fast?",function(){return f.get("RSpec").$configuration()["$fail_fast?"]()}),e.defs(p,"$any_apply?",function(e){var t=this;return t.$metadata()["$any_apply?"](e)}),e.defs(p,"$all_apply?",function(e){var t=this;return t.$metadata()["$all_apply?"](e)}),e.defs(p,"$declaration_line_numbers",function(){var e,t,n,$,o,a,i=this;return null==i.declaration_line_numbers&&(i.declaration_line_numbers=r),(e=i.declaration_line_numbers)!==!1&&e!==r?e:i.declaration_line_numbers=[i.$metadata()["$[]"]("example_group")["$[]"]("line_number")]["$+"]((t=(n=i.$examples()).$collect,t.$$p=($=function(e){return $.$$s||this,null==e&&(e=r),e.$metadata()["$[]"]("line_number")},$.$$s=i,$),t).call(n))["$+"]((t=(o=i.$children()).$inject,t.$$p=(a=function(e,t){return a.$$s||this,null==e&&(e=r),null==t&&(t=r),e["$+"](t.$declaration_line_numbers())},a.$$s=i,a),t).call(o,[]))}),e.defs(p,"$top_level_description",function(){var e=this;return e.$parent_groups().$last().$description()}),e.defs(p,"$set_ivars",function(e,t){var n,$,o,a=this;return(n=($=t).$each,n.$$p=(o=function(t,n){return o.$$s||this,null==t&&(t=r),null==n&&(n=r),e.$instance_variable_set(t,n)},o.$$s=a,o),n).call($)}),d.$described_class=function(){var e=this;return e.$class().$described_class()},d.$instance_exec_with_rescue=_=function(t,n){var $,o,a=this,i=_.$$p,s=i||r,c=r;null==n&&(n=r),_.$$p=null;try{return($=(o=a).$instance_exec,$.$$p=s.$to_proc(),$).call(o,t)}catch(l){if(e.$rescue(l,[f.get("Exception")]))return c=l,($=f.get("RSpec").$current_example())===r||$.$$is_boolean&&1!=$?a.$raise():f.get("RSpec").$current_example().$set_exception(c,n);throw l}},r&&"instance_exec_with_rescue"}(i,null)}(i),function(t){var n=$(t,"ExampleGroups"),o=(n.$$proto,n.$$scope);e.defs(n,"$assign_const",function(e){var t=this,n=r,$=r,o=r;return n=t.$base_name_for(e),$=t.$constant_scope_for(e),o=t.$disambiguate(n,$),$.$const_set(o,e)}),e.defs(n,"$constant_scope_for",function(e){var t=this,n=r;return n=e.$superclass(),n["$=="](o.get("Core").$$scope.get("ExampleGroup"))&&(n=t),n}),e.defs(n,"$base_name_for",function(e){var t,n,$,o=this,a=r;return(t=e.$description()["$empty?"]())===r||t.$$is_boolean&&1!=t?(a=" "["$+"](e.$description()),(t=(n=a)["$gsub!"],t.$$p=($=function(){return $.$$s||this,r.$upcase()},$.$$s=o,$),t).call(n,/[^0-9a-zA-Z]+([0-9a-zA-Z])/),a["$lstrip!"](),a["$gsub!"](/\W/,""),a["$gsub!"](/\A([^A-Z]|\z)/,"Nested\\1"),a):"Anonymous"}),e.defs(n,"$disambiguate",function(e,t){var n,$;if((n=t["$const_defined?"](e))===r||n.$$is_boolean&&1!=n)return e;for(e["$<<"]("_2");($=t["$const_defined?"](e))!==r&&(!$.$$is_boolean||1==$);)e["$next!"]();return e})}(i)}(t)},Opal.modules["rspec/core/filter_manager"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=e.breaker,$=e.slice,o=e.module,a=e.klass,i=e.hash2;return e.add_stubs(["$expand_path","$gsub","$inspect","$inspect_filter_hash","$lambda","$!","$each","$store","$without_conditional_filters","$empty?","$private","$reject","$==","$[]","$_warn_deprecated_keys","$last","$has_key?","$_warn_deprecated_key","$deprecate","$[]=","$delete","$attr_reader","$new","$extend","$push","$replace","$clear","$inclusions","$empty_without_conditional_filters?","$exclusions","$select","$exclude?","$include?","$merge","$reverse_merge","$any_apply?","$unless_standalone","$already_set_standalone_filter?","$is_standalone_filter?","$each_key","$merge!","$each_pair","$any?"]),function(t){var s=o(t,"RSpec");s.$$proto,s.$$scope,function(t){var s=o(t,"Core");s.$$proto,s.$$scope,function(t,$super){function s(){}var c,l=s=a(t,$super,"FilterManager",s),u=l.$$proto,_=l.$$scope;return u.inclusions=u.exclusions=r,e.cdecl(_,"STANDALONE_FILTERS",["locations","line_numbers","full_description"]),e.cdecl(_,"PROC_HEX_NUMBER",/0x[0-9a-f]+@/),e.cdecl(_,"PROJECT_DIR",_.get("File").$expand_path(".")),e.defs(l,"$inspect_filter_hash",function(e){return e.$inspect().$gsub(_.get("PROC_HEX_NUMBER"),"").$gsub(_.get("PROJECT_DIR"),".").$gsub(" (lambda)","")}),function(e,$super){function t(){}var n=t=a(e,$super,"InclusionFilterHash",t),$=n.$$proto,o=n.$$scope;return $.$description=function(){var e=this;return o.get("FilterManager").$inspect_filter_hash(e)},r&&"description"}(l,_.get("Hash")),function(t,$super){function n(){}var o,s,c,l,u,_,p=n=a(t,$super,"ExclusionFilterHash",n),d=p.$$proto,f=p.$$scope;return e.cdecl(f,"CONDITIONAL_FILTERS",i(["if","unless"],{"if":(o=(s=p).$lambda,o.$$p=(c=function(e){return c.$$s||this,null==e&&(e=r),e["$!"]()},c.$$s=p,c),o).call(s),unless:(o=(l=p).$lambda,o.$$p=(u=function(e){return u.$$s||this,null==e&&(e=r),e},u.$$s=p,u),o).call(l)})),d.$initialize=_=function(){var t,n,o,a=$.call(arguments,0),i=this,s=_.$$p;return _.$$p=null,e.find_super_dispatcher(i,"initialize",_,s).apply(i,a),(t=(n=f.get("CONDITIONAL_FILTERS")).$each,t.$$p=(o=function(e,t){var n=o.$$s||this;return null==e&&(e=r),null==t&&(t=r),n.$store(e,t)},o.$$s=i,o),t).call(n)},d.$description=function(){var e=this;return f.get("FilterManager").$inspect_filter_hash(e.$without_conditional_filters())},d["$empty_without_conditional_filters?"]=function(){var e=this;return e.$without_conditional_filters()["$empty?"]()},p.$private(),d.$without_conditional_filters=function(){var e,t,n,$=this;return(e=(t=$).$reject,e.$$p=(n=function(e,t){return n.$$s||this,null==e&&(e=r),null==t&&(t=r),f.get("CONDITIONAL_FILTERS")["$[]"](e)["$=="](t)},n.$$s=$,n),e).call(t)},r&&"without_conditional_filters"}(l,_.get("Hash")),function(t){var n,a,i=o(t,"BackwardCompatibility"),s=i.$$proto,c=i.$$scope;s.$merge=n=function(t,r,o){var a=$.call(arguments,0),i=this,s=n.$$p;return o=$.call(arguments,2),n.$$p=null,i.$_warn_deprecated_keys(o.$last()),e.find_super_dispatcher(i,"merge",n,s).apply(i,a)},s.$reverse_merge=a=function(t,r,n){var o=$.call(arguments,0),i=this,s=a.$$p;return n=$.call(arguments,2),a.$$p=null,i.$_warn_deprecated_keys(n.$last()),e.find_super_dispatcher(i,"reverse_merge",a,s).apply(i,o)},s.$_warn_deprecated_keys=function(e){var t,n=this;return(t=e["$has_key?"]("unless"))===r||t.$$is_boolean&&1!=t||n.$_warn_deprecated_key("unless",e),(t=e["$has_key?"]("if"))===r||t.$$is_boolean&&1!=t?r:n.$_warn_deprecated_key("if",e)},s.$_warn_deprecated_key=function(e,t){var n=this;return null==n.exclusions&&(n.exclusions=r),c.get("RSpec").$deprecate("FilterManager#exclude("+e.$inspect()+" => "+t["$[]"](e).$inspect()+")"),n.exclusions["$[]="](e,t.$delete(e))},e.donate(i,["$merge","$reverse_merge","$_warn_deprecated_keys","$_warn_deprecated_key"])}(l),l.$attr_reader("exclusions","inclusions"),u.$initialize=function(){var e=this;return e.exclusions=_.get("ExclusionFilterHash").$new(),e.inclusions=_.get("InclusionFilterHash").$new(),e.$extend(_.get("BackwardCompatibility"))},u.$add_location=function(e,t){var n,$,o,a,s=this,c=r;return c=(n=s.inclusions.$delete("locations"))!==!1&&n!==r?n:($=(o=_.get("Hash")).$new,$.$$p=(a=function(e,t){return a.$$s||this,null==e&&(e=r),null==t&&(t=r),e["$[]="](t,[])},a.$$s=s,a),$).call(o),(n=c["$[]"](_.get("File").$expand_path(e))).$push.apply(n,[].concat(t)),s.inclusions.$replace(i(["locations"],{locations:c})),s.exclusions.$clear()},u["$empty?"]=function(){var e,t=this;return e=t.$inclusions()["$empty?"](),e!==!1&&e!==r?t.$exclusions()["$empty_without_conditional_filters?"]():e},u.$prune=function(e){var t,n,$,o=this;return(t=(n=e).$select,t.$$p=($=function(e){var t,n=$.$$s||this;return null==e&&(e=r),t=n["$exclude?"](e)["$!"](),t!==!1&&t!==r?n["$include?"](e):t},$.$$s=o,$),t).call(n)},u.$exclude=function(e){var t,r=this;return e=$.call(arguments,0),(t=r).$merge.apply(t,[r.exclusions,r.inclusions].concat(e))},u["$exclude!"]=function(e){var t,r=this;return e=$.call(arguments,0),(t=r).$replace.apply(t,[r.exclusions,r.inclusions].concat(e))},u.$exclude_with_low_priority=function(e){var t,r=this;return e=$.call(arguments,0),(t=r).$reverse_merge.apply(t,[r.exclusions,r.inclusions].concat(e))},u["$exclude?"]=function(e){var t,n=this;return(t=n.exclusions["$empty?"]())===r||t.$$is_boolean&&1!=t?e["$any_apply?"](n.exclusions):!1},u.$include=function(e){var t,n,o,a=this;return e=$.call(arguments,0),(t=(n=a).$unless_standalone,t.$$p=(o=function(){var t,n=o.$$s||this;return null==n.inclusions&&(n.inclusions=r),null==n.exclusions&&(n.exclusions=r),(t=n).$merge.apply(t,[n.inclusions,n.exclusions].concat(e))},o.$$s=a,o),t).apply(n,[].concat(e))},u["$include!"]=function(e){var t,n,o,a=this;return e=$.call(arguments,0),(t=(n=a).$unless_standalone,t.$$p=(o=function(){var t,n=o.$$s||this;return null==n.inclusions&&(n.inclusions=r),null==n.exclusions&&(n.exclusions=r),(t=n).$replace.apply(t,[n.inclusions,n.exclusions].concat(e))},o.$$s=a,o),t).apply(n,[].concat(e))},u.$include_with_low_priority=function(e){var t,n,o,a=this;return e=$.call(arguments,0),(t=(n=a).$unless_standalone,t.$$p=(o=function(){var t,n=o.$$s||this;return null==n.inclusions&&(n.inclusions=r),null==n.exclusions&&(n.exclusions=r),(t=n).$reverse_merge.apply(t,[n.inclusions,n.exclusions].concat(e))},o.$$s=a,o),t).apply(n,[].concat(e))},u["$include?"]=function(e){var t,n=this;return(t=n.inclusions["$empty?"]())===r||t.$$is_boolean&&1!=t?e["$any_apply?"](n.inclusions):!0},l.$private(),u.$unless_standalone=c=function(t){var o,a=this,i=c.$$p,s=i||r;return t=$.call(arguments,0),c.$$p=null,(o=a["$already_set_standalone_filter?"]())===r||o.$$is_boolean&&1!=o?(o=a["$is_standalone_filter?"](t.$last()))===r||o.$$is_boolean&&1!=o?(o=e.$yieldX(s,[]),o===n?o:o):a.inclusions.$replace(t.$last()):r},u.$merge=function(e,t,n){var o,a,i,s=this;return n=$.call(arguments,2),(o=(a=e["$merge!"](n.$last())).$each_key,o.$$p=(i=function(e){return i.$$s||this,null==e&&(e=r),t.$delete(e)},i.$$s=s,i),o).call(a)},u.$replace=function(e,t,n){var o,a,i,s=this;return n=$.call(arguments,2),(o=(a=n.$last()).$each_key,o.$$p=(i=function(e){return i.$$s||this,null==e&&(e=r),t.$delete(e)},i.$$s=s,i),o).call(a),e.$replace(n.$last())},u.$reverse_merge=function(e,t,n){var o,a,i,s=this,c=r;return n=$.call(arguments,2),c=n.$last().$merge(e),(o=(a=t).$each_pair,o.$$p=(i=function(e,t){return i.$$s||this,null==e&&(e=r),null==t&&(t=r),c["$[]"](e)["$=="](t)?c.$delete(e):r},i.$$s=s,i),o).call(a),e.$replace(c)},u["$already_set_standalone_filter?"]=function(){var e=this;return e["$is_standalone_filter?"](e.$inclusions())},u["$is_standalone_filter?"]=function(e){var t,n,$,o=this;return(t=(n=_.get("STANDALONE_FILTERS"))["$any?"],t.$$p=($=function(t){return $.$$s||this,null==t&&(t=r),e["$has_key?"](t)},$.$$s=o,$),t).call(n)},r&&"is_standalone_filter?"}(s,null)}(s)}(t)},Opal.modules["rspec/core/flat_map"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=e.breaker,$=(e.slice,e.module);return e.add_stubs(["$respond_to?","$flat_map","$flatten","$map","$module_function"]),function(t){var o=$(t,"RSpec");o.$$proto,o.$$scope,function(t){var o=$(t,"Core");o.$$proto,o.$$scope,function(t){var o,a,i,s=$(t,"FlatMap"),c=s.$$proto;s.$$scope,c.$flat_map=(o=[]["$respond_to?"]("flat_map"))===r||o.$$is_boolean&&1!=o?i=function(t){var $,o,a,s=this,c=i.$$p,l=c||r;return i.$$p=null,($=(o=t).$map,$.$$p=(a=function(t){var $;return a.$$s||this,null==t&&(t=r),$=e.$yield1(l,t),$===n?$:$},a.$$s=s,a),$).call(o).$flatten()}:a=function(t){var $,o,i,s=this,c=a.$$p,l=c||r;return a.$$p=null,($=(o=t).$flat_map,$.$$p=(i=function(t){var $;return i.$$s||this,null==t&&(t=r),$=e.$yield1(l,t),$===n?$:$},i.$$s=s,i),$).call(o)},s.$module_function("flat_map"),e.donate(s,["$flat_map","$flat_map"])}(o)}(o)}(t)},Opal.modules["rspec/core/formatters/base_formatter"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass,o=e.range,a=e.hash2;return e.add_stubs(["$require","$include","$attr_accessor","$attr_reader","$new","$start_sync_output","$<<","$examples","$restore_sync_output","$format_backtrace","$backtrace_formatter","$configuration","$metadata","$protected","$find_failed_line","$backtrace","$file_path","$[]","$match","$exist?","$readlines","$-","$to_i","$expand_path","$detect","$==","$downcase","$output_supports_sync","$sync","$output","$sync=","$!","$closed?","$respond_to?","$profile_examples","$fail_fast","$color_enabled?","$profile_examples?","$fail_fast?","$first","$reverse","$sort_by","$execution_result","$map","$inject","$+","$each","$last","$parent_groups","$example_group","$[]=","$has_key?","$top_level_description","$<=","$length","$keys","$each_value","$/","$to_f","$-@"]),t.$require("rspec/core/formatters/helpers"),t.$require("stringio"),function(t){var i=n(t,"RSpec");i.$$proto,i.$$scope,function(t){var i=n(t,"Core");i.$$proto,i.$$scope,function(t){var i=n(t,"Formatters");i.$$proto,i.$$scope,function(t,$super){function n(){}var i=n=$(t,$super,"BaseFormatter",n),s=i.$$proto,c=i.$$scope;return s.pending_examples=s.failed_examples=s.old_sync=r,i.$include(c.get("Helpers")),i.$attr_accessor("example_group"),i.$attr_reader("duration","examples","output"),i.$attr_reader("example_count","pending_count","failure_count"),i.$attr_reader("failed_examples","pending_examples"),s.$initialize=function(e){var t,n=this;return n.output=(t=e)!==!1&&t!==r?t:c.get("StringIO").$new(),n.example_count=n.pending_count=n.failure_count=0,n.examples=[],n.failed_examples=[],n.pending_examples=[],n.example_group=r},s.$start=function(e){var t=this;return t.$start_sync_output(),t.example_count=e},s.$example_group_started=function(e){var t=this;return t.example_group=e},s.$example_group_finished=function(){return r},s.$example_started=function(e){var t=this;return t.$examples()["$<<"](e)},s.$example_passed=function(){return r},s.$example_pending=function(e){var t=this;return t.pending_examples["$<<"](e)},s.$example_failed=function(e){var t=this;return t.failed_examples["$<<"](e)},s.$message=function(){return r},s.$stop=function(){return r},s.$start_dump=function(){return r},s.$dump_failures=function(){return r},s.$dump_summary=function(e,t,r,n){var $=this;return $.duration=e,$.example_count=t,$.failure_count=r,$.pending_count=n},s.$dump_pending=function(){return r},s.$dump_profile=function(){return r},s.$seed=function(){return r},s.$close=function(){var e=this;return e.$restore_sync_output()},s.$format_backtrace=function(e,t){var r=this;return r.$configuration().$backtrace_formatter().$format_backtrace(e,t.$metadata())},i.$protected(),s.$configuration=function(){return c.get("RSpec").$configuration()},s.$read_failed_line=function(t,n){var $,a=this,i=r,s=r,l=r;try{return($=i=a.$find_failed_line(t.$backtrace(),n.$file_path()))===r||$.$$is_boolean&&1!=$?"Unable to find matching line from backtrace":($=e.to_ary(i.$match(/(.+?):(\d+)(|:\d+)/)["$[]"](o(1,2,!1))),s=null==$[0]?r:$[0],l=null==$[1]?r:$[1],($=c.get("File")["$exist?"](s))===r||$.$$is_boolean&&1!=$?"Unable to find "+s+" to read failed line":($=c.get("File").$readlines(s)["$[]"](l.$to_i()["$-"](1)))!==!1&&$!==r?$:"Unable to find matching line in "+s)}catch(u){if(e.$rescue(u,[c.get("SecurityError")]))return"Unable to read failed line";throw u}},s.$find_failed_line=function(e,t){var n,$,o,a=this;return t=c.get("File").$expand_path(t),(n=($=e).$detect,n.$$p=(o=function(e){var n,$=(o.$$s||this,r);return null==e&&(e=r),$=e.$match(/(.+?):(\d+)(|:\d+)/),(n=$!==!1&&$!==r)?$["$[]"](1).$downcase()["$=="](t.$downcase()):n},o.$$s=a,o),n).call($)},s.$start_sync_output=function(){var e,t=this;return(e=t.$output_supports_sync())===r||e.$$is_boolean&&1!=e?r:(e=[t.$output().$sync(),!0],t.old_sync=e[0],t.$output()["$sync="](e[1]))},s.$restore_sync_output=function(){var e,t,n=this;return t=n.$output_supports_sync(),(e=t!==!1&&t!==r?n.$output()["$closed?"]()["$!"]():t)===r||e.$$is_boolean&&1!=e?r:(e=[n.old_sync],t=n.$output(),t["$sync="].apply(t,e),e[e.length-1])},s.$output_supports_sync=function(){var e=this;return e.$output()["$respond_to?"]("sync=")},s["$profile_examples?"]=function(){var e=this;return e.$configuration().$profile_examples()},s["$fail_fast?"]=function(){var e=this;return e.$configuration().$fail_fast()},s["$color_enabled?"]=function(){var e=this;return e.$configuration()["$color_enabled?"](e.$output())},s["$mute_profile_output?"]=function(e){var t,n,$=this;return(t=$["$profile_examples?"]()["$!"]())!==!1&&t!==r?t:(n=$["$fail_fast?"](),n!==!1&&n!==r?e["$=="](0)["$!"]():n)},s.$slowest_examples=function(){var t,n,$,o,i,s,l=this,u=r,_=r,p=r,d=r;return u=c.get("RSpec").$configuration().$profile_examples(),_=(t=(n=l.$examples()).$sort_by,t.$$p=($=function(e){return $.$$s||this,null==e&&(e=r),e.$execution_result()["$[]"]("run_time")},$.$$s=l,$),t).call(n).$reverse().$first(u),t=e.to_ary((o=(i=[l.$examples(),_]).$map,o.$$p=(s=function(e){var t,n,$,o=s.$$s||this;return null==e&&(e=r),(t=(n=e).$inject,t.$$p=($=function(e,t){return $.$$s||this,null==e&&(e=r),null==t&&(t=r),e["$+"](t.$execution_result()["$[]"]("run_time"))},$.$$s=o,$),t).call(n,0)},s.$$s=l,s),o).call(i)),p=null==t[0]?r:t[0],d=null==t[1]?r:t[1],a(["examples","total","slows"],{examples:_,total:p,slows:d})},s.$slowest_groups=function(){var e,t,n,$,o,i,s,l=this,u=r,_=r;return u=c.get("RSpec").$configuration().$profile_examples(),_=a([],{}),(e=(t=l.$examples()).$each,e.$$p=(n=function(e){var t,$,o,a=(n.$$s||this,r);return null==e&&(e=r),a=e.$example_group().$parent_groups().$last().$metadata()["$[]"]("example_group")["$[]"]("location"),t=a,$=_,(o=$["$[]"](t))!==!1&&o!==r?o:$["$[]="](t,c.get("Hash").$new(0)),t="total_time",$=_["$[]"](a),$["$[]="](t,$["$[]"](t)["$+"](e.$execution_result()["$[]"]("run_time"))),t="count",$=_["$[]"](a),$["$[]="](t,$["$[]"](t)["$+"](1)),(t=_["$[]"](a)["$has_key?"]("description"))===r||t.$$is_boolean&&1!=t?_["$[]"](a)["$[]="]("description",e.$example_group().$top_level_description()):r},n.$$s=l,n),e).call(t),_.$keys().$length()["$<="](1)?a([],{}):((e=($=_).$each_value,e.$$p=(o=function(e){return o.$$s||this,null==e&&(e=r),e["$[]="]("average",e["$[]"]("total_time").$to_f()["$/"](e["$[]"]("count")))},o.$$s=l,o),e).call($),(e=(i=_).$sort_by,e.$$p=(s=function(e,t){return s.$$s||this,null==e&&(e=r),null==t&&(t=r),t["$[]"]("average")["$-@"]()},s.$$s=l,s),e).call(i).$first(u))},r&&"slowest_groups"}(i,null)}(i)}(i)}(t)},Opal.modules["rspec/core/formatters/base_text_formatter"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass,o=e.gvars,a=e.hash2;return e.add_stubs(["$require","$puts","$output","$empty?","$failed_examples","$each_with_index","$pending_fixed?","$dump_pending_fixed","$dump_failure","$dump_backtrace","$>","$failure_count","$color","$failure_color","$configuration","$pending_count","$pending_color","$success_color","$mute_profile_output?","$dump_profile","$format_duration","$colorise_summary","$summary_line","$dump_commands_to_rerun_failed_examples","$each","$+","$relative_path","$location","$detail_color","$full_description","$dump_profile_slowest_examples","$dump_profile_slowest_example_groups","$slowest_examples","$/","$[]","$%","$*","$nan?","$size","$format_seconds","$bold","$execution_result","$format_caller","$slowest_groups","$pluralize","$<<","$pending_examples","$show_failures_in_pending_blocks?","$dump_failure_info","$===","$!","$==","$close","$to_set","$values","$include?","$fetch","$color_code_for","$protected","$color_enabled?","$colorize","$fixed_color","$default_color","$deprecate","$private","$backtrace_line","$backtrace_formatter","$first","$split","$to_s","$long_padding","$format_backtrace","$backtrace","$short_padding","$next","$metadata","$exception_class_name_for","$strip","$read_failed_line","$=~","$message","$find_shared_group","$dump_shared_failure_info","$name","$class","$find","$group_and_parent_groups","$parent_groups","$example_group"]),t.$require("rspec/core/formatters/base_formatter"),t.$require("set"),function(t){var i=n(t,"RSpec");i.$$proto,i.$$scope,function(t){var i=n(t,"Core");i.$$proto,i.$$scope,function(t){var i=n(t,"Formatters"),s=(i.$$proto,i.$$scope);!function(t,$super){function n(){}var i,s=n=$(t,$super,"BaseTextFormatter",n),c=s.$$proto,l=s.$$scope;return c.$message=function(e){var t=this;return t.$output().$puts(e)},c.$dump_failures=function(){var e,t,n,$=this;return(e=$.$failed_examples()["$empty?"]())===r||e.$$is_boolean&&1!=e?($.$output().$puts(),$.$output().$puts("Failures:"),(e=(t=$.$failed_examples()).$each_with_index,e.$$p=(n=function(e,t){var $,o=n.$$s||this;return null==e&&(e=r),null==t&&(t=r),o.$output().$puts(),($=o["$pending_fixed?"](e))===r||$.$$is_boolean&&1!=$?o.$dump_failure(e,t):o.$dump_pending_fixed(e,t),o.$dump_backtrace(e)},n.$$s=$,n),e).call(t)):r},c.$colorise_summary=function(e){var t=this;return t.$failure_count()["$>"](0)?t.$color(e,l.get("RSpec").$configuration().$failure_color()):t.$pending_count()["$>"](0)?t.$color(e,l.get("RSpec").$configuration().$pending_color()):t.$color(e,l.get("RSpec").$configuration().$success_color())},c.$dump_summary=i=function(t,n,$,o){var a,s=this;return i.$$p,i.$$p=null,e.find_super_dispatcher(s,"dump_summary",i,null).apply(s,[t,n,$,o]),((a=s["$mute_profile_output?"]($))===r||a.$$is_boolean&&1!=a)&&s.$dump_profile(),s.$output().$puts("\nFinished in "+s.$format_duration(t)+"\n"),s.$output().$puts(s.$colorise_summary(s.$summary_line(n,$,o))),s.$dump_commands_to_rerun_failed_examples()},c.$dump_commands_to_rerun_failed_examples=function(){var e,t,n,$=this;return(e=$.$failed_examples()["$empty?"]())===r||e.$$is_boolean&&1!=e?($.$output().$puts(),$.$output().$puts("Failed examples:"),$.$output().$puts(),(e=(t=$.$failed_examples()).$each,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=r),t.$output().$puts(t.$failure_color("rspec "+l.get("RSpec").$$scope.get("Core").$$scope.get("Metadata").$relative_path(e.$location()))["$+"](" ")["$+"](t.$detail_color("# "+e.$full_description())))},n.$$s=$,n),e).call(t)):r},c.$dump_profile=function(){var e=this;return e.$dump_profile_slowest_examples(),e.$dump_profile_slowest_example_groups()},c.$dump_profile_slowest_examples=function(){var e,t,n,$=this,o=r,a=r,i=r;return o=$.$slowest_examples(),a=o["$[]"]("slows")["$/"](o["$[]"]("total")),i="%.1f"["$%"](function(){return(e=a["$nan?"]())===r||e.$$is_boolean&&1!=e?a:0}()["$*"](100)),$.$output().$puts("\nTop "+o["$[]"]("examples").$size()+" slowest examples ("+$.$format_seconds(o["$[]"]("slows"))+" seconds, "+i+"% of total time):\n"),(e=(t=o["$[]"]("examples")).$each,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=r),t.$output().$puts("  "+e.$full_description()),t.$output().$puts("    "+t.$bold(t.$format_seconds(e.$execution_result()["$[]"]("run_time")))+" "+t.$bold("seconds")+" "+t.$format_caller(e.$location()))},n.$$s=$,n),e).call(t)},c.$dump_profile_slowest_example_groups=function(){var e,t,n,$=this,o=r;return o=$.$slowest_groups(),(e=o["$empty?"]())===r||e.$$is_boolean&&1!=e?($.$output().$puts("\nTop "+o.$size()+" slowest example groups:"),(e=(t=$.$slowest_groups()).$each,e.$$p=(n=function(e,t){var $=n.$$s||this,o=r,a=r,i=r;return null==e&&(e=r),null==t&&(t=r),o=""+$.$bold($.$format_seconds(t["$[]"]("average")))+" "+$.$bold("seconds")+" average",a=""+$.$format_seconds(t["$[]"]("total_time"))+" seconds",i=$.$pluralize(t["$[]"]("count"),"example"),$.$output().$puts("  "+t["$[]"]("description")),$.$output().$puts("    "+o+" ("+a+" / "+i+") "+e)},n.$$s=$,n),e).call(t)):r},c.$summary_line=function(e,t,n){var $=this,o=r;return o=$.$pluralize(e,"example"),o["$<<"](", ")["$<<"]($.$pluralize(t,"failure")),n["$>"](0)&&o["$<<"](", "+n+" pending"),o},c.$dump_pending=function(){var e,t,n,$=this;return(e=$.$pending_examples()["$empty?"]())===r||e.$$is_boolean&&1!=e?($.$output().$puts(),$.$output().$puts("Pending:"),(e=(t=$.$pending_examples()).$each,e.$$p=(n=function(e){var t,$,o=n.$$s||this;return null==e&&(e=r),o.$output().$puts(o.$pending_color("  "+e.$full_description())),o.$output().$puts(o.$detail_color("    # "+e.$execution_result()["$[]"]("pending_message"))),o.$output().$puts(o.$detail_color("    # "+o.$format_caller(e.$location()))),$=e.$execution_result()["$[]"]("exception"),(t=$!==!1&&$!==r?l.get("RSpec").$configuration()["$show_failures_in_pending_blocks?"]():$)===r||t.$$is_boolean&&1!=t?r:(o.$dump_failure_info(e),o.$dump_backtrace(e))},n.$$s=$,n),e).call(t)):r},c.$seed=function(e){var t=this;return t.$output().$puts(),t.$output().$puts("Randomized with seed "+e),t.$output().$puts()},c.$close=function(){var e,t,n=this;return null==o.stdout&&(o.stdout=r),t=l.get("IO")["$==="](n.$output()),(e=t!==!1&&t!==r?n.$output()["$=="](o.stdout)["$!"]():t)===r||e.$$is_boolean&&1!=e?r:n.$output().$close()},e.cdecl(l,"VT100_COLORS",a(["black","red","green","yellow","blue","magenta","cyan","white"],{black:30,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37})),e.cdecl(l,"VT100_COLOR_CODES",l.get("VT100_COLORS").$values().$to_set()),c.$color_code_for=function(e){var t,n,$,o=this;return(t=l.get("VT100_COLOR_CODES")["$include?"](e))===r||t.$$is_boolean&&1!=t?(t=(n=l.get("VT100_COLORS")).$fetch,t.$$p=($=function(){var e=$.$$s||this;return e.$color_code_for("white")},$.$$s=o,$),t).call(n,e):e},c.$colorize=function(e,t){var r=this;return"e["+r.$color_code_for(t)+"m"+e+"e[0m"},s.$protected(),c.$bold=function(e){var t,n=this;return(t=n["$color_enabled?"]())===r||t.$$is_boolean&&1!=t?e:"e[1m"+e+"e[0m"},c.$color=function(e,t){var n,$=this;return(n=$["$color_enabled?"]())===r||n.$$is_boolean&&1!=n?e:$.$colorize(e,t)},c.$failure_color=function(e){var t=this;return t.$color(e,l.get("RSpec").$configuration().$failure_color())},c.$success_color=function(e){var t=this;return t.$color(e,l.get("RSpec").$configuration().$success_color())},c.$pending_color=function(e){var t=this;return t.$color(e,l.get("RSpec").$configuration().$pending_color())},c.$fixed_color=function(e){var t=this;return t.$color(e,l.get("RSpec").$configuration().$fixed_color())},c.$detail_color=function(e){var t=this;return t.$color(e,l.get("RSpec").$configuration().$detail_color())},c.$default_color=function(e){var t=this;return t.$color(e,l.get("RSpec").$configuration().$default_color())},c.$red=function(e){var t=this;return l.get("RSpec").$deprecate("RSpec::Core::Formatters::BaseTextFormatter#red",a(["replacement"],{replacement:"#failure_color"})),t.$color(e,"red")},c.$green=function(e){var t=this;return l.get("RSpec").$deprecate("RSpec::Core::Formatters::BaseTextFormatter#green",a(["replacement"],{replacement:"#success_color"})),t.$color(e,"green")},c.$yellow=function(e){var t=this;return l.get("RSpec").$deprecate("RSpec::Core::Formatters::BaseTextFormatter#yellow",a(["replacement"],{replacement:"#pending_color"})),t.$color(e,"yellow")},c.$blue=function(e){var t=this;return l.get("RSpec").$deprecate("RSpec::Core::Formatters::BaseTextFormatter#blue",a(["replacement"],{replacement:"#fixed_color"})),t.$color(e,"blue")},c.$magenta=function(e){var t=this;return l.get("RSpec").$deprecate("RSpec::Core::Formatters::BaseTextFormatter#magenta"),t.$color(e,"magenta")},c.$cyan=function(e){var t=this;return l.get("RSpec").$deprecate("RSpec::Core::Formatters::BaseTextFormatter#cyan",a(["replacement"],{replacement:"#detail_color"})),t.$color(e,"cyan")},c.$white=function(e){var t=this;return l.get("RSpec").$deprecate("RSpec::Core::Formatters::BaseTextFormatter#white",a(["replacement"],{replacement:"#default_color"})),t.$color(e,"white")},c.$short_padding=function(){return"  "},c.$long_padding=function(){return"     "},s.$private(),c.$format_caller=function(e){var t=this;return t.$configuration().$backtrace_formatter().$backtrace_line(e.$to_s().$split(":in `block").$first())},c.$dump_backtrace=function(e){var t,n,$,o=this;return(t=(n=o.$format_backtrace(e.$execution_result()["$[]"]("exception").$backtrace(),e)).$each,t.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=r),t.$output().$puts(t.$detail_color(""+t.$long_padding()+"# "+e))},$.$$s=o,$),t).call(n)},c.$dump_pending_fixed=function(e,t){var r=this;return r.$output().$puts(""+r.$short_padding()+t.$next()+") "+e.$full_description()+" FIXED"),r.$output().$puts(r.$fixed_color(""+r.$long_padding()+"Expected pending '"+e.$metadata()["$[]"]("execution_result")["$[]"]("pending_message")+"' to fail. No Error was raised."))
},c["$pending_fixed?"]=function(e){return e.$execution_result()["$[]"]("pending_fixed")},c.$dump_failure=function(e,t){var r=this;return r.$output().$puts(""+r.$short_padding()+t.$next()+") "+e.$full_description()),r.$dump_failure_info(e)},c.$dump_failure_info=function(e){var t,n,$,o=this,a=r,i=r,s=r;return a=e.$execution_result()["$[]"]("exception"),i=o.$exception_class_name_for(a),o.$output().$puts(""+o.$long_padding()+o.$failure_color("Failure/Error:")+" "+o.$failure_color(o.$read_failed_line(a,e).$strip())),((t=i["$=~"](/RSpec/))===r||t.$$is_boolean&&1!=t)&&o.$output().$puts(""+o.$long_padding()+o.$failure_color(i)+":"),(t=a.$message())===r||t.$$is_boolean&&1!=t||(t=(n=a.$message().$to_s().$split("\n")).$each,t.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=r),t.$output().$puts(""+t.$long_padding()+"  "+t.$failure_color(e))},$.$$s=o,$),t).call(n),(t=s=o.$find_shared_group(e))===r||t.$$is_boolean&&1!=t?r:o.$dump_shared_failure_info(s)},c.$exception_class_name_for=function(e){var t=r;return t=e.$class().$name().$to_s(),t["$=="]("")&&(t="(anonymous error class)"),t},c.$dump_shared_failure_info=function(e){var t=this;return t.$output().$puts((""+t.$long_padding()+'Shared Example Group: "'+e.$metadata()["$[]"]("shared_group_name")+'" called from ')["$+"](""+t.$configuration().$backtrace_formatter().$backtrace_line(e.$metadata()["$[]"]("example_group")["$[]"]("location"))))},c.$find_shared_group=function(e){var t,n,$,o=this;return(t=(n=o.$group_and_parent_groups(e)).$find,t.$$p=($=function(e){return $.$$s||this,null==e&&(e=r),e.$metadata()["$[]"]("shared_group_name")},$.$$s=o,$),t).call(n)},c.$group_and_parent_groups=function(e){return e.$example_group().$parent_groups()["$+"]([e.$example_group()])},r&&"group_and_parent_groups"}(i,s.get("BaseFormatter"))}(i)}(i)}(t)},Opal.modules["rspec/core/formatters/deprecation_formatter"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$require","$attr_reader","$new","$deprecation_stream","$===","$summary_stream","$include?","$+","$print_deprecation_message","$printer","$<<","$deprecation_summary","$[]","$gsub","$deprecation_type_for","$private","$type","$include","$sync=","$deprecation_message_for","$deprecation_formatter","$puts","$to_s","$>","$count","$pluralize","$path","$[]=","$stash_deprecation_message","$<","$==","$too_many_warnings_message","$any?","$print_deferred_deprecation_warnings","$each","$sort_by","$to_proc","$keys","$raise"]),t.$require("rspec/core/formatters/helpers"),t.$require("set"),function(t){var o=n(t,"RSpec");o.$$proto,o.$$scope,function(t){var o=n(t,"Core"),a=(o.$$proto,o.$$scope);!function(t){var o=n(t,"Formatters");o.$$proto,o.$$scope,function(t,$super){function n(){}var o,a,i,s,c,l=n=$(t,$super,"DeprecationFormatter",n),u=l.$$proto,_=l.$$scope;return u.printer=u.seen_deprecations=u.count=r,l.$attr_reader("count","deprecation_stream","summary_stream"),u.$initialize=function(e,t){var r=this;return r.deprecation_stream=e,r.summary_stream=t,r.seen_deprecations=_.get("Set").$new(),r.count=0},u.$printer=function(){var e,t=this,n=r;return(e=t.printer)!==!1&&e!==r?e:t.printer=function(){return n=t.$deprecation_stream(),_.get("File")["$==="](n)||_.get("RaiseErrorStream")["$==="](n)?_.get("ImmediatePrinter").$new(t.$deprecation_stream(),t.$summary_stream(),t):_.get("DelayedPrinter").$new(t.$deprecation_stream(),t.$summary_stream(),t)}()},u.$deprecation=function(e){var t,n=this;return(t=n.seen_deprecations["$include?"](e))===r||t.$$is_boolean&&1!=t?(n.count=n.count["$+"](1),n.$printer().$print_deprecation_message(e),n.seen_deprecations["$<<"](e)):r},u.$deprecation_summary=function(){var e=this;return e.$printer().$deprecation_summary()},u.$deprecation_message_for=function(e){var t;return(t=e["$[]"]("message"))===r||t.$$is_boolean&&1!=t?_.get("GeneratedDeprecationMessage").$new(e):_.get("SpecifiedDeprecationMessage").$new(e)},e.cdecl(_,"RAISE_ERROR_CONFIG_NOTICE","          |\n          |If you need more of the backtrace for any of these deprecations to\n          |identify where to make the necessary changes, you can configure\n          |`config.raise_errors_for_deprecations!`, and it will turn the\n          |deprecation warnings into errors, giving you the full backtrace.\n".$gsub(/^\s+\|/,"")),e.cdecl(_,"SpecifiedDeprecationMessage",(o=(a=_.get("Struct")).$new,o.$$p=(i=function(){var t,n=i.$$s||this;return e.defn(n,"$initialize",t=function(r){var n=this;return t.$$p,t.$$p=null,n.message=r["$[]"]("message"),e.find_super_dispatcher(n,"initialize",t,null).apply(n,[n.$deprecation_type_for(r)])}),e.defn(n,"$to_s",function(){var e=this;return null==e.message&&(e.message=r),e.message}),e.defn(n,"$too_many_warnings_message",function(){var e=r;return e="Too many similar deprecation messages reported, disregarding further reports.",e["$<<"](" Set config.deprecation_stream to a File for full output."),e}),n.$private(),e.defn(n,"$deprecation_type_for",function(e){return e["$[]"]("message").$gsub(/(\w+\/)+\w+\.rb:\d+/,"")}),r&&"deprecation_type_for"},i.$$s=l,i),o).call(a,"type")),e.cdecl(_,"GeneratedDeprecationMessage",(o=(s=_.get("Struct")).$new,o.$$p=(c=function(){var t,n=c.$$s||this;return e.defn(n,"$initialize",t=function(r){var n=this;return t.$$p,t.$$p=null,n.data=r,e.find_super_dispatcher(n,"initialize",t,null).apply(n,[r["$[]"]("deprecated")])}),e.defn(n,"$to_s",function(){var e,t=this,n=r;return null==t.data&&(t.data=r),n=""+t.data["$[]"]("deprecated")+" is deprecated.",(e=t.data["$[]"]("replacement"))===r||e.$$is_boolean&&1!=e||n["$<<"](" Use "+t.data["$[]"]("replacement")+" instead."),(e=t.data["$[]"]("call_site"))===r||e.$$is_boolean&&1!=e||n["$<<"](" Called from "+t.data["$[]"]("call_site")+"."),n}),e.defn(n,"$too_many_warnings_message",function(){var e=this,t=r;return t="Too many uses of deprecated '"+e.$type()+"'.",t["$<<"](" Set config.deprecation_stream to a File for full output."),t}),r&&"too_many_warnings_message"},c.$$s=l,c),o).call(s,"type")),function(e,$super){function t(){}var n=t=$(e,$super,"ImmediatePrinter",t),o=n.$$proto,a=n.$$scope;return o.deprecation_stream=r,n.$include(Opal.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("Helpers")),n.$attr_reader("deprecation_stream","summary_stream","deprecation_formatter"),o.$initialize=function(e,t,r){var n,$,o=this;return o.deprecation_stream=e,n=[!0],$=o.deprecation_stream,$["$sync="].apply($,n),n[n.length-1],o.summary_stream=t,o.deprecation_formatter=r},o.$print_deprecation_message=function(e){var t=this,n=r;return n=t.$deprecation_formatter().$deprecation_message_for(e),t.$deprecation_stream().$puts(n.$to_s())},o.$deprecation_summary=function(){var e=this;return e.$deprecation_formatter().$count()["$>"](0)?(e.$summary_stream().$puts("\n"+e.$pluralize(e.$deprecation_formatter().$count(),"deprecation")+" logged to "+e.$deprecation_stream().$path()),e.$deprecation_stream().$puts(a.get("RAISE_ERROR_CONFIG_NOTICE"))):r},r&&"deprecation_summary"}(l,null),function(t,$super){function n(){}var o=n=$(t,$super,"DelayedPrinter",n),a=o.$$proto,i=o.$$scope;return a.seen_deprecations=a.deprecation_messages=r,e.cdecl(i,"TOO_MANY_USES_LIMIT",4),o.$include(Opal.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("Helpers")),o.$attr_reader("deprecation_stream","summary_stream","deprecation_formatter"),a.$initialize=function(e,t,n){var $,o,a,s,c,l=this;return l.deprecation_stream=e,l.summary_stream=t,l.deprecation_formatter=n,l.seen_deprecations=($=(o=i.get("Hash")).$new,$.$$p=(a=function(){return a.$$s||this,0},a.$$s=l,a),$).call(o),l.deprecation_messages=($=(s=i.get("Hash")).$new,$.$$p=(c=function(e,t){return c.$$s||this,null==e&&(e=r),null==t&&(t=r),e["$[]="](t,[])},c.$$s=l,c),$).call(s)},a.$print_deprecation_message=function(e){var t,n,$=this,o=r;return o=$.$deprecation_formatter().$deprecation_message_for(e),t=o,n=$.seen_deprecations,n["$[]="](t,n["$[]"](t)["$+"](1)),$.$stash_deprecation_message(o)},a.$stash_deprecation_message=function(e){var t=this;return t.seen_deprecations["$[]"](e)["$<"](i.get("TOO_MANY_USES_LIMIT"))?t.deprecation_messages["$[]"](e)["$<<"](e.$to_s()):t.seen_deprecations["$[]"](e)["$=="](i.get("TOO_MANY_USES_LIMIT"))?t.deprecation_messages["$[]"](e)["$<<"](e.$too_many_warnings_message()):r},a.$deprecation_summary=function(){var e,t=this;return(e=t.deprecation_messages["$any?"]())===r||e.$$is_boolean&&1!=e?r:(t.$print_deferred_deprecation_warnings(),t.$deprecation_stream().$puts(i.get("RAISE_ERROR_CONFIG_NOTICE")),t.$summary_stream().$puts("\n"+t.$pluralize(t.$deprecation_formatter().$count(),"deprecation warning")+" total"))},a.$print_deferred_deprecation_warnings=function(){var e,t,n,$,o,a=this;return a.$deprecation_stream().$puts("\nDeprecation Warnings:\n\n"),(e=(t=($=(o=a.deprecation_messages.$keys()).$sort_by,$.$$p="type".$to_proc(),$).call(o)).$each,e.$$p=(n=function(e){var t,$,o,a=n.$$s||this,i=r;return null==a.deprecation_messages&&(a.deprecation_messages=r),null==e&&(e=r),i=a.deprecation_messages["$[]"](e),(t=($=i).$each,t.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=r),t.$deprecation_stream().$puts(e)},o.$$s=a,o),t).call($),a.$deprecation_stream().$puts()},n.$$s=a,n),e).call(t)},r&&"print_deferred_deprecation_warnings"}(l,null),function(e,$super){function t(){}var n=t=$(e,$super,"RaiseErrorStream",t),o=n.$$proto,a=n.$$scope;return o.$puts=function(e){var t=this;return t.$raise(a.get("DeprecationError"),e)},o["$sync="]=function(){return r},r&&"sync="}(l,null)}(o,null)}(o),e.cdecl(a,"DeprecationError",a.get("Class").$new(a.get("StandardError")))}(o)}(t)},Opal.modules["rspec/core/formatters/documentation_formatter"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$require","$==","$puts","$output","$current_indentation","$strip","$description","$+","$-","$passed_output","$pending_output","$[]","$execution_result","$failure_output","$failure_color","$next_failure_index","$success_color","$pending_color","$*","$reverse","$parent_groups","$example_group"]),t.$require("rspec/core/formatters/base_text_formatter"),function(t){var o=n(t,"RSpec");o.$$proto,o.$$scope,function(t){var o=n(t,"Core");o.$$proto,o.$$scope,function(t){var o=n(t,"Formatters"),a=(o.$$proto,o.$$scope);!function(t,$super){function n(){}var o,a,i,s,c,l=n=$(t,$super,"DocumentationFormatter",n),u=l.$$proto;return l.$$scope,u.group_level=u.next_failure_index=r,u.$initialize=o=function(t){var r=this;return o.$$p,o.$$p=null,e.find_super_dispatcher(r,"initialize",o,null).apply(r,[t]),r.group_level=0},u.$example_group_started=a=function(t){var r=this;return a.$$p,a.$$p=null,e.find_super_dispatcher(r,"example_group_started",a,null).apply(r,[t]),r.group_level["$=="](0)&&r.$output().$puts(),r.$output().$puts(""+r.$current_indentation()+t.$description().$strip()),r.group_level=r.group_level["$+"](1)},u.$example_group_finished=function(){var e=this;return e.group_level=e.group_level["$-"](1)},u.$example_passed=i=function(t){var r=this;return i.$$p,i.$$p=null,e.find_super_dispatcher(r,"example_passed",i,null).apply(r,[t]),r.$output().$puts(r.$passed_output(t))},u.$example_pending=s=function(t){var r=this;return s.$$p,s.$$p=null,e.find_super_dispatcher(r,"example_pending",s,null).apply(r,[t]),r.$output().$puts(r.$pending_output(t,t.$execution_result()["$[]"]("pending_message")))},u.$example_failed=c=function(t){var r=this;return c.$$p,c.$$p=null,e.find_super_dispatcher(r,"example_failed",c,null).apply(r,[t]),r.$output().$puts(r.$failure_output(t,t.$execution_result()["$[]"]("exception")))},u.$failure_output=function(e){var t=this;return t.$failure_color(""+t.$current_indentation()+e.$description().$strip()+" (FAILED - "+t.$next_failure_index()+")")},u.$next_failure_index=function(){var e,t=this;return(e=t.next_failure_index)!==!1&&e!==r?e:t.next_failure_index=0,t.next_failure_index=t.next_failure_index["$+"](1)},u.$passed_output=function(e){var t=this;return t.$success_color(""+t.$current_indentation()+e.$description().$strip())},u.$pending_output=function(e,t){var r=this;return r.$pending_color(""+r.$current_indentation()+e.$description().$strip()+" (PENDING: "+t+")")},u.$current_indentation=function(){var e=this;return"  "["$*"](e.group_level)},u.$example_group_chain=function(){var e=this;return e.$example_group().$parent_groups().$reverse()},r&&"example_group_chain"}(o,a.get("BaseTextFormatter"))}(o)}(o)}(t)},Opal.modules["rspec/core/formatters/helpers"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module);return e.add_stubs(["$<","$>","$to_i","$/","$-","$*","$pluralize","$format_seconds","$sprintf","$strip_trailing_zeroes","$sub","$empty?","$==","$to_f"]),function(t){var $=n(t,"RSpec");$.$$proto,$.$$scope,function(t){var $=n(t,"Core");$.$$proto,$.$$scope,function(t){var $=n(t,"Formatters");$.$$proto,$.$$scope,function(t){var $=n(t,"Helpers"),o=$.$$proto,a=$.$$scope;e.cdecl(a,"SUB_SECOND_PRECISION",5),e.cdecl(a,"DEFAULT_PRECISION",2),o.$format_duration=function(e){var t=this,n=r,$=r,o=r;return n=function(){return e["$<"](1)?a.get("SUB_SECOND_PRECISION"):e["$<"](120)?a.get("DEFAULT_PRECISION"):e["$<"](300)?1:0}(),e["$>"](60)?($=e.$to_i()["$/"](60).$to_i(),o=e["$-"]($["$*"](60)),""+t.$pluralize($,"minute")+" "+t.$pluralize(t.$format_seconds(o,n),"second")):t.$pluralize(t.$format_seconds(e,n),"second")},o.$format_seconds=function(e,t){var n,$,o=this,i=r;return null==t&&(t=r),(n=t)!==!1&&n!==r?n:t=function(){return($=e["$<"](1))===r||$.$$is_boolean&&1!=$?a.get("DEFAULT_PRECISION"):a.get("SUB_SECOND_PRECISION")}(),i=o.$sprintf("%."+t+"f",e),o.$strip_trailing_zeroes(i)},o.$strip_trailing_zeroes=function(e){var t,n=r;return n=e.$sub(/[^1-9]+$/,""),(t=n["$empty?"]())===r||t.$$is_boolean&&1!=t?n:"0"},o.$pluralize=function(e,t){return""+e+" "+t+function(){return e.$to_f()["$=="](1)?r:"s"}()},e.donate($,["$format_duration","$format_seconds","$strip_trailing_zeroes","$pluralize"])}($)}($)}($)}(t)},Opal.modules["rspec/core/formatters/html_formatter"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$require","$new","$private","$public","$print_html_start","$flush","$+","$==","$example_group_number","$print_example_group_end","$print_example_group_start","$description","$size","$parent_groups","$move_progress","$percent_done","$print_example_passed","$[]","$execution_result","$make_header_red","$make_example_group_header_red","$metadata","$message","$join","$format_backtrace","$backtrace","$extra_failure_content","$print_example_failed","$make_header_yellow","$make_example_group_header_yellow","$print_example_pending","$map","$backtrace_line","$backtrace_formatter","$configuration","$compact!","$snippet","$>","$to_f","$/","$to_i","$*","$example_number","$print_summary","$dry_run?"]),t.$require("rspec/core/formatters/base_text_formatter"),t.$require("rspec/core/formatters/html_printer"),function(t){var i=$(t,"RSpec");i.$$proto,i.$$scope,function(t){var i=$(t,"Core");i.$$proto,i.$$scope,function(t){var i=$(t,"Formatters"),s=(i.$$proto,i.$$scope);!function(t,$super){function $(){}var i,s,c,l,u,_,p=$=o(t,$super,"HtmlFormatter",$),d=p.$$proto,f=p.$$scope;return d.example_group_number=d.example_number=d.printer=d.header_red=d.example_group_red=d.failed_examples=d.snippet_extractor=d.example_count=r,d.$initialize=i=function(t){var n=this;return i.$$p,i.$$p=null,e.find_super_dispatcher(n,"initialize",i,null).apply(n,[t]),n.example_group_number=0,n.example_number=0,n.header_red=r,n.printer=f.get("HtmlPrinter").$new(t)},p.$private(),d.$method_missing=s=function(e,t){return s.$$p,t=n.call(arguments,1),s.$$p=null,r},p.$public(),d.$message=function(){return r},d.$example_group_number=function(){var e=this;return e.example_group_number},d.$example_number=function(){var e=this;return e.example_number},d.$start=c=function(t){var r=this;return c.$$p,c.$$p=null,e.find_super_dispatcher(r,"start",c,null).apply(r,[t]),r.printer.$print_html_start(),r.printer.$flush()},d.$example_group_started=l=function(t){var r=this;return l.$$p,l.$$p=null,e.find_super_dispatcher(r,"example_group_started",l,null).apply(r,[t]),r.example_group_red=!1,r.example_group_number=r.example_group_number["$+"](1),r.$example_group_number()["$=="](1)||r.printer.$print_example_group_end(),r.printer.$print_example_group_start(r.$example_group_number(),t.$description(),t.$parent_groups().$size()),r.printer.$flush()},d.$start_dump=function(){var e=this;return e.printer.$print_example_group_end(),e.printer.$flush()},d.$example_started=u=function(t){var r=this;return u.$$p,u.$$p=null,e.find_super_dispatcher(r,"example_started",u,null).apply(r,[t]),r.example_number=r.example_number["$+"](1)},d.$example_passed=function(e){var t=this;return t.printer.$move_progress(t.$percent_done()),t.printer.$print_example_passed(e.$description(),e.$execution_result()["$[]"]("run_time")),t.printer.$flush()},d.$example_failed=_=function(t){var n,$=this,o=(_.$$p,r),i=r,s=r;return _.$$p=null,e.find_super_dispatcher($,"example_failed",_,null).apply($,[t]),((n=$.header_red)===r||n.$$is_boolean&&1!=n)&&($.header_red=!0,$.printer.$make_header_red()),((n=$.example_group_red)===r||n.$$is_boolean&&1!=n)&&($.example_group_red=!0,$.printer.$make_example_group_header_red($.$example_group_number())),$.printer.$move_progress($.$percent_done()),o=t.$metadata()["$[]"]("execution_result")["$[]"]("exception"),i=function(){return o!==!1&&o!==r?a(["message","backtrace"],{message:o.$message(),backtrace:$.$format_backtrace(o.$backtrace(),t).$join("\n")}):!1}(),s=$.$extra_failure_content(o),$.printer.$print_example_failed(t.$execution_result()["$[]"]("pending_fixed"),t.$description(),t.$execution_result()["$[]"]("run_time"),$.failed_examples.$size(),i,function(){return(n=s["$=="](""))===r||n.$$is_boolean&&1!=n?s:!1}(),!0),$.printer.$flush()},d.$example_pending=function(e){var t,n=this;return((t=n.header_red)===r||t.$$is_boolean&&1!=t)&&n.printer.$make_header_yellow(),((t=n.example_group_red)===r||t.$$is_boolean&&1!=t)&&n.printer.$make_example_group_header_yellow(n.$example_group_number()),n.printer.$move_progress(n.$percent_done()),n.printer.$print_example_pending(e.$description(),e.$metadata()["$[]"]("execution_result")["$[]"]("pending_message")),n.printer.$flush()},d.$extra_failure_content=function(e){var t,n,$,o=this,a=r;return o.$require("rspec/core/formatters/snippet_extractor"),a=(t=(n=e.$backtrace()).$map,t.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=r),t.$configuration().$backtrace_formatter().$backtrace_line(e)},$.$$s=o,$),t).call(n),a["$compact!"](),(t=o.snippet_extractor)!==!1&&t!==r?t:o.snippet_extractor=f.get("SnippetExtractor").$new(),'    <pre class="ruby"><code>'+o.snippet_extractor.$snippet(a)+"</code></pre>"},d.$percent_done=function(){var e=this,t=r;return t=100,e.example_count["$>"](0)&&(t=e.$example_number().$to_f()["$/"](e.example_count.$to_f())["$*"](1e3).$to_i()["$/"](10).$to_f()),t},d.$dump_failures=function(){return r},d.$dump_pending=function(){return r},d.$dump_summary=function(e,t,r,n){var $=this;return $.printer.$print_summary($["$dry_run?"](),e,t,r,n),$.printer.$flush()},r&&"dump_summary"}(i,s.get("BaseTextFormatter"))}(i)}(i)}(t)},Opal.modules["rspec/core/formatters/html_printer"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$require","$include","$puts","$indentation_style","$h","$sprintf","$[]","$==","$<<","$>","$flush","$private","$*","$-"]),t.$require("erb"),function(t){var o=n(t,"RSpec");o.$$proto,o.$$scope,function(t){var o=n(t,"Core");o.$$proto,o.$$scope,function(t){var o=n(t,"Formatters");o.$$proto,o.$$scope,function(t,$super){function n(){}var o=n=$(t,$super,"HtmlPrinter",n),a=o.$$proto,i=o.$$scope;return a.output=r,o.$include(i.get("ERB").$$scope.get("Util")),a.$initialize=function(e){var t=this;return t.output=e},a.$print_html_start=function(){var e=this;return e.output.$puts(i.get("HTML_HEADER")),e.output.$puts(i.get("REPORT_HEADER"))},a.$print_example_group_end=function(){var e=this;return e.output.$puts("  </dl>"),e.output.$puts("</div>")},a.$print_example_group_start=function(e,t,r){var n=this;return n.output.$puts('<div id="div_group_'+e+'" class="example_group passed">'),n.output.$puts("  <dl "+n.$indentation_style(r)+">"),n.output.$puts('  <dt id="example_group_'+e+'" class="passed">'+n.$h(t)+"</dt>")},a.$print_example_passed=function(e,t){var n=this,$=r;return $=n.$sprintf("%.5f",t),n.output.$puts('    <dd class="example passed"><span class="passed_spec_name">'+n.$h(e)+"</span><span class='duration'>"+$+"s</span></dd>")},a.$print_example_failed=function(e,t,n,$,o,a,i){var s=this,c=r;return null==i&&(i=!1),c=s.$sprintf("%.5f",n),s.output.$puts('    <dd class="example '+function(){return e!==!1&&e!==r?"pending_fixed":"failed"}()+'">'),s.output.$puts('      <span class="failed_spec_name">'+s.$h(t)+"</span>"),s.output.$puts('      <span class="duration">'+c+"s</span>"),s.output.$puts('      <div class="failure" id="failure_'+$+'">'),o!==!1&&o!==r&&(s.output.$puts('        <div class="message"><pre>'+s.$h(o["$[]"]("message"))+"</pre></div>"),i!==!1&&i!==r?s.output.$puts('        <div class="backtrace"><pre>'+s.$h(o["$[]"]("backtrace"))+"</pre></div>"):s.output.$puts('        <div class="backtrace"><pre>'+o["$[]"]("backtrace")+"</pre></div>")),a!==!1&&a!==r&&s.output.$puts(a),s.output.$puts("      </div>"),s.output.$puts("    </dd>")},a.$print_example_pending=function(e,t){var r=this;return r.output.$puts('    <dd class="example not_implemented"><span class="not_implemented_spec_name">'+r.$h(e)+" (PENDING: "+r.$h(t)+")</span></dd>")},a.$print_summary=function(e,t,n,$,o){var a=this,i=r,s=r;return e!==!1&&e!==r?i="This was a dry-run":(i=""+n+" example"+function(){return n["$=="](1)?r:"s"}()+", ",i["$<<"](""+$+" failure"+function(){return $["$=="](1)?r:"s"}()),o["$>"](0)&&i["$<<"](", "+o+" pending")),s=a.$sprintf("%.5f",t),a.output.$puts('<script type="text/javascript">document.getElementById(\'duration\').innerHTML = "Finished in <strong>'+s+' seconds</strong>";</script>'),a.output.$puts('<script type="text/javascript">document.getElementById(\'totals\').innerHTML = "'+i+'";</script>'),a.output.$puts("</div>"),a.output.$puts("</div>"),a.output.$puts("</body>"),a.output.$puts("</html>")},a.$flush=function(){var e=this;return e.output.$flush()},a.$move_progress=function(e){var t=this;return t.output.$puts('    <script type="text/javascript">moveProgressBar(\''+e+"');</script>"),t.output.$flush()},a.$make_header_red=function(){var e=this;return e.output.$puts("    <script type=\"text/javascript\">makeRed('rspec-header');</script>")},a.$make_header_yellow=function(){var e=this;return e.output.$puts("    <script type=\"text/javascript\">makeYellow('rspec-header');</script>")},a.$make_example_group_header_red=function(e){var t=this;return t.output.$puts('    <script type="text/javascript">makeRed(\'div_group_'+e+"');</script>"),t.output.$puts('    <script type="text/javascript">makeRed(\'example_group_'+e+"');</script>")},a.$make_example_group_header_yellow=function(e){var t=this;return t.output.$puts('    <script type="text/javascript">makeYellow(\'div_group_'+e+"');</script>"),t.output.$puts('    <script type="text/javascript">makeYellow(\'example_group_'+e+"');</script>")},o.$private(),a.$indentation_style=function(e){return'style="margin-left: '+e["$-"](1)["$*"](15)+'px;"'},e.cdecl(i,"REPORT_HEADER",'<div class="rspec-report">\n\n<div id="rspec-header">\n  <div id="label">\n    <h1>RSpec Code Examples</h1>\n  </div>\n\n  <div id="display-filters">\n    <input id="passed_checkbox"  name="passed_checkbox"  type="checkbox" checked="checked" onchange="apply_filters()" value="1" /> <label for="passed_checkbox">Passed</label>\n    <input id="failed_checkbox"  name="failed_checkbox"  type="checkbox" checked="checked" onchange="apply_filters()" value="2" /> <label for="failed_checkbox">Failed</label>\n    <input id="pending_checkbox" name="pending_checkbox" type="checkbox" checked="checked" onchange="apply_filters()" value="3" /> <label for="pending_checkbox">Pending</label>\n  </div>\n\n  <div id="summary">\n    <p id="totals">&#160;</p>\n    <p id="duration">&#160;</p>\n  </div>\n</div>\n\n\n<div class="results">\n'),e.cdecl(i,"GLOBAL_SCRIPTS","\nfunction addClass(element_id, classname) {\n  document.getElementById(element_id).className += (\" \" + classname);\n}\n\nfunction removeClass(element_id, classname) {\n  var elem = document.getElementById(element_id);\n  var classlist = elem.className.replace(classname,'');\n  elem.className = classlist;\n}\n\nfunction moveProgressBar(percentDone) {\n  document.getElementById(\"rspec-header\").style.width = percentDone +\"%\";\n}\n\nfunction makeRed(element_id) {\n  removeClass(element_id, 'passed');\n  removeClass(element_id, 'not_implemented');\n  addClass(element_id,'failed');\n}\n\nfunction makeYellow(element_id) {\n  var elem = document.getElementById(element_id);\n  if (elem.className.indexOf(\"failed\") == -1) {  // class doesn't includes failed\n    if (elem.className.indexOf(\"not_implemented\") == -1) { // class doesn't include not_implemented\n      removeClass(element_id, 'passed');\n      addClass(element_id,'not_implemented');\n    }\n  }\n}\n\nfunction apply_filters() {\n  var passed_filter = document.getElementById('passed_checkbox').checked;\n  var failed_filter = document.getElementById('failed_checkbox').checked;\n  var pending_filter = document.getElementById('pending_checkbox').checked;\n\n  assign_display_style(\"example passed\", passed_filter);\n  assign_display_style(\"example failed\", failed_filter);\n  assign_display_style(\"example not_implemented\", pending_filter);\n\n  assign_display_style_for_group(\"example_group passed\", passed_filter);\n  assign_display_style_for_group(\"example_group not_implemented\", pending_filter, pending_filter || passed_filter);\n  assign_display_style_for_group(\"example_group failed\", failed_filter, failed_filter || pending_filter || passed_filter);\n}\n\nfunction get_display_style(display_flag) {\n  var style_mode = 'none';\n  if (display_flag == true) {\n    style_mode = 'block';\n  }\n  return style_mode;\n}\n\nfunction assign_display_style(classname, display_flag) {\n  var style_mode = get_display_style(display_flag);\n  var elems = document.getElementsByClassName(classname)\n  for (var i=0; i<elems.length;i++) {\n    elems[i].style.display = style_mode;\n  }\n}\n\nfunction assign_display_style_for_group(classname, display_flag, subgroup_flag) {\n  var display_style_mode = get_display_style(display_flag);\n  var subgroup_style_mode = get_display_style(subgroup_flag);\n  var elems = document.getElementsByClassName(classname)\n  for (var i=0; i<elems.length;i++) {\n    var style_mode = display_style_mode;\n    if ((display_flag != subgroup_flag) && (elems[i].getElementsByTagName('dt')[0].innerHTML.indexOf(\", \") != -1)) {\n      elems[i].style.display = subgroup_style_mode;\n    } else {\n      elems[i].style.display = display_style_mode;\n    }\n  }\n}\n"),e.cdecl(i,"GLOBAL_STYLES",'#rspec-header {\n  background: #65C400; color: #fff; height: 4em;\n}\n\n.rspec-report h1 {\n  margin: 0px 10px 0px 10px;\n  padding: 10px;\n  font-family: "Lucida Grande", Helvetica, sans-serif;\n  font-size: 1.8em;\n  position: absolute;\n}\n\n#label {\n  float:left;\n}\n\n#display-filters {\n  float:left;\n  padding: 28px 0 0 40%;\n  font-family: "Lucida Grande", Helvetica, sans-serif;\n}\n\n#summary {\n  float:right;\n  padding: 5px 10px;\n  font-family: "Lucida Grande", Helvetica, sans-serif;\n  text-align: right;\n}\n\n#summary p {\n  margin: 0 0 0 2px;\n}\n\n#summary #totals {\n  font-size: 1.2em;\n}\n\n.example_group {\n  margin: 0 10px 5px;\n  background: #fff;\n}\n\ndl {\n  margin: 0; padding: 0 0 5px;\n  font: normal 11px "Lucida Grande", Helvetica, sans-serif;\n}\n\ndt {\n  padding: 3px;\n  background: #65C400;\n  color: #fff;\n  font-weight: bold;\n}\n\ndd {\n  margin: 5px 0 5px 5px;\n  padding: 3px 3px 3px 18px;\n}\n\ndd .duration {\n  padding-left: 5px;\n  text-align: right;\n  right: 0px;\n  float:right;\n}\n\ndd.example.passed {\n  border-left: 5px solid #65C400;\n  border-bottom: 1px solid #65C400;\n  background: #DBFFB4; color: #3D7700;\n}\n\ndd.example.not_implemented {\n  border-left: 5px solid #FAF834;\n  border-bottom: 1px solid #FAF834;\n  background: #FCFB98; color: #131313;\n}\n\ndd.example.pending_fixed {\n  border-left: 5px solid #0000C2;\n  border-bottom: 1px solid #0000C2;\n  color: #0000C2; background: #D3FBFF;\n}\n\ndd.example.failed {\n  border-left: 5px solid #C20000;\n  border-bottom: 1px solid #C20000;\n  color: #C20000; background: #FFFBD3;\n}\n\n\ndt.not_implemented {\n  color: #000000; background: #FAF834;\n}\n\ndt.pending_fixed {\n  color: #FFFFFF; background: #C40D0D;\n}\n\ndt.failed {\n  color: #FFFFFF; background: #C40D0D;\n}\n\n\n#rspec-header.not_implemented {\n  color: #000000; background: #FAF834;\n}\n\n#rspec-header.pending_fixed {\n  color: #FFFFFF; background: #C40D0D;\n}\n\n#rspec-header.failed {\n  color: #FFFFFF; background: #C40D0D;\n}\n\n\n.backtrace {\n  color: #000;\n  font-size: 12px;\n}\n\na {\n  color: #BE5C00;\n}\n\n/* Ruby code, style similar to vibrant ink */\n.ruby {\n  font-size: 12px;\n  font-family: monospace;\n  color: white;\n  background-color: black;\n  padding: 0.1em 0 0.2em 0;\n}\n\n.ruby .keyword { color: #FF6600; }\n.ruby .constant { color: #339999; }\n.ruby .attribute { color: white; }\n.ruby .global { color: white; }\n.ruby .module { color: white; }\n.ruby .class { color: white; }\n.ruby .string { color: #66FF00; }\n.ruby .ident { color: white; }\n.ruby .method { color: #FFCC00; }\n.ruby .number { color: white; }\n.ruby .char { color: white; }\n.ruby .comment { color: #9933CC; }\n.ruby .symbol { color: white; }\n.ruby .regex { color: #44B4CC; }\n.ruby .punct { color: white; }\n.ruby .escape { color: white; }\n.ruby .interp { color: white; }\n.ruby .expr { color: white; }\n\n.ruby .offending { background-color: gray; }\n.ruby .linenum {\n  width: 75px;\n  padding: 0.1em 1em 0.2em 0;\n  color: #000000;\n  background-color: #FFFBD3;\n}\n'),e.cdecl(i,"HTML_HEADER",'<!DOCTYPE html>\n<html lang=\'en\'>\n<head>\n  <title>RSpec results</title>\n  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n  <meta http-equiv="Expires" content="-1" />\n  <meta http-equiv="Pragma" content="no-cache" />\n  <style type="text/css">\n  body {\n    margin: 0;\n    padding: 0;\n    background: #fff;\n    font-size: 80%;\n  }\n  </style>\n  <script type="text/javascript">\n    // <![CDATA[\n'+i.get("GLOBAL_SCRIPTS")+'\n    // ]]>\n  </script>\n  <style type="text/css">\n'+i.get("GLOBAL_STYLES")+"\n  </style>\n</head>\n<body>\n")}(o,null)}(o)}(o)}(t)},Opal.modules["rspec/core/formatters/json_formatter"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2,i=e.gvars;return e.add_stubs(["$require","$attr_reader","$<<","$[]","$[]=","$summary_line","$mute_profile_output?","$dump_profile","$pluralize","$>","$map","$tap","$exception","$name","$class","$message","$backtrace","$format_example","$examples","$write","$output","$to_json","$===","$!","$==","$close","$dump_profile_slowest_examples","$dump_profile_slowest_example_groups","$slowest_examples","$execution_result","$update","$slowest_groups","$private","$description","$full_description","$metadata"]),t.$require("rspec/core/formatters/base_formatter"),t.$require("json"),function(t){var s=$(t,"RSpec");s.$$proto,s.$$scope,function(t){var s=$(t,"Core");s.$$proto,s.$$scope,function(t){var s=$(t,"Formatters"),c=(s.$$proto,s.$$scope);!function(t,$super){function $(){}var s,c,l,u=$=o(t,$super,"JsonFormatter",$),_=u.$$proto,p=u.$$scope;return _.output_hash=r,u.$attr_reader("output_hash"),_.$initialize=s=function(){var t=n.call(arguments,0),r=this,$=s.$$p;return s.$$p=null,e.find_super_dispatcher(r,"initialize",s,$).apply(r,t),r.output_hash=a([],{})},_.$message=function(e){var t,n,$,o=this;return t="messages",n=o.output_hash,($=n["$[]"](t))!==!1&&$!==r?$:n["$[]="](t,[])["$<<"](e)},_.$dump_summary=c=function(t,n,$,o){var i,s=this;return c.$$p,c.$$p=null,e.find_super_dispatcher(s,"dump_summary",c,null).apply(s,[t,n,$,o]),s.output_hash["$[]="]("summary",a(["duration","example_count","failure_count","pending_count"],{duration:t,example_count:n,failure_count:$,pending_count:o})),s.output_hash["$[]="]("summary_line",s.$summary_line(n,$,o)),(i=s["$mute_profile_output?"]($))===r||i.$$is_boolean&&1!=i?s.$dump_profile():r},_.$summary_line=function(e,t,n){var $=this,o=r;return o=$.$pluralize(e,"example"),o["$<<"](", ")["$<<"]($.$pluralize(t,"failure")),n["$>"](0)&&o["$<<"](", "+n+" pending"),o
},_.$stop=l=function(){var t,$,o,i=n.call(arguments,0),s=this,c=l.$$p;return l.$$p=null,e.find_super_dispatcher(s,"stop",l,c).apply(s,i),s.output_hash["$[]="]("examples",(t=($=s.$examples()).$map,t.$$p=(o=function(e){var t,n,$,i=o.$$s||this;return null==e&&(e=r),(t=(n=i.$format_example(e)).$tap,t.$$p=($=function(t){var n,o=($.$$s||this,r);return null==t&&(t=r),(n=o=e.$exception())===r||n.$$is_boolean&&1!=n?r:t["$[]="]("exception",a(["class","message","backtrace"],{"class":o.$class().$name(),message:o.$message(),backtrace:o.$backtrace()}))},$.$$s=i,$),t).call(n)},o.$$s=s,o),t).call($))},_.$close=function(){var e,t,n=this;return null==i.stdout&&(i.stdout=r),n.$output().$write(n.output_hash.$to_json()),t=p.get("IO")["$==="](n.$output()),(e=t!==!1&&t!==r?n.$output()["$=="](i.stdout)["$!"]():t)===r||e.$$is_boolean&&1!=e?r:n.$output().$close()},_.$dump_profile=function(){var e=this;return e.output_hash["$[]="]("profile",a([],{})),e.$dump_profile_slowest_examples(),e.$dump_profile_slowest_example_groups()},_.$dump_profile_slowest_examples=function(){var e,t,n,$=this,o=r;return $.output_hash["$[]="]("profile",a([],{})),o=$.$slowest_examples(),$.output_hash["$[]"]("profile")["$[]="]("examples",(e=(t=o["$[]"]("examples")).$map,e.$$p=(n=function(e){var t,$,o,a=n.$$s||this;return null==e&&(e=r),(t=($=a.$format_example(e)).$tap,t.$$p=(o=function(t){return o.$$s||this,null==t&&(t=r),t["$[]="]("run_time",e.$execution_result()["$[]"]("run_time"))},o.$$s=a,o),t).call($)},n.$$s=$,n),e).call(t)),$.output_hash["$[]"]("profile")["$[]="]("slowest",o["$[]"]("slows")),$.output_hash["$[]"]("profile")["$[]="]("total",o["$[]"]("total"))},_.$dump_profile_slowest_example_groups=function(){var e,t,n,$,o=this;return e="profile",t=o.output_hash,(n=t["$[]"](e))!==!1&&n!==r?n:t["$[]="](e,a([],{})),o.output_hash["$[]"]("profile")["$[]="]("groups",(e=(t=o.$slowest_groups()).$map,e.$$p=($=function(e,t){return $.$$s||this,null==e&&(e=r),null==t&&(t=r),t.$update(a(["location"],{location:e}))},$.$$s=o,$),e).call(t))},u.$private(),_.$format_example=function(e){return a(["description","full_description","status","file_path","line_number"],{description:e.$description(),full_description:e.$full_description(),status:e.$execution_result()["$[]"]("status"),file_path:e.$metadata()["$[]"]("file_path"),line_number:e.$metadata()["$[]"]("line_number")})},r&&"format_example"}(s,c.get("BaseFormatter"))}(s)}(s)}(t)},Opal.modules["rspec/core/formatters/progress_formatter"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$require","$print","$output","$success_color","$pending_color","$failure_color","$puts"]),t.$require("rspec/core/formatters/base_text_formatter"),function(t){var o=n(t,"RSpec");o.$$proto,o.$$scope,function(t){var o=n(t,"Core");o.$$proto,o.$$scope,function(t){var o=n(t,"Formatters"),a=(o.$$proto,o.$$scope);!function(t,$super){function n(){}var o,a,i,s,c=n=$(t,$super,"ProgressFormatter",n),l=c.$$proto;return c.$$scope,l.$example_passed=o=function(t){var r=this;return o.$$p,o.$$p=null,e.find_super_dispatcher(r,"example_passed",o,null).apply(r,[t]),r.$output().$print(r.$success_color("."))},l.$example_pending=a=function(t){var r=this;return a.$$p,a.$$p=null,e.find_super_dispatcher(r,"example_pending",a,null).apply(r,[t]),r.$output().$print(r.$pending_color("*"))},l.$example_failed=i=function(t){var r=this;return i.$$p,i.$$p=null,e.find_super_dispatcher(r,"example_failed",i,null).apply(r,[t]),r.$output().$print(r.$failure_color("F"))},l.$start_dump=s=function(){var t=this;return s.$$p,s.$$p=null,e.find_super_dispatcher(t,"start_dump",s,null).apply(t,[]),t.$output().$puts()},r&&"start_dump"}(o,a.get("BaseTextFormatter"))}(o)}(o)}(t)},Opal.modules["rspec/core/formatters/snippet_extractor"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass,o=e.hash2,a=e.range;return e.add_stubs(["$html","$scan","$require","$new","$snippet_for","$[]","$convert","$post_process","$=~","$to_i","$lines_around","$file?","$split","$read","$max","$-","$min","$+","$length","$join","$each_with_index","$==","$<<"]),function(t){var i=n(t,"RSpec");i.$$proto,i.$$scope,function(t){var i=n(t,"Core");i.$$proto,i.$$scope,function(t){var i=n(t,"Formatters");i.$$proto,i.$$scope,function(t,$super){function n(){}var i=n=$(t,$super,"SnippetExtractor",n),s=i.$$proto,c=i.$$scope;!function(e,$super){function t(){}var n=t=$(e,$super,"NullConverter",t),o=n.$$proto;return n.$$scope,o.$convert=function(e){return""+e+'\n<span class="comment"># Install the coderay gem to get syntax highlighting</span>'},r&&"convert"}(i,null),function(e,$super){function t(){}var n=t=$(e,$super,"CoderayConverter",t),a=n.$$proto,i=n.$$scope;return a.$convert=function(e){return i.get("CodeRay").$scan(e,"ruby").$html(o(["line_numbers"],{line_numbers:!1}))},r&&"convert"}(i,null);try{i.$require("coderay"),e.cvars["@@converter"]=c.get("CoderayConverter").$new()}catch(l){if(!e.$rescue(l,[c.get("LoadError")]))throw l;e.cvars["@@converter"]=c.get("NullConverter").$new()}return s.$snippet=function(t){var n,$=this,o=r,a=r,i=r;return n=e.to_ary($.$snippet_for(t["$[]"](0))),o=null==n[0]?r:n[0],a=null==n[1]?r:n[1],i=(null==(n=e.cvars["@@converter"])?r:n).$convert(o),$.$post_process(i,a)},s.$snippet_for=function(e){var t,n=this,$=r,o=r;return(t=e["$=~"](/(.*):(\d+)/))===r||t.$$is_boolean&&1!=t?["# Couldn't get snippet for "+e,1]:($=r,o=r.$to_i(),[n.$lines_around($,o),o])},s.$lines_around=function(t,n){var $,o=r,i=r,s=r,l=r;try{return($=c.get("File")["$file?"](t))===r||$.$$is_boolean&&1!=$?"# Couldn't get snippet for "+t:(o=c.get("File").$read(t).$split("\n"),i=[0,n["$-"](3)].$max(),s=[n["$+"](1),o.$length()["$-"](1)].$min(),l=[],l.$join("\n"),o["$[]"](a(i,s,!1)).$join("\n"))}catch(u){if(e.$rescue(u,[c.get("SecurityError")]))return"# Couldn't get snippet for "+t;throw u}},s.$post_process=function(e,t){var n,$,o,a=this,i=r;return i=[],(n=($=e.$split("\n")).$each_with_index,n.$$p=(o=function(e,n){var $=(o.$$s||this,r);return null==e&&(e=r),null==n&&(n=r),$='<span class="linenum">'+t["$+"](n)["$-"](2)+"</span>"+e,n["$=="](2)&&($='<span class="offending">'+$+"</span>"),i["$<<"]($)},o.$$s=a,o),n).call($),i.$join("\n")},r&&"post_process"}(i,null)}(i)}(i)}(t)},Opal.modules["rspec/core/formatters"]=function(e){e.dynamic_require_severity="warning";var t=(e.top,e),r=(e.nil,e.breaker,e.slice,e.module);return e.add_stubs([]),function(e){var t=r(e,"Formatters");t.$$proto,t.$$scope}(t.get("RSpec").$$scope.get("Core"))},Opal.modules["rspec/core/hooks"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$attr_reader","$all_apply?","$options","$instance_exec","$to_proc","$block","$instance_exec_with_rescue","$message","$reporter","$configuration","$class","$first","$backtrace","$each","$define_method","$__send__","$hooks","$public_instance_methods","$protected","$with","$new","$select","$options_apply?","$run","$call","$reduce","$wrap","$empty?","$shift","$[]","$process","$private","$==","$any?","$include?","$parent_groups","$<<","$register_hook","$alias_method","$dry_run?","$find_hook","$for","$flat_map","$[]=","$reverse","$scope_and_options_from","$send","$===","$before_all_hooks_for","$after_all_hooks_for","$around_each_hooks_for","$before_each_hooks_for","$after_each_hooks_for","$extract_scope_from","$build_hash_from","$is_a?","$raise"]),function(t){var i=$(t,"RSpec");i.$$proto,i.$$scope,function(t){var i=$(t,"Core");i.$$proto,i.$$scope,function(t){var i,s,c,l,u,_,p,d,f,h,m,g,v,b=$(t,"Hooks"),y=b.$$proto,x=b.$$scope;!function(e,$super){function t(){}var n=t=o(e,$super,"Hook",t),$=n.$$proto;return n.$$scope,n.$attr_reader("block","options"),$.$initialize=function(e,t){var r=this;return r.block=e,r.options=t},$["$options_apply?"]=function(e){var t=this;return e["$all_apply?"](t.$options())},r&&"options_apply?"}(b,null),function(e,$super){function t(){}var n=t=o(e,$super,"BeforeHook",t),$=n.$$proto;return n.$$scope,$.$run=function(e){var t,r,n=this;return(t=(r=e).$instance_exec,t.$$p=n.$block().$to_proc(),t).call(r,e)},$.$display_name=function(){return"before hook"},r&&"display_name"}(b,x.get("Hook")),function(e,$super){function t(){}var n=t=o(e,$super,"AfterHook",t),$=n.$$proto;return n.$$scope,$.$run=function(e){var t,r,n=this;return(t=(r=e).$instance_exec_with_rescue,t.$$p=n.$block().$to_proc(),t).call(r,"in an after hook")},$.$display_name=function(){return"after hook"},r&&"display_name"}(b,x.get("Hook")),function(t,$super){function n(){}var $=n=o(t,$super,"AfterAllHook",n),a=$.$$proto,i=$.$$scope;return a.$run=function(t){var n,$,o=this,a=r;try{return(n=($=t).$instance_exec,n.$$p=o.$block().$to_proc(),n).call($,t)}catch(s){if(e.$rescue(s,[i.get("Exception")]))return a=s,i.get("RSpec").$configuration().$reporter().$message("\nAn error occurred in an after(:all) hook.\n  "+a.$class()+": "+a.$message()+"\n  occurred at "+a.$backtrace().$first()+"\n\n");throw s}},a.$display_name=function(){return"after(:all) hook"},r&&"display_name"}(b,x.get("Hook")),function(e,$super){function t(){}var n=t=o(e,$super,"AroundHook",t),$=n.$$proto;return n.$$scope,$.$display_name=function(){return"around hook"},r&&"display_name"}(b,x.get("Hook")),function(t,$super){function $(){}var a,i,s,c=$=o(t,$super,"BaseHookCollection",$),l=c.$$proto,u=c.$$scope;return(a=(i=u.get("Array").$public_instance_methods(!1)).$each,a.$$p=(s=function(e){var t,$,o,a=s.$$s||this;return null==e&&(e=r),(t=($=a).$define_method,t.$$p=(o=function(t){var $,a,i,s=o.$$s||this;return t=n.call(arguments,0),$=o.$$p||r,o.$$p=null,(a=(i=s.$hooks()).$__send__,a.$$p=$.$to_proc(),a).apply(i,[e].concat(t))},o.$$s=a,o),t).call($,e)},s.$$s=c,s),a).call(i),c.$attr_reader("hooks"),c.$protected("hooks"),e.defn(c,"$append",l.$push),e.defn(c,"$prepend",l.$unshift),l.$initialize=function(e){var t=this;return null==e&&(e=[]),t.hooks=e},r&&"initialize"}(b,null),function(e,$super){function t(){}var n=t=o(e,$super,"HookCollection",t),$=n.$$proto;return n.$$scope,$.$for=function(e){var t,n,$,o=this;return o.$class().$new((t=(n=o.$hooks()).$select,t.$$p=($=function(t){return $.$$s||this,null==t&&(t=r),t["$options_apply?"](e)},$.$$s=o,$),t).call(n)).$with(e)},$.$with=function(e){var t=this;return t.example=e,t},$.$run=function(){var e,t,n,$=this;return(e=(t=$.$hooks()).$each,e.$$p=(n=function(e){var t=n.$$s||this;return null==t.example&&(t.example=r),null==e&&(e=r),e.$run(t.example)},n.$$s=$,n),e).call(t)},r&&"run"}(b,x.get("BaseHookCollection")),function(e,$super){function t(){}var n=t=o(e,$super,"AroundHookCollection",t),$=n.$$proto;return n.$$scope,$.initial_procsy=r,$.$for=function(e,t){var n,$,o,a=this;return null==t&&(t=r),a.$class().$new((n=($=a.$hooks()).$select,n.$$p=(o=function(t){return o.$$s||this,null==t&&(t=r),t["$options_apply?"](e)},o.$$s=a,o),n).call($)).$with(e,t)},$.$with=function(e,t){var r=this;return r.example=e,r.initial_procsy=t,r},$.$run=function(){var e,t,n,$=this;return(e=(t=$.$hooks()).$reduce,e.$$p=(n=function(e,t){var $,o,a,i=n.$$s||this;return null==e&&(e=r),null==t&&(t=r),($=(o=e).$wrap,$.$$p=(a=function(){var n,$,o=a.$$s||this;return null==o.example&&(o.example=r),(n=($=o.example).$instance_exec,n.$$p=t.$block().$to_proc(),n).call($,e)},a.$$s=i,a),$).call(o)},n.$$s=$,n),e).call(t,$.initial_procsy).$call()},r&&"run"}(b,x.get("BaseHookCollection")),function(e,$super){function t(){}var n=t=o(e,$super,"GroupHookCollection",t),$=n.$$proto;return n.$$scope,$.group=r,$.$for=function(e){var t=this;return t.group=e,t},$.$run=function(){var e,t=this;return function(){for(;(e=t.$hooks()["$empty?"]())===r||e.$$is_boolean&&1!=e;)t.$hooks().$shift().$run(t.group);return r}()},r&&"run"}(b,x.get("BaseHookCollection")),function(e,$super){function t(){}var n=t=o(e,$super,"HookCollections",t),$=n.$$proto;return n.$$scope,$.data=r,$.$initialize=function(e){var t=this;return t.data=e},$["$[]"]=function(e){var t=this;return t.data["$[]"](e)},$.$register_globals=function(e,t){var r=this;return r.$process(e,t,"before","each"),r.$process(e,t,"after","each"),r.$process(e,t,"around","each"),r.$process(e,t,"before","all"),r.$process(e,t,"after","all")},n.$private(),$.$process=function(e,t,n,$){var o,a,i,s=this;return(o=(a=t["$[]"](n)["$[]"]($)).$each,o.$$p=(i=function(t){var o,a,s,c,l=i.$$s||this;return null==t&&(t=r),(o=(a=$["$=="]("each"))!==!1&&a!==r?a:t["$options_apply?"](e))===r||o.$$is_boolean&&1!=o?r:(o=(a=(s=e.$parent_groups())["$any?"],a.$$p=(c=function(e){return c.$$s||this,null==e&&(e=r),e.$hooks()["$[]"](n)["$[]"]($)["$include?"](t)},c.$$s=l,c),a).call(s))===r||o.$$is_boolean&&1!=o?l["$[]"](n)["$[]"]($)["$<<"](t):r},i.$$s=s,i),o).call(a)},r&&"process"}(b,null),y.$hooks=function(){var e,t=this;return null==t.hooks&&(t.hooks=r),(e=t.hooks)!==!1&&e!==r?e:t.hooks=x.get("HookCollections").$new(a(["around","before","after"],{around:a(["each"],{each:x.get("AroundHookCollection").$new()}),before:a(["each","all","suite"],{each:x.get("HookCollection").$new(),all:x.get("HookCollection").$new(),suite:x.get("HookCollection").$new()}),after:a(["each","all","suite"],{each:x.get("HookCollection").$new(),all:x.get("HookCollection").$new(),suite:x.get("HookCollection").$new()})}))},y.$before=i=function(e){var t,$,o=this,a=i.$$p,s=a||r;return e=n.call(arguments,0),i.$$p=null,(t=($=o).$register_hook,t.$$p=s.$to_proc(),t).apply($,["append","before"].concat(e))},b.$alias_method("append_before","before"),y.$prepend_before=s=function(e){var t,$,o=this,a=s.$$p,i=a||r;return e=n.call(arguments,0),s.$$p=null,(t=($=o).$register_hook,t.$$p=i.$to_proc(),t).apply($,["prepend","before"].concat(e))},y.$after=c=function(e){var t,$,o=this,a=c.$$p,i=a||r;return e=n.call(arguments,0),c.$$p=null,(t=($=o).$register_hook,t.$$p=i.$to_proc(),t).apply($,["prepend","after"].concat(e))},b.$alias_method("prepend_after","after"),y.$append_after=l=function(e){var t,$,o=this,a=l.$$p,i=a||r;return e=n.call(arguments,0),l.$$p=null,(t=($=o).$register_hook,t.$$p=i.$to_proc(),t).apply($,["append","after"].concat(e))},y.$around=u=function(e){var t,$,o=this,a=u.$$p,i=a||r;return e=n.call(arguments,0),u.$$p=null,(t=($=o).$register_hook,t.$$p=i.$to_proc(),t).apply($,["prepend","around"].concat(e))},y.$run_hook=function(e,t,n,$){var o,a=this;return null==n&&(n=x.get("ExampleGroup").$new()),null==$&&($=r),(o=x.get("RSpec").$configuration()["$dry_run?"]())===r||o.$$is_boolean&&1!=o?a.$find_hook(e,t,n,$).$run():r},y.$around_each_hooks_for=function(e,t){var n,$,o,a=this;return null==t&&(t=r),x.get("AroundHookCollection").$new((n=($=x.get("FlatMap")).$flat_map,n.$$p=(o=function(e){return o.$$s||this,null==e&&(e=r),e.$hooks()["$[]"]("around")["$[]"]("each")},o.$$s=a,o),n).call($,a.$parent_groups())).$for(e,t)},b.$private(),e.cdecl(x,"SCOPES",["each","all","suite"]),e.cdecl(x,"HOOK_TYPES",a(["before","after","around"],{before:(_=(p=x.get("Hash")).$new,_.$$p=(d=function(){return d.$$s||this,x.get("BeforeHook")},d.$$s=b,d),_).call(p),after:(_=(f=x.get("Hash")).$new,_.$$p=(h=function(){return h.$$s||this,x.get("AfterHook")},h.$$s=b,h),_).call(f),around:(_=(m=x.get("Hash")).$new,_.$$p=(g=function(){return g.$$s||this,x.get("AroundHook")},g.$$s=b,g),_).call(m)})),x.get("HOOK_TYPES")["$[]"]("after")["$[]="]("all",x.get("AfterAllHook")),y.$before_all_hooks_for=function(e){var t=this;return x.get("GroupHookCollection").$new(t.$hooks()["$[]"]("before")["$[]"]("all")).$for(e)},y.$after_all_hooks_for=function(e){var t=this;return x.get("GroupHookCollection").$new(t.$hooks()["$[]"]("after")["$[]"]("all")).$for(e)},y.$before_each_hooks_for=function(e){var t,n,$,o=this;return x.get("HookCollection").$new((t=(n=x.get("FlatMap")).$flat_map,t.$$p=($=function(e){return $.$$s||this,null==e&&(e=r),e.$hooks()["$[]"]("before")["$[]"]("each")},$.$$s=o,$),t).call(n,o.$parent_groups().$reverse())).$for(e)},y.$after_each_hooks_for=function(e){var t,n,$,o=this;return x.get("HookCollection").$new((t=(n=x.get("FlatMap")).$flat_map,t.$$p=($=function(e){return $.$$s||this,null==e&&(e=r),e.$hooks()["$[]"]("after")["$[]"]("each")},$.$$s=o,$),t).call(n,o.$parent_groups())).$for(e)},y.$register_hook=v=function(t,$,o){var a,i,s=this,c=v.$$p,l=c||r,u=r,_=r;return o=n.call(arguments,2),v.$$p=null,a=e.to_ary((i=s).$scope_and_options_from.apply(i,[].concat(o))),u=null==a[0]?r:a[0],_=null==a[1]?r:a[1],s.$hooks()["$[]"]($)["$[]"](u).$send(t,x.get("HOOK_TYPES")["$[]"]($)["$[]"](u).$new(l,_))},y.$find_hook=function(e,t,n,$){var o=this,a=r;return function(){return a=[e,t],["before","all"]["$==="](a)?o.$before_all_hooks_for(n):["after","all"]["$==="](a)?o.$after_all_hooks_for(n):["around","each"]["$==="](a)?o.$around_each_hooks_for(n,$):["before","each"]["$==="](a)?o.$before_each_hooks_for(n):["after","each"]["$==="](a)?o.$after_each_hooks_for(n):["before","suite"]["$==="](a)||["after","suite"]["$==="](a)?o.$hooks()["$[]"](e)["$[]"]("suite").$with(n):r}()},y.$scope_and_options_from=function(e){var t=this;return e=n.call(arguments,0),[t.$extract_scope_from(e),x.get("Metadata").$build_hash_from(e)]},y.$extract_scope_from=function(e){var t,n,$,o,a=this;return(t=x.get("SCOPES")["$include?"](e.$first()))===r||t.$$is_boolean&&1!=t?(t=(n=($=e)["$any?"],n.$$p=(o=function(e){return o.$$s||this,null==e&&(e=r),e["$is_a?"](x.get("Symbol"))},o.$$s=a,o),n).call($))===r||t.$$is_boolean&&1!=t?"each":a.$raise(x.get("ArgumentError").$new("You must explicitly give a scope (:each, :all, or :suite) when using symbols as metadata for a hook.")):e.$shift()},e.donate(b,["$hooks","$before","$prepend_before","$after","$append_after","$around","$run_hook","$around_each_hooks_for","$before_all_hooks_for","$after_all_hooks_for","$before_each_hooks_for","$after_each_hooks_for","$register_hook","$find_hook","$scope_and_options_from","$extract_scope_from"])}(i)}(i)}(t)},Opal.modules["rspec/core/memoized_helpers"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=e.breaker,$=(e.slice,e.module),o=e.hash2,a=e.klass;return e.add_stubs(["$fetch","$[]=","$__memoized","$described_class","$description","$class","$===","$new","$handle_matcher","$subject","$private","$instance_eval","$==","$raise","$article","$hook_expression","$first_non_rspec_line","$hook_intention","$extend","$nil?","$send","$to_proc","$module_for","$arity","$define_method","$current_example","$let","$before","$__send__","$alias_method","$get_constant_or_yield","$include","$const_set","$method","$const_defined?","$const_get"]),function(t){var i=$(t,"RSpec");i.$$proto,i.$$scope,function(t){var i=$(t,"Core");i.$$proto,i.$$scope,function(t){var i,s,c=$(t,"MemoizedHelpers"),l=c.$$proto,u=c.$$scope;l.$subject=function(){var e,t,n,$=this;return(e=(t=$.$__memoized()).$fetch,e.$$p=(n=function(){var e,t=n.$$s||this,$=r;return t.$__memoized()["$[]="]("subject",function(){return $=(e=t.$described_class())!==!1&&e!==r?e:t.$class().$description(),(e=u.get("Class")["$==="]($))===r||e.$$is_boolean&&1!=e?$:$.$new()}())},n.$$s=$,n),e).call(t,"subject")},l.$should=function(e,t){var n=this;return null==e&&(e=r),null==t&&(t=r),u.get("RSpec").$$scope.get("Expectations").$$scope.get("PositiveExpectationHandler").$handle_matcher(n.$subject(),e,t)},l.$should_not=function(e,t){var n=this;return null==e&&(e=r),null==t&&(t=r),u.get("RSpec").$$scope.get("Expectations").$$scope.get("NegativeExpectationHandler").$handle_matcher(n.$subject(),e,t)},c.$private(),l.$__memoized=function(){var e,t=this;return null==t.__memoized&&(t.__memoized=r),(e=t.__memoized)!==!1&&e!==r?e:t.__memoized=o([],{})},function(t,$super){function $(){}var o,i,s=$=a(t,$super,"AllHookMemoizedHash",$),c=(s.$$proto,s.$$scope);return e.defs(s,"$isolate_for_all_hook",o=function(t){var $,a,i,s=this,c=o.$$p,l=c||r,u=r;return o.$$p=null,u=s,($=(a=t).$instance_eval,$.$$p=(i=function(){var t,$=i.$$s||this;$.__memoized=u;try{return t=e.$yieldX(l,[]),t===n?t:t}finally{$.__memoized=r}},i.$$s=s,i),$).call(a)}),e.defs(s,"$fetch",i=function(e){var t=this,n=(i.$$p,r);return i.$$p=null,n=function(){return e["$=="]("subject")?"subject":"let declaration `"+e+"`"}(),t.$raise(""+n+" accessed in "+t.$article()+" "+t.$hook_expression()+" hook at:\n  "+c.get("CallerFilter").$first_non_rspec_line()+"\n\n`let` and `subject` declarations are not intended to be called\nin "+t.$article()+" "+t.$hook_expression()+" hook, as they exist to define state that\nis reset between each example, while "+t.$hook_expression()+" exists to\n"+t.$hook_intention()+".\n")}),function(t,$super){function n(){}var $=n=a(t,$super,"Before",n);return $.$$proto,$.$$scope,e.defs($,"$hook_expression",function(){return"`before(:all)`"}),e.defs($,"$article",function(){return"a"}),e.defs($,"$hook_intention",function(){return"define state that is shared across examples in an example group"}),r&&"hook_intention"}(s,s),function(t,$super){function n(){}var $=n=a(t,$super,"After",n);return $.$$proto,$.$$scope,e.defs($,"$hook_expression",function(){return"`after(:all)`"}),e.defs($,"$article",function(){return"an"}),e.defs($,"$hook_intention",function(){return"cleanup state that is shared across examples in an example group"}),r&&"hook_intention"}(s,s)}(c,null),e.defs(c,"$included",function(e){return e.$extend(u.get("ClassMethods"))}),function(t){var n,o,a,i,s=$(t,"ClassMethods"),c=s.$$proto,l=s.$$scope;c.$let=n=function(t){var $,o,a,i,s,c,u=this,_=n.$$p,p=_||r;return n.$$p=null,($=p["$nil?"]())===r||$.$$is_boolean&&1!=$||u.$raise("#let or #subject called without a block"),($=(o=l.get("MemoizedHelpers").$module_for(u)).$send,$.$$p=p.$to_proc(),$).call(o,"define_method",t),p.$arity()["$=="](1)?($=(a=u).$define_method,$.$$p=(i=function(){var $,o,a,s=i.$$s||this;return($=(o=s.$__memoized()).$fetch,$.$$p=(a=function(t){var $=a.$$s||this;return null==t&&(t=r),$.$__memoized()["$[]="](t,e.find_iter_super_dispatcher($,"let",a.$$def||i.$$def||n,null).apply($,[l.get("RSpec").$current_example(),r.$to_proc()]))},a.$$s=s,a),$).call(o,t)},i.$$s=u,i),$).call(a,t):($=(s=u).$define_method,$.$$p=(c=function(){var $,o,a,i=c.$$s||this;return($=(o=i.$__memoized()).$fetch,$.$$p=(a=function(t){var $=a.$$s||this;return null==t&&(t=r),$.$__memoized()["$[]="](t,e.find_iter_super_dispatcher($,"let",a.$$def||c.$$def||n,null).apply($,[r.$to_proc()]))},a.$$s=i,a),$).call(o,t)},c.$$s=u,c),$).call(s,t)},c["$let!"]=o=function(e){var t,n,$,a,i=this,s=o.$$p,c=s||r;return o.$$p=null,(t=(n=i).$let,t.$$p=c.$to_proc(),t).call(n,e),(t=($=i).$before,t.$$p=(a=function(){var t=a.$$s||this;return t.$__send__(e)},a.$$s=i,a),t).call($)},c.$subject=a=function(e){var t,n,$,o,i,s=this,c=a.$$p,u=c||r;return null==e&&(e=r),a.$$p=null,e!==!1&&e!==r?((t=(n=s).$let,t.$$p=u.$to_proc(),t).call(n,e),s.$alias_method("subject",e),(t=($=s.$$scope.get("NamedSubjectPreventSuper")).$send,t.$$p=(o=function(){var e=o.$$s||this;return e.$raise(l.get("NotImplementedError"),"`super` in named subjects is not supported")},o.$$s=s,o),t).call($,"define_method",e)):(t=(i=s).$let,t.$$p=u.$to_proc(),t).call(i,"subject")},c["$subject!"]=i=function(e){var t,n,$,o,a=this,s=i.$$p,c=s||r;return null==e&&(e=r),i.$$p=null,(t=(n=a).$subject,t.$$p=c.$to_proc(),t).call(n,e),(t=($=a).$before,t.$$p=(o=function(){var e=o.$$s||this;return e.$subject()},o.$$s=a,o),t).call($)},e.donate(s,["$let","$let!","$subject","$subject!"])}(c),e.defs(c,"$module_for",function(e){var t,n,$,o=this;return(t=(n=o).$get_constant_or_yield,t.$$p=($=function(){var t,n,o,a=$.$$s||this,i=r;return i=(t=(n=u.get("Module")).$new,t.$$p=(o=function(){var t,r,n,$=o.$$s||this;return $.$include((t=(r=u.get("Module")).$new,t.$$p=(n=function(){var t=n.$$s||this;return e.$const_set("NamedSubjectPreventSuper",t)},n.$$s=$,n),t).call(r))},o.$$s=a,o),t).call(n),e.$const_set("LetDefinitions",i),i},$.$$s=o,$),t).call(n,e,"LetDefinitions")}),e.defs(c,"$define_helpers_on",function(e){var t=this;return e.$send("include",t.$module_for(e))}),u.get("Module").$method("const_defined?").$arity()["$=="](1)?e.defs(c,"$get_constant_or_yield",i=function(t,$){var o,a=i.$$p,s=a||r;return i.$$p=null,(o=t["$const_defined?"]($))===r||o.$$is_boolean&&1!=o?(o=e.$yieldX(s,[]),o===n?o:o):t.$const_get($)}):e.defs(c,"$get_constant_or_yield",s=function(t,$){var o,a=s.$$p,i=a||r,c=r;return s.$$p=null,(o=t["$const_defined?"]($,c=!1))===r||o.$$is_boolean&&1!=o?(o=e.$yieldX(i,[]),o===n?o:o):t.$const_get($,c)}),e.donate(c,["$subject","$should","$should_not","$__memoized"])}(i)}(i)}(t)},Opal.modules["rspec/core/metadata"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=e.breaker,$=e.slice,o=e.module,a=e.klass,i=e.hash2,s=e.hash;return e.add_stubs(["$sub","$expand_path","$==","$is_a?","$last","$pop","$[]=","$has_key?","$store_computed","$private","$===","$store","$location","$file_and_line_number","$described_class","$full_description","$build_description_from","$[]","$=~","$first_caller_from_outside_rspec","$relative_path","$to_i","$detect","$inject","$to_s","$method_description_after_module?","$+","$include","$each","$nil?","$container_stack","$first","$reverse","$flat_map","$<<","$update","$extend","$ensure_valid_keys","$delete","$caller","$configure_for_example","$dup","$any?","$filter_applies?","$all?","$!","$filter_applies_to_any_value?","$line_number_filter_applies?","$location_filter_applies?","$filters_apply?","$arity","$call","$example_group_declaration_line","$map","$preceding_declaration_line","$world","$empty?","$&","$relevant_line_numbers","$protected","$raise","$*","$first_non_rspec_line","$join"]),function(t){var c=o(t,"RSpec");c.$$proto,c.$$scope,function(t){var c=o(t,"Core"),l=(c.$$proto,c.$$scope);!function(t,$super){function c(){}var l,u=c=a(t,$super,"Metadata",c),_=u.$$proto,p=u.$$scope;return e.defs(u,"$relative_path",function(t){try{return t=t.$sub(p.get("File").$expand_path("."),"."),t=t.$sub(/\A([^:]+:\d+)$/,"\\1"),t["$=="]("-e:1")?r:t}catch(n){if(e.$rescue(n,[p.get("SecurityError")]))return r;throw n}}),e.defs(u,"$build_hash_from",function(e){var t,n,$=r;for($=function(){return(t=e.$last()["$is_a?"](p.get("Hash")))===r||t.$$is_boolean&&1!=t?i([],{}):e.$pop()}();(n=e.$last()["$is_a?"](p.get("Symbol")))!==r&&(!n.$$is_boolean||1==n);)$["$[]="](e.$pop(),!0);return $}),function(t){var n,a,s=o(t,"MetadataHash"),c=s.$$proto,l=s.$$scope;c["$[]"]=n=function(t){var o,a=$.call(arguments,0),i=this,s=n.$$p;return n.$$p=null,((o=i["$has_key?"](t))===r||o.$$is_boolean&&1!=o)&&i.$store_computed(t),e.find_super_dispatcher(i,"[]",n,s).apply(i,a)},c.$fetch=a=function(t,n){var o,i=$.call(arguments,0),s=this,c=a.$$p;return n=$.call(arguments,1),a.$$p=null,((o=s["$has_key?"](t))===r||o.$$is_boolean&&1!=o)&&s.$store_computed(t),e.find_super_dispatcher(s,"fetch",a,c).apply(s,i)},s.$private(),c.$store_computed=function(t){var n,$=this,o=r,a=r,s=r,c=r;return function(){return o=t,"location"["$==="](o)?$.$store("location",$.$location()):"file_path"["$==="](o)||"line_number"["$==="](o)?(n=e.to_ary($.$file_and_line_number()),a=null==n[0]?r:n[0],s=null==n[1]?r:n[1],$.$store("file_path",a),$.$store("line_number",s)):"execution_result"["$==="](o)?$.$store("execution_result",i([],{})):"describes"["$==="](o)||"described_class"["$==="](o)?(c=$.$described_class(),$.$store("described_class",c),$.$store("describes",c)):"full_description"["$==="](o)?$.$store("full_description",$.$full_description()):"description"["$==="](o)?$.$store("description",(n=$).$build_description_from.apply(n,[].concat($["$[]"]("description_args")))):"description_args"["$==="](o)?$.$store("description_args",[]):r}()},c.$location=function(){var e=this;return""+e["$[]"]("file_path")+":"+e["$[]"]("line_number")},c.$file_and_line_number=function(){var e=this;return e.$first_caller_from_outside_rspec()["$=~"](/(.+?):(\d+)(|:\d+)/),[l.get("Metadata").$relative_path(r),r.$to_i()]},c.$first_caller_from_outside_rspec=function(){var e,t,n,$=this;return(e=(t=$["$[]"]("caller")).$detect,e.$$p=(n=function(e){var t;return n.$$s||this,null==e&&(e=r),t=e["$=~"](/\/lib\/rspec\/core/),t===r||t===!1},n.$$s=$,n),e).call(t)},c["$method_description_after_module?"]=function(e,t){var n;return(n=e["$is_a?"](l.get("Module")))===r||n.$$is_boolean&&1!=n?!1:t["$=~"](/^(#|::|\.)/)},c.$build_description_from=function(t,n){var o,a,i,s,c=this,l=r,u=r;return n=$.call(arguments,1),null==t&&(t=""),o=e.to_ary((a=(i=n).$inject,a.$$p=(s=function(e,t){var n,$=s.$$s||this;return desc=e[0],last_part=e[1],null==t&&(t=r),t=t.$to_s(),((n=$["$method_description_after_module?"](last_part,t))===r||n.$$is_boolean&&1!=n)&&(t=" "["$+"](t)),[desc["$+"](t),t]},s.$$s=c,s),a).call(i,[t.$to_s(),t])),l=null==o[0]?r:o[0],u=null==o[1]?r:o[1],l},e.donate(s,["$[]","$fetch","$store_computed","$location","$file_and_line_number","$first_caller_from_outside_rspec","$method_description_after_module?","$build_description_from"])}(u),function(t){var r=o(t,"ExampleMetadataHash"),n=r.$$proto,$=r.$$scope;r.$include($.get("MetadataHash")),n.$described_class=function(){var e=this;return e["$[]"]("example_group").$described_class()},n.$full_description=function(){var e,t=this;return(e=t).$build_description_from.apply(e,[t["$[]"]("example_group")["$[]"]("full_description")].concat(t["$[]"]("description_args")))},e.donate(r,["$described_class","$full_description"])}(u),function(t){var n=o(t,"GroupMetadataHash"),$=n.$$proto,a=n.$$scope;n.$include(a.get("MetadataHash")),$.$described_class=function(){try{var t,n,$,o,i,s=this;return(t=(n=s.$container_stack()).$each,t.$$p=($=function(t){var n,o,a,i=$.$$s||this;return null==t&&(t=r),(n=(o=["described_class","describes"]).$each,n.$$p=(a=function(n){var $,o=(a.$$s||this,r);return null==n&&(n=r),($=t["$has_key?"](n))===r||$.$$is_boolean&&1!=$?r:(o=t["$[]"](n),($=o["$nil?"]())===r||$.$$is_boolean&&1!=$?(e.$return(o),void 0):r)},a.$$s=i,a),n).call(o)},$.$$s=s,$),t).call(n),(t=(o=s.$container_stack().$reverse()).$each,t.$$p=(i=function(t){var n,$,o=(i.$$s||this,r);return null==t&&(t=r),o=t["$[]"]("description_args").$first(),(n=($=a.get("String")["$==="](o))!==!1&&$!==r?$:a.get("Symbol")["$==="](o))===r||n.$$is_boolean&&1!=n?(e.$return(o),void 0):r},i.$$s=s,i),t).call(o),r}catch(c){if(c===e.returner)return c.$v;throw c}},$.$full_description=function(){var e,t,n,$,o=this;return(e=o).$build_description_from.apply(e,[].concat((t=(n=a.get("FlatMap")).$flat_map,t.$$p=($=function(e){return $.$$s||this,null==e&&(e=r),e["$[]"]("description_args")},$.$$s=o,$),t).call(n,o.$container_stack().$reverse())))},$.$container_stack=function(){var e,t,n=this,$=r,o=r;return null==n.container_stack&&(n.container_stack=r),(e=n.container_stack)!==!1&&e!==r?e:n.container_stack=function(){for($=[o=n];(t=o["$has_key?"]("example_group"))!==r&&(!t.$$is_boolean||1==t);)$["$<<"](o["$[]"]("example_group")),o=o["$[]"]("example_group");return $}()},e.donate(n,["$described_class","$full_description","$container_stack"])}(u),_.$initialize=l=function(t){var $,o=this,a=l.$$p,s=a||r;return null==t&&(t=r),l.$$p=null,t!==!1&&t!==r?(o.$update(t),o.$store("example_group",i(["example_group"],{example_group:t["$[]"]("example_group").$extend(p.get("GroupMetadataHash"))}).$extend(p.get("GroupMetadataHash")))):o.$store("example_group",i([],{}).$extend(p.get("GroupMetadataHash"))),s!==r?($=e.$yield1(s,o),$===n?$:$):r},_.$process=function(e){var t,n=this,o=r;return e=$.call(arguments,0),o=function(){return(t=e.$last()["$is_a?"](p.get("Hash")))===r||t.$$is_boolean&&1!=t?i([],{}):e.$pop()}(),n.$ensure_valid_keys(o),n["$[]"]("example_group").$store("description_args",e),n["$[]"]("example_group").$store("caller",(t=o.$delete("caller"))!==!1&&t!==r?t:n.$caller()),n.$update(o)},_.$for_example=function(e,t){var r=this;return r.$dup().$extend(p.get("ExampleMetadataHash")).$configure_for_example(e,t)},_["$any_apply?"]=function(e){var t,n,$,o=this;return(t=(n=e)["$any?"],t.$$p=($=function(e,t){var n=$.$$s||this;return null==e&&(e=r),null==t&&(t=r),n["$filter_applies?"](e,t)},$.$$s=o,$),t).call(n)},_["$all_apply?"]=function(e){var t,n,$,o=this;return(t=(n=e)["$all?"],t.$$p=($=function(e,t){var n=$.$$s||this;return null==e&&(e=r),null==t&&(t=r),n["$filter_applies?"](e,t)},$.$$s=o,$),t).call(n)},_["$filter_applies?"]=function(e,t,n){var $,o,a=this,i=r;return null==n&&(n=a),o=p.get("Array")["$==="](n["$[]"](e)),($=o!==!1&&o!==r?p.get("Proc")["$==="](t)["$!"]():o)===r||$.$$is_boolean&&1!=$?e["$=="]("line_numbers")?n["$line_number_filter_applies?"](t):e["$=="]("locations")?n["$location_filter_applies?"](t):($=p.get("Hash")["$==="](t))===r||$.$$is_boolean&&1!=$?($=n["$has_key?"](e))===r||$.$$is_boolean&&1!=$?!1:function(){return i=t,p.get("Regexp")["$==="](i)?n["$[]"](e)["$=~"](t):p.get("Proc")["$==="](i)?function(){return i=t.$arity(),0["$==="](i)?t.$call():2["$==="](i)?t.$call(n["$[]"](e),n):t.$call(n["$[]"](e))}():n["$[]"](e).$to_s()["$=="](t.$to_s())}():n["$filters_apply?"](e,t):n["$filter_applies_to_any_value?"](e,t)},_["$filters_apply?"]=function(e,t){var n,$,o,a=this;
return(n=($=t)["$all?"],n.$$p=(o=function(t,n){var $=o.$$s||this;return null==t&&(t=r),null==n&&(n=r),$["$filter_applies?"](t,n,$["$[]"](e))},o.$$s=a,o),n).call($)},_["$filter_applies_to_any_value?"]=function(e,t){var n,$,o,a=this;return(n=($=a["$[]"](e))["$any?"],n.$$p=(o=function(n){var $=o.$$s||this;return null==n&&(n=r),$["$filter_applies?"](e,n,s(e,t))},o.$$s=a,o),n).call($)},_["$location_filter_applies?"]=function(e){var t=this,n=r;return n=t.$example_group_declaration_line(e),n!==!1&&n!==r?t["$line_number_filter_applies?"](n):!0},_["$line_number_filter_applies?"]=function(e){var t,n,$,o=this,a=r;return a=(t=(n=e).$map,t.$$p=($=function(e){return $.$$s||this,null==e&&(e=r),p.get("RSpec").$world().$preceding_declaration_line(e)},$.$$s=o,$),t).call(n),o.$relevant_line_numbers()["$&"](a)["$empty?"]()["$!"]()},u.$protected(),_.$configure_for_example=function(e,t){var n,$=this;return e!==!1&&e!==r&&$.$store("description_args",[e]),$.$store("caller",(n=t.$delete("caller"))!==!1&&n!==r?n:$.$caller()),$.$update(t)},u.$private(),e.cdecl(p,"RESERVED_KEYS",["description","example_group","execution_result","file_path","full_description","line_number","location"]),_.$ensure_valid_keys=function(e){var t,n,$,o=this;return(t=(n=p.get("RESERVED_KEYS")).$each,t.$$p=($=function(t){var n,o=$.$$s||this;return null==t&&(t=r),(n=e["$has_key?"](t))===r||n.$$is_boolean&&1!=n?r:o.$raise("            "+"*"["$*"](50)+"\n:"+t+" is not allowed\n\nRSpec reserves some hash keys for its own internal use,\nincluding :"+t+", which is used on:\n\n            "+p.get("CallerFilter").$first_non_rspec_line()+".\n\nHere are all of RSpec's reserved hash keys:\n\n            "+p.get("RESERVED_KEYS").$join("\n  ")+"\n            "+"*"["$*"](50)+"\n")},$.$$s=o,$),t).call(n)},_.$example_group_declaration_line=function(e){var t,n=this;return(t=n["$[]"]("example_group"))===r||t.$$is_boolean&&1!=t?r:e["$[]"](p.get("File").$expand_path(n["$[]"]("example_group")["$[]"]("file_path")))},_.$relevant_line_numbers=function(e){var t,n=this;return null==e&&(e=n),[e["$[]"]("line_number")]["$+"](function(){return(t=e["$[]"]("example_group"))===r||t.$$is_boolean&&1!=t?[]:n.$relevant_line_numbers(e["$[]"]("example_group"))}())},r&&"relevant_line_numbers"}(c,l.get("Hash"))}(c)}(t)},Opal.modules["rspec/core/mocking/with_absolutely_nothing"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module);return e.add_stubs([]),function(t){var $=n(t,"RSpec");$.$$proto,$.$$scope,function(t){var $=n(t,"Core");$.$$proto,$.$$scope,function(t){var $=n(t,"MockFrameworkAdapter"),o=$.$$proto;$.$$scope,o.$setup_mocks_for_rspec=function(){return r},o.$verify_mocks_for_rspec=function(){return r},o.$teardown_mocks_for_rspec=function(){return r},e.donate($,["$setup_mocks_for_rspec","$verify_mocks_for_rspec","$teardown_mocks_for_rspec"])}($)}($)}(t)},Opal.modules["rspec/core/mocking/with_flexmock"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module);return e.add_stubs(["$require","$include","$flexmock_verify","$flexmock_close"]),t.$require("flexmock/rspec"),function(t){var $=n(t,"RSpec");$.$$proto,$.$$scope,function(t){var $=n(t,"Core");$.$$proto,$.$$scope,function(t){var $=n(t,"MockFrameworkAdapter"),o=$.$$proto,a=$.$$scope;e.defs($,"$framework_name",function(){return"flexmock"}),$.$include(a.get("FlexMock").$$scope.get("MockContainer")),o.$setup_mocks_for_rspec=function(){return r},o.$verify_mocks_for_rspec=function(){var e=this;return e.$flexmock_verify()},o.$teardown_mocks_for_rspec=function(){var e=this;return e.$flexmock_close()},e.donate($,["$setup_mocks_for_rspec","$verify_mocks_for_rspec","$teardown_mocks_for_rspec"])}($)}($)}(t)},Opal.modules["rspec/core/mocking/with_mocha"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e,n=(e.nil,e.breaker,e.slice,e.module);e.add_stubs(["$require","$include","$mocha_setup","$mocha_verify","$mocha_teardown"]);try{t.$require("mocha/api");try{t.$require("mocha/object")}catch($){if(!e.$rescue($,[r.get("LoadError")]))throw $}}catch($){if(!e.$rescue($,[r.get("LoadError")]))throw $;t.$require("mocha/standalone"),t.$require("mocha/object")}return function(t){var r=n(t,"RSpec");r.$$proto,r.$$scope,function(t){var r=n(t,"Core");r.$$proto,r.$$scope,function(t){var r=n(t,"MockFrameworkAdapter"),$=r.$$proto,o=r.$$scope;e.defs(r,"$framework_name",function(){return"mocha"});try{r.$include(o.get("Mocha").$$scope.get("API"))}catch(a){if(!e.$rescue(a,[o.get("NameError")]))throw a;r.$include(o.get("Mocha").$$scope.get("Standalone"))}$.$setup_mocks_for_rspec=function(){var e=this;return e.$mocha_setup()},$.$verify_mocks_for_rspec=function(){var e=this;return e.$mocha_verify()},$.$teardown_mocks_for_rspec=function(){var e=this;return e.$mocha_teardown()},e.donate(r,["$setup_mocks_for_rspec","$verify_mocks_for_rspec","$teardown_mocks_for_rspec"])}(r)}(r)}(t)},Opal.modules["rspec/core/mocking/with_rr"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e,n=(e.nil,e.breaker,e.slice,e.module);return e.add_stubs(["$require","$push","$backtrace_exclusion_patterns","$configuration","$include","$reset","$instance","$verify_doubles"]),t.$require("rr"),r.get("RSpec").$configuration().$backtrace_exclusion_patterns().$push(r.get("RR").$$scope.get("Errors").$$scope.get("BACKTRACE_IDENTIFIER")),function(t){var r=n(t,"RSpec");r.$$proto,r.$$scope,function(t){var r=n(t,"Core");r.$$proto,r.$$scope,function(t){var r=n(t,"MockFrameworkAdapter"),$=r.$$proto,o=r.$$scope;e.defs(r,"$framework_name",function(){return"rr"}),r.$include(o.get("RR").$$scope.get("Extensions").$$scope.get("InstanceMethods")),$.$setup_mocks_for_rspec=function(){return o.get("RR").$$scope.get("Space").$instance().$reset()},$.$verify_mocks_for_rspec=function(){return o.get("RR").$$scope.get("Space").$instance().$verify_doubles()},$.$teardown_mocks_for_rspec=function(){return o.get("RR").$$scope.get("Space").$instance().$reset()},e.donate(r,["$setup_mocks_for_rspec","$verify_mocks_for_rspec","$teardown_mocks_for_rspec"])}(r)}(r)}(t)},Opal.modules["rspec/core/mocking/with_rspec"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=(e.nil,e.breaker,e.slice,e.module);return e.add_stubs(["$require","$configuration","$setup","$verify","$teardown"]),t.$require("rspec/mocks"),function(t){var n=r(t,"RSpec");n.$$proto,n.$$scope,function(t){var n=r(t,"Core");n.$$proto,n.$$scope,function(t){var n=r(t,"MockFrameworkAdapter"),$=n.$$proto,o=n.$$scope;e.defs(n,"$framework_name",function(){return"rspec"}),e.defs(n,"$configuration",function(){return o.get("RSpec").$$scope.get("Mocks").$configuration()}),$.$setup_mocks_for_rspec=function(){var e=this;return o.get("RSpec").$$scope.get("Mocks").$setup(e)},$.$verify_mocks_for_rspec=function(){return o.get("RSpec").$$scope.get("Mocks").$verify()},$.$teardown_mocks_for_rspec=function(){return o.get("RSpec").$$scope.get("Mocks").$teardown()},e.donate(n,["$setup_mocks_for_rspec","$verify_mocks_for_rspec","$teardown_mocks_for_rspec"])}(n)}(n)}(t)},Opal.modules["rspec/core/option_parser"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e,n=e.nil,$=(e.breaker,e.slice,e.module),o=e.klass,a=e.hash2,i=e.range;return e.add_stubs(["$require","$parse!","$new","$alias_method","$empty?","$convert_deprecated_args","$delete","$parser","$abort","$message","$map!","$===","$deprecate","$banner=","$on","$[]","$[]=","$<<","$to_i","$run","$exit","$warning","$separator","$last","$nil?","$==","$Integer","$+","$compile","$escape","$=~","$split","$gsub","$to_sym","$Float","$puts","$on_tail"]),t.$require("optparse"),function(t){var r=$(t,"Core");r.$$proto,r.$$scope,function(t,$super){function r(){}var $=r=o(t,$super,"Parser",r),s=$.$$proto,c=$.$$scope;return e.defs($,"$parse!",function(e){var t=this;return t.$new()["$parse!"](e)}),function(e){return e.$$scope,e.$$proto,e.$alias_method("parse","parse!")}($.$singleton_class()),s["$parse!"]=function(t){var r,$=this,o=n,i=n;if((r=t["$empty?"]())!==n&&(!r.$$is_boolean||1==r))return a([],{});$.$convert_deprecated_args(t),o=function(){return(r=t.$delete("--tty"))===n||r.$$is_boolean&&1!=r?a([],{}):a(["tty"],{tty:!0})}();try{$.$parser(o)["$parse!"](t)}catch(s){if(!e.$rescue(s,[c.get("OptionParser").$$scope.get("InvalidOption")]))throw s;i=s,$.$abort(""+i.$message()+"\n\nPlease use --help for a listing of valid options")}return o},s.$convert_deprecated_args=function(e){var t,r,$,o=this;return(t=(r=e)["$map!"],t.$$p=($=function(e){var t=($.$$s||this,n);return null==e&&(e=n),function(){return t=e,"--formatter"["$==="](t)?(c.get("RSpec").$deprecate("the --formatter option",a(["replacement"],{replacement:"-f or --format"})),"--format"):"--default_path"["$==="](t)?"--default-path":"--line_number"["$==="](t)?"--line-number":e}()},$.$$s=o,$),t).call(r)},$.$alias_method("parse","parse!"),s.$parser=function(t){var r,$,o,s=this;return(r=($=c.get("OptionParser")).$new,r.$$p=(o=function(r){var $,s,l,u,_,p,d,f,h,m,g,v,b,y,x,k,w,S,E,R,O,M,q,A,C,T,I,z,j,N,F,B,P,D,H,L,U,G,Y,V,X,K,W,Z,J,Q,et,tt,rt,nt,$t,ot,at,it=o.$$s||this;return null==r&&(r=n),$=["Usage: rspec [options] [files or directories]\n\n"],s=r,s["$banner="].apply(s,$),$[$.length-1],($=(s=r).$on,$.$$p=(l=function(e){var r,$,o;return l.$$s||this,null==e&&(e=n),r="libs",$=t,(o=$["$[]"](r))!==!1&&o!==n?o:$["$[]="](r,[]),t["$[]"]("libs")["$<<"](e)},l.$$s=it,l),$).call(s,"-I PATH","Specify PATH to add to $LOAD_PATH (may be used more than once)."),($=(u=r).$on,$.$$p=(_=function(e){var r,$,o;return _.$$s||this,null==e&&(e=n),r="requires",$=t,(o=$["$[]"](r))!==!1&&o!==n?o:$["$[]="](r,[]),t["$[]"]("requires")["$<<"](e)},_.$$s=it,_),$).call(u,"-r","--require PATH","Require a file."),($=(p=r).$on,$.$$p=(d=function(e){return d.$$s||this,null==e&&(e=n),t["$[]="]("custom_options_file",e)},d.$$s=it,d),$).call(p,"-O","--options PATH","Specify the path to a custom options file."),($=(f=r).$on,$.$$p=(h=function(e){return h.$$s||this,null==e&&(e=n),t["$[]="]("order",e)},h.$$s=it,h),$).call(f,"--order TYPE[:SEED]","Run examples by the specified order type.","  [defined] examples and groups are run in the order they are defined","  [rand]    randomize the order of groups and examples","  [random]  alias for rand","  [random:SEED] e.g. --order random:123"),($=(m=r).$on,$.$$p=(g=function(e){return g.$$s||this,null==e&&(e=n),t["$[]="]("order","rand:"+e)},g.$$s=it,g),$).call(m,"--seed SEED",c.get("Integer"),"Equivalent of --order rand:SEED."),($=(v=r).$on,$.$$p=(b=function(e){return b.$$s||this,null==e&&(e=n),t["$[]="]("fail_fast",!0)},b.$$s=it,b),$).call(v,"--fail-fast","Abort the run on first failure."),($=(y=r).$on,$.$$p=(x=function(e){return x.$$s||this,null==e&&(e=n),t["$[]="]("fail_fast",!1)},x.$$s=it,x),$).call(y,"--no-fail-fast","Do not abort the run on first failure."),($=(k=r).$on,$.$$p=(w=function(e){return w.$$s||this,null==e&&(e=n),t["$[]="]("failure_exit_code",e)},w.$$s=it,w),$).call(k,"--failure-exit-code CODE",c.get("Integer"),"Override the exit code used when there are failing specs."),($=(S=r).$on,$.$$p=(E=function(e){return E.$$s||this,null==e&&(e=n),t["$[]="]("dry_run",!0)},E.$$s=it,E),$).call(S,"--dry-run","Print the formatter output of your suite without","  running any examples or hooks"),($=(R=r).$on,$.$$p=(O=function(e){return O.$$s||this,null==e&&(e=n),t["$[]="]("drb",e)},O.$$s=it,O),$).call(R,"-X","--[no-]drb","Run examples via DRb."),($=(M=r).$on,$.$$p=(q=function(e){return q.$$s||this,null==e&&(e=n),t["$[]="]("drb_port",e.$to_i())},q.$$s=it,q),$).call(M,"--drb-port PORT","Port to connect to the DRb server."),($=(A=r).$on,$.$$p=(C=function(e){var t=C.$$s||this;return null==e&&(e=n),t.$require("rspec/core/project_initializer"),c.get("ProjectInitializer").$new(e).$run(),t.$exit()},C.$$s=it,C),$).call(A,"--init","Initialize your project with RSpec."),($=(T=r).$on,$.$$p=(I=function(e){var t=I.$$s||this;return null==e&&(e=n),c.get("RSpec").$warning("--configure is deprecated with no effect. Use --init instead.",a(["call_site"],{call_site:n})),t.$exit()},I.$$s=it,I),$).call(T,"--configure","Deprecated. Use --init instead."),r.$separator("\n  **** Output ****\n\n"),($=(z=r).$on,$.$$p=(j=function(e){var r,$,o;return j.$$s||this,null==e&&(e=n),r="formatters",$=t,(o=$["$[]"](r))!==!1&&o!==n?o:$["$[]="](r,[]),t["$[]"]("formatters")["$<<"]([e])},j.$$s=it,j),$).call(z,"-f","--format FORMATTER","Choose a formatter.","  [p]rogress (default - dots)","  [d]ocumentation (group and example names)","  [h]tml","  [j]son","  custom formatter class name"),($=(N=r).$on,$.$$p=(F=function(e){var r,$,o;return F.$$s||this,null==e&&(e=n),r="formatters",$=t,(o=$["$[]"](r))!==!1&&o!==n?o:$["$[]="](r,[["progress"]]),t["$[]"]("formatters").$last()["$<<"](e)},F.$$s=it,F),$).call(N,"-o","--out FILE","Write output to a file instead of $stdout. This option applies","  to the previously specified --format, or the default format","  if no format is specified."),($=(B=r).$on,$.$$p=(P=function(e){return P.$$s||this,null==e&&(e=n),t["$[]="]("full_backtrace",!0)},P.$$s=it,P),$).call(B,"-b","--backtrace","Enable full backtrace."),($=(D=r).$on,$.$$p=(H=function(e){return H.$$s||this,null==e&&(e=n),t["$[]="]("color",e)},H.$$s=it,H),$).call(D,"-c","--[no-]color","--[no-]colour","Enable color in the output."),($=(L=r).$on,$.$$p=(U=function(r){var $,o=U.$$s||this;return null==r&&(r=n),t["$[]="]("profile_examples",function(){if(!(($=r["$nil?"]())===n||$.$$is_boolean&&1!=$))return!0;if(r["$=="](!1))return!1;try{return o.$Integer(r)}catch(t){if(e.$rescue(t,[c.get("ArgumentError")]))return c.get("RSpec").$warning("Non integer specified as profile count, seperate "["$+"]("your path from options with -- e.g. ")["$+"]("`rspec --profile -- "+r+"`"),a(["call_site"],{call_site:n})),!0;throw t}return n}())},U.$$s=it,U),$).call(L,"-p","--[no-]profile [COUNT]","Enable profiling of examples and list the slowest examples (default: 10)."),($=(G=r).$on,$.$$p=(Y=function(){return Y.$$s||this,t["$[]="]("warnings",!0)},Y.$$s=it,Y),$).call(G,"-w","--warnings","Enable ruby warnings"),r.$separator("\n  **** Filtering/tags ****\n\n    In addition to the following options for selecting specific files, groups,\n    or examples, you can select a single example by appending the line number to\n    the filename:\n\n      rspec path/to/a_spec.rb:37\n\n"),($=(V=r).$on,$.$$p=(X=function(e){return X.$$s||this,null==e&&(e=n),t["$[]="]("pattern",e)},X.$$s=it,X),$).call(V,"-P","--pattern PATTERN",'Load files matching pattern (default: "spec/**/*_spec.rb").'),($=(K=r).$on,$.$$p=(W=function(e){var r,$,o;return W.$$s||this,null==e&&(e=n),r="full_description",$=t,(o=$["$[]"](r))!==!1&&o!==n?o:$["$[]="](r,[])["$<<"](c.get("Regexp").$compile(c.get("Regexp").$escape(e)))},W.$$s=it,W),$).call(K,"-e","--example STRING","Run examples whose full nested names include STRING (may be","  used more than once)"),($=(Z=r).$on,$.$$p=(J=function(e){var r,$,o;return J.$$s||this,null==e&&(e=n),r="line_numbers",$=t,(o=$["$[]"](r))!==!1&&o!==n?o:$["$[]="](r,[])["$<<"](e)},J.$$s=it,J),$).call(Z,"-l","--line-number LINE","Specify line number of an example or group (may be","  used more than once)."),($=(Q=r).$on,$.$$p=(et=function(r){var $,o,s,c=et.$$s||this,l=n,u=n,_=n,p=n;return null==r&&(r=n),l=function(){return($=r["$=~"](/^~/))===n||$.$$is_boolean&&1!=$?"inclusion_filter":"exclusion_filter"}(),$=e.to_ary(r.$gsub(/^(~@|~|@)/,"").$split(":",2)),u=null==$[0]?n:$[0],_=null==$[1]?n:$[1],u=u.$to_sym(),$=l,o=t,(s=o["$[]"]($))!==!1&&s!==n?s:o["$[]="]($,a([],{})),t["$[]"](l)["$[]="](u,function(){return p=_,n["$==="](p)?!0:"true"["$==="](p)?!0:"false"["$==="](p)?!1:"nil"["$==="](p)?n:/^:/["$==="](p)?_["$[]"](i(1,-1,!1)).$to_sym():/^\d+$/["$==="](p)?c.$Integer(_):/^\d+.\d+$/["$==="](p)?c.$Float(_):_}())},et.$$s=it,et),$).call(Q,"-t","--tag TAG[:VALUE]","Run examples with the specified tag, or exclude examples","by adding ~ before the tag.","  - e.g. ~slow","  - TAG is always converted to a symbol"),($=(tt=r).$on,$.$$p=(rt=function(e){return rt.$$s||this,null==e&&(e=n),t["$[]="]("default_path",e)},rt.$$s=it,rt),$).call(tt,"--default-path PATH","Set the default path where RSpec looks for examples (can","  be a path to a file or a directory)."),r.$separator("\n  **** Utility ****\n\n"),($=(nt=r).$on,$.$$p=($t=function(){var e=$t.$$s||this;return e.$puts(c.get("RSpec").$$scope.get("Core").$$scope.get("Version").$$scope.get("STRING")),e.$exit()},$t.$$s=it,$t),$).call(nt,"-v","--version","Display the version."),($=(ot=r).$on_tail,$.$$p=(at=function(){var e=at.$$s||this;return e.$puts(r),e.$exit()},at.$$s=it,at),$).call(ot,"-h","--help","You're looking at it.")},o.$$s=s,o),r).call($)},n&&"parser"}(r,null)}(r.get("RSpec"))},Opal.modules["rspec/core/ordering"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=e.breaker,$=(e.slice,e.module),o=e.klass,a=e.hash2;return e.add_stubs(["$require","$new","$seed","$shuffle","$>","$dup","$times","$+","$rand","$-","$size","$==","$[]","$[]=","$call","$register","$fetch","$to_proc","$used?","$attr_reader","$used_random_seed?","$ordering_registry","$register_ordering","$to_i","$split","$to_s","$include?","$has_key?","$seed=","$order="]),function(t){var i=$(t,"RSpec");i.$$proto,i.$$scope,function(t){var i,s=$(t,"Core"),c=(s.$$proto,s.$$scope);(i=null==e.Object.$$scope.Random?r:"constant")===r||i.$$is_boolean&&1!=i?(s.$require("rspec/core/backport_random"),e.cdecl(c,"RandomNumberGenerator",c.get("RSpec").$$scope.get("Core").$$scope.get("Backports").$$scope.get("Random"))):e.cdecl(c,"RandomNumberGenerator",Opal.get("Random")),function(t){var i=$(t,"Ordering");i.$$proto,i.$$scope,function(e,$super){function t(){}var n=t=o(e,$super,"Identity",t),$=n.$$proto;return n.$$scope,$.$order=function(e){return e},r&&"order"}(i,null),function(e,$super){function t(){}var n=t=o(e,$super,"Random",t),$=n.$$proto,i=n.$$scope;return $.used=$.configuration=r,$.$initialize=function(e){var t=this;return t.configuration=e,t.used=!1},$["$used?"]=function(){var e=this;return e.used},$.$order=function(e){var t=this,n=r;return t.used=!0,n=i.get("RandomNumberGenerator").$new(t.configuration.$seed()),t.$shuffle(e,n)},i.get("RUBY_VERSION")["$>"]("1.9.3")?($.$shuffle=function(e,t){return e.$shuffle(a(["random"],{random:t}))},r&&"shuffle"):($.$shuffle=function(e,t){var n,$,o,a=this,i=r;return i=e.$dup(),(n=($=i.$size()).$times,n.$$p=(o=function(e){var n,$=(o.$$s||this,r);return null==e&&(e=r),$=e["$+"](t.$rand(i.$size()["$-"](e))),e["$=="]($)?r:(n=[i["$[]"]($),i["$[]"](e)],i["$[]="](e,n[0]),i["$[]="]($,n[1]))},o.$$s=a,o),n).call($),i},r&&"shuffle")}(i,null),function(e,$super){function t(){}var n=t=o(e,$super,"Custom",t),$=n.$$proto;return n.$$scope,$.callable=r,$.$initialize=function(e){var t=this;return t.callable=e},$.$order=function(e){var t=this;return t.callable.$call(e)},r&&"order"}(i,null),function(e,$super){function t(){}var n,$=t=o(e,$super,"Registry",t),i=$.$$proto,s=$.$$scope;return i.strategies=r,i.$initialize=function(e){var t=this,n=r;return t.configuration=e,t.strategies=a([],{}),t.$register("random",s.get("Random").$new(e)),n=s.get("Identity").$new(),t.$register("defined",n),t.$register("global",n)},i.$fetch=n=function(e){var t,$,o=this,a=n.$$p,i=a||r;return n.$$p=null,(t=($=o.strategies).$fetch,t.$$p=i.$to_proc(),t).call($,e)},i.$register=function(e,t){var r=this;return r.strategies["$[]="](e,t)},i["$used_random_seed?"]=function(){var e=this;return e.strategies["$[]"]("random")["$used?"]()},r&&"used_random_seed?"}(i,null),function(t,$super){function $(){}var a,i=$=o(t,$super,"ConfigurationManager",$),s=i.$$proto,c=i.$$scope;return s.seed_forced=s.order_forced=r,i.$attr_reader("seed","ordering_registry"),s.$initialize=function(){var e=this;return e.ordering_registry=c.get("Registry").$new(e),e.seed=e.$rand(65535),e.seed_forced=!1,e.order_forced=!1},s["$seed_used?"]=function(){var e=this;return e.$ordering_registry()["$used_random_seed?"]()},s["$seed="]=function(e){var t,n=this;return(t=n.seed_forced)===r||t.$$is_boolean&&1!=t?(n.$register_ordering("global",n.$ordering_registry().$fetch("random")),n.seed=e.$to_i()):r},s["$order="]=function(t){var n,$=this,o=r,a=r,i=r;return n=e.to_ary(t.$to_s().$split(":")),o=null==n[0]?r:n[0],a=null==n[1]?r:n[1],a!==!1&&a!==r&&($.seed=a=a.$to_i()),i=function(){return(n=o["$include?"]("rand"))===r||n.$$is_boolean&&1!=n?o["$=="]("defined")?"defined":r:"random"}(),i!==!1&&i!==r?$.$register_ordering("global",$.$ordering_registry().$fetch(i)):r},s.$force=function(e){var t,n,$=this;return(t=e["$has_key?"]("seed"))===r||t.$$is_boolean&&1!=t?(t=e["$has_key?"]("order"))===r||t.$$is_boolean&&1!=t?r:(t=[e["$[]"]("order")],n=$,n["$order="].apply(n,t),t[t.length-1],$.order_forced=!0):(t=[e["$[]"]("seed")],n=$,n["$seed="].apply(n,t),t[t.length-1],$.seed_forced=!0,$.order_forced=!0)},s.$register_ordering=a=function(t,$){var o,i,s,l=this,u=a.$$p,_=u||r;return null==$&&($=c.get("Custom").$new((o=(i=c.get("Proc")).$new,o.$$p=(s=function(t){var $;return s.$$s||this,null==t&&(t=r),$=e.$yield1(_,t),$===n?$:$},s.$$s=l,s),o).call(i))),a.$$p=null,i=l.order_forced,(o=i!==!1&&i!==r?t["$=="]("global"):i)===r||o.$$is_boolean&&1!=o?l.$ordering_registry().$register(t,$):r},r&&"register_ordering"}(i,null)}(s)}(i)}(t)},Opal.modules["rspec/core/pending"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=e.breaker,$=e.slice,o=e.module,a=e.klass,i=e.hash2;return e.add_stubs(["$current_example","$before","$pending","$class","$is_a?","$last","$pop","$first","$[]","$has_key?","$!","$[]=","$metadata","$execution_result","$instance_eval","$verify_mocks_for_rspec","$example_group_instance","$teardown_mocks_for_rspec","$raise","$new"]),function(t){var s=o(t,"RSpec");s.$$proto,s.$$scope,function(t){var s=o(t,"Core");s.$$proto,s.$$scope,function(t){var s,c=o(t,"Pending"),l=c.$$proto,u=c.$$scope;!function(e,$super){function t(){}var n=t=a(e,$super,"PendingDeclaredInExample",t);return n.$$proto,n.$$scope,r}(c,u.get("StandardError"));try{!function(e,$super){function t(){}var n=t=a(e,$super,"PendingExampleFixedError",t);return n.$$proto,n.$$scope,r}(c,u.get("Test").$$scope.get("Unit").$$scope.get("AssertionFailedError"))}catch(_){!function(e,$super){function t(){}var n=t=a(e,$super,"PendingExampleFixedError",t);return n.$$proto,n.$$scope,r}(c,u.get("StandardError"))}e.cdecl(u,"NO_REASON_GIVEN","No reason given"),e.cdecl(u,"NOT_YET_IMPLEMENTED","Not yet implemented"),l.$pending=s=function(t){var o,a,c,l,_,p,d=this,f=s.$$p,h=f||r,m=r,g=r,v=r,b=r,y=r;if(t=$.call(arguments,0),s.$$p=null,m=u.get("RSpec").$current_example(),m===!1||m===r)return(o=(a=d.$class()).$before,o.$$p=(c=function(){var e,r=c.$$s||this;return(e=r).$pending.apply(e,[].concat(t))},c.$$s=d,c),o).call(a,"each");if(g=function(){return(o=t.$last()["$is_a?"](u.get("Hash")))===r||o.$$is_boolean&&1!=o?i([],{}):t.$pop()}(),v=(o=t.$first())!==!1&&o!==r?o:u.get("NO_REASON_GIVEN"),(o=(l=g["$[]"]("unless"))!==!1&&l!==r?l:(_=g["$has_key?"]("if"),_!==!1&&_!==r?g["$[]"]("if")["$!"]():_))!==r&&(!o.$$is_boolean||1==o))return function(){return h!==r?(o=e.$yieldX(h,[]),o===n?o:o):r}();if(m.$metadata()["$[]="]("pending",!0),m.$metadata()["$[]"]("execution_result")["$[]="]("pending_message",v),m.$execution_result()["$[]="]("pending_fixed",!1),h!==r){try{try{b=function(){return e.$yieldX(h,[])===n?n.$v:(o=(l=m.$example_group_instance()).$instance_eval,o.$$p=(p=function(){var e=p.$$s||this;return e.$verify_mocks_for_rspec()},p.$$s=d,p),o).call(l)}(),m.$metadata()["$[]="]("pending",!1)}catch(x){if(!e.$rescue(x,[u.get("Exception")]))throw x;y=x,m.$execution_result()["$[]="]("exception",y)}}finally{d.$teardown_mocks_for_rspec()}b!==!1&&b!==r&&(m.$execution_result()["$[]="]("pending_fixed",!0),d.$raise(u.get("PendingExampleFixedError").$new()))}return d.$raise(u.get("PendingDeclaredInExample").$new(v))},e.donate(c,["$pending"])}(s)}(s)}(t)},Opal.modules["rspec/core/project_initializer"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$create_spec_helper_file","$create_dot_rspec_file","$delete_if_confirmed","$exist?","$report_exists","$report_creating","$open","$write","$mkdir_p","$puts","$=~","$gets","$rm_rf"]),function(e){var t=n(e,"RSpec");t.$$proto,t.$$scope,function(e){var t=n(e,"Core");t.$$proto,t.$$scope,function(e,$super){function t(){}var n=t=$(e,$super,"ProjectInitializer",t),o=n.$$proto,a=n.$$scope;return o.$initialize=function(e){var t=this;return null==e&&(e=r),t.arg=e},o.$run=function(){var e=this;return e.$create_spec_helper_file(),e.$create_dot_rspec_file(),e.$delete_if_confirmed("lib/tasks/rspec.rake","  If the file in lib/tasks/rspec.rake is the one generated by rspec-rails-1x,\n  you can get rid of it, as it is no longer needed with rspec-2.\n")},o.$create_dot_rspec_file=function(){var e,t,n,$=this;return(e=a.get("File")["$exist?"](".rspec"))===r||e.$$is_boolean&&1!=e?($.$report_creating(".rspec"),(e=(t=a.get("File")).$open,e.$$p=(n=function(e){return n.$$s||this,null==e&&(e=r),e.$write("--color\n--format progress\n")},n.$$s=$,n),e).call(t,".rspec","w")):$.$report_exists(".rspec")},o.$create_spec_helper_file=function(){var e,t,n,$=this;return(e=a.get("File")["$exist?"]("spec/spec_helper.rb"))===r||e.$$is_boolean&&1!=e?($.$report_creating("spec/spec_helper.rb"),a.get("FileUtils").$mkdir_p("spec"),(e=(t=a.get("File")).$open,e.$$p=(n=function(e){return n.$$s||this,null==e&&(e=r),e.$write("# This file was generated by the `rspec --init` command. Conventionally, all\n# specs live under a `spec` directory, which RSpec adds to the `$LOAD_PATH`.\n# Require this file using `require \"spec_helper\"` to ensure that it is only\n# loaded once.\n#\n# See http://rubydoc.info/gems/rspec-core/RSpec/Core/Configuration\nRSpec.configure do |config|\n  # Limit the spec run to only specs with the focus metadata. If no specs have\n  # the filtering metadata and `run_all_when_everything_filtered = true` then\n  # all specs will run.\n  #config.filter_run :focus\n\n  # Run all specs when none match the provided filter. This works well in\n  # conjunction with `config.filter_run :focus`, as it will run the entire\n  # suite when no specs have `:filter` metadata.\n  #config.run_all_when_everything_filtered = true\n\n  # Run specs in random order to surface order dependencies. If you find an\n  # order dependency and want to debug it, you can fix the order by providing\n  # the seed, which is printed after each run.\n  #     --seed 1234\n  #config.order = 'random'\nend\n")},n.$$s=$,n),e).call(t,"spec/spec_helper.rb","w")):$.$report_exists("spec/spec_helper.rb")},o.$delete_if_confirmed=function(e,t){var n,$=this;return(n=a.get("File")["$exist?"](e))===r||n.$$is_boolean&&1!=n?r:($.$puts(),$.$puts(t),$.$puts(),$.$puts("  delete   "+e+"? [y/n]"),(n=$.$gets()["$=~"](/y/i))===r||n.$$is_boolean&&1!=n?r:a.get("FileUtils").$rm_rf(e))},o.$report_exists=function(e){var t=this;return t.$puts("   exist   "+e)},o.$report_creating=function(e){var t=this;return t.$puts("  create   "+e)},r&&"report_creating"}(t,null)}(t)}(t)},Opal.modules["rspec/core/rake_task"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$require","$include","$attr_accessor","$deprecate","$setup_ivars","$last_comment","$application","$desc","$task","$send","$call","$slice","$arity","$run_task","$verbose","$name","$shift","$spec_command","$puts","$system","$failure_message","$fail_on_error","$abort","$private","$[]","$sort","$map","$to_proc","$pattern","$<<","$ruby_opts","$rspec_path","$files_to_run","$rspec_opts","$join","$reject","$blank","$flatten","$lambda","$nil?","$=="]),t.$require("rspec/support/warnings"),t.$require("rake"),t.$require("rake/tasklib"),t.$require("shellwords"),function(e){var t=$(e,"RSpec");t.$$proto,t.$$scope,function(e){var t=$(e,"Core");t.$$proto,t.$$scope,function(e,$super){function t(){}var $,i,s=t=o(e,$super,"RakeTask",t),c=s.$$proto,l=s.$$scope;return($=function(){try{return null!=Opal.get("Rake").$$scope.get("DSL")?"constant":r}catch(e){if(e.$$class===Opal.NameError)return r;throw e}}())===r||$.$$is_boolean&&1!=$||s.$include(Opal.get("Rake").$$scope.get("DSL")),s.$attr_accessor("name"),s.$attr_accessor("pattern"),s.$attr_accessor("fail_on_error"),s.$attr_accessor("failure_message"),s.$attr_accessor("verbose"),s.$attr_accessor("ruby_opts"),s.$attr_accessor("rspec_path"),s.$attr_accessor("rspec_opts"),c["$spec_opts="]=function(e){var t=this;return l.get("RSpec").$deprecate("RSpec::Core::RakeTask#spec_opts=",a(["replacement"],{replacement:"rspec_opts="})),t.rspec_opts=e},c.$initialize=i=function(e){var t,$,o,a=this,s=i.$$p,c=s||r;return e=n.call(arguments,0),i.$$p=null,a.$setup_ivars(e),((t=Opal.get("Rake").$application().$last_comment())===r||t.$$is_boolean&&1!=t)&&a.$desc("Run RSpec code examples"),(t=($=a).$task,t.$$p=(o=function(e,t){var n,$,a,i=o.$$s||this;return null==e&&(e=r),null==t&&(t=r),(n=($=l.get("RakeFileUtils")).$send,n.$$p=(a=function(){var e,n=a.$$s||this;return c!==!1&&c!==r&&(e=c).$call.apply(e,[].concat([n,t].$slice(0,c.$arity()))),n.$run_task(n.$verbose())},a.$$s=i,a),n).call($,"verbose",i.$verbose())},o.$$s=a,o),t).apply($,[a.$name()].concat(e))},c.$setup_ivars=function(e){var t,n=this;return n.name=(t=e.$shift())!==!1&&t!==r?t:"spec",t=[r,r,r],n.ruby_opts=t[0],n.rspec_opts=t[1],t=[!0,!0],n.verbose=t[0],n.fail_on_error=t[1],n.rspec_path="rspec",n.pattern="./spec{,/*/**}/*_spec.rb"},c.$run_task=function(e){var t,n=this,$=r,o=r;$=n.$spec_command();try{e!==!1&&e!==r&&n.$puts($),o=n.$system($)}catch(a){(t=n.$failure_message())===r||t.$$is_boolean&&1!=t||n.$puts(n.$failure_message())}return o!==!1&&o!==r?r:(t=n.$fail_on_error())===r||t.$$is_boolean&&1!=t?r:n.$abort(""+$+" failed")},s.$private(),c.$files_to_run=function(){var e,t,n=this;return(e=l.get("ENV")["$[]"]("SPEC"))===r||e.$$is_boolean&&1!=e?(e=(t=l.get("FileList")["$[]"](n.$pattern()).$sort()).$map,e.$$p="shellescape".$to_proc(),e).call(t):l.get("FileList")["$[]"](l.get("ENV")["$[]"]("SPEC")).$sort()},c.$spec_command=function(){var e,t,n=this,$=r;return $=[],$["$<<"](l.get("RUBY")),$["$<<"](n.$ruby_opts()),$["$<<"]("-S")["$<<"](n.$rspec_path()),$["$<<"](n.$files_to_run()),$["$<<"](n.$rspec_opts()),(e=(t=$.$flatten()).$reject,e.$$p=n.$blank().$to_proc(),e).call(t).$join(" ")},c.$blank=function(){var e,t,n,$=this;return(e=(t=$).$lambda,e.$$p=(n=function(e){var t;return n.$$s||this,null==e&&(e=r),(t=e["$nil?"]())!==!1&&t!==r?t:e["$=="]("")},n.$$s=$,n),e).call(t)},r&&"blank"}(t,Opal.get("Rake").$$scope.get("TaskLib"))}(t)}(t)},Opal.modules["rspec/core/reporter"]=function(e){e.dynamic_require_severity="warning";var t=(e.top,e),r=e.nil,n=e.breaker,$=e.slice,o=e.module,a=e.klass;return e.add_stubs(["$map","$to_proc","$new","$[]=","$each","$register_listener","$respond_to?","$<<","$[]","$to_sym","$start","$finish","$now","$notify","$empty?","$descendant_filtered_examples","$+","$stop","$seed_used?","$seed","$alias_method","$to_f","$-","$send","$registered_listeners","$private"]),function(t){var i=o(t,"Core");i.$$proto,i.$$scope,function(t,$super){function o(){}var i,s,c,l,u=o=a(t,$super,"Reporter",o),_=u.$$proto,p=u.$$scope;return _.listeners=_.example_count=_.failure_count=_.pending_count=_.duration=_.configuration=_.start=r,e.cdecl(p,"NOTIFICATIONS",(i=(s=["start","message","example_group_started","example_group_finished","example_started","example_passed","example_failed","example_pending","start_dump","dump_pending","dump_failures","dump_summary","seed","close","stop","deprecation","deprecation_summary"]).$map,i.$$p="to_sym".$to_proc(),i).call(s)),_.$initialize=function(e,t){var n,o,a,i,s,c=this;return t=$.call(arguments,1),c.configuration=e,c.listeners=(n=(o=p.get("Hash")).$new,n.$$p=(a=function(e,t){return a.$$s||this,null==e&&(e=r),null==t&&(t=r),e["$[]="](t,[])},a.$$s=c,a),n).call(o),(n=(i=t).$each,n.$$p=(s=function(e){var t,n=s.$$s||this;return null==e&&(e=r),(t=n).$register_listener.apply(t,[e].concat(p.get("NOTIFICATIONS")))},s.$$s=c,s),n).call(i),c.example_count=c.failure_count=c.pending_count=0,c.duration=c.start=r},_.$register_listener=function(e,t){var n,o,a,i=this;return t=$.call(arguments,1),(n=(o=t).$each,n.$$p=(a=function(t){var n,$=a.$$s||this;return null==$.listeners&&($.listeners=r),null==t&&(t=r),(n=e["$respond_to?"](t))===r||n.$$is_boolean&&1!=n?r:$.listeners["$[]"](t.$to_sym())["$<<"](e)},a.$$s=i,a),n).call(o),!0},_.$registered_listeners=function(e){var t=this;return t.listeners["$[]"](e)},_.$report=c=function(t){var $,o=this,a=c.$$p,i=a||r;c.$$p=null,o.$start(t);try{return $=e.$yield1(i,o),$===n?$:$}finally{o.$finish()}},_.$start=function(e){var t=this;return t.start=p.get("RSpec").$$scope.get("Core").$$scope.get("Time").$now(),t.$notify("start",e)},_.$message=function(e){var t=this;return t.$notify("message",e)
},_.$example_group_started=function(e){var t,n=this;return(t=e.$descendant_filtered_examples()["$empty?"]())===r||t.$$is_boolean&&1!=t?n.$notify("example_group_started",e):r},_.$example_group_finished=function(e){var t,n=this;return(t=e.$descendant_filtered_examples()["$empty?"]())===r||t.$$is_boolean&&1!=t?n.$notify("example_group_finished",e):r},_.$example_started=function(e){var t=this;return t.example_count=t.example_count["$+"](1),t.$notify("example_started",e)},_.$example_passed=function(e){var t=this;return t.$notify("example_passed",e)},_.$example_failed=function(e){var t=this;return t.failure_count=t.failure_count["$+"](1),t.$notify("example_failed",e)},_.$example_pending=function(e){var t=this;return t.pending_count=t.pending_count["$+"](1),t.$notify("example_pending",e)},_.$deprecation=function(e){var t=this;return t.$notify("deprecation",e)},_.$finish=function(){var e,t=this;try{return t.$stop(),t.$notify("start_dump"),t.$notify("dump_pending"),t.$notify("dump_failures"),t.$notify("dump_summary",t.duration,t.example_count,t.failure_count,t.pending_count),t.$notify("deprecation_summary"),(e=t["$seed_used?"]())===r||e.$$is_boolean&&1!=e?r:t.$notify("seed",t.configuration.$seed())}finally{t.$notify("close")}},u.$alias_method("abort","finish"),_.$stop=function(){var e,t=this;return(e=t.start)===r||e.$$is_boolean&&1!=e||(t.duration=p.get("RSpec").$$scope.get("Core").$$scope.get("Time").$now()["$-"](t.start).$to_f()),t.$notify("stop")},_.$notify=l=function(e,t){var n,o,a,i=this,s=l.$$p,c=s||r;return t=$.call(arguments,1),l.$$p=null,(n=(o=i.$registered_listeners(e)).$each,n.$$p=(a=function(n){var $,o;return a.$$s||this,null==n&&(n=r),($=(o=n).$send,$.$$p=c.$to_proc(),$).apply(o,[e].concat(t))},a.$$s=i,a),n).call(o)},u.$private(),_["$seed_used?"]=function(){var e,t=this;return e=t.configuration.$seed(),e!==!1&&e!==r?t.configuration["$seed_used?"]():e},r&&"seed_used?"}(i,null)}(t.get("RSpec"))},Opal.modules["rspec/core/ruby_project"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=e.breaker,$=e.slice,o=e.module,a=e.gvars;return e.add_stubs(["$require","$map","$add_dir_to_load_path","$join","$root","$include?","$unshift","$determine_root","$find_first_parent_containing","$ascend_until","$exists?","$ascend","$Pathname","$expand_path","$module_function"]),t.$require("pathname"),function(t){var i=o(t,"RSpec");i.$$proto,i.$$scope,function(t){var i=o(t,"Core");i.$$proto,i.$$scope,function(t){var i,s=o(t,"RubyProject"),c=s.$$proto,l=s.$$scope;c.$add_to_load_path=function(e){var t,n,o,a=this;return e=$.call(arguments,0),(t=(n=e).$map,t.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=r),t.$add_dir_to_load_path(l.get("File").$join(t.$root(),e))},o.$$s=a,o),t).call(n)},c.$add_dir_to_load_path=function(e){var t;return null==a.LOAD_PATH&&(a.LOAD_PATH=r),(t=a.LOAD_PATH["$include?"](e))===r||t.$$is_boolean&&1!=t?a.LOAD_PATH.$unshift(e):r},c.$root=function(){var e,t=this;return null==t.project_root&&(t.project_root=r),(e=t.project_root)!==!1&&e!==r?e:t.project_root=t.$determine_root()},c.$determine_root=function(){var e,t=this;return(e=t.$find_first_parent_containing("spec"))!==!1&&e!==r?e:"."},c.$find_first_parent_containing=function(e){var t,n,$,o=this;return(t=(n=o).$ascend_until,t.$$p=($=function(t){return $.$$s||this,null==t&&(t=r),l.get("File")["$exists?"](l.get("File").$join(t,e))},$.$$s=o,$),t).call(n)},c.$ascend_until=i=function(){try{var t,$,o,a=this,s=i.$$p,c=s||r;return i.$$p=null,(t=($=a.$Pathname(l.get("File").$expand_path("."))).$ascend,t.$$p=(o=function(t){var $,a;return o.$$s||this,null==t&&(t=r),($=(a=e.$yield1(c,t))===n?n.$v:a)===r||$.$$is_boolean&&1!=$?r:(e.$return(t),void 0)},o.$$s=a,o),t).call($)}catch(u){if(u===e.returner)return u.$v;throw u}},s.$module_function("add_to_load_path"),s.$module_function("add_dir_to_load_path"),s.$module_function("root"),s.$module_function("determine_root"),s.$module_function("find_first_parent_containing"),s.$module_function("ascend_until"),e.donate(s,["$add_to_load_path","$add_dir_to_load_path","$root","$determine_root","$find_first_parent_containing","$ascend_until"])}(i)}(i)}(t)},Opal.modules["rspec/core/runner"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass,o=e.gvars;return e.add_stubs(["$autorun_disabled?","$installed_at_exit?","$running_in_drb?","$at_exit","$nil?","$kind_of?","$to_i","$run","$!","$==","$exit","$-","$current_server","$require","$getaddress","$gethostname","$any?","$host","$URI","$uri","$trap","$wants_to_quit","$exit!","$wants_to_quit=","$puts","$trap_interrupt","$new","$parse_options","$[]","$options","$reset"]),function(t){var a=n(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=n(t,"Core");a.$$proto,a.$$scope,function(t,$super){function n(){}var a=n=$(t,$super,"Runner",n),i=(a.$$proto,a.$$scope);return e.defs(a,"$autorun",function(){var e,t,n,$,a=this;return(e=(t=(n=a["$autorun_disabled?"]())!==!1&&n!==r?n:a["$installed_at_exit?"]())!==!1&&t!==r?t:a["$running_in_drb?"]())===r||e.$$is_boolean&&1!=e?((e=(t=a).$at_exit,e.$$p=($=function(){var e,t,n=$.$$s||this,a=r;return null==o["!"]&&(o["!"]=r),null==o.stderr&&(o.stderr=r),null==o.stdout&&(o.stdout=r),(e=(t=o["!"]["$nil?"]())!==!1&&t!==r?t:o["!"]["$kind_of?"](i.get("SystemExit")))===r||e.$$is_boolean&&1!=e?r:(a=n.$run(i.get("ARGV"),o.stderr,o.stdout).$to_i(),(e=a["$=="](0)["$!"]())===r||e.$$is_boolean&&1!=e?r:n.$exit(a))},$.$$s=a,$),e).call(t),a.installed_at_exit=!0):r}),e.cdecl(i,"AT_EXIT_HOOK_BACKTRACE_LINE","rspec/core/runner:"+22["$-"](2)+":in `autorun'"),e.defs(a,"$disable_autorun!",function(){var e=this;return e.autorun_disabled=!0}),e.defs(a,"$autorun_disabled?",function(){var e,t=this;return null==t.autorun_disabled&&(t.autorun_disabled=r),(e=t.autorun_disabled)!==!1&&e!==r?e:t.autorun_disabled=!1}),e.defs(a,"$installed_at_exit?",function(){var e,t=this;return null==t.installed_at_exit&&(t.installed_at_exit=r),(e=t.installed_at_exit)!==!1&&e!==r?e:t.installed_at_exit=!1}),e.defs(a,"$running_in_drb?",function(){var t,n,$,o=this,a=r,s=r;try{try{return n=null!=i.DRb,(t=n!==!1&&n!==r?i.get("DRb").$current_server():n)===r||t.$$is_boolean&&1!=t?r:(o.$require("socket"),o.$require("uri"),a=i.get("IPSocket").$getaddress(i.get("Socket").$gethostname()),s=(t=(n=["127.0.0.1","localhost",a])["$any?"],t.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=r),e["$=="](t.$URI(i.get("DRb").$current_server().$uri()).$host())},$.$$s=o,$),t).call(n))}catch(c){if(e.$rescue(c,[i.get("DRb").$$scope.get("DRbServerNotFound")]))return r;throw c}}finally{return(t=s)!==!1&&t!==r?t:!1}}),e.defs(a,"$trap_interrupt",function(){var e,t,n,$=this;return(e=(t=$).$trap,e.$$p=(n=function(){var e,t,$=n.$$s||this;return(e=i.get("RSpec").$wants_to_quit())===r||e.$$is_boolean&&1!=e||$["$exit!"](1),e=[!0],t=i.get("RSpec"),t["$wants_to_quit="].apply(t,e),e[e.length-1],i.get("STDERR").$puts("\nExiting... Interrupt again to exit immediately.")},n.$$s=$,n),e).call(t,"INT")}),e.defs(a,"$run",function(t,n,$){var a,s=this,c=r;null==o.stderr&&(o.stderr=r),null==o.stdout&&(o.stdout=r),null==n&&(n=o.stderr),null==$&&($=o.stdout);try{if(s.$trap_interrupt(),c=i.get("ConfigurationOptions").$new(t),c.$parse_options(),(a=c.$options()["$[]"]("drb"))===r||a.$$is_boolean&&1!=a)return i.get("CommandLine").$new(c).$run(n,$);s.$require("rspec/core/drb_command_line");try{return i.get("DRbCommandLine").$new(c).$run(n,$)}catch(l){if(e.$rescue(l,[i.get("DRb").$$scope.get("DRbConnError")]))return n.$puts("No DRb server is running. Running in local process instead ..."),i.get("CommandLine").$new(c).$run(n,$);throw l}}finally{i.get("RSpec").$reset()}}),r&&"run"}(a,null)}(a)}(t)},Opal.modules["rspec/core/shared_context"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module;return e.add_stubs(["$each","$playback_onto","$__shared_context_recordings","$new","$__send__","$to_proc","$block","$method_name","$args","$define_method","$<<","$record","$+","$instance_methods"]),function(t){var o=$(t,"RSpec"),a=(o.$$proto,o.$$scope);!function(t){var o=$(t,"Core");o.$$proto,o.$$scope,function(t){var o,a,i,s=$(t,"SharedContext"),c=s.$$proto,l=s.$$scope;c.$included=function(e){var t,n,$,o=this;return(t=(n=o.$__shared_context_recordings()).$each,t.$$p=($=function(t){return $.$$s||this,null==t&&(t=r),t.$playback_onto(e)},$.$$s=o,$),t).call(n)},c.$__shared_context_recordings=function(){var e,t=this;return null==t.__shared_context_recordings&&(t.__shared_context_recordings=r),(e=t.__shared_context_recordings)!==!1&&e!==r?e:t.__shared_context_recordings=[]},e.cdecl(l,"Recording",(o=(a=l.get("Struct")).$new,o.$$p=(i=function(){var t=i.$$s||this;return e.defn(t,"$playback_onto",function(e){var t,r,n=this;return(t=(r=e).$__send__,t.$$p=n.$block().$to_proc(),t).apply(r,[n.$method_name()].concat(n.$args()))}),r&&"playback_onto"},i.$$s=s,i),o).call(a,"method_name","args","block")),e.defs(s,"$record",function(e){var t,$,o,a=this;return(t=($=e).$each,t.$$p=(o=function(e){var t,$,a,i=o.$$s||this;return null==e&&(e=r),(t=($=i).$define_method,t.$$p=(a=function(t){var $,o=a.$$s||this;return t=n.call(arguments,0),$=a.$$p||r,a.$$p=null,o.$__shared_context_recordings()["$<<"](l.get("Recording").$new(e,t,$))},a.$$s=i,a),t).call($,e)},o.$$s=a,o),t).call($)}),s.$record(["describe","context"]["$+"](l.get("Hooks").$instance_methods(!1))["$+"](l.get("MemoizedHelpers").$$scope.get("ClassMethods").$instance_methods(!1))),e.donate(s,["$included","$__shared_context_recordings"])}(o)}(o),e.cdecl(a,"SharedContext",a.get("Core").$$scope.get("SharedContext"))}(t)},Opal.modules["rspec/core/shared_example_group/collection"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$fetch_examples","$private","$[]","$source_for","$find","$has_key?","$reverse"]),function(e){var t=n(e,"RSpec");t.$$proto,t.$$scope,function(e){var t=n(e,"Core");t.$$proto,t.$$scope,function(e){var t=n(e,"SharedExampleGroup");t.$$proto,t.$$scope,function(e,$super){function t(){}var n=t=$(e,$super,"Collection",t),o=n.$$proto;return n.$$scope,o.examples=o.sources=r,o.$initialize=function(e,t){var r,n=this;return r=[e,t],n.sources=r[0],n.examples=r[1]},o["$[]"]=function(e){var t=this;return t.$fetch_examples(e)},n.$private(),o.$fetch_examples=function(e){var t=this;return t.examples["$[]"](t.$source_for(e))["$[]"](e)},o.$source_for=function(e){var t,n,$,o=this;return(t=(n=o.sources.$reverse()).$find,t.$$p=($=function(t){var n=$.$$s||this;return null==n.examples&&(n.examples=r),null==t&&(t=r),n.examples["$[]"](t)["$has_key?"](e)},$.$$s=o,$),t).call(n)},r&&"source_for"}(t,null)}(t)}(t)}(t)},Opal.modules["rspec/core/shared_example_group"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e,n=e.nil,$=(e.breaker,e.slice),o=e.module,a=e.range,i=e.klass,s=e.hash2;return e.add_stubs(["$add_group","$to_proc","$registry","$alias_method","$shared_example_groups_for","$[]","$ancestors","$new","$ensure_block_has_source_location","$first_non_rspec_line","$key?","$first","$shift","$warn_if_key_taken","$add_shared_example_group","$empty?","$send","$class_eval","$extend","$configuration","$shared_example_groups","$[]=","$clear","$private","$any?","$===","$example_block_for","$warn_with","$gsub","$formatted_location","$join","$source_location","$method_defined?","$define_method","$split"]),function(t){var r=o(t,"RSpec");r.$$proto,r.$$scope,function(t){var r=o(t,"Core");r.$$proto,r.$$scope,function(t){var r,c=o(t,"SharedExampleGroup"),l=c.$$proto,u=c.$$scope;l.$shared_examples=r=function(e){var t,o,a=this,i=r.$$p,s=i||n;return e=$.call(arguments,0),r.$$p=null,(t=(o=u.get("SharedExampleGroup").$registry()).$add_group,t.$$p=s.$to_proc(),t).apply(o,[a].concat(e))},c.$alias_method("shared_context","shared_examples"),c.$alias_method("share_examples_for","shared_examples"),c.$alias_method("shared_examples_for","shared_examples"),l.$shared_example_groups=function(){var e,t=this;return(e=u.get("SharedExampleGroup").$registry()).$shared_example_groups_for.apply(e,["main"].concat(t.$ancestors()["$[]"](a(0,-1,!1))))},function(t){var r,a=o(t,"TopLevelDSL"),i=a.$$proto,s=a.$$scope;i.$shared_examples=r=function(e){var t,o,a=r.$$p,i=a||n;return e=$.call(arguments,0),r.$$p=null,(t=(o=s.get("SharedExampleGroup").$registry()).$add_group,t.$$p=i.$to_proc(),t).apply(o,["main"].concat(e))},a.$alias_method("shared_context","shared_examples"),a.$alias_method("share_examples_for","shared_examples"),a.$alias_method("shared_examples_for","shared_examples"),i.$shared_example_groups=function(){return s.get("SharedExampleGroup").$registry().$shared_example_groups_for("main")},e.donate(a,["$shared_examples","$shared_example_groups"])}(c),e.defs(c,"$registry",function(){var e,t=this;return null==t.registry&&(t.registry=n),(e=t.registry)!==!1&&e!==n?e:t.registry=u.get("Registry").$new()}),function(e,$super){function t(){}var r,o,a=t=i(e,$super,"Registry",t),c=a.$$proto,l=a.$$scope;return c.shared_example_groups=n,c.$add_group=r=function(e,t){var o,a,i,s=this,c=r.$$p,u=c||n,_=n,p=n;return t=$.call(arguments,1),r.$$p=null,s.$ensure_block_has_source_location(u,l.get("CallerFilter").$first_non_rspec_line()),(o=s["$key?"](t.$first()))===n||o.$$is_boolean&&1!=o||(_=t.$shift(),s.$warn_if_key_taken(e,_,u),s.$add_shared_example_group(e,_,u)),(o=t["$empty?"]())===n||o.$$is_boolean&&1!=o?(p=l.get("Module").$new(),(o=(a=function(e){return e.$$scope,e.$$proto,e}(p.$singleton_class())).$send,o.$$p=(i=function(e){var t,r;return i.$$s||this,null==e&&(e=n),(t=(r=e).$class_eval,t.$$p=u.$to_proc(),t).call(r)},i.$$s=s,i),o).call(a,"define_method","extended"),(o=l.get("RSpec").$configuration()).$extend.apply(o,[p].concat(t))):n},c.$shared_example_groups_for=function(e){var t=this;return e=$.call(arguments,0),l.get("Collection").$new(e,t.$shared_example_groups())},c.$shared_example_groups=function(){var e,t,r,$,o=this;return(e=o.shared_example_groups)!==!1&&e!==n?e:o.shared_example_groups=(t=(r=l.get("Hash")).$new,t.$$p=($=function(e,t){return $.$$s||this,null==e&&(e=n),null==t&&(t=n),e["$[]="](t,l.get("Hash").$new())},$.$$s=o,$),t).call(r)},c.$clear=function(){var e=this;return e.$shared_example_groups().$clear()},a.$private(),c.$add_shared_example_group=function(e,t,r){var n=this;return n.$shared_example_groups()["$[]"](e)["$[]="](t,r)},c["$key?"]=function(e){var t,r,$,o=this;return(t=(r=[l.get("String"),l.get("Symbol"),l.get("Module")])["$any?"],t.$$p=($=function(t){return $.$$s||this,null==t&&(t=n),t["$==="](e)},$.$$s=o,$),t).call(r)},c.$warn_if_key_taken=function(e,t,r){var $,o=this,a=n;return($=a=o.$example_block_for(e,t))===n||$.$$is_boolean&&1!=$?n:l.get("RSpec").$warn_with(("            |WARNING: Shared example group '"+t+"' has been previously defined at:\n            |  "+o.$formatted_location(a)+"\n            |...and you are now defining it at:\n            |  "+o.$formatted_location(r)+"\n            |The new definition will overwrite the original one.\n").$gsub(/^ +\|/,""),s(["call_site"],{call_site:n}))},c.$formatted_location=function(e){return e.$source_location().$join(":")},c.$example_block_for=function(e,t){var r=this;return r.$shared_example_groups()["$[]"](e)["$[]"](t)},(o=l.get("Proc")["$method_defined?"]("source_location"))===n||o.$$is_boolean&&1!=o?(c.$ensure_block_has_source_location=function(e,t){var r,n,$,o=this;return e.$extend((r=(n=l.get("Module")).$new,r.$$p=($=function(){var e,r,n,o=$.$$s||this;return(e=(r=o).$define_method,e.$$p=(n=function(){return n.$$s||this,t.$split(":")},n.$$s=o,n),e).call(r,"source_location")},$.$$s=o,$),r).call(n))},n&&"ensure_block_has_source_location"):(c.$ensure_block_has_source_location=function(){return n},n&&"ensure_block_has_source_location")}(c,null),e.donate(c,["$shared_examples","$shared_example_groups"])}(r)}(r)}(t),t.$extend(r.get("RSpec").$$scope.get("Core").$$scope.get("SharedExampleGroup").$$scope.get("TopLevelDSL")),r.get("Module").$send("include",r.get("RSpec").$$scope.get("Core").$$scope.get("SharedExampleGroup").$$scope.get("TopLevelDSL"))},Opal.modules["rspec/core/version"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=(e.nil,e.breaker,e.slice,e.module);return e.add_stubs([]),function(t){var n=r(t,"RSpec");n.$$proto,n.$$scope,function(t){var n=r(t,"Core");n.$$proto,n.$$scope,function(t){var n=r(t,"Version"),$=(n.$$proto,n.$$scope);e.cdecl($,"STRING","3.0.0.beta1")}(n)}(n)}(t)},Opal.modules["rspec/core/warnings"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=(e.nil,e.breaker,e.slice,e.module),n=e.hash2;return e.add_stubs(["$deprecation","$reporter","$configuration","$merge","$first_non_rspec_line"]),function(t){var $=r(t,"RSpec"),o=($.$$proto,$.$$scope);e.defs($,"$deprecate",function(e,t){return null==t&&(t=n([],{})),o.get("RSpec").$configuration().$reporter().$deprecation(n(["deprecated","call_site"],{deprecated:e,call_site:o.get("CallerFilter").$first_non_rspec_line()}).$merge(t))}),e.defs($,"$warn_deprecation",function(e){return o.get("RSpec").$configuration().$reporter().$deprecation(n(["message"],{message:e}))})}(t)},Opal.modules["rspec/core/world"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$include","$attr_reader","$attr_accessor","$new","$[]=","$dup","$examples","$prune","$filter_manager","$uniq!","$configuration","$fetch","$ordering_registry","$order","$clear","$example_groups","$registry","$<<","$inclusion_filter","$exclusion_filter","$configure_group","$inject","$+","$size","$filtered_examples","$flat_map","$descendants","$<=","$sort","$declaration_line_numbers","$reporter","$announce_inclusion_filter","$announce_exclusion_filter","$empty?","$==","$length","$message","$[]","$join","$run_all_when_everything_filtered?","$zero?","$example_count","$everything_filtered_message","$description","$empty_without_conditional_filters?","$private"]),function(e){var t=n(e,"RSpec");t.$$proto,t.$$scope,function(e){var t=n(e,"Core");t.$$proto,t.$$scope,function(e,$super){function t(){}var n=t=$(e,$super,"World",t),o=n.$$proto,a=n.$$scope;return o.configuration=o.example_groups=o.line_numbers=r,n.$include(a.get("RSpec").$$scope.get("Core").$$scope.get("Hooks")),n.$attr_reader("example_groups","filtered_examples"),n.$attr_accessor("wants_to_quit"),o.$initialize=function(e){var t,n,$,o=this;return null==e&&(e=a.get("RSpec").$configuration()),o.configuration=e,o.example_groups=[],o.filtered_examples=(t=(n=a.get("Hash")).$new,t.$$p=($=function(e,t){var n=$.$$s||this,o=r;return null==e&&(e=r),null==t&&(t=r),e["$[]="](t,function(){return o=t.$examples().$dup(),o=n.$filter_manager().$prune(o),o["$uniq!"](),o}())},$.$$s=o,$),t).call(n)},o.$ordered_example_groups=function(){var e=this,t=r;return t=e.configuration.$ordering_registry().$fetch("global"),t.$order(e.example_groups)},o.$reset=function(){var e=this;return e.$example_groups().$clear(),a.get("SharedExampleGroup").$registry().$clear()},o.$filter_manager=function(){var e=this;return e.configuration.$filter_manager()},o.$register=function(e){var t=this;return t.$example_groups()["$<<"](e),e},o.$inclusion_filter=function(){var e=this;return e.configuration.$inclusion_filter()},o.$exclusion_filter=function(){var e=this;return e.configuration.$exclusion_filter()},o.$configure_group=function(e){var t=this;return t.configuration.$configure_group(e)},o.$example_count=function(){var e,t,n,$,o,i,s=this;return(e=(t=($=(o=a.get("FlatMap")).$flat_map,$.$$p=(i=function(e){return i.$$s||this,null==e&&(e=r),e.$descendants()},i.$$s=s,i),$).call(o,s.$example_groups())).$inject,e.$$p=(n=function(e,t){return n.$$s||this,null==e&&(e=r),null==t&&(t=r),e["$+"](t.$filtered_examples().$size())},n.$$s=s,n),e).call(t,0)},o.$preceding_declaration_line=function(e){var t,n,$,o=this;return(t=(n=o.$declaration_line_numbers().$sort()).$inject,t.$$p=($=function(t,n){return $.$$s||this,null==t&&(t=r),null==n&&(n=r),n["$<="](e)?n:t},$.$$s=o,$),t).call(n,r)},o.$reporter=function(){var e=this;return e.configuration.$reporter()},o.$announce_filters=function(){var e,t,n=this,$=r,o=r;return $=[],n.$announce_inclusion_filter($),n.$announce_exclusion_filter($),((e=n.$filter_manager()["$empty?"]())===r||e.$$is_boolean&&1!=e)&&($.$length()["$=="](1)?n.$reporter().$message("Run options: "+$["$[]"](0)):n.$reporter().$message("Run options:\n  "+$.$join("\n  "))),t=n.configuration["$run_all_when_everything_filtered?"](),(e=t!==!1&&t!==r?n.$example_count()["$zero?"]():t)===r||e.$$is_boolean&&1!=e||(n.$reporter().$message(""+n.$everything_filtered_message()+"; ignoring "+n.$inclusion_filter().$description()),n.$filtered_examples().$clear(),n.$inclusion_filter().$clear()),(e=n.$example_count()["$zero?"]())===r||e.$$is_boolean&&1!=e?r:(n.$example_groups().$clear(),(e=n.$filter_manager()["$empty?"]())===r||e.$$is_boolean&&1!=e?(e=n.$exclusion_filter()["$empty_without_conditional_filters?"]())===r||e.$$is_boolean&&1!=e?(e=n.$inclusion_filter()["$empty?"]())===r||e.$$is_boolean&&1!=e?r:n.$reporter().$message(n.$everything_filtered_message()):(o=n.$everything_filtered_message(),(e=n.configuration["$run_all_when_everything_filtered?"]())===r||e.$$is_boolean&&1!=e||o["$<<"]("; ignoring "+n.$inclusion_filter().$description()),n.$reporter().$message(o)):n.$reporter().$message("No examples found."))},o.$everything_filtered_message=function(){return"\nAll examples were filtered out"},o.$announce_inclusion_filter=function(e){var t,n=this;return(t=n.$inclusion_filter()["$empty?"]())===r||t.$$is_boolean&&1!=t?e["$<<"]("include "+n.$inclusion_filter().$description()):r},o.$announce_exclusion_filter=function(e){var t,n=this;return(t=n.$exclusion_filter()["$empty_without_conditional_filters?"]())===r||t.$$is_boolean&&1!=t?e["$<<"]("exclude "+n.$exclusion_filter().$description()):r},n.$private(),o.$declaration_line_numbers=function(){var e,t,n,$,o=this;return(e=o.line_numbers)!==!1&&e!==r?e:o.line_numbers=(t=(n=o.$example_groups()).$inject,t.$$p=($=function(e,t){return $.$$s||this,null==e&&(e=r),null==t&&(t=r),e["$+"](t.$declaration_line_numbers())},$.$$s=o,$),t).call(n,[])},r&&"declaration_line_numbers"}(t,null)}(t)}(t)},Opal.modules["rspec/core"]=function(e){e.dynamic_require_severity="warning";var t,r,n,$,o,a=e.top,i=e.nil,s=e.breaker,c=e.slice,l=e.module,u=e.klass,_=e.hash2,p=i;return e.add_stubs(["$lambda","$require","$[]","$autoload","$wants_to_quit","$world","$wants_to_quit=","$new","$warn_deprecation","$first_non_rspec_line","$configuration","$clear","$example_groups","$current","$[]=","$=~","$define_method","$to_proc","$method","$expand_path","$fetch","$const_get"]),p=function(){return(t=(r=a.$require_relative)&&!r.$$stub||a["$respond_to_missing?"]("require_relative")?"method":i)===i||t.$$is_boolean&&1!=t?(t=($=a).$lambda,t.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=i),t.$require("rspec/"+e)},o.$$s=a,o),t).call($):(t=(r=a).$lambda,t.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=i),t.$require("rspec/core/../"+e)},n.$$s=a,n),t).call(r)}(),a.$require("set"),a.$require("time"),a.$require("rbconfig"),p["$[]"]("core/version"),a.$require("rspec/support/caller_filter"),a.$require("rspec/core/warnings"),a.$require("rspec/support/warnings"),p["$[]"]("core/flat_map"),p["$[]"]("core/filter_manager"),p["$[]"]("core/dsl"),p["$[]"]("core/reporter"),p["$[]"]("core/hooks"),p["$[]"]("core/memoized_helpers"),p["$[]"]("core/metadata"),p["$[]"]("core/pending"),p["$[]"]("core/formatters"),p["$[]"]("core/ordering"),p["$[]"]("core/world"),p["$[]"]("core/configuration"),p["$[]"]("core/option_parser"),p["$[]"]("core/configuration_options"),p["$[]"]("core/command_line"),p["$[]"]("core/runner"),p["$[]"]("core/example"),p["$[]"]("core/shared_example_group/collection"),p["$[]"]("core/shared_example_group"),p["$[]"]("core/example_group"),function(n){var $,o,a,p=l(n,"RSpec"),d=(p.$$proto,p.$$scope);p.$autoload("SharedContext","rspec/core/shared_context"),e.defs(p,"$wants_to_quit",function(){var e=this;return e.$world().$wants_to_quit()}),e.defs(p,"$wants_to_quit=",function(e){var t,r,n=this;return t=[e],r=n.$world(),r["$wants_to_quit="].apply(r,t),t[t.length-1]}),e.defs(p,"$world",function(){var e,t=this;return null==t.world&&(t.world=i),(e=t.world)!==!1&&e!==i?e:t.world=d.get("RSpec").$$scope.get("Core").$$scope.get("World").$new()}),e.defs(p,"$world=",function(e){var t=this;return t.world=e}),e.defs(p,"$reset",function(){var e=this;return e.world=i,e.configuration=i}),e.defs(p,"$configuration",$=function(){var e,t=this,r=$.$$p,n=r||i;return null==t.configuration&&(t.configuration=i),$.$$p=null,n!==i&&d.get("RSpec").$warn_deprecation("\n*****************************************************************\nDEPRECATION WARNING\n\n* RSpec.configuration with a block is deprecated and has no effect.\n* please use RSpec.configure with a block instead.\n\nCalled from "+d.get("CallerFilter").$first_non_rspec_line()+"\n*****************************************************************\n\n"),(e=t.configuration)!==!1&&e!==i?e:t.configuration=d.get("RSpec").$$scope.get("Core").$$scope.get("Configuration").$new()}),e.defs(p,"$configuration=",function(e){var t=this;return t.configuration=e}),e.defs(p,"$configure",o=function(){var t,r=this,n=o.$$p,$=n||i;return o.$$p=null,$!==i?(t=e.$yield1($,r.$configuration()),t===s?t:t):i}),e.defs(p,"$clear_remaining_example_groups",function(){var e=this;return e.$world().$example_groups().$clear()}),e.defs(p,"$current_example",function(){return d.get("Thread").$current()["$[]"]("_rspec_current_example")}),e.defs(p,"$current_example=",function(e){return d.get("Thread").$current()["$[]="]("_rspec_current_example",e)}),e.defs(p,"$windows_os?",function(){return d.get("RbConfig").$$scope.get("CONFIG")["$[]"]("host_os")["$=~"](/cygwin|mswin|mingw|bccwin|wince|emx/)}),function(n){var $=l(n,"Core"),o=($.$$proto,$.$$scope);!function(e,$super){function n(){}var $=n=u(e,$super,"Time",n);return $.$$proto,$.$$scope,function(e){return e.$$scope,e.$$proto,(t=(r=e).$define_method,t.$$p=Opal.get("Time").$method("now").$to_proc(),t).call(r,"now")}($.$singleton_class())}($,null),e.defs($,"$path_to_executable",function(){var e,t=this;return null==t.path_to_executable&&(t.path_to_executable=i),(e=t.path_to_executable)!==!1&&e!==i?e:t.path_to_executable=o.get("File").$expand_path("../../../exe/rspec","rspec/core")})}(p),e.cdecl(d,"MODULES_TO_AUTOLOAD",_(["Matchers","Expectations","Mocks"],{Matchers:"rspec/expectations",Expectations:"rspec/expectations",Mocks:"rspec/mocks"})),e.defs(p,"$const_missing",a=function(t){try{var r,n,$,o=this;return a.$$p,a.$$p=null,o.$require((r=(n=d.get("MODULES_TO_AUTOLOAD")).$fetch,r.$$p=($=function(){var t=$.$$s||this;e.$return(e.find_iter_super_dispatcher(t,"const_missing",$.$$def||a,null).apply(t,c.call(arguments)))},$.$$s=o,$),r).call(n,t)),Opal.get("RSpec").$const_get(t)}catch(i){if(i===e.returner)return i.$v;throw i}})}(a)},Opal.modules["rspec/support/caller_filter"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$join","$+","$>=","$!","$caller","$raise","$find","$=~","$*"]),function(t){var o=n(t,"RSpec");o.$$proto,o.$$scope,function(t,$super){function n(){}var o=n=$(t,$super,"CallerFilter",n),a=(o.$$proto,o.$$scope);return e.cdecl(a,"RSPEC_LIBS",["core","mocks","expectations","support","matchers","rails"]),e.cdecl(a,"ADDITIONAL_TOP_LEVEL_FILES",["autorun"]),e.cdecl(a,"LIB_REGEX",new RegExp("/lib/rspec/("+a.get("RSPEC_LIBS")["$+"](a.get("ADDITIONAL_TOP_LEVEL_FILES")).$join("|")+")(\\.rb|/)")),a.get("RUBY_VERSION")["$>="]("2.0.0")?(e.defs(o,"$first_non_rspec_line",function(){var e,t,n,$=this,o=r,i=r,s=r,c=r;for(o=5,i=1,s=r;(e=s["$!"]())!==r&&(!e.$$is_boolean||1==e);)c=$.$caller(i,o),c!==!1&&c!==r||$.$raise("No non-lib lines in stack"),s=(e=(t=c).$find,e.$$p=(n=function(e){var t;return n.$$s||this,null==e&&(e=r),t=e["$=~"](a.get("LIB_REGEX")),t===r||t===!1},n.$$s=$,n),e).call(t),i=i["$+"](o),o=o["$*"](2);return s}),r&&"first_non_rspec_line"):(e.defs(o,"$first_non_rspec_line",function(){var e,t,n,$=this;return(e=(t=$.$caller()).$find,e.$$p=(n=function(e){var t;return n.$$s||this,null==e&&(e=r),t=e["$=~"](a.get("LIB_REGEX")),t===r||t===!1},n.$$s=$,n),e).call(t)}),r&&"first_non_rspec_line")}(o,null)}(t)},Opal.modules["rspec/support/spec/deprecation_helpers"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module);return e.add_stubs(["$to","$expect","$[]","$include","$join","$reporter","$configuration","$receive","$allow","$match","$to_not"]),function(t){var $=n(t,"RSpecHelpers"),o=$.$$proto,a=$.$$scope;o.$expect_deprecation_with_call_site=function(e,t){var n,$,o,i=this;return(n=($=i.$expect(a.get("RSpec").$configuration().$reporter())).$to,n.$$p=(o=function(n){var $=o.$$s||this;return null==n&&(n=r),$.$expect(n["$[]"]("call_site")).$to($.$include([e,t].$join(":")))},o.$$s=i,o),n).call($,i.$receive("deprecation"))},o.$allow_deprecation=function(){var e=this;return e.$allow(a.get("RSpec").$configuration().$reporter()).$to(e.$receive("deprecation"))},o.$expect_warning_without_call_site=function(e){var t,n,$,o=this;return null==e&&(e=/^/),(t=(n=o.$expect(Opal.get("Kernel"))).$to,t.$$p=($=function(t){var n=$.$$s||this;return null==t&&(t=r),n.$expect(t).$to(n.$match(e)),n.$expect(t).$to_not(n.$match(/Called from/))},$.$$s=o,$),t).call(n,o.$receive("warn"))},o.$expect_warning_with_call_site=function(e,t,n){var $,o,a,i=this;return null==n&&(n=/^/),($=(o=i.$expect(Opal.get("Kernel"))).$to,$.$$p=(a=function($){var o=a.$$s||this;return null==$&&($=r),o.$expect($).$to(o.$match(n)),o.$expect($).$to(o.$match(new RegExp("Called from "+e+":"+t)))},a.$$s=i,a),$).call(o,i.$receive("warn"))},o.$allow_warning=function(){var e=this;return e.$allow(Opal.get("Kernel")).$to(e.$receive("warn"))},e.donate($,["$expect_deprecation_with_call_site","$allow_deprecation","$expect_warning_without_call_site","$expect_warning_with_call_site","$allow_warning"])}(t)},Opal.modules["rspec/support/spec/in_sub_process"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=e.breaker,$=(e.slice,e.module);return e.add_stubs(["$respond_to?","$!","$==","$pipe","$fork","$write","$dump","$close","$exit!","$waitpid","$load","$read","$raise","$pending","$+"]),function(t){var o=$(t,"RSpec");o.$$proto,o.$$scope,function(t){var o=$(t,"Support");o.$$proto,o.$$scope,function(t){var o,a,i,s,c=$(t,"InSubProcess"),l=c.$$proto,u=c.$$scope;a=u.get("Process")["$respond_to?"]("fork"),l.$in_sub_process=(o=a!==!1&&a!==r?((i=u.get("RUBY_PLATFORM")["$=="]("java"))?u.get("RUBY_VERSION")["$=="]("1.8.7"):i)["$!"]():a)===r||o.$$is_boolean&&1!=o?function(){var e=this;return e.$pending("This spec requires forking to work properly, "["$+"]("and your platform does not support forking"))}:s=function(){var t,$,o,a=this,i=s.$$p,c=i||r,l=r,_=r,p=r,d=r;return s.$$p=null,t=e.to_ary(u.get("IO").$pipe()),l=null==t[0]?r:t[0],_=null==t[1]?r:t[1],p=(t=($=u.get("Process")).$fork,t.$$p=(o=function(){var t=o.$$s||this,$=r,a=r;$=r;try{if(e.$yieldX(c,[])===n)return n.$v}catch(i){if(!e.$rescue(i,[u.get("Exception")]))throw i;a=i,$=a}return _.$write(u.get("Marshal").$dump($)),l.$close(),_.$close(),t["$exit!"]()},o.$$s=a,o),t).call($),_.$close(),u.get("Process").$waitpid(p),d=u.get("Marshal").$load(l.$read()),l.$close(),d!==!1&&d!==r?a.$raise(d):r},e.donate(c,["$in_sub_process","$in_sub_process"])}(o)}(o)}(t)},Opal.modules["rspec/support/spec/stderr_splitter"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$require","$new","$<","$to_f","$define_method","$respond_to?","$__send__","$to_proc","$==","$write","$!","$empty?","$output","$has_output?","$send","$reset!","$string"]),t.$require("stringio"),function(t){var a=$(t,"RSpec");a.$$proto,a.$$scope,function(t){var a,i=$(t,"Support");i.$$proto,i.$$scope,function(t,$super){function $(){}var a,i,s,c,l=$=o(t,$super,"StdErrSplitter",$),u=l.$$proto,_=(l.$$scope,r);return u.output_tracker=u.orig_stderr=r,u.$initialize=function(e){var t=this;return t.orig_stderr=e,t.output_tracker=Opal.get("StringIO").$new()},_=function(){return(a=Opal.get("RUBY_VERSION").$to_f()["$<"](1.9))===r||a.$$is_boolean&&1!=a?"respond_to_missing?":"respond_to?"}(),(a=(i=l).$define_method,a.$$p=(s=function(t){var $,o,a=s.$$s||this;return null==a.orig_stderr&&(a.orig_stderr=r),t=n.call(arguments,0),($=(o=a.orig_stderr)["$respond_to?"].apply(o,[].concat(t)))!==!1&&$!==r?$:e.find_iter_super_dispatcher(a,null,s.$$def||null,null).apply(a,n.call(arguments))},s.$$s=l,s),a).call(i,_),u.$method_missing=c=function(e,t){var $,o,a,i=this,s=c.$$p,l=s||r;return t=n.call(arguments,1),c.$$p=null,($=(o=i.output_tracker).$__send__,$.$$p=l.$to_proc(),$).apply(o,[e].concat(t)),($=(a=i.orig_stderr).$__send__,$.$$p=l.$to_proc(),$).apply(a,[e].concat(t))
},u["$=="]=function(e){var t=this;return t.orig_stderr["$=="](e)},u.$write=function(e){var t,r,$=this;return e=n.call(arguments,0),(t=$.orig_stderr).$write.apply(t,[].concat(e)),(r=$.output_tracker).$write.apply(r,[].concat(e))},u["$has_output?"]=function(){var e=this;return e.$output()["$empty?"]()["$!"]()},u["$reset!"]=function(){var e=this;return e.output_tracker=Opal.get("StringIO").$new()},u["$verify_example!"]=function(e){var t,n=this;return(t=n["$has_output?"]())===r||t.$$is_boolean&&1!=t||e.$send("fail","Warnings were generated: "+n.$output()),n["$reset!"]()},u.$output=function(){var e=this;return e.output_tracker.$string()},r&&"output"}(i,function(){return(a=null==e.Object.$$scope.BasicObject?r:"constant")===r||a.$$is_boolean&&1!=a?Opal.get("Object"):Opal.get("BasicObject")}())}(a)}(t)},Opal.modules["rspec/support/spec"]=function(e){e.dynamic_require_severity="warning";var t,r,n,$=e.top,o=e,a=e.nil,i=(e.breaker,e.slice,e.gvars),s=a;return null==i.stderr&&(i.stderr=a),e.add_stubs(["$require","$new","$configure","$include","$before","$reset!","$after","$verify_example!"]),$.$require("rspec/support/spec/deprecation_helpers"),$.$require("rspec/support/spec/stderr_splitter"),s=i.stderr=o.get("RSpec").$$scope.get("Support").$$scope.get("StdErrSplitter").$new(i.stderr),(t=(r=o.get("RSpec")).$configure,t.$$p=(n=function(e){var t,r,$,i,c,l=n.$$s||this;return null==e&&(e=a),e.$include(o.get("RSpecHelpers")),(t=(r=e).$before,t.$$p=($=function(){return $.$$s||this,s["$reset!"]()},$.$$s=l,$),t).call(r),(t=(i=e).$after,t.$$p=(c=function(e){return c.$$s||this,null==e&&(e=a),s["$verify_example!"](e)},c.$$s=l,c),t).call(i)},n.$$s=$,n),t).call(r)},Opal.modules["rspec/support/version"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=(e.nil,e.breaker,e.slice,e.module);return e.add_stubs([]),function(t){var n=r(t,"RSpec");n.$$proto,n.$$scope,function(t){var n=r(t,"Support");n.$$proto,n.$$scope,function(t){var n=r(t,"Version"),$=(n.$$proto,n.$$scope);e.cdecl($,"STRING","3.0.0.beta1")}(n)}(n)}(t)},Opal.modules["rspec/support/warnings"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.hash2;return e.add_stubs(["$respond_to?","$warn_with","$fetch","$first_non_rspec_line","$<<","$warn"]),function(t){var o,a=n(t,"RSpec"),i=(a.$$proto,a.$$scope);((o=a["$respond_to?"]("deprecate"))===r||o.$$is_boolean&&1!=o)&&e.defs(a,"$deprecate",function(e,t){var r=this;return null==t&&(t=$([],{})),r.$warn_with("DEPRECATION: "+e+" is deprecated.",t)}),((o=a["$respond_to?"]("warn_deprecation"))===r||o.$$is_boolean&&1!=o)&&e.defs(a,"$warn_deprecation",function(e){var t=this;return t.$warn_with("DEPRECATION: \n "+e)}),e.defs(a,"$warning",function(e,t){var r=this;return null==t&&(t=$([],{})),r.$warn_with("WARNING: "+e+".",t)}),e.defs(a,"$warn_with",function(e,t){var n,o,a,s=this,c=r;return null==t&&(t=$([],{})),c=(n=(o=t).$fetch,n.$$p=(a=function(){return a.$$s||this,i.get("CallerFilter").$first_non_rspec_line()},a.$$s=s,a),n).call(o,"call_site"),c!==!1&&c!==r&&e["$<<"](" Called from "+c+"."),Opal.get("Kernel").$warn(e)})}(t)},Opal.modules["rspec/support"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=(e.nil,e.breaker,e.slice,e.module);return e.add_stubs(["$require"]),t.$require("rspec/support/version"),function(e){var t=r(e,"RSpec");t.$$proto,t.$$scope,function(e){var t=r(e,"Support");t.$$proto,t.$$scope}(t)}(t)},Opal.modules["rspec/expectations/differ"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass,o=e.hash2;return e.add_stubs(["$require","$pick_encoding","$matching_encoding","$map!","$chomp","$split","$diff","$empty?","$each","$new","$context_lines","$file_length_difference","$>","$overlaps?","$respond_to?","$merge","$unshift","$<<","$to_s","$format","$color_diff","$!","$==","$encoding","$+","$object_to_string","$diff_as_string","$protected","$color","$color?","$configuration","$join","$map","$chr","$[]","$===","$green","$red","$blue","$lines","$singleline_pp","$sort_by","$keys","$=~","$inspect","$pp","$private","$method_defined?","$compatible?","$default_external","$encode"]),t.$require("diff/lcs"),t.$require("diff/lcs/hunk"),t.$require("pp"),function(t){var a=n(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=n(t,"Expectations");a.$$proto,a.$$scope,function(t,$super){function n(){}var a,i=n=$(t,$super,"Differ",n),s=i.$$proto,c=i.$$scope;return s.$diff_as_string=function(t,n){var $,o,a,i,s,l,u,_=this,p=r,d=r,f=r,h=r,m=r,g=r,v=r,b=r;try{return p=_.$pick_encoding(t,n),d=_.$matching_encoding("",p),f=($=(o=n.$split(_.$matching_encoding("\n",p)))["$map!"],$.$$p=(a=function(e){return a.$$s||this,null==e&&(e=r),e.$chomp()},a.$$s=_,a),$).call(o),h=($=(i=t.$split(_.$matching_encoding("\n",p)))["$map!"],$.$$p=(s=function(e){return s.$$s||this,null==e&&(e=r),e.$chomp()},s.$$s=_,s),$).call(i),m=c.get("Diff").$$scope.get("LCS").$diff(f,h),($=m["$empty?"]())===r||$.$$is_boolean&&1!=$?(g=v=r,b=0,($=(l=m).$each,$.$$p=(u=function(e){var t,n,$=u.$$s||this;null==e&&(e=r);try{return v=c.get("Diff").$$scope.get("LCS").$$scope.get("Hunk").$new(f,h,e,$.$context_lines(),b),b=v.$file_length_difference(),g===!1||g===r?r:(n=$.$context_lines()["$>"](0),(t=n!==!1&&n!==r?v["$overlaps?"](g):n)===r||t.$$is_boolean&&1!=t?d["$<<"]($.$matching_encoding(g.$diff($.$format()).$to_s(),p)):(t=v["$respond_to?"]("merge"))===r||t.$$is_boolean&&1!=t?v.$unshift(g):v.$merge(g))}finally{g=v,d["$<<"]($.$matching_encoding("\n",p))}},u.$$s=_,u),$).call(l),d["$<<"](_.$matching_encoding(g.$diff(_.$format()).$to_s(),p)),d["$<<"](_.$matching_encoding("\n",p)),_.$color_diff(d)):d}catch(y){if(e.$rescue(y,[c.get("Encoding").$$scope.get("CompatibilityError")]))return($=t.$encoding()["$=="](n.$encoding())["$!"]())===r||$.$$is_boolean&&1!=$?"Could not produce a diff because of the encoding of the string ("+n.$encoding()+")":("Could not produce a diff because the encoding of the actual string ("+n.$encoding()+") ")["$+"]("differs from the encoding of the expected string ("+t.$encoding()+")");throw y}},s.$diff_as_object=function(e,t){var n,$=this,o=r,a=r,i=r;return o=$.$object_to_string(e),a=$.$object_to_string(t),(n=i=$.$diff_as_string(o,a))===r||n.$$is_boolean&&1!=n?r:$.$color_diff(i)},i.$protected(),s.$format=function(){return"unified"},s.$context_lines=function(){return 3},s.$color=function(e,t){return"e["+t+"m"+e+"e[0m"},s.$red=function(e){var t=this;return t.$color(e,31)},s.$green=function(e){var t=this;return t.$color(e,32)},s.$blue=function(e){var t=this;return t.$color(e,34)},s.$color_diff=function(e){var t,n,$,o=this;return(t=c.get("RSpec").$$scope.get("Matchers").$configuration()["$color?"]())===r||t.$$is_boolean&&1!=t?e:(t=(n=e.$lines()).$map,t.$$p=($=function(e){var t=$.$$s||this,n=r;return null==e&&(e=r),function(){return n=e["$[]"](0).$chr(),"+"["$==="](n)?t.$green(e):"-"["$==="](n)?t.$red(e):"@"["$==="](n)?e["$[]"](1).$chr()["$=="]("@")?t.$blue(e):e:e}()},$.$$s=o,$),t).call(n).$join()},s.$object_to_string=function(e){var t,n,$,o,a,i,s=this,l=r;return function(){return l=e,c.get("Hash")["$==="](l)?(t=(n=(o=(a=e.$keys()).$sort_by,o.$$p=(i=function(e){return i.$$s||this,null==e&&(e=r),e.$to_s()},i.$$s=s,i),o).call(a)).$map,t.$$p=($=function(t){var n=$.$$s||this,o=r,a=r,i=r;return null==t&&(t=r),o=c.get("PP").$singleline_pp(t,""),a=c.get("PP").$singleline_pp(e["$[]"](t),""),i=n.$pick_encoding(o,a),n.$matching_encoding(""+o+" => "+a,i)},$.$$s=s,$),t).call(n).$join(",\n"):c.get("String")["$==="](l)?(t=e["$=~"](/\n/))===r||t.$$is_boolean&&1!=t?e.$inspect():e:c.get("PP").$pp(e,"")}()},i.$private(),(a=c.get("String")["$method_defined?"]("encoding"))===r||a.$$is_boolean&&1!=a?(s.$pick_encoding=function(){return r},s.$matching_encoding=function(e){return e},r&&"matching_encoding"):(s.$pick_encoding=function(e,t){var n;return(n=c.get("Encoding")["$compatible?"](e,t))!==!1&&n!==r?n:c.get("Encoding").$default_external()},s.$matching_encoding=function(t,r){try{return t.$encode(r)}catch(n){if(e.$rescue(n,[c.get("Encoding").$$scope.get("UndefinedConversionError")]))return t.$encode(r,o(["undef"],{undef:"replace"}));throw n}},r&&"matching_encoding")}(a,null)}(a)}(t)},Opal.modules["rspec/expectations/errors"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs([]),function(e){var t=n(e,"RSpec");t.$$proto,t.$$scope,function(e){var t,o=n(e,"Expectations"),a=(o.$$proto,o.$$scope);(t=function(){try{return null!=a.get("Test").$$scope.get("Unit").$$scope.get("AssertionFailedError")?"constant":r}catch(e){if(e.$$class===Opal.NameError)return r;throw e}}())===r||t.$$is_boolean&&1!=t?function(e,$super){function t(){}var n=t=$(e,$super,"ExpectationNotMetError",t);return n.$$proto,n.$$scope,r}(o,Opal.get("StandardError")):function(e,$super){function t(){}var n=t=$(e,$super,"ExpectationNotMetError",t);return n.$$proto,n.$$scope,r}(o,a.get("Test").$$scope.get("Unit").$$scope.get("AssertionFailedError"))}(t)}(t)},Opal.modules["rspec/expectations/expectation_target"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$attr_accessor","$prevent_operator_matchers","$handle_matcher","$to_proc","$deprecated_should_enabled?","$deprecate","$should","$should_not","$deprecated_should_enabled=","$remove_method","$private","$raise","$+"]),function(t){var i=$(t,"RSpec");i.$$proto,i.$$scope,function(t){var i=$(t,"Expectations");i.$$proto,i.$$scope,function(t,$super){function $(){}var i,s,c=$=o(t,$super,"ExpectationTarget",$),l=c.$$proto,u=c.$$scope;return l.target=r,function(e){return e.$$scope,e.$$proto,e.$attr_accessor("deprecated_should_enabled"),e.$$proto["$deprecated_should_enabled?"]=e.$$proto.$deprecated_should_enabled}(c.$singleton_class()),l.$initialize=function(e){var t=this;return t.target=e},l.$to=i=function(e,t){var n,$,o=this,a=i.$$p,s=a||r;return null==e&&(e=r),null==t&&(t=r),i.$$p=null,o.$prevent_operator_matchers("to",e),(n=($=u.get("RSpec").$$scope.get("Expectations").$$scope.get("PositiveExpectationHandler")).$handle_matcher,n.$$p=s.$to_proc(),n).call($,o.target,e,t)},l.$not_to=s=function(e,t){var n,$,o=this,a=s.$$p,i=a||r;return null==e&&(e=r),null==t&&(t=r),s.$$p=null,o.$prevent_operator_matchers("not_to",e),(n=($=u.get("RSpec").$$scope.get("Expectations").$$scope.get("NegativeExpectationHandler")).$handle_matcher,n.$$p=i.$to_proc(),n).call($,o.target,e,t)},e.defn(c,"$to_not",l.$not_to),e.defs(c,"$enable_deprecated_should",function(){var e,t,$=this;return(e=$["$deprecated_should_enabled?"]())===r||e.$$is_boolean&&1!=e?(l.$should=function(e){var t,$=this;return null==$.target&&($.target=r),e=n.call(arguments,0),u.get("RSpec").$deprecate("`expect { }.should`",a(["replacement"],{replacement:"`expect { }.to`"})),(t=$.target).$should.apply(t,[].concat(e))},l.$should_not=function(e){var t,$=this;return null==$.target&&($.target=r),e=n.call(arguments,0),u.get("RSpec").$deprecate("`expect { }.should_not`",a(["replacement"],{replacement:"`expect { }.not_to`"})),(t=$.target).$should_not.apply(t,[].concat(e))},e=[!0],t=$,t["$deprecated_should_enabled="].apply(t,e),e[e.length-1]):r}),e.defs(c,"$disable_deprecated_should",function(){var e,t,n=this;return(e=n["$deprecated_should_enabled?"]())===r||e.$$is_boolean&&1!=e?r:(n.$remove_method("should"),n.$remove_method("should_not"),e=[!1],t=n,t["$deprecated_should_enabled="].apply(t,e),e[e.length-1])}),c.$private(),l.$prevent_operator_matchers=function(e,t){var n=this;return t!==!1&&t!==r?r:n.$raise(u.get("ArgumentError"),"The expect syntax does not support operator matchers, "["$+"]("so you must pass a matcher to `#"+e+"`."))},r&&"prevent_operator_matchers"}(i,null)}(i)}(t)},Opal.modules["rspec/expectations/extensions/object"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e,n=e.nil,$=(e.breaker,e.slice),o=e.module,a=e.hash2;return e.add_stubs(["$===","$deprecate","$to_s","$reject!","$=~","$compile","$backtrace","$raise","$extend"]),function(t){var r=o(t,"RSpec");r.$$proto,r.$$scope,function(t){var r=o(t,"Expectations"),i=r.$$proto,s=r.$$scope;!function(t){var r,i=o(t,"DeprecatedConstants"),s=i.$$proto,c=i.$$scope;s.$const_missing=r=function(t){var o,i,s,l=$.call(arguments,0),u=this,_=r.$$p,p=n,d=n;return r.$$p=null,function(){if(p=t,"Rspec"["$==="](p)||"Spec"["$==="](p))return c.get("RSpec").$deprecate(t.$to_s(),a(["replacement"],{replacement:"RSpec"})),c.get("RSpec");try{return e.find_super_dispatcher(u,"const_missing",r,_).apply(u,l)}catch($){if(e.$rescue($,[c.get("Exception")]))return d=$,(o=(i=d.$backtrace())["$reject!"],o.$$p=(s=function(e){return s.$$s||this,null==e&&(e=n),e["$=~"](c.get("Regexp").$compile("rspec/expectations/extensions/object"))},s.$$s=u,s),o).call(i),u.$raise(d);throw $}}()},e.donate(i,["$const_missing"])}(r),i["$differ="]=function(){return s.get("RSpec").$deprecate("RSpec::Expectations.differ=(differ)")},e.donate(r,["$differ="])}(r)}(t),t.$extend(r.get("RSpec").$$scope.get("Expectations").$$scope.get("DeprecatedConstants"))},Opal.modules["rspec/expectations/extensions"]=function(e){e.dynamic_require_severity="warning";var t=e.top;return e.nil,e.breaker,e.slice,e.add_stubs(["$require"]),t.$require("rspec/expectations/extensions/object")},Opal.modules["rspec/expectations/fail_with"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module;return e.add_stubs(["$new","$!","$raise","$+","$all_strings?","$any_multiline_strings?","$<<","$diff_as_string","$differ","$coerce_to_string","$no_procs?","$no_numbers?","$diff_as_object","$private","$none?","$===","$flatten","$all?","$any?","$multiline?","$join","$diffably_stringify","$map","$inspect","$gsub","$to_s","$method_defined?","$include?","$encode","$encoding"]),function(e){var t=$(e,"RSpec");t.$$proto,t.$$scope,function(e){var t=$(e,"Expectations");t.$$proto,t.$$scope,function(e){var t=e.$$scope;return e.$$proto,e.$$proto.$differ=function(){var e,n=this;return null==n.differ&&(n.differ=r),(e=n.differ)!==!1&&e!==r?e:n.differ=t.get("Differ").$new()},e.$$proto.$fail_with=function(e,n,$){var o,a,i=this;return null==n&&(n=r),null==$&&($=r),(o=e["$!"]())===r||o.$$is_boolean&&1!=o||i.$raise(t.get("ArgumentError"),"Failure message is nil. Does your matcher define the "["$+"]("appropriate failure_message_for_* method to return a string?")),(o=(a=$!==!1&&$!==r)?n:a)===r||o.$$is_boolean&&1!=o||((o=i["$all_strings?"]($,n))===r||o.$$is_boolean&&1!=o?(a=i["$no_procs?"]($,n),(o=a!==!1&&a!==r?i["$no_numbers?"]($,n):a)===r||o.$$is_boolean&&1!=o||e["$<<"]("\nDiff:")["$<<"](i.$differ().$diff_as_object($,n))):(o=i["$any_multiline_strings?"]($,n))===r||o.$$is_boolean&&1!=o||e["$<<"]("\nDiff:")["$<<"](i.$differ().$diff_as_string(i.$coerce_to_string($),i.$coerce_to_string(n)))),i.$raise(t.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationNotMetError").$new(e))},e.$private(),e.$$proto["$no_procs?"]=function(e){var $,o,a,i=this;return e=n.call(arguments,0),($=(o=e.$flatten())["$none?"],$.$$p=(a=function(e){return a.$$s||this,null==e&&(e=r),t.get("Proc")["$==="](e)},a.$$s=i,a),$).call(o)},e.$$proto["$all_strings?"]=function(e){var $,o,a,i=this;return e=n.call(arguments,0),($=(o=e.$flatten())["$all?"],$.$$p=(a=function(e){return a.$$s||this,null==e&&(e=r),t.get("String")["$==="](e)},a.$$s=i,a),$).call(o)},e.$$proto["$any_multiline_strings?"]=function(e){var t,$,o,a,i,s=this;return e=n.call(arguments,0),t=($=s)["$all_strings?"].apply($,[].concat(e)),t!==!1&&t!==r?(o=(a=e.$flatten())["$any?"],o.$$p=(i=function(e){var t=i.$$s||this;return null==e&&(e=r),t["$multiline?"](e)},i.$$s=s,i),o).call(a):t},e.$$proto["$no_numbers?"]=function(e){var $,o,a,i=this;return e=n.call(arguments,0),($=(o=e.$flatten())["$none?"],$.$$p=(a=function(e){return a.$$s||this,null==e&&(e=r),t.get("Numeric")["$==="](e)},a.$$s=i,a),$).call(o)},e.$$proto.$coerce_to_string=function(e){var n,$=this;return(n=t.get("Array")["$==="](e))===r||n.$$is_boolean&&1!=n?e:$.$diffably_stringify(e).$join("\n")},e.$$proto.$diffably_stringify=function(e){var n,$,o,a=this;return(n=($=e).$map,n.$$p=(o=function(e){var n;return o.$$s||this,null==e&&(e=r),(n=t.get("Array")["$==="](e))===r||n.$$is_boolean&&1!=n?e.$to_s().$gsub("\n","\\n"):e.$inspect()},o.$$s=a,o),n).call($)},($a=t.get("String")["$method_defined?"]("encoding"))===r||$a.$$is_boolean&&1!=$a?(e.$$proto["$multiline?"]=function(e){return e["$include?"]("\n")},r&&"multiline?"):(e.$$proto["$multiline?"]=function(e){return e["$include?"]("\n".$encode(e.$encoding()))},r&&"multiline?")}(t.$singleton_class())}(t)}(t)},Opal.modules["rspec/expectations/handler"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$nil?","$respond_to?","$warn","$join","$inspect","$check_message","$last_should=","$last_matcher=","$new","$matches?","$to_proc","$call","$failure_message_for_should","$failure_message","$diffable?","$fail_with","$expected","$actual","$!","$does_not_match?","$failure_message_for_should_not","$negative_failure_message"]),function(t){var o=n(t,"RSpec");o.$$proto,o.$$scope,function(t){var o=n(t,"Expectations"),a=(o.$$proto,o.$$scope);!function(t,$super){function n(){}var o=n=$(t,$super,"ExpectationHandler",n);return o.$$proto,o.$$scope,e.defs(o,"$check_message",function(e){var t,n,$;return(t=(n=($=e["$nil?"]())!==!1&&$!==r?$:e["$respond_to?"]("to_str"))!==!1&&n!==r?n:e["$respond_to?"]("call"))===r||t.$$is_boolean&&1!=t?Opal.get("Kernel").$warn(["WARNING: ignoring the provided expectation message argument (",e.$inspect(),") since it is not a string or a proc."].$join()):r}),r&&"check_message"}(o,null),function(t,$super){function n(){}var o,a=n=$(t,$super,"PositiveExpectationHandler",n);return a.$$proto,a.$$scope,e.defs(a,"$handle_matcher",o=function(e,t,n){var $,a,i,s=this,c=o.$$p,l=c||r,u=r;return null==n&&(n=r),o.$$p=null,s.$check_message(n),$=["should"],a=Opal.get("RSpec").$$scope.get("Matchers"),a["$last_should="].apply(a,$),$[$.length-1],$=[t],a=Opal.get("RSpec").$$scope.get("Matchers"),a["$last_matcher="].apply(a,$),$[$.length-1],($=t["$nil?"]())===r||$.$$is_boolean&&1!=$?(u=($=(a=t)["$matches?"],$.$$p=l.$to_proc(),$).call(a,e),u!==!1&&u!==r?u:(($=n["$respond_to?"]("call"))===r||$.$$is_boolean&&1!=$||(n=n.$call()),($=n)!==!1&&$!==r?$:n=function(){return(i=t["$respond_to?"]("failure_message_for_should"))===r||i.$$is_boolean&&1!=i?t.$failure_message():t.$failure_message_for_should()}(),i=t["$respond_to?"]("diffable?"),($=i!==!1&&i!==r?t["$diffable?"]():i)===r||$.$$is_boolean&&1!=$?Opal.get("RSpec").$$scope.get("Expectations").$fail_with(n):Opal.get("RSpec").$$scope.get("Expectations").$fail_with(n,t.$expected(),t.$actual()))):Opal.get("RSpec").$$scope.get("Matchers").$$scope.get("BuiltIn").$$scope.get("PositiveOperatorMatcher").$new(e)}),r&&"handle_matcher"}(o,a.get("ExpectationHandler")),function(t,$super){function n(){}var o,a=n=$(t,$super,"NegativeExpectationHandler",n);return a.$$proto,a.$$scope,e.defs(a,"$handle_matcher",o=function(e,t,n){var $,a,i,s,c=this,l=o.$$p,u=l||r,_=r;return null==n&&(n=r),o.$$p=null,c.$check_message(n),$=["should_not"],a=Opal.get("RSpec").$$scope.get("Matchers"),a["$last_should="].apply(a,$),$[$.length-1],$=[t],a=Opal.get("RSpec").$$scope.get("Matchers"),a["$last_matcher="].apply(a,$),$[$.length-1],($=t["$nil?"]())===r||$.$$is_boolean&&1!=$?(_=function(){return($=t["$respond_to?"]("does_not_match?"))===r||$.$$is_boolean&&1!=$?($=(i=t)["$matches?"],$.$$p=u.$to_proc(),$).call(i,e):($=(a=t)["$does_not_match?"],$.$$p=u.$to_proc(),$).call(a,e)["$!"]()}(),_===!1||_===r?_:(($=n["$respond_to?"]("call"))===r||$.$$is_boolean&&1!=$||(n=n.$call()),($=n)!==!1&&$!==r?$:n=function(){return(s=t["$respond_to?"]("failure_message_for_should_not"))===r||s.$$is_boolean&&1!=s?t.$negative_failure_message():t.$failure_message_for_should_not()}(),s=t["$respond_to?"]("diffable?"),($=s!==!1&&s!==r?t["$diffable?"]():s)===r||$.$$is_boolean&&1!=$?Opal.get("RSpec").$$scope.get("Expectations").$fail_with(n):Opal.get("RSpec").$$scope.get("Expectations").$fail_with(n,t.$expected(),t.$actual()))):Opal.get("RSpec").$$scope.get("Matchers").$$scope.get("BuiltIn").$$scope.get("NegativeOperatorMatcher").$new(e)}),r&&"handle_matcher"}(o,a.get("ExpectationHandler"))}(o)}(t)},Opal.modules["rspec/expectations/syntax"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.hash2;return e.add_stubs(["$extend","$last","$ancestors","$deprecate","$should_enabled?","$module_exec","$warn_about_should_unless_configured","$handle_matcher","$to_proc","$expect_enabled?","$enable_deprecated_should","$default_should_host","$disable_deprecated_should","$<<","$==","$size","$raise","$new","$first","$method_defined?","$positive_expression","$expression_generator","$negative_expression"]),function(t){var a=$(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=$(t,"Expectations");a.$$proto,a.$$scope,function(t){var a=$(t,"Syntax"),i=a.$$proto,s=a.$$scope;a.$extend(a),i.$default_should_host=function(){var e,t=this;return null==t.default_should_host&&(t.default_should_host=r),(e=t.default_should_host)!==!1&&e!==r?e:t.default_should_host=Opal.get("Object").$ancestors().$last()},e.defs(a,"$warn_about_should!",function(){var e=this;return e.warn_about_should=!0}),e.defs(a,"$warn_about_should_unless_configured",function(e){var t,n=this;return null==n.warn_about_should&&(n.warn_about_should=r),(t=n.warn_about_should)===r||t.$$is_boolean&&1!=t?r:(s.get("RSpec").$deprecate("Using `"+e+"` from rspec-expectations' old `:should` syntax without explicitly enabling the syntax",o(["replacement"],{replacement:"the new `:expect` syntax or explicitly enable `:should`"})),n.warn_about_should=!1)}),i.$enable_should=function(t){var n,$,o,a=this;return null==t&&(t=a.$default_should_host()),a.warn_about_should=!1,(n=a["$should_enabled?"](t))===r||n.$$is_boolean&&1!=n?((n=($=t).$module_exec,n.$$p=(o=function(){var t,n,$=o.$$s||this;return e.defn($,"$should",t=function(e,n){var $,o,a=this,i=t.$$p,s=i||r;return null==e&&(e=r),null==n&&(n=r),t.$$p=null,Opal.get("RSpec").$$scope.get("Expectations").$$scope.get("Syntax").$warn_about_should_unless_configured("should"),($=(o=Opal.get("RSpec").$$scope.get("Expectations").$$scope.get("PositiveExpectationHandler")).$handle_matcher,$.$$p=s.$to_proc(),$).call(o,a,e,n)}),e.defn($,"$should_not",n=function(e,t){var $,o,a=this,i=n.$$p,s=i||r;return null==e&&(e=r),null==t&&(t=r),n.$$p=null,Opal.get("RSpec").$$scope.get("Expectations").$$scope.get("Syntax").$warn_about_should_unless_configured("should_not"),($=(o=Opal.get("RSpec").$$scope.get("Expectations").$$scope.get("NegativeExpectationHandler")).$handle_matcher,$.$$p=s.$to_proc(),$).call(o,a,e,t)}),r&&"should_not"},o.$$s=a,o),n).call($),(n=a["$expect_enabled?"]())===r||n.$$is_boolean&&1!=n?r:Opal.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationTarget").$enable_deprecated_should()):r},i.$disable_should=function(e){var t,n,$,o=this;return null==e&&(e=o.$default_should_host()),(t=o["$should_enabled?"](e))===r||t.$$is_boolean&&1!=t?r:((t=(n=e).$module_exec,t.$$p=($=function(){return $.$$s||this,delete i.$should,delete i.$should_not},$.$$s=o,$),t).call(n),Opal.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationTarget").$disable_deprecated_should())},i.$enable_expect=function(t){var $,o,a,i=this;return null==t&&(t=Opal.get("RSpec").$$scope.get("Matchers")),($=i["$expect_enabled?"](t))===r||$.$$is_boolean&&1!=$?(($=(o=t).$module_exec,$.$$p=(a=function(){var t,$=a.$$s||this;return e.defn($,"$expect",t=function(e){var $=this,o=t.$$p,a=o||r;return e=n.call(arguments,0),t.$$p=null,a!==r&&e["$<<"](a),e.$size()["$=="](1)||$.$raise(s.get("ArgumentError").$new("You must pass an argument or a block to #expect but not both.")),Opal.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationTarget").$new(e.$first())}),r&&"expect"},a.$$s=i,a),$).call(o),($=i["$should_enabled?"]())===r||$.$$is_boolean&&1!=$?r:Opal.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationTarget").$enable_deprecated_should()):r},i.$disable_expect=function(e){var t,n,$,o=this;return null==e&&(e=Opal.get("RSpec").$$scope.get("Matchers")),(t=o["$expect_enabled?"](e))===r||t.$$is_boolean&&1!=t?r:((t=(n=e).$module_exec,t.$$p=($=function(){return $.$$s||this,delete i.$expect},$.$$s=o,$),t).call(n),Opal.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationTarget").$disable_deprecated_should())},i["$should_enabled?"]=function(e){var t=this;return null==e&&(e=t.$default_should_host()),e["$method_defined?"]("should")},i["$expect_enabled?"]=function(e){return null==e&&(e=Opal.get("RSpec").$$scope.get("Matchers")),e["$method_defined?"]("expect")},i.$positive_expression=function(e,t){var r=this;return r.$expression_generator().$positive_expression(e,t)},i.$negative_expression=function(e,t){var r=this;return r.$expression_generator().$negative_expression(e,t)},i.$expression_generator=function(){var e,t=this;return(e=t["$expect_enabled?"]())===r||e.$$is_boolean&&1!=e?s.get("ShouldExpressionGenerator"):s.get("ExpectExpressionGenerator")},function(t){var r=$(t,"ShouldExpressionGenerator");r.$$proto,r.$$scope,e.defs(r,"$positive_expression",function(e,t){return""+e+".should "+t}),e.defs(r,"$negative_expression",function(e,t){return""+e+".should_not "+t})}(a),function(t){var r=$(t,"ExpectExpressionGenerator");r.$$proto,r.$$scope,e.defs(r,"$positive_expression",function(e,t){return"expect("+e+").to "+t}),e.defs(r,"$negative_expression",function(e,t){return"expect("+e+").not_to "+t})}(a),e.donate(a,["$default_should_host","$enable_should","$disable_should","$enable_expect","$disable_expect","$should_enabled?","$expect_enabled?","$positive_expression","$negative_expression","$expression_generator"])}(a)}(a)}(t)},Opal.modules["rspec/expectations/version"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=(e.nil,e.breaker,e.slice,e.module);return e.add_stubs([]),function(t){var n=r(t,"RSpec");n.$$proto,n.$$scope,function(t){var n=r(t,"Expectations");n.$$proto,n.$$scope,function(t){var n=r(t,"Version"),$=(n.$$proto,n.$$scope);e.cdecl($,"STRING","3.0.0.beta1")}(n)}(n)}(t)},Opal.modules["rspec/expectations"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module);return e.add_stubs(["$require","$instance_method","$>=","$to_i","$call","$bind","$===","$method"]),t.$require("rspec/support/caller_filter"),t.$require("rspec/support/warnings"),t.$require("rspec/expectations/extensions"),t.$require("rspec/matchers"),t.$require("rspec/expectations/expectation_target"),t.$require("rspec/matchers/configuration"),t.$require("rspec/expectations/fail_with"),t.$require("rspec/expectations/errors"),t.$require("rspec/expectations/handler"),t.$require("rspec/expectations/version"),t.$require("rspec/expectations/differ"),function(t){var $=n(t,"RSpec");$.$$proto,$.$$scope,function(t){var $=n(t,"Expectations"),o=($.$$proto,$.$$scope);e.cdecl(o,"KERNEL_METHOD_METHOD",Opal.get("Kernel").$instance_method("method")),o.get("RUBY_VERSION").$to_i()["$>="](2)?e.defs($,"$method_handle_for",function(e,t){return o.get("KERNEL_METHOD_METHOD").$bind(e).$call(t)}):e.defs($,"$method_handle_for",function(e,t){var n;return(n=Opal.get("Kernel")["$==="](e))===r||n.$$is_boolean&&1!=n?e.$method(t):o.get("KERNEL_METHOD_METHOD").$bind(e).$call(t)})}($)}(t)},Opal.modules["rspec/matchers/built_in/base_matcher"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=e.breaker,$=e.slice,o=e.module,a=e.klass;return e.add_stubs(["$include","$attr_reader","$match","$expected","$empty?","$unshift","$assert_ivars","$inspect","$name_to_sentence","$expected_to_sentence","$matches?","$private","$all?","$include?","$map","$to_proc","$instance_variables","$raise","$name","$class","$to_sentence"]),function(t){var i=o(t,"RSpec");i.$$proto,i.$$scope,function(t){var i=o(t,"Matchers");i.$$proto,i.$$scope,function(t){var i=o(t,"BuiltIn");i.$$proto,i.$$scope,function(t,$super){function o(){}var i,s=o=a(t,$super,"BaseMatcher",o),c=s.$$proto,l=s.$$scope;return c.actual=c.expected=r,s.$include(l.get("RSpec").$$scope.get("Matchers").$$scope.get("Pretty")),s.$attr_reader("actual","expected","rescued_exception"),c.$initialize=function(e){var t=this;return null==e&&(e=r),t.expected=e},c["$matches?"]=function(e){var t=this;return t.actual=e,t.$match(t.$expected(),e)},c.$match_unless_raises=i=function(t){var o,a=this,s=i.$$p,c=s||r;t=$.call(arguments,0),i.$$p=null,(o=t["$empty?"]())===r||o.$$is_boolean&&1!=o||t.$unshift(l.get("Exception"));try{return e.$yieldX(c,[])===n?n.$v:!0}catch(u){if(e.$rescue(u,[t]))return a.rescued_exception=u,!1;throw u}},c.$failure_message_for_should=function(){var e=this;return e.$assert_ivars("@actual","@expected"),"expected "+e.actual.$inspect()+" to "+e.$name_to_sentence()+e.$expected_to_sentence()},c.$failure_message_for_should_not=function(){var e=this;return e.$assert_ivars("@actual","@expected"),"expected "+e.actual.$inspect()+" not to "+e.$name_to_sentence()+e.$expected_to_sentence()},c.$description=function(){var e,t=this;return(e=t.$expected())===r||e.$$is_boolean&&1!=e?t.$name_to_sentence():""+t.$name_to_sentence()+" "+t.expected.$inspect()},c["$diffable?"]=function(){return!1},c["$=="]=function(e){var t=this;return t["$matches?"](e)},s.$private(),c.$assert_ivars=function(e){var t,n,o,a,i=this;return e=$.call(arguments,0),(t=(n=(o=e)["$all?"],n.$$p=(a=function(e){var t,n,$=a.$$s||this;return null==e&&(e=r),(t=(n=$.$instance_variables()).$map,t.$$p="intern".$to_proc(),t).call(n)["$include?"](e)},a.$$s=i,a),n).call(o))===r||t.$$is_boolean&&1!=t?i.$raise(""+i.$class().$name()+" needs to supply "+i.$to_sentence(e)):r},r&&"assert_ivars"}(i,null)}(i)}(i)}(t)},Opal.modules["rspec/matchers/built_in/be"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$require","$!","$inspect","$actual","$nil?","$private","$empty?","$parenthesize","$join","$inspected_args","$collect","$split_words","$to_sentence","$include","$each","$define_method","$new","$__send__","$gsub","$to_s","$negative_expectation_expression","$raise","$<<","$include?","$expected_to_sentence","$args_to_sentence","$negative_expression","$parse_expected","$shift","$is_private_on?","$predicate","$to_proc","$present_tense_predicate","$args_to_s","$prefix_to_sentence","$is_a?","$first","$methods","$private_methods","$to_sym","$prefix_and_expected","$=~"]),t.$require("rspec/matchers/dsl"),function(t){var a=$(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=$(t,"Matchers");a.$$proto,a.$$scope,function(t){var a=$(t,"BuiltIn"),i=(a.$$proto,a.$$scope);!function(e,$super){function t(){}var n=t=o(e,$super,"BeTruthy",t),$=n.$$proto;return n.$$scope,$.$match=function(e,t){return t["$!"]()["$!"]()},$.$failure_message_for_should=function(){var e=this;return"expected: truthy value\n     got: "+e.$actual().$inspect()},$.$failure_message_for_should_not=function(){var e=this;return"expected: falsey value\n     got: "+e.$actual().$inspect()},r&&"failure_message_for_should_not"}(a,i.get("BaseMatcher")),function(e,$super){function t(){}var n=t=o(e,$super,"BeFalsey",t),$=n.$$proto;return n.$$scope,$.$match=function(e,t){return t["$!"]()},$.$failure_message_for_should=function(){var e=this;return"expected: falsey value\n     got: "+e.$actual().$inspect()},$.$failure_message_for_should_not=function(){var e=this;return"expected: truthy value\n     got: "+e.$actual().$inspect()},r&&"failure_message_for_should_not"}(a,i.get("BaseMatcher")),function(e,$super){function t(){}var n=t=o(e,$super,"BeNil",t),$=n.$$proto;return n.$$scope,$.$match=function(e,t){return t["$nil?"]()},$.$failure_message_for_should=function(){var e=this;return"expected: nil\n     got: "+e.$actual().$inspect()},$.$failure_message_for_should_not=function(){return"expected: not nil\n     got: nil"},r&&"failure_message_for_should_not"}(a,i.get("BaseMatcher")),function(t){var n=$(t,"BeHelpers"),o=n.$$proto;n.$$scope,n.$private(),o.$args_to_s=function(){var e,t=this;return null==t.args&&(t.args=r),(e=t.args["$empty?"]())===r||e.$$is_boolean&&1!=e?t.$parenthesize(t.$inspected_args().$join(", ")):""},o.$parenthesize=function(e){return"("+e+")"},o.$inspected_args=function(){var e,t,n,$=this;return null==$.args&&($.args=r),(e=(t=$.args).$collect,e.$$p=(n=function(e){return n.$$s||this,null==e&&(e=r),e.$inspect()},n.$$s=$,n),e).call(t)},o.$expected_to_sentence=function(){var e=this;return null==e.expected&&(e.expected=r),e.$split_words(e.expected)},o.$args_to_sentence=function(){var e=this;return null==e.args&&(e.args=r),e.$to_sentence(e.args)},e.donate(n,["$args_to_s","$parenthesize","$inspected_args","$expected_to_sentence","$args_to_sentence"])
}(a),function(e,$super){function t(){}var $,a,i,s,c=t=o(e,$super,"Be",t),l=c.$$proto,u=c.$$scope;return l.actual=r,c.$include(u.get("BeHelpers")),l.$initialize=$=function(e){var t=this;return $.$$p,e=n.call(arguments,0),$.$$p=null,t.args=e},l.$match=function(e,t){return t["$!"]()["$!"]()},l.$failure_message_for_should=function(){var e=this;return"expected "+e.actual.$inspect()+" to evaluate to true"},l.$failure_message_for_should_not=function(){var e=this;return"expected "+e.actual.$inspect()+" to evaluate to false"},(a=(i=["==","<","<=",">=",">","===","=~"]).$each,a.$$p=(s=function(e){var t,n,$,o=s.$$s||this;return null==e&&(e=r),(t=(n=o).$define_method,t.$$p=($=function(t){return $.$$s||this,null==t&&(t=r),u.get("BeComparedTo").$new(t,e)},$.$$s=o,$),t).call(n,e)},s.$$s=c,s),a).call(i)}(a,i.get("BaseMatcher")),function(e,$super){function t(){}var n=t=o(e,$super,"BeComparedTo",t),$=n.$$proto,a=n.$$scope;return $.actual=$.operator=$.expected=r,$.$initialize=function(e,t){var r,n=this;return r=[e,t],n.expected=r[0],n.operator=r[1],n.args=[]},$["$matches?"]=function(e){var t=this;return t.actual=e,t.actual.$__send__(t.operator,t.expected)},$.$failure_message_for_should=function(){var e=this;return"expected: "+e.operator+" "+e.expected.$inspect()+"\n     got: "+e.operator.$to_s().$gsub(/./," ")+" "+e.actual.$inspect()},$.$failure_message_for_should_not=function(){var e,t=this,n=r;return n="`"+t.$negative_expectation_expression()+"` not only FAILED,\nit is a bit confusing.\n",t.$raise(n["$<<"](function(){return(e=["===","=="]["$include?"](t.operator))===r||e.$$is_boolean&&1!=e?"It might be more clearly expressed in the positive?":'It might be more clearly expressed without the "be"?'}()))},$.$description=function(){var e=this;return"be "+e.operator+" "+e.$expected_to_sentence()+e.$args_to_sentence()},$.$negative_expectation_expression=function(){var e=this;return a.get("Expectations").$$scope.get("Syntax").$negative_expression("actual","be "+e.operator+" "+e.expected)},r&&"negative_expectation_expression"}(a,i.get("Be")),function(t,$super){function $(){}var a,i,s=$=o(t,$super,"BePredicate",$),c=s.$$proto,l=s.$$scope;return c.actual=c.block=c.args=c.result=c.expected=c.prefix=r,s.$include(l.get("BeHelpers")),c.$initialize=a=function(e){var t=this,$=a.$$p,o=$||r;return e=n.call(arguments,0),a.$$p=null,t.expected=t.$parse_expected(e.$shift()),t.args=e,t.block=o},c["$matches?"]=function(t){var n,$,o,a=this,i=r;a.actual=t,(n=a["$is_private_on?"](a.actual))===r||n.$$is_boolean&&1!=n||a.$raise(l.get("Expectations").$$scope.get("ExpectationNotMetError").$new("expectation set on private method `"+a.$predicate()+"`"));try{return a.result=(n=($=t).$__send__,n.$$p=a.block.$to_proc(),n).apply($,[a.$predicate()].concat(a.args))}catch(s){if(!e.$rescue(s,[l.get("NameError")]))throw s;i=s}try{return a.result=(n=(o=t).$__send__,n.$$p=a.block.$to_proc(),n).apply(o,[a.$present_tense_predicate()].concat(a.args))}catch(s){if(e.$rescue(s,[l.get("NameError")]))return a.$raise(i);throw s}},e.defn(s,"$===",c["$matches?"]),c.$failure_message_for_should=function(){var e=this;return"expected "+e.$predicate()+e.$args_to_s()+" to return true, got "+e.result.$inspect()},c.$failure_message_for_should_not=function(){var e=this;return"expected "+e.$predicate()+e.$args_to_s()+" to return false, got "+e.result.$inspect()},c.$description=function(){var e=this;return""+e.$prefix_to_sentence()+e.$expected_to_sentence()+e.$args_to_sentence()},s.$private(),c["$is_private_on?"]=(i=s.$methods().$first()["$is_a?"](l.get("String")))===r||i.$$is_boolean&&1!=i?function(e){var t=this;return e.$private_methods()["$include?"](t.$predicate())}:function(e){var t=this;return e.$private_methods()["$include?"](t.$predicate().$to_s())},c.$predicate=function(){var e=this;return(""+e.expected+"?").$to_sym()},c.$present_tense_predicate=function(){var e=this;return(""+e.expected+"s?").$to_sym()},c.$parse_expected=function(t){var n,$=this;return n=e.to_ary($.$prefix_and_expected(t)),$.prefix=null==n[0]?r:n[0],t=null==n[1]?r:n[1],t},c.$prefix_and_expected=function(e){return e.$to_s()["$=~"](/^(be_(an?_)?)(.*)/),[r,r]},c.$prefix_to_sentence=function(){var e=this;return e.$split_words(e.prefix)},r&&"prefix_to_sentence"}(a,i.get("BaseMatcher"))}(a)}(a)}(t)},Opal.modules["rspec/matchers/built_in/be_instance_of"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$instance_of?","$expected"]),function(e){var t=n(e,"RSpec");t.$$proto,t.$$scope,function(e){var t=n(e,"Matchers");t.$$proto,t.$$scope,function(e){var t=n(e,"BuiltIn"),o=(t.$$proto,t.$$scope);!function(e,$super){function t(){}var n=t=$(e,$super,"BeAnInstanceOf",t),o=n.$$proto;return n.$$scope,o.$match=function(e,t){return t["$instance_of?"](e)},o.$description=function(){var e=this;return"be an instance of "+e.$expected()},r&&"description"}(t,o.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/built_in/be_kind_of"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$kind_of?"]),function(e){var t=n(e,"RSpec");t.$$proto,t.$$scope,function(e){var t=n(e,"Matchers");t.$$proto,t.$$scope,function(e){var t=n(e,"BuiltIn"),o=(t.$$proto,t.$$scope);!function(e,$super){function t(){}var n=t=$(e,$super,"BeAKindOf",t),o=n.$$proto;return n.$$scope,o.$match=function(e,t){return t["$kind_of?"](e)},r&&"match"}(t,o.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/built_in/be_within"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$raise","$needs_expected","$respond_to?","$needs_subtractable","$<=","$abs","$-","$/","$*","$description","$private","$new","$inspect"]),function(t){var o=n(t,"RSpec");o.$$proto,o.$$scope,function(t){var o=n(t,"Matchers");o.$$proto,o.$$scope,function(t){var o=n(t,"BuiltIn");o.$$proto,o.$$scope,function(t,$super){function n(){}var o=n=$(t,$super,"BeWithin",n),a=o.$$proto,i=o.$$scope;return a.actual=a.expected=a.tolerance=a.delta=a.unit=r,a.$initialize=function(e){var t=this;return t.delta=e},a["$matches?"]=function(e){var t,n,$=this;return $.actual=e,n=$.expected,((t=null!=n&&n!==r?"instance-variable":r)===r||t.$$is_boolean&&1!=t)&&$.$raise($.$needs_expected()),((t=$.actual["$respond_to?"]("-"))===r||t.$$is_boolean&&1!=t)&&$.$raise($.$needs_subtractable()),$.actual["$-"]($.expected).$abs()["$<="]($.tolerance)},e.defn(o,"$==",a["$matches?"]),a.$of=function(e){var t=this;return t.expected=e,t.tolerance=t.delta,t.unit="",t},a.$percent_of=function(e){var t=this;return t.expected=e,t.tolerance=t.delta["$*"](t.expected.$abs())["$/"](100),t.unit="%",t},a.$failure_message_for_should=function(){var e=this;return"expected "+e.actual+" to "+e.$description()},a.$failure_message_for_should_not=function(){var e=this;return"expected "+e.actual+" not to "+e.$description()},a.$description=function(){var e=this;return"be within "+e.delta+e.unit+" of "+e.expected},o.$private(),a.$needs_subtractable=function(){var e=this;return i.get("ArgumentError").$new("The actual value ("+e.actual.$inspect()+") must respond to `-`")},a.$needs_expected=function(){var e=this;return i.get("ArgumentError").$new("You must set an expected value using #of: be_within("+e.delta+").of(expected_value)")},r&&"needs_expected"}(o,null)}(o)}(o)}(t)},Opal.modules["rspec/matchers/built_in/change"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$lambda","$__send__","$raise_block_syntax_error","$evaluate_value_proc","$call","$!","$change_expected?","$changed?","$matches_before?","$matches_after?","$matches_expected_delta?","$matches_min?","$matches_max?","$raise","$new","$===","$dup","$expected_matches_actual?","$message","$inspect","$failure_message_for_expected_after","$actual_delta","$-","$private","$is_a_matcher?","$description","$==","$+","$>=","$<="]),function(t){var o=n(t,"RSpec");o.$$proto,o.$$scope,function(t){var o=n(t,"Matchers");o.$$proto,o.$$scope,function(t){var o=n(t,"BuiltIn");o.$$proto,o.$$scope,function(t,$super){function n(){}var o,a,i=n=$(t,$super,"Change",n),s=i.$$proto,c=i.$$scope;return s.value_proc=s.eval_before=s.expected_before=s.actual_before=s.eval_after=s.expected_after=s.actual_after=s.expected_delta=s.minimum=s.maximum=s.message=r,s.$initialize=o=function(e,t){var n,$,a,i,s=this,c=o.$$p,l=c||r;return null==e&&(e=r),null==t&&(t=r),o.$$p=null,s.message=t,s.value_proc=(n=l)!==!1&&n!==r?n:($=(a=s).$lambda,$.$$p=(i=function(){return i.$$s||this,e.$__send__(t)},i.$$s=s,i),$).call(a),s.expected_after=s.expected_before=s.minimum=s.maximum=s.expected_delta=r,s.eval_before=s.eval_after=!1},s["$matches?"]=a=function(e){var t,n,$,o,i,s,c=this,l=a.$$p,u=l||r;return a.$$p=null,u!==r&&c.$raise_block_syntax_error(),c.actual_before=c.$evaluate_value_proc(),e.$call(),c.actual_after=c.$evaluate_value_proc(),i=(s=c["$change_expected?"]()["$!"]())!==!1&&s!==r?s:c["$changed?"](),o=i!==!1&&i!==r?c["$matches_before?"]():i,$=o!==!1&&o!==r?c["$matches_after?"]():o,n=$!==!1&&$!==r?c["$matches_expected_delta?"]():$,t=n!==!1&&n!==r?c["$matches_min?"]():n,t!==!1&&t!==r?c["$matches_max?"]():t},e.defn(i,"$==",s["$matches?"]),s.$raise_block_syntax_error=function(){var e=this;return e.$raise(c.get("SyntaxError").$new("block passed to should or should_not change must use {} instead of do/end\n"))},s.$evaluate_value_proc=function(){var e=this,t=r,n=r;return function(){return t=n=e.value_proc.$call(),c.get("Enumerable")["$==="](t)||c.get("String")["$==="](t)?n.$dup():n}()},s.$failure_message_for_should=function(){var e,t,n=this;return t=n.eval_before,(e=t!==!1&&t!==r?n["$expected_matches_actual?"](n.expected_before,n.actual_before)["$!"]():t)===r||e.$$is_boolean&&1!=e?(t=n.eval_after,(e=t!==!1&&t!==r?n["$expected_matches_actual?"](n.expected_after,n.actual_after)["$!"]():t)===r||e.$$is_boolean&&1!=e?(e=n.expected_delta)===r||e.$$is_boolean&&1!=e?(e=n.minimum)===r||e.$$is_boolean&&1!=e?(e=n.maximum)===r||e.$$is_boolean&&1!=e?""+n.$message()+" should have changed, but is still "+n.actual_before.$inspect():""+n.$message()+" should have been changed by at most "+n.maximum.$inspect()+", but was changed by "+n.$actual_delta().$inspect():""+n.$message()+" should have been changed by at least "+n.minimum.$inspect()+", but was changed by "+n.$actual_delta().$inspect():""+n.$message()+" should have been changed by "+n.expected_delta.$inspect()+", but was changed by "+n.$actual_delta().$inspect():""+n.$message()+" should have been changed to "+n.$failure_message_for_expected_after()+", but is now "+n.actual_after.$inspect()):""+n.$message()+" should have initially been "+n.expected_before.$inspect()+", but was "+n.actual_before.$inspect()},s.$actual_delta=function(){var e=this;return e.actual_after["$-"](e.actual_before)},s.$failure_message_for_should_not=function(){var e=this;return""+e.$message()+" should not have changed, but did change from "+e.actual_before.$inspect()+" to "+e.actual_after.$inspect()},s.$by=function(e){var t=this;return t.expected_delta=e,t},s.$by_at_least=function(e){var t=this;return t.minimum=e,t},s.$by_at_most=function(e){var t=this;return t.maximum=e,t},s.$to=function(e){var t=this;return t.eval_after=!0,t.expected_after=e,t},s.$from=function(e){var t=this;return t.eval_before=!0,t.expected_before=e,t},s.$description=function(){var e=this;return"change #"+e.$message()},i.$private(),s.$failure_message_for_expected_after=function(){var e,t=this;return(e=c.get("RSpec").$$scope.get("Matchers")["$is_a_matcher?"](t.expected_after))===r||e.$$is_boolean&&1!=e?t.expected_after.$inspect():t.expected_after.$description()},s.$message=function(){var e,t=this;return(e=t.message)!==!1&&e!==r?e:"result"},s["$change_expected?"]=function(){var e=this;return e.expected_delta["$=="](0)["$!"]()},s["$changed?"]=function(){var e=this;return e.actual_before["$=="](e.actual_after)["$!"]()},s["$matches_before?"]=function(){var e,t=this;return(e=t.eval_before)===r||e.$$is_boolean&&1!=e?!0:t["$expected_matches_actual?"](t.expected_before,t.actual_before)},s["$matches_after?"]=function(){var e,t=this;return(e=t.eval_after)===r||e.$$is_boolean&&1!=e?!0:t["$expected_matches_actual?"](t.expected_after,t.actual_after)},s["$matches_expected_delta?"]=function(){var e,t=this;return(e=t.expected_delta)===r||e.$$is_boolean&&1!=e?!0:t.actual_before["$+"](t.expected_delta)["$=="](t.actual_after)},s["$matches_min?"]=function(){var e,t=this;return(e=t.minimum)===r||e.$$is_boolean&&1!=e?!0:t.actual_after["$-"](t.actual_before)["$>="](t.minimum)},s["$matches_max?"]=function(){var e,t=this;return(e=t.maximum)===r||e.$$is_boolean&&1!=e?!0:t.actual_after["$-"](t.actual_before)["$<="](t.maximum)},s["$expected_matches_actual?"]=function(e,t){var n;return(n=e["$==="](t))!==!1&&n!==r?n:t["$=="](e)},r&&"expected_matches_actual?"}(o,null)}(o)}(o)}(t)},Opal.modules["rspec/matchers/built_in/cover"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$all?","$cover?","$none?","$expected"]),function(e){var t=$(e,"RSpec");t.$$proto,t.$$scope,function(e){var t=$(e,"Matchers");t.$$proto,t.$$scope,function(e){var t=$(e,"BuiltIn"),a=(t.$$proto,t.$$scope);!function(e,$super){function t(){}var $=t=o(e,$super,"Cover",t),a=$.$$proto;return $.$$scope,a.expected=r,a.$initialize=function(e){var t=this;return e=n.call(arguments,0),t.expected=e},a["$matches?"]=function(e){var t,n,$,o=this;return o.actual=e,(t=(n=o.expected)["$all?"],t.$$p=($=function(t){return $.$$s||this,null==t&&(t=r),e["$cover?"](t)},$.$$s=o,$),t).call(n)},a["$does_not_match?"]=function(e){var t,n,$,o=this;return o.actual=e,(t=(n=o.$expected())["$none?"],t.$$p=($=function(t){return $.$$s||this,null==t&&(t=r),e["$cover?"](t)},$.$$s=o,$),t).call(n)},r&&"does_not_match?"}(t,a.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/built_in/eq"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$==","$inspect","$expected","$actual"]),function(e){var t=n(e,"RSpec");t.$$proto,t.$$scope,function(e){var t=n(e,"Matchers");t.$$proto,t.$$scope,function(e){var t=n(e,"BuiltIn"),o=(t.$$proto,t.$$scope);!function(e,$super){function t(){}var n=t=$(e,$super,"Eq",t),o=n.$$proto;return n.$$scope,o.$match=function(e,t){return t["$=="](e)},o.$failure_message_for_should=function(){var e=this;return"\nexpected: "+e.$expected().$inspect()+"\n     got: "+e.$actual().$inspect()+"\n\n(compared using ==)\n"},o.$failure_message_for_should_not=function(){var e=this;return"\nexpected: value != "+e.$expected().$inspect()+"\n     got: "+e.$actual().$inspect()+"\n\n(compared using ==)\n"},o["$diffable?"]=function(){return!0},r&&"diffable?"}(t,o.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/built_in/eql"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$eql?","$inspect","$expected","$actual"]),function(e){var t=n(e,"RSpec");t.$$proto,t.$$scope,function(e){var t=n(e,"Matchers");t.$$proto,t.$$scope,function(e){var t=n(e,"BuiltIn"),o=(t.$$proto,t.$$scope);!function(e,$super){function t(){}var n=t=$(e,$super,"Eql",t),o=n.$$proto;return n.$$scope,o.$match=function(e,t){return t["$eql?"](e)},o.$failure_message_for_should=function(){var e=this;return"\nexpected: "+e.$expected().$inspect()+"\n     got: "+e.$actual().$inspect()+"\n\n(compared using eql?)\n"},o.$failure_message_for_should_not=function(){var e=this;return"\nexpected: value != "+e.$expected().$inspect()+"\n     got: "+e.$actual().$inspect()+"\n\n(compared using eql?)\n"},o["$diffable?"]=function(){return!0},r&&"diffable?"}(t,o.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/built_in/equal"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$equal?","$inspect_object","$expected","$actual","$eq_expression","$private","$class","$object_id","$inspect","$positive_expression"]),function(e){var t=n(e,"RSpec");t.$$proto,t.$$scope,function(e){var t=n(e,"Matchers");t.$$proto,t.$$scope,function(e){var t=n(e,"BuiltIn"),o=(t.$$proto,t.$$scope);!function(e,$super){function t(){}var n=t=$(e,$super,"Equal",t),o=n.$$proto,a=n.$$scope;return o.$match=function(e,t){return t["$equal?"](e)},o.$failure_message_for_should=function(){var e=this;return"\nexpected "+e.$inspect_object(e.$expected())+"\n     got "+e.$inspect_object(e.$actual())+"\n\nCompared using equal?, which compares object identity,\nbut expected and actual are not the same object. Use\n`"+e.$eq_expression()+"` if you don't care about\nobject identity in this example.\n\n"},o.$failure_message_for_should_not=function(){var e=this;return"\nexpected not "+e.$inspect_object(e.$actual())+"\n         got "+e.$inspect_object(e.$expected())+"\n\nCompared using equal?, which compares object identity.\n\n"},o["$diffable?"]=function(){return!0},n.$private(),o.$inspect_object=function(e){return"#<"+e.$class()+":"+e.$object_id()+"> => "+e.$inspect()},o.$eq_expression=function(){return a.get("Expectations").$$scope.get("Syntax").$positive_expression("actual","eq(expected)")},r&&"eq_expression"}(t,o.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/built_in/exist"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$select","$respond_to?","$map","$__send__","$uniq","$!","$size","$===","$raise","$new","$inspect","$first","$+","$last"]),function(e){var t=$(e,"RSpec");t.$$proto,t.$$scope,function(e){var t=$(e,"Matchers");t.$$proto,t.$$scope,function(e){var t=$(e,"BuiltIn"),a=(t.$$proto,t.$$scope);!function(e,$super){function t(){}var $=t=o(e,$super,"Exist",t),a=$.$$proto,i=$.$$scope;return a.actual=r,a.$initialize=function(e){var t=this;return e=n.call(arguments,0),t.expected=e},a["$matches?"]=function(e){var t,n,$,o,a,s,c,l=this,u=r,_=r,p=r,d=r;return l.actual=e,u=(t=(n=["exist?","exists?"]).$select,t.$$p=($=function(e){var t=$.$$s||this;return null==t.actual&&(t.actual=r),null==e&&(e=r),t.actual["$respond_to?"](e)},$.$$s=l,$),t).call(n),_=(t=(o=u).$map,t.$$p=(a=function(e){var t,n=a.$$s||this;return null==n.actual&&(n.actual=r),null==n.expected&&(n.expected=r),null==e&&(e=r),(t=n.actual).$__send__.apply(t,[e].concat(n.expected))},a.$$s=l,a),t).call(o),p=(t=(s=_).$map,t.$$p=(c=function(e){return c.$$s||this,null==e&&(e=r),e["$!"]()["$!"]()},c.$$s=l,c),t).call(s).$uniq(),function(){return d=p.$size(),0["$==="](d)?l.$raise(i.get("NoMethodError").$new(""+l.actual.$inspect()+" does not respond to either #exist? or #exists?")):1["$==="](d)?_.$first():l.$raise("#exist? and #exists? returned different values:\n\n"["$+"](" exist?: "+_.$first()+"\n")["$+"]("exists?: "+_.$last()))}()},r&&"matches?"}(t,a.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/built_in/has"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$__send__","$predicate","$failure_message_args_description","$join","$compact","$method_description","$args_description","$private","$to_sym","$sub","$to_s","$gsub","$empty?","$map","$inspect"]),function(t){var a=$(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=$(t,"Matchers");a.$$proto,a.$$scope,function(t){var a=$(t,"BuiltIn");a.$$proto,a.$$scope,function(t,$super){function $(){}var a=$=o(t,$super,"Has",$),i=a.$$proto;return a.$$scope,i.expected=i.args=r,i.$initialize=function(e,t){var r,$=this;return t=n.call(arguments,1),r=[e,t],$.expected=r[0],$.args=r[1]},i["$matches?"]=function(e){var t,r=this;return(t=e).$__send__.apply(t,[r.$predicate(r.expected)].concat(r.args))},e.defn(a,"$==",i["$matches?"]),i.$failure_message_for_should=function(){var e=this;return"expected #"+e.$predicate(e.expected)+e.$failure_message_args_description()+" to return true, got false"},i.$failure_message_for_should_not=function(){var e=this;return"expected #"+e.$predicate(e.expected)+e.$failure_message_args_description()+" to return false, got true"},i.$description=function(){var e=this;return[e.$method_description(e.expected),e.$args_description()].$compact().$join(" ")},a.$private(),i.$predicate=function(e){return(""+e.$to_s().$sub("have_","has_")+"?").$to_sym()},i.$method_description=function(e){return e.$to_s().$gsub("_"," ")},i.$args_description=function(){var e,t,n,$=this;return(e=$.args["$empty?"]())===r||e.$$is_boolean&&1!=e?(e=(t=$.args).$map,e.$$p=(n=function(e){return n.$$s||this,null==e&&(e=r),e.$inspect()},n.$$s=$,n),e).call(t).$join(", "):r},i.$failure_message_args_description=function(){var e=this,t=r;return t=e.$args_description(),t!==!1&&t!==r?"("+t+")":r},r&&"failure_message_args_description"}(a,null)}(a)}(a)}(t)},Opal.modules["rspec/matchers/built_in/include"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$perform_match","$expected_to_sentence","$none?","$is_a_matcher?","$private","$__send__","$comparing_hash_values?","$has_key?","$==","$[]","$comparing_hash_keys?","$comparing_with_matcher?","$actual","$any?","$matches?","$include?","$is_a?","$!"]),function(e){var t=$(e,"RSpec");t.$$proto,t.$$scope,function(e){var t=$(e,"Matchers");t.$$proto,t.$$scope,function(e){var t=$(e,"BuiltIn"),a=(t.$$proto,t.$$scope);!function(e,$super){function t(){}var $=t=o(e,$super,"Include",t),a=$.$$proto,i=$.$$scope;return a.actual=a.expected=r,a.$initialize=function(e){var t=this;return e=n.call(arguments,0),t.expected=e},a["$matches?"]=function(e){var t=this;return t.actual=e,t.$perform_match("all?","all?",t.actual,t.expected)},a["$does_not_match?"]=function(e){var t=this;return t.actual=e,t.$perform_match("none?","any?",t.actual,t.expected)},a.$description=function(){var e=this;return"include"+e.$expected_to_sentence()},a["$diffable?"]=function(){var e,t,n,$=this;return(e=(t=$.expected)["$none?"],e.$$p=(n=function(e){return n.$$s||this,null==e&&(e=r),i.get("RSpec").$$scope.get("Matchers")["$is_a_matcher?"](e)},n.$$s=$,n),e).call(t)},$.$private(),a.$perform_match=function(e,t,n,$){var o,a,i,s=this;return(o=(a=$).$__send__,o.$$p=(i=function(e){var $,o,a,s,c,l=i.$$s||this;return null==e&&(e=r),($=l["$comparing_hash_values?"](n,e))===r||$.$$is_boolean&&1!=$?($=l["$comparing_hash_keys?"](n,e))===r||$.$$is_boolean&&1!=$?($=l["$comparing_with_matcher?"](l.$actual(),e))===r||$.$$is_boolean&&1!=$?n["$include?"](e):($=(s=l.$actual())["$any?"],$.$$p=(c=function(t){return c.$$s||this,null==t&&(t=r),e["$matches?"](t)},c.$$s=l,c),$).call(s):n["$has_key?"](e):($=(o=e).$__send__,$.$$p=(a=function(e,t){var $;return a.$$s||this,null==e&&(e=r),null==t&&(t=r),$=n["$has_key?"](e),$!==!1&&$!==r?n["$[]"](e)["$=="](t):$},a.$$s=l,a),$).call(o,t)},i.$$s=s,i),o).call(a,e)},a["$comparing_hash_keys?"]=function(e,t){var n;return n=e["$is_a?"](i.get("Hash")),n!==!1&&n!==r?t["$is_a?"](i.get("Hash"))["$!"]():n},a["$comparing_hash_values?"]=function(e,t){var n;return n=e["$is_a?"](i.get("Hash")),n!==!1&&n!==r?t["$is_a?"](i.get("Hash")):n},a["$comparing_with_matcher?"]=function(e,t){var n;return n=e["$is_a?"](i.get("Array")),n!==!1&&n!==r?i.get("RSpec").$$scope.get("Matchers")["$is_a_matcher?"](t):n},r&&"comparing_with_matcher?"}(t,a.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/built_in/match"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$match"]),function(e){var t=n(e,"RSpec");t.$$proto,t.$$scope,function(e){var t=n(e,"Matchers");t.$$proto,t.$$scope,function(e){var t=n(e,"BuiltIn"),o=(t.$$proto,t.$$scope);!function(e,$super){function t(){}var n=t=$(e,$super,"Match",t),o=n.$$proto;return n.$$scope,o.$match=function(e,t){return t.$match(e)},o["$diffable?"]=function(){return!0},r&&"diffable?"}(t,o.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/built_in/match_array"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$respond_to?","$difference_between_arrays","$&","$empty?","$actual","$inspect","$safe_sort","$expected","$+","$_pretty_print","$private","$sort","$dup","$to_ary","$each","$index","$delete_at"]),function(e){var t=n(e,"RSpec");t.$$proto,t.$$scope,function(e){var t=n(e,"Matchers");t.$$proto,t.$$scope,function(e){var t=n(e,"BuiltIn"),o=(t.$$proto,t.$$scope);!function(e,$super){function t(){}var n=t=$(e,$super,"MatchArray",t),o=n.$$proto;return n.$$scope,o.extra_items=o.missing_items=r,o.$match=function(e,t){var n,$=this;return(n=t["$respond_to?"]("to_ary"))===r||n.$$is_boolean&&1!=n?!1:($.extra_items=$.$difference_between_arrays(t,e),$.missing_items=$.$difference_between_arrays(e,t),$.extra_items["$empty?"]()["$&"]($.missing_items["$empty?"]()))},o.$failure_message_for_should=function(){var e,t=this,n=r;return(e=t.$actual()["$respond_to?"]("to_ary"))===r||e.$$is_boolean&&1!=e?n="expected an array, actual collection was "+t.$actual().$inspect():(n="expected collection contained:  "+t.$safe_sort(t.$expected()).$inspect()+"\n",n=n["$+"]("actual collection contained:    "+t.$safe_sort(t.$actual()).$inspect()+"\n"),((e=t.missing_items["$empty?"]())===r||e.$$is_boolean&&1!=e)&&(n=n["$+"]("the missing elements were:      "+t.$safe_sort(t.missing_items).$inspect()+"\n")),((e=t.extra_items["$empty?"]())===r||e.$$is_boolean&&1!=e)&&(n=n["$+"]("the extra elements were:        "+t.$safe_sort(t.extra_items).$inspect()+"\n"))),n},o.$failure_message_for_should_not=function(){return"Matcher does not support should_not"},o.$description=function(){var e=this;return"contain exactly "+e.$_pretty_print(e.$expected())},n.$private(),o.$safe_sort=function(e){try{return e.$sort()}catch(t){return e}},o.$difference_between_arrays=function(e,t){var n,$,o,a=this,i=r;return i=e.$to_ary().$dup(),(n=($=t.$to_ary()).$each,n.$$p=(o=function(e){var t,n=(o.$$s||this,r);return null==e&&(e=r),(t=n=i.$index(e))===r||t.$$is_boolean&&1!=t?r:i.$delete_at(n)},o.$$s=a,o),n).call($),i},r&&"difference_between_arrays"}(t,o.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/built_in/raise_error"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$===","$raise_message_already_set","$respond_to?","$warn","$inspect","$call","$==","$verify_message","$eval_block","$expectation_matched?","$error_and_message_match?","$block_matches?","$prevent_invalid_expectations","$!","$matches?","$[]","$=~","$message","$expected_error","$given_error","$private","$expecting_specific_exception?","$new","$raise","$backtrace_formatter","$configuration","$format_backtrace","$backtrace","$join"]),function(t){var o=n(t,"RSpec");o.$$proto,o.$$scope,function(t){var o=n(t,"Matchers");o.$$proto,o.$$scope,function(t){var o=n(t,"BuiltIn");o.$$proto,o.$$scope,function(t,$super){function n(){}var o,a,i=n=$(t,$super,"RaiseError",n),s=i.$$proto,c=i.$$scope;return s.expected_message=s.block=s.actual_error=s.expected_error=s.raised_expected_error=s.with_expected_message=s.eval_block=s.eval_block_passed=r,s.$initialize=o=function(e,t){var n,$=this,a=o.$$p,i=a||r,s=r;return null==e&&(e=c.get("Exception")),null==t&&(t=r),o.$$p=null,$.block=i,$.actual_error=r,function(){return s=e,c.get("String")["$==="](s)||c.get("Regexp")["$==="](s)?(n=[c.get("Exception"),e],$.expected_error=n[0],$.expected_message=n[1]):(n=[e,t],$.expected_error=n[0],$.expected_message=n[1])}()},s.$with_message=function(e){var t,n=this;return(t=n.expected_message)===r||t.$$is_boolean&&1!=t||n.$raise_message_already_set(),n.expected_message=e,n},s["$matches?"]=a=function(t,n){var $,o,i,s=this,l=a.$$p,u=l||r;if(null==n&&(n=!1),a.$$p=null,($=s.block)!==!1&&$!==r?$:s.block=u,s.raised_expected_error=!1,s.with_expected_message=!1,s.eval_block=!1,s.eval_block_passed=!1,($=t["$respond_to?"]("call"))===r||$.$$is_boolean&&1!=$)return Opal.get("Kernel").$warn("`raise_error` was called with non-proc object "+t.$inspect()),!1;try{t.$call()}catch(_){if(!e.$rescue(_,[c.get("Exception")]))throw _;s.actual_error=_,($=(o=s.actual_error["$=="](s.expected_error))!==!1&&o!==r?o:s.expected_error["$==="](s.actual_error))===r||$.$$is_boolean&&1!=$||(s.raised_expected_error=!0,s.with_expected_message=s.$verify_message())}return n!==!1&&n!==r||(i=s.raised_expected_error,o=i!==!1&&i!==r?s.with_expected_message:i,($=o!==!1&&o!==r?s.block:o)===r||$.$$is_boolean&&1!=$||s.$eval_block()),s["$expectation_matched?"]()},e.defn(i,"$==",s["$matches?"]),s["$expectation_matched?"]=function(){var e,t=this;return e=t["$error_and_message_match?"](),e!==!1&&e!==r?t["$block_matches?"]():e},s["$error_and_message_match?"]=function(){var e,t=this;return e=t.raised_expected_error,e!==!1&&e!==r?t.with_expected_message:e},s["$block_matches?"]=function(){var e,t=this;return(e=t.eval_block)===r||e.$$is_boolean&&1!=e?!0:t.eval_block_passed},s["$does_not_match?"]=function(e){var t=this;return t.$prevent_invalid_expectations(),t["$matches?"](e,"negative_expectation")["$!"]()},s.$eval_block=function(){var t=this,n=r;t.eval_block=!0;try{return t.block["$[]"](t.actual_error),t.eval_block_passed=!0}catch($){if(e.$rescue($,[c.get("Exception")]))return n=$,t.actual_error=n;throw $}},s.$verify_message=function(){var e=this,t=r;return function(){return t=e.expected_message,r["$==="](t)?!0:c.get("Regexp")["$==="](t)?e.expected_message["$=~"](e.actual_error.$message()):e.expected_message["$=="](e.actual_error.$message())}()},s.$failure_message_for_should=function(){var e,t=this;return(e=t.eval_block)===r||e.$$is_boolean&&1!=e?"expected "+t.$expected_error()+t.$given_error():t.actual_error.$message()},s.$failure_message_for_should_not=function(){var e=this;return"expected no "+e.$expected_error()+e.$given_error()},s.$description=function(){var e=this;return"raise "+e.$expected_error()},i.$private(),s.$prevent_invalid_expectations=function(){var e,t,n=this,$=r,o=r;return(e=(t=n["$expecting_specific_exception?"]())!==!1&&t!==r?t:n.expected_message)===r||e.$$is_boolean&&1!=e?r:($=function(){return t=n["$expecting_specific_exception?"](),(e=t!==!1&&t!==r?n.expected_message:t)===r||e.$$is_boolean&&1!=e?(e=n["$expecting_specific_exception?"]())===r||e.$$is_boolean&&1!=e?(e=n.expected_message)===r||e.$$is_boolean&&1!=e?r:"`expect { }.not_to raise_error(message)`":"`expect { }.not_to raise_error(SpecificErrorClass)`":"`expect { }.not_to raise_error(SpecificErrorClass, message)`"}(),o=c.get("ArgumentError").$new(""+$+" is not valid, use `expect { }.not_to raise_error` (with no args) instead"),n.$raise(o))},s.$expected_error=function(){var e=this,t=r;return function(){return t=e.expected_message,r["$==="](t)?e.expected_error.$inspect():c.get("Regexp")["$==="](t)?""+e.expected_error+" with message matching "+e.expected_message.$inspect():""+e.expected_error+" with "+e.expected_message.$inspect()}()},s.$format_backtrace=function(e){var t=r;return t=c.get("Matchers").$configuration().$backtrace_formatter(),t.$format_backtrace(e)},s.$given_error=function(){var e,t=this,n=r;return(e=t.actual_error)===r||e.$$is_boolean&&1!=e?" but nothing was raised":(n=t.$format_backtrace(t.actual_error.$backtrace()),[", got "+t.actual_error.$inspect()+" with backtrace:"].concat(n).$join("\n  # "))},s["$expecting_specific_exception?"]=function(){var e=this;return e.expected_error["$=="](c.get("Exception"))["$!"]()},s.$raise_message_already_set=function(){var e=this;return e.$raise("`expect { }.to raise_error(message).with_message(message)` is not valid. The matcher only allows the expected message to be specified once")},r&&"raise_message_already_set"}(o,null)}(o)}(o)}(t)},Opal.modules["rspec/matchers/built_in/respond_to"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$empty?","$find_failing_method_names","$inspect","$join","$collect","$with_arity","$sub","$failure_message_for_should","$pp_names","$private","$__send__","$respond_to?","$matches_arity?","$arity","$method","$<","$<=","$~","$==","$nil?","$length","$first"]),function(t){var a=$(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=$(t,"Matchers");a.$$proto,a.$$scope,function(t){var a=$(t,"BuiltIn");a.$$proto,a.$$scope,function(t,$super){function $(){}var a=$=o(t,$super,"RespondTo",$),i=a.$$proto;return a.$$scope,i.actual=i.failing_method_names=i.names=i.expected_arity=r,i.$initialize=function(e){var t=this;return e=n.call(arguments,0),t.names=e,t.expected_arity=r},i["$matches?"]=function(e){var t=this;return t.$find_failing_method_names(e,"reject")["$empty?"]()},e.defn(a,"$==",i["$matches?"]),i["$does_not_match?"]=function(e){var t=this;
return t.$find_failing_method_names(e,"select")["$empty?"]()},i.$failure_message_for_should=function(){var e,t,n,$=this;return"expected "+$.actual.$inspect()+" to respond to "+(e=(t=$.failing_method_names).$collect,e.$$p=(n=function(e){return n.$$s||this,null==e&&(e=r),e.$inspect()},n.$$s=$,n),e).call(t).$join(", ")+$.$with_arity()},i.$failure_message_for_should_not=function(){var e=this;return e.$failure_message_for_should().$sub(/to respond to/,"not to respond to")},i.$description=function(){var e=this;return"respond to "+e.$pp_names()+e.$with_arity()},i.$with=function(e){var t=this;return t.expected_arity=e,t},i.$argument=function(){var e=this;return e},e.defn(a,"$arguments",i.$argument),a.$private(),i.$find_failing_method_names=function(e,t){var n,$,o,a=this;return a.actual=e,a.failing_method_names=(n=($=a.names).$__send__,n.$$p=(o=function(t){var n,$=o.$$s||this;return null==$.actual&&($.actual=r),null==t&&(t=r),n=$.actual["$respond_to?"](t),n!==!1&&n!==r?$["$matches_arity?"](e,t):n},o.$$s=a,o),n).call($,t)},i["$matches_arity?"]=function(e,t){var n,$=this,o=r;return(n=$.expected_arity)===r||n.$$is_boolean&&1!=n?!0:(o=e.$method(t).$arity(),o["$<"](0)?o["$~"]()["$<="]($.expected_arity):o["$=="]($.expected_arity))},i.$with_arity=function(){var e,t=this;return(e=t.expected_arity["$nil?"]())===r||e.$$is_boolean&&1!=e?" with "+t.expected_arity+" argument"+function(){return t.expected_arity["$=="](1)?"":"s"}():""},i.$pp_names=function(){var e=this;return e.names.$length()["$=="](1)?"#"+e.names.$first():e.names.$inspect()},r&&"pp_names"}(a,null)}(a)}(a)}(t)},Opal.modules["rspec/matchers/built_in/satisfy"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$call"]),function(t){var o=n(t,"RSpec");o.$$proto,o.$$scope,function(t){var o=n(t,"Matchers");o.$$proto,o.$$scope,function(t){var o=n(t,"BuiltIn");o.$$proto,o.$$scope,function(t,$super){function n(){}var o,a,i=n=$(t,$super,"Satisfy",n),s=i.$$proto;return i.$$scope,s.block=s.actual=r,s.$initialize=o=function(){var e=this,t=o.$$p,n=t||r;return o.$$p=null,e.block=n},s["$matches?"]=a=function(e){var t=this,n=a.$$p,$=n||r;return a.$$p=null,$!==!1&&$!==r&&(t.block=$),t.actual=e,t.block.$call(e)},e.defn(i,"$==",s["$matches?"]),s.$failure_message_for_should=function(){var e=this;return"expected "+e.actual+" to satisfy block"},s.$failure_message_for_should_not=function(){var e=this;return"expected "+e.actual+" not to satisfy block"},s.$description=function(){return"satisfy block"},r&&"description"}(o,null)}(o)}(o)}(t)},Opal.modules["rspec/matchers/built_in/start_and_end_with"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$==","$length","$first","$respond_to?","$raise","$new","$inspect","$subset_matches?","$element_matches?","$downcase","$sub","$last","$split","$name","$class","$[]","$-@"]),function(t){var a=$(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=$(t,"Matchers");a.$$proto,a.$$scope,function(t){var a=$(t,"BuiltIn"),i=(a.$$proto,a.$$scope);!function(t,$super){function $(){}var a=$=o(t,$super,"StartAndEndWith",$),i=a.$$proto,s=a.$$scope;return i.expected=i.actual=r,i.$initialize=function(e){var t=this;return e=n.call(arguments,0),t.expected=function(){return e.$length()["$=="](1)?e.$first():e}()},i["$matches?"]=function(t){var n,$=this;$.actual=function(){return(n=t["$respond_to?"]("[]"))===r||n.$$is_boolean&&1!=n?$.$raise(s.get("ArgumentError").$new(""+t.$inspect()+" does not respond to :[]")):t}();try{return(n=$.expected["$respond_to?"]("length"))===r||n.$$is_boolean&&1!=n?$["$element_matches?"]($.expected,$.actual):$["$subset_matches?"]($.expected,$.actual)}catch(o){if(e.$rescue(o,[s.get("ArgumentError")]))return $.$raise(s.get("ArgumentError").$new(""+t.$inspect()+" does not have ordered elements"));throw o}},i.$failure_message_for_should=function(){var e=this;return"expected "+e.actual.$inspect()+" to "+e.$class().$name().$split("::").$last().$sub(/With/,"").$downcase()+" with "+e.expected.$inspect()},i.$failure_message_for_should_not=function(){var e=this;return"expected "+e.actual.$inspect()+" not to "+e.$class().$name().$split("::").$last().$sub(/With/,"").$downcase()+" with "+e.expected.$inspect()},r&&"failure_message_for_should_not"}(a,i.get("BaseMatcher")),function(e,$super){function t(){}var n=t=o(e,$super,"StartWith",t),$=n.$$proto;return n.$$scope,$.actual=$.expected=r,$["$subset_matches?"]=function(e,t){return t["$[]"](0,e.$length())["$=="](e)},$["$element_matches?"]=function(){var e=this;return e.actual["$[]"](0)["$=="](e.expected)},r&&"element_matches?"}(a,i.get("StartAndEndWith")),function(e,$super){function t(){}var n=t=o(e,$super,"EndWith",t),$=n.$$proto;return n.$$scope,$["$subset_matches?"]=function(e,t){return t["$[]"](e.$length()["$-@"](),e.$length())["$=="](e)},$["$element_matches?"]=function(e,t){return t["$[]"](-1)["$=="](e)},r&&"element_matches?"}(a,i.get("StartAndEndWith"))}(a)}(a)}(t)},Opal.modules["rspec/matchers/built_in/throw_symbol"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$nil?","$call","$catch","$throw","$==","$=~","$message","$raise","$to_sym","$!","$&","$expected","$caught","$private","$throw_description","$is_a?","$inspect","$+"]),function(t){var o=n(t,"RSpec");o.$$proto,o.$$scope,function(t){var o=n(t,"Matchers");o.$$proto,o.$$scope,function(t){var o=n(t,"BuiltIn");o.$$proto,o.$$scope,function(t,$super){function n(){}var o=n=$(t,$super,"ThrowSymbol",n),a=o.$$proto,i=o.$$scope;return a.expected_symbol=a.caught_arg=a.caught_symbol=a.expected_arg=r,a.$initialize=function(e,t){var n=this;return null==e&&(e=r),null==t&&(t=r),n.expected_symbol=e,n.expected_arg=t,n.caught_symbol=n.caught_arg=r},a["$matches?"]=function(t){var n,$,o,a=this,s=r,c=r;try{try{return(n=a.expected_symbol["$nil?"]())===r||n.$$is_boolean&&1!=n?(a.caught_arg=(n=($=a).$catch,n.$$p=(o=function(){var e,n,$,a=o.$$s||this;return null==a.expected_symbol&&(a.expected_symbol=r),(e=(n=a).$catch,e.$$p=($=function(){var e=$.$$s||this;return t.$call(),e.$throw("proc_did_not_throw_anything","nothing_thrown")},$.$$s=a,$),e).call(n,a.expected_symbol)},o.$$s=a,o),n).call($,"proc_did_not_throw_anything"),a.caught_arg["$=="]("nothing_thrown")?a.caught_arg=r:a.caught_symbol=a.expected_symbol):t.$call()}catch(l){if(e.$rescue(l,[i.get("NameError"),i.get("ArgumentError")]))return s=l,((n=s.$message()["$=~"](/uncaught throw (`|\:)([a-zA-Z0-9_]*)(')?/))===r||n.$$is_boolean&&1!=n)&&(c=s,a.$raise()),a.caught_symbol=r.$to_sym();c=l,a.$raise()}}finally{if(c===!1||c===r)return(n=a.expected_symbol["$nil?"]())===r||n.$$is_boolean&&1!=n?(n=a.expected_arg["$nil?"]())===r||n.$$is_boolean&&1!=n?a.caught_symbol["$=="](a.expected_symbol)["$&"](a.caught_arg["$=="](a.expected_arg)):a.caught_symbol["$=="](a.expected_symbol):a.caught_symbol["$nil?"]()["$!"]()}},e.defn(o,"$==",a["$matches?"]),a.$failure_message_for_should=function(){var e=this;return"expected "+e.$expected()+" to be thrown, got "+e.$caught()},a.$failure_message_for_should_not=function(){var e,t=this;return"expected "+t.$expected("no Symbol")+function(){return(e=t.expected_symbol)===r||e.$$is_boolean&&1!=e?r:" not"}()+" to be thrown, got "+t.$caught()},a.$description=function(){var e=this;return"throw "+e.$expected()},o.$private(),a.$expected=function(e){var t,n=this;return null==e&&(e="a Symbol"),n.$throw_description((t=n.expected_symbol)!==!1&&t!==r?t:e,n.expected_arg)},a.$caught=function(){var e,t=this;return t.$throw_description((e=t.caught_symbol)!==!1&&e!==r?e:"nothing",t.caught_arg)},a.$throw_description=function(e,t){var n,$,o=this,a=r,s=r;return a=function(){return(n=e["$is_a?"](i.get("String")))===r||n.$$is_boolean&&1!=n?e.$inspect():e}(),s=function(){return t!==!1&&t!==r?" with "+t.$inspect():($=o.expected_arg,(n=$!==!1&&$!==r?o.caught_symbol["$=="](o.expected_symbol):$)===r||n.$$is_boolean&&1!=n?"":" with no argument")}(),a["$+"](s)},r&&"throw_description"}(o,null)}(o)}(o)}(t)},Opal.modules["rspec/matchers/built_in/yield"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$new","$assert_valid_expect_block!","$call","$assert_used!","$attr_accessor","$num_yields=","$yielded_args=","$+","$num_yields","$<<","$yielded_args","$first","$===","$raise","$map","$==","$size","$arity","$probe","$send","$yielded_once?","$exactly","$set_expected_yields_count","$tap","$relativity_failure_message","$private","$human_readable_expecation_type","$human_readable_count","$empty?","$single_yield_args","$failure_reason","$zero?","$inspect","$args_match?","$positive_failure_reason","$negative_failure_reason","$join","$all_args_match?","$!","$all?","$zip","$successive_yield_args"]),function(t){var a=$(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=$(t,"Matchers");a.$$proto,a.$$scope,function(t){var a=$(t,"BuiltIn"),i=(a.$$proto,a.$$scope);!function(t,$super){function $(){}var a=$=o(t,$super,"YieldProbe",$),i=a.$$proto,s=a.$$scope;return i.used=r,e.defs(a,"$probe",function(e){var t=this,n=r;return n=t.$new(),t["$assert_valid_expect_block!"](e),e.$call(n),n["$assert_used!"](),n}),a.$attr_accessor("num_yields","yielded_args"),i.$initialize=function(){var e,t=this;return t.used=!1,e=[0,[]],t["$num_yields="](e[0]),t["$yielded_args="](e[1])},i.$to_proc=function(){var e,t,$,o=this,a=r;return o.used=!0,a=o,(e=(t=s.get("Proc")).$new,e.$$p=($=function(e){var t;return $.$$s||this,e=n.call(arguments,0),t=a,t["$num_yields="](t.$num_yields()["$+"](1)),a.$yielded_args()["$<<"](e),r},$.$$s=o,$),e).call(t)},i.$single_yield_args=function(){var e=this;return e.$yielded_args().$first()},i["$yielded_once?"]=function(e){var t=this,n=r;return function(){return n=t.$num_yields(),1["$==="](n)?!0:0["$==="](n)?!1:t.$raise(("The "+e+" matcher is not designed to be used with a ")["$+"]("method that yields multiple times. Use the yield_successive_args ")["$+"]("matcher for that case."))}()},i.$successive_yield_args=function(){var e,t,n,$=this;return(e=(t=$.$yielded_args()).$map,e.$$p=(n=function(e){return n.$$s||this,null==e&&(e=r),e.$size()["$=="](1)?e.$first():e},n.$$s=$,n),e).call(t)},i["$assert_used!"]=function(){var e,t=this;return(e=t.used)===r||e.$$is_boolean&&1!=e?t.$raise("You must pass the argument yielded to your expect block on "["$+"]("to the method-under-test as a block. It acts as a probe that ")["$+"]("allows the matcher to detect whether or not the method-under-test ")["$+"]("yields, and, if so, how many times, and what the yielded arguments ")["$+"]("are.")):r},e.defs(a,"$assert_valid_expect_block!",function(e){var t=this;return e.$arity()["$=="](1)?r:t.$raise("Your expect block must accept an argument to be used with this "["$+"]("matcher. Pass the argument as a block on to the method you are testing."))}),r&&"assert_valid_expect_block!"}(a,null),function(e,$super){function t(){}var n=t=o(e,$super,"YieldControl",t),$=n.$$proto,a=n.$$scope;return $.expectation_type=$.expected_yields_count=r,$.$initialize=function(){var e=this;return e.expectation_type=r,e.expected_yields_count=r},$["$matches?"]=function(e){var t,n=this,$=r;return $=a.get("YieldProbe").$probe(e),(t=n.expectation_type)===r||t.$$is_boolean&&1!=t?$["$yielded_once?"]("yield_control"):$.$num_yields().$send(n.expectation_type,n.expected_yields_count)},$.$once=function(){var e=this;return e.$exactly(1),e},$.$twice=function(){var e=this;return e.$exactly(2),e},$.$exactly=function(e){var t=this;return t.$set_expected_yields_count("==",e),t},$.$at_most=function(e){var t=this;return t.$set_expected_yields_count("<=",e),t},$.$at_least=function(e){var t=this;return t.$set_expected_yields_count(">=",e),t},$.$times=function(){var e=this;return e},$.$failure_message_for_should=function(){var e,t,n,$=this;return(e=(t="expected given block to yield control").$tap,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=r),e["$<<"](t.$relativity_failure_message())},n.$$s=$,n),e).call(t)},$.$failure_message_for_should_not=function(){var e,t,n,$=this;return(e=(t="expected given block not to yield control").$tap,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=r),e["$<<"](t.$relativity_failure_message())},n.$$s=$,n),e).call(t)},n.$private(),$.$set_expected_yields_count=function(e,t){var n=this,$=r;return n.expectation_type=e,n.expected_yields_count=function(){return $=t,a.get("Numeric")["$==="]($)?t:"once"["$==="]($)?1:"twice"["$==="]($)?2:r}()},$.$relativity_failure_message=function(){var e,t=this;return(e=t.expected_yields_count)===r||e.$$is_boolean&&1!=e?"":" "+t.$human_readable_expecation_type()+t.$human_readable_count()},$.$human_readable_expecation_type=function(){var e=this,t=r;return function(){return t=e.expectation_type,"<="["$==="](t)?"at most ":">="["$==="](t)?"at least ":""}()},$.$human_readable_count=function(){var e=this,t=r;return function(){return t=e.expected_yields_count,1["$==="](t)?"once":2["$==="](t)?"twice":""+e.expected_yields_count+" times"}()},r&&"human_readable_count"}(a,i.get("BaseMatcher")),function(e,$super){function t(){}var n=t=o(e,$super,"YieldWithNoArgs",t),$=n.$$proto,a=n.$$scope;return $.probe=r,$["$matches?"]=function(e){var t,n=this;return n.probe=a.get("YieldProbe").$probe(e),t=n.probe["$yielded_once?"]("yield_with_no_args"),t!==!1&&t!==r?n.probe.$single_yield_args()["$empty?"]():t},$.$failure_message_for_should=function(){var e=this;return"expected given block to yield with no arguments, but "+e.$failure_reason()},$.$failure_message_for_should_not=function(){return"expected given block not to yield with no arguments, but did"},n.$private(),$.$failure_reason=function(){var e,t=this;return(e=t.probe.$num_yields()["$zero?"]())===r||e.$$is_boolean&&1!=e?"yielded with arguments: "+t.probe.$single_yield_args().$inspect():"did not yield"},r&&"failure_reason"}(a,i.get("BaseMatcher")),function(t,$super){function $(){}var a=$=o(t,$super,"YieldWithArgs",$),i=a.$$proto,s=a.$$scope;return i.probe=i.expected=i.positive_args_failure=i.actual=r,i.$initialize=function(e){var t=this;return e=n.call(arguments,0),t.expected=e},i["$matches?"]=function(e){var t,n=this;return n.probe=s.get("YieldProbe").$probe(e),n.actual=n.probe.$single_yield_args(),t=n.probe["$yielded_once?"]("yield_with_args"),t!==!1&&t!==r?n["$args_match?"]():t},e.defn(a,"$==",i["$matches?"]),i.$failure_message_for_should=function(){var e=this;return"expected given block to yield with arguments, but "+e.$positive_failure_reason()},i.$failure_message_for_should_not=function(){var e=this;return"expected given block not to yield with arguments, but "+e.$negative_failure_reason()},i.$description=function(){var e,t,n,$=this,o=r;return o="yield with args",((e=$.expected["$empty?"]())===r||e.$$is_boolean&&1!=e)&&o["$<<"]("("["$+"]((e=(t=$.expected).$map,e.$$p=(n=function(e){return n.$$s||this,null==e&&(e=r),e.$inspect()},n.$$s=$,n),e).call(t).$join(", "))["$+"](")")),o},a.$private(),i.$positive_failure_reason=function(){var e,t=this;return(e=t.probe.$num_yields()["$zero?"]())===r||e.$$is_boolean&&1!=e?t.positive_args_failure:"did not yield"},i.$negative_failure_reason=function(){var e,t=this;return(e=t["$all_args_match?"]())===r||e.$$is_boolean&&1!=e?"did":"yielded with expected arguments"["$+"]("\nexpected not: "+t.expected.$inspect())["$+"]("\n         got: "+t.actual.$inspect()+" (compared using === and ==)")},i["$args_match?"]=function(){var e,t=this,n=r;return(e=t.expected["$empty?"]())===r||e.$$is_boolean&&1!=e?(((e=n=t["$all_args_match?"]())===r||e.$$is_boolean&&1!=e)&&(t.positive_args_failure="yielded with unexpected arguments"["$+"]("\nexpected: "+t.expected.$inspect())["$+"]("\n     got: "+t.actual.$inspect()+" (compared using === and ==)")),n):((e=t.actual["$empty?"]())===r||e.$$is_boolean&&1!=e||(t.positive_args_failure="yielded with no arguments"),t.actual["$empty?"]()["$!"]())},i["$all_args_match?"]=function(){var e,t,n,$=this;return(e=$.expected.$size()["$=="]($.actual.$size())["$!"]())===r||e.$$is_boolean&&1!=e?(e=(t=$.expected.$zip($.actual))["$all?"],e.$$p=(n=function(e,t){var $;return n.$$s||this,null==e&&(e=r),null==t&&(t=r),($=e["$==="](t))!==!1&&$!==r?$:t["$=="](e)},n.$$s=$,n),e).call(t):!1},r&&"all_args_match?"}(a,null),function(t,$super){function $(){}var a=$=o(t,$super,"YieldSuccessiveArgs",$),i=a.$$proto,s=a.$$scope;return i.probe=i.expected=i.actual=r,i.$initialize=function(e){var t=this;return e=n.call(arguments,0),t.expected=e},i["$matches?"]=function(e){var t=this;return t.probe=s.get("YieldProbe").$probe(e),t.actual=t.probe.$successive_yield_args(),t["$args_match?"]()},e.defn(a,"$==",i["$matches?"]),i.$failure_message_for_should=function(){var e=this;return"expected given block to yield successively with arguments, but yielded with unexpected arguments"["$+"]("\nexpected: "+e.expected.$inspect())["$+"]("\n     got: "+e.actual.$inspect()+" (compared using === and ==)")},i.$failure_message_for_should_not=function(){var e=this;return"expected given block not to yield successively with arguments, but yielded with expected arguments"["$+"]("\nexpected not: "+e.expected.$inspect())["$+"]("\n         got: "+e.actual.$inspect()+" (compared using === and ==)")},i.$description=function(){var e,t,n,$=this,o=r;return o="yield successive args",o["$<<"]("("["$+"]((e=(t=$.expected).$map,e.$$p=(n=function(e){return n.$$s||this,null==e&&(e=r),e.$inspect()},n.$$s=$,n),e).call(t).$join(", "))["$+"](")")),o},a.$private(),i["$args_match?"]=function(){var e,t,n,$=this;return(e=$.expected.$size()["$=="]($.actual.$size())["$!"]())===r||e.$$is_boolean&&1!=e?(e=(t=$.expected.$zip($.actual))["$all?"],e.$$p=(n=function(e,t){var $;return n.$$s||this,null==e&&(e=r),null==t&&(t=r),($=e["$==="](t))!==!1&&$!==r?$:t["$=="](e)},n.$$s=$,n),e).call(t):!1},r&&"args_match?"}(a,null)}(a)}(a)}(t)},Opal.modules["rspec/matchers/built_in"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.range;return e.add_stubs(["$require","$autoload","$respond_to?"]),function(e){var t=n(e,"RSpec");t.$$proto,t.$$scope,function(e){var t=n(e,"Matchers");t.$$proto,t.$$scope,function(e){var t,o=n(e,"BuiltIn");o.$$proto,o.$$scope,o.$require("rspec/matchers/built_in/base_matcher"),o.$autoload("BeAnInstanceOf","rspec/matchers/built_in/be_instance_of"),o.$autoload("Be","rspec/matchers/built_in/be"),o.$autoload("BeTruthy","rspec/matchers/built_in/be"),o.$autoload("BeFalsey","rspec/matchers/built_in/be"),o.$autoload("BeNil","rspec/matchers/built_in/be"),o.$autoload("BeComparedTo","rspec/matchers/built_in/be"),o.$autoload("BePredicate","rspec/matchers/built_in/be"),o.$autoload("BeAKindOf","rspec/matchers/built_in/be_kind_of"),o.$autoload("BeWithin","rspec/matchers/built_in/be_within"),o.$autoload("Change","rspec/matchers/built_in/change"),(t=$(1,2,!1)["$respond_to?"]("cover?"))===r||t.$$is_boolean&&1!=t||o.$autoload("Cover","rspec/matchers/built_in/cover"),o.$autoload("Eq","rspec/matchers/built_in/eq"),o.$autoload("Eql","rspec/matchers/built_in/eql"),o.$autoload("Equal","rspec/matchers/built_in/equal"),o.$autoload("Exist","rspec/matchers/built_in/exist"),o.$autoload("Has","rspec/matchers/built_in/has"),o.$autoload("Have","rspec/matchers/built_in/have"),o.$autoload("Include","rspec/matchers/built_in/include"),o.$autoload("Match","rspec/matchers/built_in/match"),o.$autoload("MatchArray","rspec/matchers/built_in/match_array"),o.$autoload("RaiseError","rspec/matchers/built_in/raise_error"),o.$autoload("RespondTo","rspec/matchers/built_in/respond_to"),o.$autoload("StartWith","rspec/matchers/built_in/start_and_end_with"),o.$autoload("EndWith","rspec/matchers/built_in/start_and_end_with"),o.$autoload("Satisfy","rspec/matchers/built_in/satisfy"),o.$autoload("ThrowSymbol","rspec/matchers/built_in/throw_symbol"),o.$autoload("YieldControl","rspec/matchers/built_in/yield"),o.$autoload("YieldWithArgs","rspec/matchers/built_in/yield"),o.$autoload("YieldWithNoArgs","rspec/matchers/built_in/yield"),o.$autoload("YieldSuccessiveArgs","rspec/matchers/built_in/yield")}(t)}(t)}(t)},Opal.modules["rspec/matchers/compatibility"]=function(e){e.dynamic_require_severity="warning";var t,r,n,$=e.top,o=e,a=e.nil;return e.breaker,e.slice,e.add_stubs(["$each","$===","$const_get","$any?","$include?","$public_instance_methods","$class_exec","$alias_method","$constants"]),(t=(r=o.get("RSpec").$$scope.get("Matchers").$constants()).$each,t.$$p=(n=function(e){var t,r,$,i,s,c,l,u,_,p=n.$$s||this,d=a;return null==e&&(e=a),(t=o.get("Class")["$==="](d=o.get("RSpec").$$scope.get("Matchers").$const_get(e)))===a||t.$$is_boolean&&1!=t?a:((t=(r=($=d.$public_instance_methods())["$any?"],r.$$p=(i=function(e){return i.$$s||this,null==e&&(e=a),["failure_message_for_should","failure_message_for_should"]["$include?"](e)},i.$$s=p,i),r).call($))===a||t.$$is_boolean&&1!=t||(t=(r=d).$class_exec,t.$$p=(s=function(){var e=s.$$s||this;return e.$alias_method("failure_message","failure_message_for_should")},s.$$s=p,s),t).call(r),(t=(c=(l=d.$public_instance_methods())["$any?"],c.$$p=(u=function(e){return u.$$s||this,null==e&&(e=a),["failure_message_for_should_not","failure_message_for_should_not"]["$include?"](e)},u.$$s=p,u),c).call(l))===a||t.$$is_boolean&&1!=t?a:(t=(c=d).$class_exec,t.$$p=(_=function(){var e=_.$$s||this;return e.$alias_method("negative_failure_message","failure_message_for_should_not")},_.$$s=p,_),t).call(c))},n.$$s=$,n),t).call(r)},Opal.modules["rspec/matchers/configuration"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$require","$include?","$Array","$enable_expect","$disable_expect","$enable_should","$disable_should","$should_enabled?","$<<","$expect_enabled?","$respond_to?","$color_enabled?","$configuration","$attr_writer","$each","$syntax=","$warn_about_should!","$new","$reset_syntaxes_to_default"]),t.$require("rspec/expectations/syntax"),function(t){var a=$(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=$(t,"Matchers"),i=(a.$$proto,a.$$scope);!function(t,$super){function $(){}var a,i,s,c=$=o(t,$super,"Configuration",$),l=c.$$proto,u=c.$$scope;return l.color=l.backtrace_formatter=r,l["$syntax="]=function(e){var t,n=this;return(t=n.$Array(e)["$include?"]("expect"))===r||t.$$is_boolean&&1!=t?u.get("Expectations").$$scope.get("Syntax").$disable_expect():u.get("Expectations").$$scope.get("Syntax").$enable_expect(),(t=n.$Array(e)["$include?"]("should"))===r||t.$$is_boolean&&1!=t?u.get("Expectations").$$scope.get("Syntax").$disable_should():u.get("Expectations").$$scope.get("Syntax").$enable_should()},l.$syntax=function(){var e,t=r;return t=[],(e=u.get("Expectations").$$scope.get("Syntax")["$should_enabled?"]())===r||e.$$is_boolean&&1!=e||t["$<<"]("should"),(e=u.get("Expectations").$$scope.get("Syntax")["$expect_enabled?"]())===r||e.$$is_boolean&&1!=e||t["$<<"]("expect"),t},(a=Opal.get("RSpec")["$respond_to?"]("configuration"))===r||a.$$is_boolean&&1!=a?(c.$attr_writer("color"),l["$color?"]=function(){var e=this;return e.color}):l["$color?"]=function(){return Opal.get("RSpec").$configuration()["$color_enabled?"]()},l.$add_should_and_should_not_to=function(e){var t,$,o,a=this;return e=n.call(arguments,0),(t=($=e).$each,t.$$p=(o=function(e){return o.$$s||this,null==e&&(e=r),u.get("Expectations").$$scope.get("Syntax").$enable_should(e)},o.$$s=a,o),t).call($)},c.$attr_writer("backtrace_formatter"),l.$backtrace_formatter=function(){var e,t,n=this;return(e=n.backtrace_formatter)!==!1&&e!==r?e:n.backtrace_formatter=function(){return(t=function(){try{return null!=Opal.get("RSpec").$$scope.get("Core").$$scope.get("BacktraceFormatter")?"constant":r}catch(e){if(e.$$class===Opal.NameError)return r;throw e}}())===r||t.$$is_boolean&&1!=t?u.get("NullBacktraceFormatter"):Opal.get("RSpec").$$scope.get("Core").$$scope.get("BacktraceFormatter")}()},l.$reset_syntaxes_to_default=function(){var e,t,r=this;return e=[["should","expect"]],t=r,t["$syntax="].apply(t,e),e[e.length-1],u.get("RSpec").$$scope.get("Expectations").$$scope.get("Syntax")["$warn_about_should!"]()},e.cdecl(u,"NullBacktraceFormatter",(a=(i=u.get("Module")).$new,a.$$p=(s=function(){var t=s.$$s||this;return e.defs(t,"$format_backtrace",function(e){return e}),r&&"format_backtrace"},s.$$s=c,s),a).call(i))}(a,null),e.defs(a,"$configuration",function(){var e,t=this;return null==t.configuration&&(t.configuration=r),(e=t.configuration)!==!1&&e!==r?e:t.configuration=i.get("Configuration").$new()}),a.$configuration().$reset_syntaxes_to_default()}(a)}(t)},Opal.modules["rspec/matchers/dsl"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e,n=e.nil,$=(e.breaker,e.slice),o=e.module;return e.add_stubs(["$define_method","$new","$matcher_execution_context=","$alias_method","$respond_to?","$configure","$extend"]),function(t){var r=o(t,"RSpec");r.$$proto,r.$$scope,function(t){var r=o(t,"Matchers");r.$$proto,r.$$scope,function(t){var r,a,i,s,c=o(t,"DSL"),l=c.$$proto,u=c.$$scope;l.$define=r=function(e){var t,o,a,i=this,s=r.$$p,c=s||n;return r.$$p=null,(t=(o=i).$define_method,t.$$p=(a=function(t){var r,o,i,s,l=a.$$s||this,_=n;return null==l.matcher_execution_context&&(l.matcher_execution_context=n),t=$.call(arguments,0),_=(r=u.get("RSpec").$$scope.get("Matchers").$$scope.get("DSL").$$scope.get("Matcher")).$new.apply(r,[e,c].concat(t)),o=[(s=l.matcher_execution_context)!==!1&&s!==n?s:l.matcher_execution_context=l],i=_,i["$matcher_execution_context="].apply(i,o),o[o.length-1],_},a.$$s=i,a),t).call(o,e)},c.$alias_method("matcher","define"),(a=u.get("RSpec")["$respond_to?"]("configure"))===n||a.$$is_boolean&&1!=a||(a=(i=u.get("RSpec")).$configure,a.$$p=(s=function(e){var t=s.$$s||this;return null==e&&(e=n),e.$extend(t)},s.$$s=c,s),a).call(i),e.donate(c,["$define"])}(r)}(r)}(t),r.get("RSpec").$$scope.get("Matchers").$extend(r.get("RSpec").$$scope.get("Matchers").$$scope.get("DSL"))},Opal.modules["rspec/matchers/generated_descriptions"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module);return e.add_stubs(["$attr_accessor","$last_matcher=","$last_should=","$nil?","$last_should","$gsub","$to_s","$last_description","$private","$respond_to?","$last_matcher","$description"]),function(t){var $=n(t,"RSpec");$.$$proto,$.$$scope,function(t){var $=n(t,"Matchers");$.$$proto,$.$$scope,function(e){return e.$$scope,e.$$proto,e.$attr_accessor("last_matcher","last_should")}($.$singleton_class()),e.defs($,"$clear_generated_description",function(){var e,t,n=this;return e=[r],t=n,t["$last_matcher="].apply(t,e),e[e.length-1],e=[r],t=n,t["$last_should="].apply(t,e),e[e.length-1]}),e.defs($,"$generated_description",function(){var e,t=this;return(e=t.$last_should()["$nil?"]())===r||e.$$is_boolean&&1!=e?""+t.$last_should().$to_s().$gsub("_"," ")+" "+t.$last_description():r}),$.$private(),e.defs($,"$last_description",function(){var e,t=this;return(e=t.$last_matcher()["$respond_to?"]("description"))===r||e.$$is_boolean&&1!=e?"When you call a matcher in an example without a String, like this:\n\nspecify { object.should matcher }\n\nor this:\n\nit { should matcher }\n\nRSpec expects the matcher to have a #description method. You should either\nadd a String to the example this matcher is being used in, or give it a\ndescription method. Then you won't have to suffer this lengthy warning again.\n":t.$last_matcher().$description()})}($)}(t)},Opal.modules["rspec/matchers/matcher"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$require","$define_user_override","$actual_arg_for","$define_method","$to_proc","$private","$__send__","$lambda","$name_to_sentence","$expected_to_sentence","$inspect","$actual","$include","$extend","$attr_reader","$attr_accessor","$class_exec","$new","$name","$class","$>=","$to_f","$respond_to?","$matcher_execution_context","$zero?","$arity"]),t.$require("set"),function(t){var a=$(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=$(t,"Matchers");a.$$proto,a.$$scope,function(t){var a=$(t,"DSL");a.$$proto,a.$$scope,function(t){var o,a,i,s,c,l,u,_,p=$(t,"Macros"),d=p.$$proto,f=p.$$scope;d.$match=o=function(){var t,n,$,a=this,i=o.$$p,s=i||r;return o.$$p=null,(t=(n=a).$define_user_override,t.$$p=($=function(t){var n=$.$$s||this;null==t&&(t=r);try{return n.actual=t,e.find_iter_super_dispatcher(n,"match",$.$$def||o,null).apply(n,[].concat(n.$actual_arg_for(s)))}catch(a){if(e.$rescue(a,[f.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationNotMetError")]))return!1;throw a}},$.$$s=a,$),t).call(n,"matches?",s)},e.defn(p,"$match_for_should",d.$match),d.$match_for_should_not=a=function(){var t,n,$,o=this,i=a.$$p,s=i||r;return a.$$p=null,(t=(n=o).$define_user_override,t.$$p=($=function(t){var n=$.$$s||this;return null==t&&(t=r),n.actual=t,e.find_iter_super_dispatcher(n,"match_for_should_not",$.$$def||a,null).apply(n,[].concat(n.$actual_arg_for(s)))},$.$$s=o,$),t).call(n,"does_not_match?",s)},d.$match_unless_raises=i=function(t){var n,$,o,a=this,s=i.$$p,c=s||r;return null==t&&(t=f.get("Exception")),i.$$p=null,(n=($=a).$define_user_override,n.$$p=(o=function(n){var $=o.$$s||this;null==n&&(n=r),$.actual=n;try{return e.find_iter_super_dispatcher($,"match_unless_raises",o.$$def||i,null).apply($,[].concat($.$actual_arg_for(c)))}catch(a){if(e.$rescue(a,[t]))return $.rescued_exception=a,!1}},o.$$s=a,o),n).call($,"matches?",c)},d.$failure_message_for_should=s=function(){var e=this,t=s.$$p,n=t||r;return s.$$p=null,e.$define_user_override("failure_message_for_should",n)},d.$failure_message_for_should_not=c=function(){var e=this,t=c.$$p,n=t||r;return c.$$p=null,e.$define_user_override("failure_message_for_should_not",n)},d.$description=l=function(){var e=this,t=l.$$p,n=t||r;return l.$$p=null,e.$define_user_override("description",n)},d.$diffable=function(){var e,t,r,n=this;return(e=(t=n).$define_method,e.$$p=(r=function(){return r.$$s||this,!0},r.$$s=n,r),e).call(t,"diffable?")},d.$chain=u=function(t){var $,o,a,i=this,s=u.$$p,c=s||r;return u.$$p=null,($=(o=i).$define_user_override,$.$$p=(a=function(t){var $,o=a.$$s||this;return t=n.call(arguments,0),$=a.$$p||r,a.$$p=null,e.find_iter_super_dispatcher(o,"chain",a.$$def||u,null).apply(o,[].concat(t).concat($.$to_proc())),o},a.$$s=i,a),$).call(o,t,c)},p.$private(),d.$define_user_override=_=function(t,n){var $,o,a,i,s,c=this,l=_.$$p,u=l||r;return null==c.user_method_defs&&(c.user_method_defs=r),_.$$p=null,($=(o=c.user_method_defs).$__send__,$.$$p=n.$to_proc(),$).call(o,"define_method",t),($=u)!==!1&&$!==r?$:u=(a=(i=c).$lambda,a.$$p=(s=function(){var t=s.$$s||this;return e.find_iter_super_dispatcher(t,"define_user_override",s.$$def||_,null).apply(t,[].concat(t.$actual_arg_for(n)))},s.$$s=c,s),a).call(i),($=(a=c).$define_method,$.$$p=u.$to_proc(),$).call(a,t)},e.donate(p,["$match","$match_for_should","$match_for_should_not","$match_unless_raises","$failure_message_for_should","$failure_message_for_should_not","$description","$diffable","$chain","$define_user_override"])}(a),function(t){var r=$(t,"DefaultImplementations"),n=r.$$proto;r.$$scope,n["$diffable?"]=function(){return!1},n.$description=function(){var e=this;return""+e.$name_to_sentence()+e.$expected_to_sentence()},n.$failure_message_for_should=function(){var e=this;return"expected "+e.$actual().$inspect()+" to "+e.$name_to_sentence()+e.$expected_to_sentence()},n.$failure_message_for_should_not=function(){var e=this;return"expected "+e.$actual().$inspect()+" not to "+e.$name_to_sentence()+e.$expected_to_sentence()},e.donate(r,["$diffable?","$description","$failure_message_for_should","$failure_message_for_should_not"])}(a),function(t,$super){function $(){}var a,i,s,c=$=o(t,$super,"Matcher",$),l=c.$$proto,u=c.$$scope;return l.actual=r,c.$include(u.get("DefaultImplementations")),c.$include(u.get("RSpec").$$scope.get("Matchers")),c.$include(u.get("RSpec").$$scope.get("Matchers").$$scope.get("Pretty")),c.$extend(u.get("Macros")),c.$attr_reader("expected","actual","rescued_exception"),c.$attr_accessor("matcher_execution_context"),l.$initialize=function(e,t,$){var o,a,i=this;return $=n.call(arguments,2),i.name=e,i.actual=r,i.expected=$,(o=(a=function(e){var t=e.$$scope;return e.$$proto,e.$include(e.user_method_defs=t.get("Module").$new()),e}(i.$singleton_class())).$class_exec,o.$$p=t.$to_proc(),o).apply(a,[].concat($))},l.$inspect=function(){var e=this;return"#<"+e.$class().$name()+" "+e.$name()+">"},u.get("RUBY_VERSION").$to_f()["$>="](1.9)?l["$respond_to_missing?"]=a=function(t,$){var o,i=n.call(arguments,0),s=this,c=a.$$p;return null==$&&($=!1),a.$$p=null,(o=e.find_super_dispatcher(s,"respond_to_missing?",a,c).apply(s,i))!==!1&&o!==r?o:s.$matcher_execution_context()["$respond_to?"](t,$)}:l["$respond_to?"]=i=function(t,$){var o,a=n.call(arguments,0),s=this,c=i.$$p;
return null==$&&($=!1),i.$$p=null,(o=e.find_super_dispatcher(s,"respond_to?",i,c).apply(s,a))!==!1&&o!==r?o:s.$matcher_execution_context()["$respond_to?"](t,$)},c.$private(),l.$actual_arg_for=function(e){var t,n=this;return(t=e.$arity()["$zero?"]())===r||t.$$is_boolean&&1!=t?[n.actual]:[]},l.$method_missing=s=function(t,$){var o,a,i=this,c=s.$$p,l=c||r;return $=n.call(arguments,1),s.$$p=null,(o=i.$matcher_execution_context()["$respond_to?"](t))===r||o.$$is_boolean&&1!=o?e.find_super_dispatcher(i,"method_missing",s,null).apply(i,[t].concat($).concat(l.$to_proc())):(o=(a=i.$matcher_execution_context()).$__send__,o.$$p=l.$to_proc(),o).apply(a,[t].concat($))},r&&"method_missing"}(a,null)}(a)}(a)}(t)},Opal.modules["rspec/matchers/method_missing"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module;return e.add_stubs(["$private","$=~","$to_s","$new","$to_proc"]),function(t){var o=$(t,"RSpec");o.$$proto,o.$$scope,function(t){var o,a=$(t,"Matchers"),i=a.$$proto,s=a.$$scope;a.$private(),i.$method_missing=o=function(t,$){var a,i,c,l=n.call(arguments,0),u=this,_=o.$$p,p=_||r;return $=n.call(arguments,1),o.$$p=null,(a=t.$to_s()["$=~"](/^be_/))===r||a.$$is_boolean&&1!=a?(a=t.$to_s()["$=~"](/^have_/))===r||a.$$is_boolean&&1!=a?e.find_super_dispatcher(u,"method_missing",o,_).apply(u,l):(a=(c=s.get("Matchers").$$scope.get("BuiltIn").$$scope.get("Has")).$new,a.$$p=p.$to_proc(),a).apply(c,[t].concat($)):(a=(i=s.get("Matchers").$$scope.get("BuiltIn").$$scope.get("BePredicate")).$new,a.$$p=p.$to_proc(),a).apply(i,[t].concat($))},e.donate(a,["$method_missing"])}(o)}(t)},Opal.modules["rspec/matchers/operator_matcher"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass,o=e.hash2;return e.add_stubs(["$registry","$[]","$[]=","$delete","$each","$ancestors","$define_method","$uses_generic_implementation_of?","$get","$class","$__send__","$last_should","$new","$eval_match","$sub","$!","$==","$respond_to?","$raise","$+","$use_custom_matcher_or_delegate","$fail_with","$inspect","$private","$owner","$method_handle_for","$last_matcher=","$__delegate_operator","$include?","$fail_with_message","$gsub"]),function(t){var a=n(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=n(t,"Matchers");a.$$proto,a.$$scope,function(t,$super){function n(){}var a,i,s,c=n=$(t,$super,"OperatorMatcher",n),l=c.$$proto,u=c.$$scope;return l.expected=l.actual=l.operator=r,function(t){return t.$$scope,t.$$proto,t.$$proto.$registry=function(){var e,t=this;return null==t.registry&&(t.registry=r),(e=t.registry)!==!1&&e!==r?e:t.registry=o([],{})},t.$$proto.$register=function(e,t,n){var $,a,i,s=this;return $=e,a=s.$registry(),(i=a["$[]"]($))!==!1&&i!==r?i:a["$[]="]($,o([],{})),s.$registry()["$[]"](e)["$[]="](t,n)},t.$$proto.$unregister=function(e,t){var n,$=this;return n=$.$registry()["$[]"](e),n!==!1&&n!==r?$.$registry()["$[]"](e).$delete(t):n},t.$$proto.$get=function(t,n){try{var $,o,a,i=this;return($=(o=t.$ancestors()).$each,$.$$p=(a=function(t){var $,o=a.$$s||this,i=r;return null==t&&(t=r),$=o.$registry()["$[]"](t),i=$!==!1&&$!==r?o.$registry()["$[]"](t)["$[]"](n):$,i===!1||i===r?r:(e.$return(i),void 0)},a.$$s=i,a),$).call(o),r}catch(s){if(s===e.returner)return s.$v;throw s}},r&&"get"}(c.$singleton_class()),l.$initialize=function(e){var t=this;return t.actual=e},e.defs(c,"$use_custom_matcher_or_delegate",function(e){var t,n,$,o,a,i=this,s=r;return(t=(n=i).$define_method,t.$$p=($=function(t){var n,o,a=$.$$s||this,i=r;return null==a.actual&&(a.actual=r),null==t&&(t=r),o=a["$uses_generic_implementation_of?"](e),(n=o!==!1&&o!==r?i=u.get("OperatorMatcher").$get(a.actual.$class(),e):o)===r||n.$$is_boolean&&1!=n?a.$eval_match(a.actual,e,t):a.actual.$__send__(Opal.get("RSpec").$$scope.get("Matchers").$last_should(),i.$new(t))},$.$$s=i,$),t).call(n,e),s=e.$sub(/^=/,"!"),o=s["$=="](e)["$!"](),(t=o!==!1&&o!==r?i["$respond_to?"](s):o)===r||t.$$is_boolean&&1!=t?r:(t=(o=i).$define_method,t.$$p=(a=function(t){var n=a.$$s||this,$=r;return null==t&&(t=r),$=function(){return Opal.get("RSpec").$$scope.get("Matchers").$last_should()["$=="]("should")?"should_not":"should"}(),n.$raise(("RSpec does not support `"+Opal.get("RSpec").$$scope.get("Matchers").$last_should()+" "+s+" expected`.  ")["$+"]("Use `"+$+" "+e+" expected` instead."))},a.$$s=i,a),t).call(o,s)}),(a=(i=["==","===","=~",">",">=","<","<="]).$each,a.$$p=(s=function(e){var t=s.$$s||this;return null==e&&(e=r),t.$use_custom_matcher_or_delegate(e)},s.$$s=c,s),a).call(i),l.$fail_with_message=function(e){var t=this;return u.get("RSpec").$$scope.get("Expectations").$fail_with(e,t.expected,t.actual)},l.$description=function(){var e=this;return""+e.operator+" "+e.expected.$inspect()},c.$private(),l["$uses_generic_implementation_of?"]=function(t){var r=this;try{return u.get("Expectations").$method_handle_for(r.actual,t).$owner()["$=="](Opal.get("Kernel"))}catch(n){if(e.$rescue(n,[u.get("NameError")]))return!1;throw n}},l.$eval_match=function(e,t,r){var n,$,o=this;return n=[o],$=Opal.get("RSpec").$$scope.get("Matchers"),$["$last_matcher="].apply($,n),n[n.length-1],n=[t,r],o.operator=n[0],o.expected=n[1],o.$__delegate_operator(e,t,r)},r&&"eval_match"}(a,null),function(e){var t=n(e,"BuiltIn"),o=(t.$$proto,t.$$scope);!function(e,$super){function t(){}var n=t=$(e,$super,"PositiveOperatorMatcher",t),o=n.$$proto;return n.$$scope,o.$__delegate_operator=function(e,t,n){var $,o=this;return($=e.$__send__(t,n))===r||$.$$is_boolean&&1!=$?($=["==","===","=~"]["$include?"](t))===r||$.$$is_boolean&&1!=$?o.$fail_with_message("expected: "+t+" "+n.$inspect()+"\n     got: "+t.$gsub(/./," ")+" "+e.$inspect()):o.$fail_with_message("expected: "+n.$inspect()+"\n     got: "+e.$inspect()+" (using "+t+")"):!0},r&&"__delegate_operator"}(t,o.get("OperatorMatcher")),function(e,$super){function t(){}var n=t=$(e,$super,"NegativeOperatorMatcher",t),o=n.$$proto;return n.$$scope,o.$__delegate_operator=function(e,t,n){var $,o=this;return($=e.$__send__(t,n))===r||$.$$is_boolean&&1!=$?!1:o.$fail_with_message("expected not: "+t+" "+n.$inspect()+"\n         got: "+t.$gsub(/./," ")+" "+e.$inspect())},r&&"__delegate_operator"}(t,o.get("OperatorMatcher"))}(a)}(a)}(t)},Opal.modules["rspec/matchers/pretty"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.range;return e.add_stubs(["$gsub","$to_s","$map","$to_word","$Array","$length","$===","$[]","$join","$each_with_index","$<","$-","$<<","$inspect","$is_matcher_with_description?","$description","$split_words","$name","$to_sentence","$underscore","$last","$split","$class","$dup","$gsub!","$tr!","$downcase!","$private","$is_a_matcher?","$respond_to?"]),function(t){var o=n(t,"RSpec");o.$$proto,o.$$scope,function(t){var o=n(t,"Matchers");o.$$proto,o.$$scope,function(t){var o=n(t,"Pretty"),a=o.$$proto,i=o.$$scope;a.$split_words=function(e){return e.$to_s().$gsub(/_/," ")},a.$to_sentence=function(e){var t,n,o,a=this,i=r;return e===!1||e===r?"":(e=(t=(n=a.$Array(e)).$map,t.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=r),t.$to_word(e)},o.$$s=a,o),t).call(n),function(){return i=e.$length(),0["$==="](i)?"":1["$==="](i)?" "+e["$[]"](0):2["$==="](i)?" "+e["$[]"](0)+" and "+e["$[]"](1):" "+e["$[]"]($(0,-1,!0)).$join(", ")+", and "+e["$[]"](-1)}())},a.$_pretty_print=function(e){var t,n,$,o=this,a=r;return a="",(t=(n=e).$each_with_index,t.$$p=($=function(t,n){return $.$$s||this,null==t&&(t=r),null==n&&(n=r),n["$<"](e.$length()["$-"](2))?a["$<<"](""+t.$inspect()+", "):n["$<"](e.$length()["$-"](1))?a["$<<"](""+t.$inspect()+" and "):a["$<<"](""+t.$inspect())},$.$$s=o,$),t).call(n),a},a.$to_word=function(e){var t,n=this;return(t=n["$is_matcher_with_description?"](e))===r||t.$$is_boolean&&1!=t?e.$inspect():e.$description()},a.$name_to_sentence=function(){var e=this;return e.$split_words(e.$name())},a.$expected_to_sentence=function(){var e,t,n=this;return null==n.expected&&(n.expected=r),t=n.expected,(e=null!=t&&t!==r?"instance-variable":r)===r||e.$$is_boolean&&1!=e?r:n.$to_sentence(n.expected)},a.$name=function(){var e,t,n=this;return null==n.name&&(n.name=r),t=n.name,(e=null!=t&&t!==r?"instance-variable":r)===r||e.$$is_boolean&&1!=e?n.$underscore(n.$class().$name().$split("::").$last()):n.name},a.$underscore=function(e){var t=r;return t=e.$to_s().$dup(),t["$gsub!"](/([A-Z]+)([A-Z][a-z])/,"\\1_\\2"),t["$gsub!"](/([a-z\d])([A-Z])/,"\\1_\\2"),t["$tr!"]("-","_"),t["$downcase!"](),t},o.$private(),a["$is_matcher_with_description?"]=function(e){var t;return t=i.get("RSpec").$$scope.get("Matchers")["$is_a_matcher?"](e),t!==!1&&t!==r?e["$respond_to?"]("description"):t},e.donate(o,["$split_words","$to_sentence","$_pretty_print","$to_word","$name_to_sentence","$expected_to_sentence","$name","$underscore","$is_matcher_with_description?"])}(o)}(o)}(t)},Opal.modules["rspec/matchers/test_unit_integration"]=function(e){e.dynamic_require_severity="warning";var t,r=(e.top,e),n=e.nil;return e.breaker,e.slice,e.add_stubs(["$send"]),(t=function(){try{return null!=r.get("MiniTest").$$scope.get("Unit").$$scope.get("TestCase")?"constant":n}catch(e){if(e.$$class===Opal.NameError)return n;throw e}}())===n||t.$$is_boolean&&1!=t||r.get("MiniTest").$$scope.get("Unit").$$scope.get("TestCase").$send("include",r.get("RSpec").$$scope.get("Matchers")),(t=function(){try{return null!=r.get("Test").$$scope.get("Unit").$$scope.get("TestCase")?"constant":n}catch(e){if(e.$$class===Opal.NameError)return n;throw e}}())===n||t.$$is_boolean&&1!=t?n:r.get("Test").$$scope.get("Unit").$$scope.get("TestCase").$send("include",r.get("RSpec").$$scope.get("Matchers"))},Opal.modules["rspec/matchers"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.range;return e.add_stubs(["$require","$===","$respond_to?","$new","$alias_method","$empty?","$equal","$be_a_kind_of","$to_proc","$register"]),t.$require("rspec/matchers/pretty"),t.$require("rspec/matchers/built_in"),t.$require("rspec/matchers/matcher"),t.$require("rspec/matchers/operator_matcher"),t.$require("rspec/matchers/generated_descriptions"),t.$require("rspec/matchers/method_missing"),t.$require("rspec/matchers/compatibility"),t.$require("rspec/matchers/dsl"),t.$require("rspec/matchers/test_unit_integration"),function(t){var a=$(t,"RSpec");a.$$proto,a.$$scope,function(t){var a,i,s,c,l=$(t,"Matchers"),u=l.$$proto,_=l.$$scope;e.defs(l,"$is_a_matcher?",function(e){var t;return(t=Opal.get("RSpec").$$scope.get("Matchers").$$scope.get("BuiltIn").$$scope.get("BaseMatcher")["$==="](e))===r||t.$$is_boolean&&1!=t?(t=e["$respond_to?"]("i_respond_to_everything_so_im_not_really_a_matcher"))===r||t.$$is_boolean&&1!=t?(t=e["$respond_to?"]("matches?"))===r||t.$$is_boolean&&1!=t?!1:(t=e["$respond_to?"]("failure_message_for_should"))!==!1&&t!==r?t:e["$respond_to?"]("failure_message"):!1:!0}),u.$be_truthy=function(){return _.get("BuiltIn").$$scope.get("BeTruthy").$new()},u.$be_falsey=function(){return _.get("BuiltIn").$$scope.get("BeFalsey").$new()},l.$alias_method("be_falsy","be_falsey"),u.$be_nil=function(){return _.get("BuiltIn").$$scope.get("BeNil").$new()},u.$be=function(e){var t,$=this;return e=n.call(arguments,0),(t=e["$empty?"]())===r||t.$$is_boolean&&1!=t?(t=$).$equal.apply(t,[].concat(e)):_.get("Matchers").$$scope.get("BuiltIn").$$scope.get("Be").$new()},u.$be_a=function(e){var t=this;return t.$be_a_kind_of(e)},l.$alias_method("be_an","be_a"),u.$be_an_instance_of=function(e){return _.get("BuiltIn").$$scope.get("BeAnInstanceOf").$new(e)},l.$alias_method("be_instance_of","be_an_instance_of"),u.$be_a_kind_of=function(e){return _.get("BuiltIn").$$scope.get("BeAKindOf").$new(e)},l.$alias_method("be_kind_of","be_a_kind_of"),u.$be_within=function(e){return _.get("BuiltIn").$$scope.get("BeWithin").$new(e)},u.$change=a=function(e,t){var n,$,o=a.$$p,i=o||r;return null==e&&(e=r),null==t&&(t=r),a.$$p=null,(n=($=_.get("BuiltIn").$$scope.get("Change")).$new,n.$$p=i.$to_proc(),n).call($,e,t)},(i=o(1,2,!1)["$respond_to?"]("cover?"))===r||i.$$is_boolean&&1!=i||(u.$cover=function(e){var t;return e=n.call(arguments,0),(t=_.get("BuiltIn").$$scope.get("Cover")).$new.apply(t,[].concat(e))}),u.$end_with=function(e){var t;return e=n.call(arguments,0),(t=_.get("BuiltIn").$$scope.get("EndWith")).$new.apply(t,[].concat(e))},u.$eq=function(e){return _.get("BuiltIn").$$scope.get("Eq").$new(e)},u.$eql=function(e){return _.get("BuiltIn").$$scope.get("Eql").$new(e)},u.$equal=function(e){return _.get("BuiltIn").$$scope.get("Equal").$new(e)},u.$exist=function(e){var t;return e=n.call(arguments,0),(t=_.get("BuiltIn").$$scope.get("Exist")).$new.apply(t,[].concat(e))},u.$include=function(e){var t;return e=n.call(arguments,0),(t=_.get("BuiltIn").$$scope.get("Include")).$new.apply(t,[].concat(e))},u.$match=function(e){return _.get("BuiltIn").$$scope.get("Match").$new(e)},l.$alias_method("match_regex","match"),u.$raise_error=s=function(e,t){var n,$,o=s.$$p,a=o||r;return null==e&&(e=_.get("Exception")),null==t&&(t=r),s.$$p=null,(n=($=_.get("BuiltIn").$$scope.get("RaiseError")).$new,n.$$p=a.$to_proc(),n).call($,e,t)},l.$alias_method("raise_exception","raise_error"),u.$respond_to=function(e){var t;return e=n.call(arguments,0),(t=_.get("BuiltIn").$$scope.get("RespondTo")).$new.apply(t,[].concat(e))},u.$satisfy=c=function(){var e,t,n=c.$$p,$=n||r;return c.$$p=null,(e=(t=_.get("BuiltIn").$$scope.get("Satisfy")).$new,e.$$p=$.$to_proc(),e).call(t)},u.$start_with=function(e){var t;return e=n.call(arguments,0),(t=_.get("BuiltIn").$$scope.get("StartWith")).$new.apply(t,[].concat(e))},u.$throw_symbol=function(e,t){return null==e&&(e=r),null==t&&(t=r),_.get("BuiltIn").$$scope.get("ThrowSymbol").$new(e,t)},u.$yield_control=function(){return _.get("BuiltIn").$$scope.get("YieldControl").$new()},u.$yield_with_no_args=function(){return _.get("BuiltIn").$$scope.get("YieldWithNoArgs").$new()},u.$yield_with_args=function(e){var t;return e=n.call(arguments,0),(t=_.get("BuiltIn").$$scope.get("YieldWithArgs")).$new.apply(t,[].concat(e))},u.$yield_successive_args=function(e){var t;return e=n.call(arguments,0),(t=_.get("BuiltIn").$$scope.get("YieldSuccessiveArgs")).$new.apply(t,[].concat(e))},u.$match_array=function(e){return _.get("BuiltIn").$$scope.get("MatchArray").$new(e)},_.get("OperatorMatcher").$register(_.get("Enumerable"),"=~",_.get("BuiltIn").$$scope.get("MatchArray")),e.donate(l,["$be_truthy","$be_falsey","$be_nil","$be","$be_a","$be_an_instance_of","$be_a_kind_of","$be_within","$change","$cover","$end_with","$eq","$eql","$equal","$exist","$include","$match","$raise_error","$respond_to","$satisfy","$start_with","$throw_symbol","$yield_control","$yield_with_no_args","$yield_with_args","$yield_successive_args","$match_array"])}(a)}(t)},Opal.modules["rspec-expectations"]=function(e){e.dynamic_require_severity="warning";var t=e.top;return e.nil,e.breaker,e.slice,e.add_stubs(["$require"]),t.$require("rspec/expectations")},Opal.modules["rspec/mocks/any_instance/chain"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$define_method","$record","$to_proc","$include","$create_message_expectation_on","$inject","$__send__","$last","$first","$messages","$any?","$==","$negated?","$raise_double_negation_error","$private","$empty?","$verify_invocation_order","$<<","$unshift"]),function(t){var a=$(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=$(t,"Mocks");a.$$proto,a.$$scope,function(t){var a=$(t,"AnyInstance");a.$$proto,a.$$scope,function(t,$super){function a(){}var i,s,c,l=a=o(t,$super,"Chain",a),u=l.$$proto,_=l.$$scope;return u.messages=r,u.$initialize=i=function(e,t){var $=this,o=i.$$p,a=o||r;return t=n.call(arguments,1),i.$$p=null,$.recorder=e,$.expectation_args=t,$.expectation_block=a},function(t){var o=$(t,"Customizations");o.$$proto,o.$$scope,e.defs(o,"$record",function(e){var t,$,o,a=this;return(t=($=a).$define_method,t.$$p=(o=function(t){var $,a,i,s=o.$$s||this;return t=n.call(arguments,0),$=o.$$p||r,o.$$p=null,(a=(i=s).$record,a.$$p=$.$to_proc(),a).apply(i,[e].concat(t))},o.$$s=a,o),t).call($,e)}),o.$record("and_return"),o.$record("and_raise"),o.$record("and_throw"),o.$record("and_yield"),o.$record("and_call_original"),o.$record("with"),o.$record("once"),o.$record("twice"),o.$record("any_number_of_times"),o.$record("exactly"),o.$record("times"),o.$record("never"),o.$record("at_least"),o.$record("at_most")}(l),l.$include(_.get("Customizations")),u["$playback!"]=function(e){var t,n,$,o=this,a=r;return a=o.$create_message_expectation_on(e),(t=(n=o.$messages()).$inject,t.$$p=($=function(e,t){var n,o;return $.$$s||this,null==e&&(e=r),null==t&&(t=r),(n=(o=e).$__send__,n.$$p=t.$last().$to_proc(),n).apply(o,[].concat(t.$first()))},$.$$s=o,$),t).call(n,a)},u["$constrained_to_any_of?"]=function(e){var t,$,o,a=this;return e=n.call(arguments,0),(t=($=e)["$any?"],t.$$p=(o=function(e){var t,n,$,a=o.$$s||this;return null==e&&(e=r),(t=(n=a.$messages())["$any?"],t.$$p=($=function(t){return $.$$s||this,null==t&&(t=r),t.$first().$first()["$=="](e)},$.$$s=a,$),t).call(n)},o.$$s=a,o),t).call($)},u["$expectation_fulfilled!"]=function(){var e=this;return e.expectation_fulfilled=!0},u.$never=s=function(){var t,$=n.call(arguments,0),o=this,a=s.$$p;return s.$$p=null,(t=o["$negated?"]())===r||t.$$is_boolean&&1!=t||_.get("ErrorGenerator").$raise_double_negation_error("expect_any_instance_of(MyClass)"),e.find_super_dispatcher(o,"never",s,a).apply(o,$)},l.$private(),u["$negated?"]=function(){var e,t,n,$=this;return(e=(t=$.$messages())["$any?"],e.$$p=(n=function(e,t){return n.$$s||this,message=e[0],null==t&&(t=r),message["$=="]("never")},n.$$s=$,n),e).call(t)},u.$messages=function(){var e,t=this;return(e=t.messages)!==!1&&e!==r?e:t.messages=[]},u.$last_message=function(){var e,t=this;return(e=t.$messages()["$empty?"]())===r||e.$$is_boolean&&1!=e?t.$messages().$last().$first().$first():r},u.$record=c=function(e,t){var $,o,a=this,i=c.$$p,s=i||r;return t=n.call(arguments,1),c.$$p=null,($=(o=a).$verify_invocation_order,$.$$p=s.$to_proc(),$).apply(o,[e].concat(t)),a.$messages()["$<<"]([t.$unshift(e),s]),a},r&&"record"}(a,null)}(a)}(a)}(t)},Opal.modules["rspec/mocks/any_instance/expectation_chain"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$constrained_to_any_of?","$private","$proxy_for","$add_message_expectation","$to_proc","$yield_receiver_to_any_instance_implementation_blocks?","$configuration","$and_yield_receiver_to_implementation"]),function(t){var i=$(t,"RSpec");i.$$proto,i.$$scope,function(t){var i=$(t,"Mocks");i.$$proto,i.$$scope,function(t){var i=$(t,"AnyInstance"),s=(i.$$proto,i.$$scope);!function(t,$super){function $(){}var a,i,s=$=o(t,$super,"ExpectationChain",$),c=s.$$proto;return s.$$scope,c.expectation_fulfilled=r,c["$expectation_fulfilled?"]=function(){var e,t=this;return(e=t.expectation_fulfilled)!==!1&&e!==r?e:t["$constrained_to_any_of?"]("never","any_number_of_times")},c.$initialize=a=function(t){var r=n.call(arguments,0),$=this,o=a.$$p;return t=n.call(arguments,0),a.$$p=null,$.expectation_fulfilled=!1,e.find_super_dispatcher($,"initialize",a,o).apply($,r)},s.$private(),c.$verify_invocation_order=i=function(e,t){return i.$$p,t=n.call(arguments,1),i.$$p=null,r},r&&"verify_invocation_order"}(i,s.get("Chain")),function(e,$super){function t(){}var n=t=o(e,$super,"PositiveExpectationChain",t),$=n.$$proto,i=n.$$scope;return $.expectation_block=$.expectation_args=$.invocation_order=r,n.$private(),$.$create_message_expectation_on=function(e){var t,n,$=this,o=r,a=r,s=r;return o=Opal.get("RSpec").$$scope.get("Mocks").$proxy_for(e),a=i.get("IGNORED_BACKTRACE_LINE"),s=(t=(n=o).$add_message_expectation,t.$$p=$.expectation_block.$to_proc(),t).apply(n,[a].concat($.expectation_args)),(t=i.get("RSpec").$$scope.get("Mocks").$configuration()["$yield_receiver_to_any_instance_implementation_blocks?"]())===r||t.$$is_boolean&&1!=t||s.$and_yield_receiver_to_implementation(),s},$.$invocation_order=function(){var e,t=this;return(e=t.invocation_order)!==!1&&e!==r?e:t.invocation_order=a(["with","and_return","and_raise"],{"with":[r],and_return:["with",r],and_raise:["with",r]})},r&&"invocation_order"}(i,s.get("ExpectationChain"))}(i)}(i)}(t)},Opal.modules["rspec/mocks/any_instance/message_chains"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$new","$[]=","$[]","$<<","$reject!","$===","$find","$all?","$expectation_fulfilled?","$compact","$map","$last","$to_s","$each","$expectation_fulfilled!","$raise_if_second_instance_to_receive_message","$playback!","$private","$!","$equal?","$raise","$join","$sort","$unfulfilled_expectations"]),function(e){var t=n(e,"RSpec");t.$$proto,t.$$scope,function(e){var t=n(e,"Mocks");t.$$proto,t.$$scope,function(e){var t=n(e,"AnyInstance");t.$$proto,t.$$scope,function(e,$super){function t(){}var n=t=$(e,$super,"MessageChains",t),o=n.$$proto,a=n.$$scope;return o.chains_by_method_name=o.instance_with_expectation=r,o.$initialize=function(){var e,t,n,$=this;return $.chains_by_method_name=(e=(t=a.get("Hash")).$new,e.$$p=(n=function(e,t){return n.$$s||this,null==e&&(e=r),null==t&&(t=r),e["$[]="](t,[])},n.$$s=$,n),e).call(t)},o["$[]"]=function(e){var t=this;return t.chains_by_method_name["$[]"](e)},o.$add=function(e,t){var r=this;return r.chains_by_method_name["$[]"](e)["$<<"](t),t},o["$remove_stub_chains_for!"]=function(e){var t,n,$,o=this;return(t=(n=o.chains_by_method_name["$[]"](e))["$reject!"],t.$$p=($=function(e){return $.$$s||this,null==e&&(e=r),a.get("StubChain")["$==="](e)},$.$$s=o,$),t).call(n)},o["$has_expectation?"]=function(e){var t,n,$,o=this;return(t=(n=o.chains_by_method_name["$[]"](e)).$find,t.$$p=($=function(e){return $.$$s||this,null==e&&(e=r),a.get("ExpectationChain")["$==="](e)},$.$$s=o,$),t).call(n)},o["$all_expectations_fulfilled?"]=function(){var e,t,n,$=this;return(e=(t=$.chains_by_method_name)["$all?"],e.$$p=(n=function(e,t){var $,o,a,i=n.$$s||this;return null==e&&(e=r),null==t&&(t=r),($=(o=t)["$all?"],$.$$p=(a=function(e){return a.$$s||this,null==e&&(e=r),e["$expectation_fulfilled?"]()},a.$$s=i,a),$).call(o)},n.$$s=$,n),e).call(t)},o.$unfulfilled_expectations=function(){var e,t,n,$=this;return(e=(t=$.chains_by_method_name).$map,e.$$p=(n=function(e,t){var $;return n.$$s||this,null==e&&(e=r),null==t&&(t=r),($=t.$last()["$expectation_fulfilled?"]())===r||$.$$is_boolean&&1!=$?($=a.get("ExpectationChain")["$==="](t.$last()))===r||$.$$is_boolean&&1!=$?r:e.$to_s():r},n.$$s=$,n),e).call(t).$compact()},o["$received_expected_message!"]=function(e){var t,n,$,o=this;return(t=(n=o.chains_by_method_name["$[]"](e)).$each,t.$$p=($=function(e){return $.$$s||this,null==e&&(e=r),e["$expectation_fulfilled!"]()},$.$$s=o,$),t).call(n)},o["$playback!"]=function(e,t){var n,$,o,a=this;return a.$raise_if_second_instance_to_receive_message(e),(n=($=a.chains_by_method_name["$[]"](t)).$each,n.$$p=(o=function(t){return o.$$s||this,null==t&&(t=r),t["$playback!"](e)},o.$$s=a,o),n).call($)},n.$private(),o.$raise_if_second_instance_to_receive_message=function(e){var t,n,$=this;return(t=a.get("ExpectationChain")["$==="](e))===r||t.$$is_boolean&&1!=t||((t=$.instance_with_expectation)!==!1&&t!==r?t:$.instance_with_expectation=e),n=a.get("ExpectationChain")["$==="](e),(t=n!==!1&&n!==r?$.instance_with_expectation["$equal?"](e)["$!"]():n)===r||t.$$is_boolean&&1!=t?r:$.$raise(a.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError"),"Exactly one instance should have received the following message(s) but didn't: "+$.$unfulfilled_expectations().$sort().$join(", "))},r&&"raise_if_second_instance_to_receive_message"}(t,null)}(t)}(t)}(t)},Opal.modules["rspec/mocks/any_instance/recorder"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=e.breaker,$=e.slice,o=e.module,a=e.klass,i=e.hash2;return e.add_stubs(["$attr_reader","$new","$[]=","$===","$each","$and_return","$stub","$observe!","$add","$message_chains","$to_proc","$normalize_chain","$never","$should_receive","$include?","$to_sym","$raise","$remove_stub_chains_for!","$remove_single_stub","$[]","$stubs","$proxies_of","$clear","$has_expectation?","$stop_observing!","$!","$all_expectations_fulfilled?","$join","$sort","$unfulfilled_expectations","$stop_all_observation!","$remove_any_instance_recorder_for","$space","$restore_method!","$ensure_registered","$playback!","$received_expected_message!","$private","$unshift","$reverse","$map","$split","$to_s","$shift","$first","$mark_invoked!","$public_protected_or_private_method_defined?","$build_alias_method_name","$restore_original_method!","$remove_dummy_method!","$class_exec","$remove_method","$alias_method","$method_defined?","$private_method_defined?","$delete","$verify_partial_doubles?","$configuration","$already_observing?","$<<","$backup_method!","$__send__","$owner","$method_handle_for","$any_instance_recorder_for","$instance_that_received","$inspect"]),function(t){var s=o(t,"RSpec");s.$$proto,s.$$scope,function(t){var s=o(t,"Mocks");s.$$proto,s.$$scope,function(t){var s=o(t,"AnyInstance");s.$$proto,s.$$scope,function(t,$super){function o(){}var s,c,l,u,_,p=o=a(t,$super,"Recorder",o),d=p.$$proto,f=p.$$scope;return d.observed_methods=d.klass=d.expectation_set=d.played_methods=r,p.$attr_reader("message_chains","stubs","klass"),d.$initialize=function(e){var t,n,$,o=this;return o.message_chains=f.get("MessageChains").$new(),o.stubs=(t=(n=f.get("Hash")).$new,t.$$p=($=function(e,t){return $.$$s||this,null==e&&(e=r),null==t&&(t=r),e["$[]="](t,[])},$.$$s=o,$),t).call(n),o.observed_methods=[],o.played_methods=i([],{}),o.klass=e,o.expectation_set=!1},d.$stub=s=function(e){var t,n,$,o,a=this,i=s.$$p,c=i||r;return s.$$p=null,(t=f.get("Hash")["$==="](e))===r||t.$$is_boolean&&1!=t?(a["$observe!"](e),a.$message_chains().$add(e,(t=(o=f.get("StubChain")).$new,t.$$p=c.$to_proc(),t).call(o,a,e))):(t=(n=e).$each,t.$$p=($=function(e,t){var n=$.$$s||this;return null==e&&(e=r),null==t&&(t=r),n.$stub(e).$and_return(t)},$.$$s=a,$),t).call(n)},d.$stub_chain=c=function(e){var t,n,o,a=this,i=c.$$p,s=i||r;return e=$.call(arguments,0),c.$$p=null,(t=(n=a).$normalize_chain,t.$$p=(o=function(e,t){var n,$,a=o.$$s||this;return null==e&&(e=r),null==t&&(t=r),a["$observe!"](e),a.$message_chains().$add(e,(n=($=f.get("StubChainChain")).$new,n.$$p=s.$to_proc(),n).apply($,[a].concat(t)))},o.$$s=a,o),t).apply(n,[].concat(e))},d.$should_receive=l=function(e){var t,n,$=this,o=l.$$p,a=o||r;return l.$$p=null,$.expectation_set=!0,$["$observe!"](e),$.$message_chains().$add(e,(t=(n=f.get("PositiveExpectationChain")).$new,t.$$p=a.$to_proc(),t).call(n,$,e))},d.$should_not_receive=u=function(e){var t,n,$=this,o=u.$$p,a=o||r;return u.$$p=null,(t=(n=$).$should_receive,t.$$p=a.$to_proc(),t).call(n,e).$never()},d.$unstub=function(e){var t,n,$,o=this;return((t=o.observed_methods["$include?"](e.$to_sym()))===r||t.$$is_boolean&&1!=t)&&o.$raise(f.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError"),"The method `"+e+"` was not stubbed or was already unstubbed"),o.$message_chains()["$remove_stub_chains_for!"](e),(t=(n=Opal.get("RSpec").$$scope.get("Mocks").$proxies_of(o.klass)).$each,t.$$p=($=function(t){var n,o,a,i=$.$$s||this;return null==t&&(t=r),(n=(o=i.$stubs()["$[]"](e)).$each,n.$$p=(a=function(n){return a.$$s||this,null==n&&(n=r),t.$remove_single_stub(e,n)},a.$$s=i,a),n).call(o)},$.$$s=o,$),t).call(n),o.$stubs()["$[]"](e).$clear(),(t=o.$message_chains()["$has_expectation?"](e))===r||t.$$is_boolean&&1!=t?o["$stop_observing!"](e):r},d.$verify=function(){var e,t,n=this;try{return t=n.expectation_set,(e=t!==!1&&t!==r?n.$message_chains()["$all_expectations_fulfilled?"]()["$!"]():t)===r||e.$$is_boolean&&1!=e?r:n.$raise(f.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError"),"Exactly one instance should have received the following message(s) but didn't: "+n.$message_chains().$unfulfilled_expectations().$sort().$join(", "))}finally{n["$stop_all_observation!"](),Opal.get("RSpec").$$scope.get("Mocks").$space().$remove_any_instance_recorder_for(n.klass)}},d["$stop_all_observation!"]=function(){var e,t,n,$=this;return(e=(t=$.observed_methods).$each,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=r),t["$restore_method!"](e)},n.$$s=$,n),e).call(t)},d["$playback!"]=function(e,t){var n,$=this;return f.get("RSpec").$$scope.get("Mocks").$space().$ensure_registered(e),$.$message_chains()["$playback!"](e,t),$.played_methods["$[]="](t,e),(n=$.$message_chains()["$has_expectation?"](t))===r||n.$$is_boolean&&1!=n?r:$["$received_expected_message!"](t)},d.$instance_that_received=function(e){var t=this;return t.played_methods["$[]"](e)},d.$build_alias_method_name=function(e){return"__"+e+"_without_any_instance__"},d["$already_observing?"]=function(e){var t=this;return t.observed_methods["$include?"](e)},p.$private(),d.$normalize_chain=_=function(t){var o,a,i,s,c,l,u=this,p=_.$$p,d=p||r;return t=$.call(arguments,0),_.$$p=null,(o=(a=(s=(c=t.$shift().$to_s().$split(".")).$map,s.$$p=(l=function(e){return l.$$s||this,null==e&&(e=r),e.$to_sym()},l.$$s=u,l),s).call(c).$reverse()).$each,o.$$p=(i=function(e){return i.$$s||this,null==e&&(e=r),t.$unshift(e)},i.$$s=u,i),o).call(a),o=e.$yieldX(d,[t.$first(),t]),o===n?o:o},d["$received_expected_message!"]=function(e){var t=this;return t.$message_chains()["$received_expected_message!"](e),t["$restore_method!"](e),t["$mark_invoked!"](e)},d["$restore_method!"]=function(e){var t,n=this;return(t=n["$public_protected_or_private_method_defined?"](n.$build_alias_method_name(e)))===r||t.$$is_boolean&&1!=t?n["$remove_dummy_method!"](e):n["$restore_original_method!"](e)},d["$restore_original_method!"]=function(e){var t,n,$,o=this,a=r;return a=o.$build_alias_method_name(e),(t=(n=o.klass).$class_exec,t.$$p=($=function(){var t=$.$$s||this;return t.$remove_method(e),t.$alias_method(e,a),t.$remove_method(a)},$.$$s=o,$),t).call(n)},d["$remove_dummy_method!"]=function(e){var t,r,n,$=this;return(t=(r=$.klass).$class_exec,t.$$p=(n=function(){var t=n.$$s||this;return t.$remove_method(e)},n.$$s=$,n),t).call(r)},d["$backup_method!"]=function(e){var t,n,$,o=this,a=r;return a=o.$build_alias_method_name(e),(t=o["$public_protected_or_private_method_defined?"](e))===r||t.$$is_boolean&&1!=t?r:(t=(n=o.klass).$class_exec,t.$$p=($=function(){var t=$.$$s||this;return t.$alias_method(a,e)},$.$$s=o,$),t).call(n)},d["$public_protected_or_private_method_defined?"]=function(e){var t,n=this;return(t=n.klass["$method_defined?"](e))!==!1&&t!==r?t:n.klass["$private_method_defined?"](e)},d["$stop_observing!"]=function(e){var t=this;return t["$restore_method!"](e),t.observed_methods.$delete(e)},d["$observe!"]=function(e){var t,n,o,a=this;return(t=f.get("RSpec").$$scope.get("Mocks").$configuration()["$verify_partial_doubles?"]())===r||t.$$is_boolean&&1!=t||((t=a.klass["$method_defined?"](e))===r||t.$$is_boolean&&1!=t)&&a.$raise(f.get("MockExpectationError")),(t=a["$already_observing?"](e))===r||t.$$is_boolean&&1!=t||a["$stop_observing!"](e),a.observed_methods["$<<"](e),a["$backup_method!"](e),(t=(n=a.klass).$__send__,t.$$p=(o=function(t){var n,a,i,s=o.$$s||this,c=r;return t=$.call(arguments,0),n=o.$$p||r,o.$$p=null,c=Opal.get("RSpec").$$scope.get("Mocks").$method_handle_for(s,e).$owner(),Opal.get("RSpec").$$scope.get("Mocks").$any_instance_recorder_for(c)["$playback!"](s,e),(a=(i=s).$__send__,a.$$p=n.$to_proc(),a).apply(i,[e].concat(t))},o.$$s=a,o),t).call(n,"define_method",e)},d["$mark_invoked!"]=function(e){var t,n,o,a=this;return a["$backup_method!"](e),(t=(n=a.klass).$__send__,t.$$p=(o=function(t){var n,a=o.$$s||this,i=r,s=r;return t=$.call(arguments,0),n=o.$$p||r,o.$$p=null,i=Opal.get("RSpec").$$scope.get("Mocks").$method_handle_for(a,e).$owner(),s=Opal.get("RSpec").$$scope.get("Mocks").$any_instance_recorder_for(i).$instance_that_received(e),a.$raise(f.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError"),"The message '"+e+"' was received by "+a.$inspect()+" but has already been received by "+s)},o.$$s=a,o),t).call(n,"define_method",e)},r&&"mark_invoked!"}(s,null)}(s)}(s)}(t)},Opal.modules["rspec/mocks/any_instance/stub_chain"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$private","$proxy_for","$add_stub","$to_proc","$<<","$[]","$stubs","$message","$yield_receiver_to_any_instance_implementation_blocks?","$configuration","$and_yield_receiver_to_implementation","$include?","$invocation_order","$last_message","$raise"]),function(e){var t=$(e,"RSpec");t.$$proto,t.$$scope,function(e){var t=$(e,"Mocks");t.$$proto,t.$$scope,function(e){var t=$(e,"AnyInstance"),i=(t.$$proto,t.$$scope);!function(e,$super){function t(){}var $,i=t=o(e,$super,"StubChain",t),s=i.$$proto,c=i.$$scope;
return s.expectation_block=s.expectation_args=s.recorder=s.invocation_order=r,s["$expectation_fulfilled?"]=function(){return!0},i.$private(),s.$create_message_expectation_on=function(e){var t,n,$=this,o=r,a=r,i=r;return o=Opal.get("RSpec").$$scope.get("Mocks").$proxy_for(e),a=c.get("IGNORED_BACKTRACE_LINE"),i=(t=(n=o).$add_stub,t.$$p=$.expectation_block.$to_proc(),t).apply(n,[a].concat($.expectation_args)),$.recorder.$stubs()["$[]"](i.$message())["$<<"](i),(t=c.get("RSpec").$$scope.get("Mocks").$configuration()["$yield_receiver_to_any_instance_implementation_blocks?"]())===r||t.$$is_boolean&&1!=t||i.$and_yield_receiver_to_implementation(),i},s.$invocation_order=function(){var e,t=this;return(e=t.invocation_order)!==!1&&e!==r?e:t.invocation_order=a(["with","and_return","and_raise","and_yield","and_call_original"],{"with":[r],and_return:["with",r],and_raise:["with",r],and_yield:["with",r],and_call_original:["with",r]})},s.$verify_invocation_order=$=function(e,t){var o,a=this;return $.$$p,t=n.call(arguments,1),$.$$p=null,(o=a.$invocation_order()["$[]"](e)["$include?"](a.$last_message()))===r||o.$$is_boolean&&1!=o?a.$raise(c.get("NoMethodError"),"Undefined method "+e):r},r&&"verify_invocation_order"}(t,i.get("Chain"))}(t)}(t)}(t)},Opal.modules["rspec/mocks/any_instance/stub_chain_chain"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass,o=e.hash2;return e.add_stubs(["$private","$stub_chain_on","$to_proc"]),function(e){var t=n(e,"RSpec");t.$$proto,t.$$scope,function(e){var t=n(e,"Mocks");t.$$proto,t.$$scope,function(e){var t=n(e,"AnyInstance"),a=(t.$$proto,t.$$scope);!function(e,$super){function t(){}var n=t=$(e,$super,"StubChainChain",t),a=n.$$proto;return n.$$scope,a.expectation_block=a.expectation_args=a.invocation_order=r,n.$private(),a.$create_message_expectation_on=function(e){var t,r,n=this;return(t=(r=Opal.get("RSpec").$$scope.get("Mocks").$$scope.get("StubChain")).$stub_chain_on,t.$$p=n.expectation_block.$to_proc(),t).apply(r,[e].concat(n.expectation_args))},a.$invocation_order=function(){var e,t=this;return(e=t.invocation_order)!==!1&&e!==r?e:t.invocation_order=o(["and_return","and_raise","and_yield"],{and_return:[r],and_raise:[r],and_yield:[r]})},r&&"invocation_order"}(t,a.get("StubChain"))}(t)}(t)}(t)},Opal.modules["rspec/mocks/argument_list_matcher"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$require","$attr_reader","$empty?","$first","$===","$collect","$matcher_for","$match_any_args?","$block_passes?","$matchers_match?","$private","$is_matcher?","$new","$respond_to?","$any?","$call","$=="]),t.$require("rspec/mocks/argument_matchers"),function(t){var a=$(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=$(t,"Mocks");a.$$proto,a.$$scope,function(t,$super){function $(){}var a,i=$=o(t,$super,"ArgumentListMatcher",$),s=i.$$proto,c=i.$$scope;return s.block=s.matchers=s.match_any_args=r,i.$attr_reader("expected_args"),s.$initialize=a=function(e){var t,$,o,i=this,s=a.$$p,l=s||r,u=r;return e=n.call(arguments,0),a.$$p=null,i.expected_args=e,i.block=function(){return(t=e["$empty?"]())===r||t.$$is_boolean&&1!=t?r:l}(),i.match_any_args=!1,i.matchers=r,function(){return u=e.$first(),c.get("ArgumentMatchers").$$scope.get("AnyArgsMatcher")["$==="](u)?i.match_any_args=!0:i.matchers=c.get("ArgumentMatchers").$$scope.get("NoArgsMatcher")["$==="](u)?[]:(t=($=e).$collect,t.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=r),t.$matcher_for(e)},o.$$s=i,o),t).call($)}()},s["$args_match?"]=function(e){var t,$,o,a=this;return e=n.call(arguments,0),(t=($=a["$match_any_args?"]())!==!1&&$!==r?$:(o=a)["$block_passes?"].apply(o,[].concat(e)))!==!1&&t!==r?t:($=a)["$matchers_match?"].apply($,[].concat(e))},i.$private(),s.$matcher_for=function(e){var t,n=this;return(t=n["$is_matcher?"](e))===r||t.$$is_boolean&&1!=t?(t=c.get("Regexp")["$==="](e))===r||t.$$is_boolean&&1!=t?c.get("ArgumentMatchers").$$scope.get("EqualityProxy").$new(e):c.get("ArgumentMatchers").$$scope.get("RegexpMatcher").$new(e):c.get("ArgumentMatchers").$$scope.get("MatcherMatcher").$new(e)},s["$is_matcher?"]=function(e){var t,n,$,o,a=this;return(t=e["$respond_to?"]("i_respond_to_everything_so_im_not_really_a_matcher"))===r||t.$$is_boolean&&1!=t?(t=(n=($=["failure_message_for_should","failure_message"])["$any?"],n.$$p=(o=function(t){return o.$$s||this,null==t&&(t=r),e["$respond_to?"](t)},o.$$s=a,o),n).call($),t!==!1&&t!==r?e["$respond_to?"]("matches?"):t):!1},s["$block_passes?"]=function(e){var t,$=this;return e=n.call(arguments,0),(t=$.block)===r||t.$$is_boolean&&1!=t?r:(t=$.block).$call.apply(t,[].concat(e))},s["$matchers_match?"]=function(e){var t=this;return e=n.call(arguments,0),t.matchers["$=="](e)},s["$match_any_args?"]=function(){var e=this;return e.match_any_args},e.cdecl(c,"MATCH_ALL",i.$new(c.get("ArgumentMatchers").$$scope.get("AnyArgsMatcher").$new()))}(a,null)}(a)}(t)},Opal.modules["rspec/mocks/argument_matchers"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$===","$==","$=~","$include?","$all?","$has_key?","$[]","$sub","$inspect","$none?","$superset?","$new","$join","$respond_to?","$matches?","$instance_of?","$kind_of?","$anythingize_lonely_keys","$first","$count","$alias_method","$private","$class","$last","$delete_at","$each","$[]=","$anything"]),function(t){var i=$(t,"RSpec");i.$$proto,i.$$scope,function(t){var i=$(t,"Mocks");i.$$proto,i.$$scope,function(t){var i=$(t,"ArgumentMatchers"),s=i.$$proto,c=i.$$scope;!function(e,$super){function t(){}var n=t=o(e,$super,"AnyArgsMatcher",t),$=n.$$proto;return n.$$scope,$.$description=function(){return"any args"},r&&"description"}(i,null),function(e,$super){function t(){}var n=t=o(e,$super,"AnyArgMatcher",t),$=n.$$proto;return n.$$scope,$.$initialize=function(){return r},$["$=="]=function(){return!0},r&&"=="}(i,null),function(e,$super){function t(){}var n=t=o(e,$super,"NoArgsMatcher",t),$=n.$$proto;return n.$$scope,$.$description=function(){return"no args"},r&&"description"}(i,null),function(e,$super){function t(){}var n=t=o(e,$super,"RegexpMatcher",t),$=n.$$proto,a=n.$$scope;return $.regexp=r,$.$initialize=function(e){var t=this;return t.regexp=e},$["$=="]=function(e){var t,n=this;return(t=a.get("Regexp")["$==="](e))===r||t.$$is_boolean&&1!=t?e["$=~"](n.regexp):e["$=="](n.regexp)},r&&"=="}(i,null),function(e,$super){function t(){}var n=t=o(e,$super,"BooleanMatcher",t),$=n.$$proto;return n.$$scope,$.$initialize=function(){return r},$["$=="]=function(e){return[!0,!1]["$include?"](e)},r&&"=="}(i,null),function(t,$super){function n(){}var $=n=o(t,$super,"HashIncludingMatcher",n),a=$.$$proto,i=$.$$scope;return a.expected=r,a.$initialize=function(e){var t=this;return t.expected=e},a["$=="]=function(t){var n,$,o,a=this;try{return(n=($=a.expected)["$all?"],n.$$p=(o=function(e,n){var $;return o.$$s||this,null==e&&(e=r),null==n&&(n=r),$=t["$has_key?"](e),$!==!1&&$!==r?n["$=="](t["$[]"](e)):$},o.$$s=a,o),n).call($)}catch(s){if(e.$rescue(s,[i.get("NoMethodError")]))return!1;throw s}},a.$description=function(){var e=this;return"hash_including("+e.expected.$inspect().$sub(/^\{/,"").$sub(/\}$/,"")+")"},r&&"description"}(i,null),function(t,$super){function n(){}var $=n=o(t,$super,"HashExcludingMatcher",n),a=$.$$proto,i=$.$$scope;return a.expected=r,a.$initialize=function(e){var t=this;return t.expected=e},a["$=="]=function(t){var n,$,o,a=this;try{return(n=($=a.expected)["$none?"],n.$$p=(o=function(e,n){var $;return o.$$s||this,null==e&&(e=r),null==n&&(n=r),$=t["$has_key?"](e),$!==!1&&$!==r?n["$=="](t["$[]"](e)):$},o.$$s=a,o),n).call($)}catch(s){if(e.$rescue(s,[i.get("NoMethodError")]))return!1;throw s}},a.$description=function(){var e=this;return"hash_not_including("+e.expected.$inspect().$sub(/^\{/,"").$sub(/\}$/,"")+")"},r&&"description"}(i,null),function(e,$super){function t(){}var n=t=o(e,$super,"ArrayIncludingMatcher",t),$=n.$$proto,a=n.$$scope;return $.expected=r,$.$initialize=function(e){var t=this;return t.expected=e},$["$=="]=function(e){var t=this;return a.get("Set").$new(e)["$superset?"](a.get("Set").$new(t.expected))},$.$description=function(){var e=this;return"array_including("+e.expected.$join(",")+")"},r&&"description"}(i,null),function(e,$super){function t(){}var $=t=o(e,$super,"DuckTypeMatcher",t),a=$.$$proto;return $.$$scope,a.methods_to_respond_to=r,a.$initialize=function(e){var t=this;return e=n.call(arguments,0),t.methods_to_respond_to=e},a["$=="]=function(e){var t,n,$,o=this;return(t=(n=o.methods_to_respond_to)["$all?"],t.$$p=($=function(t){return $.$$s||this,null==t&&(t=r),e["$respond_to?"](t)},$.$$s=o,$),t).call(n)},r&&"=="}(i,null),function(e,$super){function t(){}var n=t=o(e,$super,"MatcherMatcher",t),$=n.$$proto;return n.$$scope,$.matcher=r,$.$initialize=function(e){var t=this;return t.matcher=e},$["$=="]=function(e){var t=this;return t.matcher["$matches?"](e)},r&&"=="}(i,null),function(e,$super){function t(){}var n=t=o(e,$super,"EqualityProxy",t),$=n.$$proto;return n.$$scope,$.given=r,$.$initialize=function(e){var t=this;return t.given=e},$["$=="]=function(e){var t=this;return t.given["$=="](e)},r&&"=="}(i,null),function(e,$super){function t(){}var n=t=o(e,$super,"InstanceOf",t),$=n.$$proto;return n.$$scope,$.klass=r,$.$initialize=function(e){var t=this;return t.klass=e},$["$=="]=function(e){var t=this;return e["$instance_of?"](t.klass)},r&&"=="}(i,null),function(e,$super){function t(){}var n=t=o(e,$super,"KindOf",t),$=n.$$proto;return n.$$scope,$.klass=r,$.$initialize=function(e){var t=this;return t.klass=e},$["$=="]=function(e){var t=this;return e["$kind_of?"](t.klass)},r&&"=="}(i,null),s.$any_args=function(){return c.get("AnyArgsMatcher").$new()},s.$anything=function(){return c.get("AnyArgMatcher").$new(r)},s.$no_args=function(){return c.get("NoArgsMatcher").$new()},s.$duck_type=function(e){var t;return e=n.call(arguments,0),(t=c.get("DuckTypeMatcher")).$new.apply(t,[].concat(e))},s.$boolean=function(){return c.get("BooleanMatcher").$new(r)},s.$hash_including=function(e){var t,r=this;return e=n.call(arguments,0),c.get("HashIncludingMatcher").$new((t=r).$anythingize_lonely_keys.apply(t,[].concat(e)))},s.$array_including=function(e){var t,$,o=r;return e=n.call(arguments,0),o=function(){return $=c.get("Array")["$==="](e.$first()),(t=$!==!1&&$!==r?e.$count()["$=="](1):$)===r||t.$$is_boolean&&1!=t?e:e.$first()}(),c.get("ArrayIncludingMatcher").$new(o)},s.$hash_excluding=function(e){var t,r=this;return e=n.call(arguments,0),c.get("HashExcludingMatcher").$new((t=r).$anythingize_lonely_keys.apply(t,[].concat(e)))},i.$alias_method("hash_not_including","hash_excluding"),s.$instance_of=function(e){return c.get("InstanceOf").$new(e)},i.$alias_method("an_instance_of","instance_of"),s.$kind_of=function(e){return c.get("KindOf").$new(e)},i.$alias_method("a_kind_of","kind_of"),i.$private(),s.$anythingize_lonely_keys=function(e){var t,$,o,i=this,s=r;return e=n.call(arguments,0),s=function(){return e.$last().$class()["$=="](c.get("Hash"))?e.$delete_at(-1):a([],{})}(),(t=($=e).$each,t.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=r),s["$[]="](e,t.$anything())},o.$$s=i,o),t).call($),s},e.donate(i,["$any_args","$anything","$no_args","$duck_type","$boolean","$hash_including","$array_including","$hash_excluding","$instance_of","$kind_of","$anythingize_lonely_keys"])}(i)}(i)}(t)},Opal.modules["rspec/mocks/arity_calculator"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$<=","$min_arity","$max_arity","$==","$to_s","$private","$method_defined?","$>=","$arity","$method","$~","$supports_optional_and_splat_args?","$parameters","$any?","$count","$!","$<","$/"]),function(t){var o=n(t,"RSpec");o.$$proto,o.$$scope,function(t){var o=n(t,"Mocks");o.$$proto,o.$$scope,function(t,$super){function n(){}var o,a=n=$(t,$super,"ArityCalculator",n),i=a.$$proto,s=a.$$scope;return i.method=r,i.$initialize=function(e){var t=this;return t.method=e},i["$within_range?"]=function(e){var t,r=this;return(t=r.$min_arity()["$<="](e))?e["$<="](r.$max_arity()):t},i.$range_description=function(){var e=this;return e.$min_arity()["$=="](e.$max_arity())?e.$min_arity().$to_s():e.$max_arity()["$=="](s.get("INFINITY"))?""+e.$min_arity()+" or more":""+e.$min_arity()+" to "+e.$max_arity()},a.$private(),i.$method=function(){var e=this;return e.method},e.defs(a,"$supports_optional_and_splat_args?",function(){return s.get("Method")["$method_defined?"]("parameters")}),i.$min_arity=function(){var e=this;return e.$method().$arity()["$>="](0)?e.$method().$arity():e.$method().$arity()["$~"]()},i.$max_arity=(o=a["$supports_optional_and_splat_args?"]())===r||o.$$is_boolean&&1!=o?function(){var e=this;return e.$method().$arity()["$<"](0)?s.get("INFINITY"):e.$method().$arity()}:function(){var e,t,n,$,o,a=this,i=r;return i=a.$method().$parameters(),(e=(t=(n=i)["$any?"],t.$$p=($=function(e,t){return $.$$s||this,null==e&&(e=r),null==t&&(t=r),e["$=="]("rest")},$.$$s=a,$),t).call(n))===r||e.$$is_boolean&&1!=e?(e=(t=i).$count,e.$$p=(o=function(e,t){return o.$$s||this,null==e&&(e=r),null==t&&(t=r),e["$=="]("block")["$!"]()},o.$$s=a,o),e).call(t):s.get("INFINITY")},e.cdecl(s,"INFINITY",1["$/"](0))}(o,null)}(o)}(t)},Opal.modules["rspec/mocks/configuration"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$each","$enable_should","$include?","$Array","$enable_expect","$disable_expect","$disable_should","$should_enabled?","$<<","$expect_enabled?","$!","$syntax=","$warn_about_should!","$new","$reset_syntaxes_to_default","$configuration"]),function(t){var a=$(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=$(t,"Mocks"),i=(a.$$proto,a.$$scope);!function(e,$super){function t(){}var $=t=o(e,$super,"Configuration",t),a=$.$$proto,i=$.$$scope;return a.yield_receiver_to_any_instance_implementation_blocks=a.verify_doubled_constant_names=a.transfer_nested_constants=a.verify_partial_doubles=r,a.$initialize=function(){var e=this;return e.yield_receiver_to_any_instance_implementation_blocks=!0,e.verify_doubled_constant_names=!1,e.transfer_nested_constants=!1,e.verify_partial_doubles=!1},a["$yield_receiver_to_any_instance_implementation_blocks?"]=function(){var e=this;return e.yield_receiver_to_any_instance_implementation_blocks},a["$yield_receiver_to_any_instance_implementation_blocks="]=function(e){var t=this;return t.yield_receiver_to_any_instance_implementation_blocks=e},a.$add_stub_and_should_receive_to=function(e){var t,$,o,a=this;return e=n.call(arguments,0),(t=($=e).$each,t.$$p=(o=function(e){return o.$$s||this,null==e&&(e=r),i.get("Syntax").$enable_should(e)},o.$$s=a,o),t).call($)},a["$syntax="]=function(e){var t,n=this;return(t=n.$Array(e)["$include?"]("expect"))===r||t.$$is_boolean&&1!=t?i.get("Syntax").$disable_expect():i.get("Syntax").$enable_expect(),(t=n.$Array(e)["$include?"]("should"))===r||t.$$is_boolean&&1!=t?i.get("Syntax").$disable_should():i.get("Syntax").$enable_should()},a.$syntax=function(){var e,t=r;return t=[],(e=i.get("Syntax")["$should_enabled?"]())===r||e.$$is_boolean&&1!=e||t["$<<"]("should"),(e=i.get("Syntax")["$expect_enabled?"]())===r||e.$$is_boolean&&1!=e||t["$<<"]("expect"),t},a["$verify_doubled_constant_names?"]=function(){var e=this;return e.verify_doubled_constant_names["$!"]()["$!"]()},a["$verify_doubled_constant_names="]=function(e){var t=this;return t.verify_doubled_constant_names=e},a["$transfer_nested_constants?"]=function(){var e=this;return e.transfer_nested_constants["$!"]()["$!"]()},a["$transfer_nested_constants="]=function(e){var t=this;return t.transfer_nested_constants=e},a["$verify_partial_doubles="]=function(e){var t=this;return t.verify_partial_doubles=e["$!"]()["$!"]()},a["$verify_partial_doubles?"]=function(){var e=this;return e.verify_partial_doubles},a.$reset_syntaxes_to_default=function(){var e,t,r=this;return e=[["should","expect"]],t=r,t["$syntax="].apply(t,e),e[e.length-1],i.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax")["$warn_about_should!"]()},r&&"reset_syntaxes_to_default"}(a,null),e.defs(a,"$configuration",function(){var e,t=this;return null==t.configuration&&(t.configuration=r),(e=t.configuration)!==!1&&e!==r?e:t.configuration=i.get("Configuration").$new()}),a.$configuration().$reset_syntaxes_to_default()}(a)}(t)},Opal.modules["rspec/mocks/error_generator"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$attr_writer","$__raise","$intro","$arg_message","$format_args","$expected_args","$format_received_args","$inspect","$message","$join","$collect","$expected_part_of_expectation_error","$received_part_of_expectation_error","$%","$description","$range_description","$+","$count_message","$method_call_args_description","$first","$===","$>","$length","$gsub","$arg_list","$raise","$private","$nil?","$[]","$opts","$empty?","$arg_has_valid_description","$respond_to?","$!","$received_arg_list","$to_proc","$<","$==","$pretty_print","$abs"]),function(t){var i=$(t,"RSpec");i.$$proto,i.$$scope,function(t){var i=$(t,"Mocks");i.$$proto,i.$$scope,function(t,$super){function $(){}var i=$=o(t,$super,"ErrorGenerator",$),s=i.$$proto,c=i.$$scope;return s.opts=s.name=s.target=r,i.$attr_writer("opts"),s.$initialize=function(e,t){var r=this;return r.target=e,r.name=t},s.$opts=function(){var e,t=this;return(e=t.opts)!==!1&&e!==r?e:t.opts=a([],{})},s.$raise_unexpected_message_error=function(e,t){var r,$=this;return t=n.call(arguments,1),$.$__raise(""+$.$intro()+" received unexpected message :"+e+(r=$).$arg_message.apply(r,[].concat(t)))},s.$raise_unexpected_message_args_error=function(e,t){var $,o,a=this,i=r,s=r;return t=n.call(arguments,1),i=($=a).$format_args.apply($,[].concat(e.$expected_args())),s=(o=a).$format_received_args.apply(o,[].concat(t)),a.$__raise(""+a.$intro()+" received "+e.$message().$inspect()+" with unexpected arguments\n  expected: "+i+"\n       got: "+s)},s.$raise_missing_default_stub_error=function(e,t){var $,o,a=this,i=r,s=r;return t=n.call(arguments,1),i=($=a).$format_args.apply($,[].concat(e.$expected_args())),s=(o=a).$format_received_args.apply(o,[].concat(t)),a.$__raise(""+a.$intro()+" received "+e.$message().$inspect()+" with unexpected arguments\n  expected: "+i+"\n       got: "+s+"\n Please stub a default value first if message might be received with other args as well. \n")},s.$raise_similar_message_args_error=function(e,t){var $,o,a,i,s=this,c=r,l=r;return t=n.call(arguments,1),c=($=s).$format_args.apply($,[].concat(e.$expected_args())),l=(o=(a=t).$collect,o.$$p=(i=function(e){var t,n=i.$$s||this;return null==e&&(e=r),(t=n).$format_received_args.apply(t,[].concat(e))},i.$$s=s,i),o).call(a).$join(", "),s.$__raise(""+s.$intro()+" received "+e.$message().$inspect()+" with unexpected arguments\n  expected: "+c+"\n       got: "+l)},s.$raise_expectation_error=function(e,t,$,o,a,i){var s,c,l=this,u=r,_=r;return i=n.call(arguments,5),u=l.$expected_part_of_expectation_error(t,a,$),_=(s=l).$received_part_of_expectation_error.apply(s,[o].concat(i)),l.$__raise("("+l.$intro()+")."+e+(c=l).$format_args.apply(c,[].concat(i))+"\n    "+u+"\n    "+_)},s.$raise_unimplemented_error=function(e,t){var r=this;return r.$__raise("%s does not implement:\n  %s"["$%"]([e.$description(),t]))},s.$raise_arity_error=function(e,t){var r=this;return r.$__raise("Wrong number of arguments. Expected %s, got %s."["$%"]([e.$range_description(),t]))},s.$received_part_of_expectation_error=function(e,t){var r=this;return t=n.call(arguments,1),("received: "+r.$count_message(e))["$+"](r.$method_call_args_description(t))},s.$expected_part_of_expectation_error=function(e,t,r){var n=this;return("expected: "+n.$count_message(e,t))["$+"](n.$method_call_args_description(r.$expected_args()))},s.$method_call_args_description=function(e){var t=r;return t=e.$first(),c.get("ArgumentMatchers").$$scope.get("AnyArgsMatcher")["$==="](t)?" with any arguments":c.get("ArgumentMatchers").$$scope.get("NoArgsMatcher")["$==="](t)?" with no arguments":e.$length()["$>"](0)?" with arguments: "+e.$inspect().$gsub(/\A\[(.+)\]\z/,"(\\1)"):""},s.$describe_expectation=function(e,t,r,$){var o,a=this;return $=n.call(arguments,3),"have received "+e+(o=a).$format_args.apply(o,[].concat($))+" "+a.$count_message(t)},s.$raise_out_of_order_error=function(e){var t=this;return t.$__raise(""+t.$intro()+" received :"+e+" out of order")},s.$raise_block_failed_error=function(e,t){var r=this;return r.$__raise(""+r.$intro()+" received :"+e+" but passed block failed with: "+t)},s.$raise_missing_block_error=function(e){var t,r=this;return r.$__raise(""+r.$intro()+" asked to yield |"+(t=r).$arg_list.apply(t,[].concat(e))+"| but no block was passed")},s.$raise_wrong_arity_error=function(e,t){var r,n=this;return n.$__raise(""+n.$intro()+" yielded |"+(r=n).$arg_list.apply(r,[].concat(e))+"| to block with arity of "+t)},s.$raise_only_valid_on_a_partial_mock=function(e){var t=this;return t.$__raise((""+t.$intro()+" is a pure mock object. `"+e+"` is only ")["$+"]("available on a partial mock object."))},s.$raise_expectation_on_unstubbed_method=function(e){var t=this;return t.$__raise((""+t.$intro()+" expected to have received "+e+", but that ")["$+"]("method has not been stubbed."))},s.$raise_expectation_on_mocked_method=function(e){var t=this;return t.$__raise((""+t.$intro()+" expected to have received "+e+", but that ")["$+"]("method has been mocked instead of stubbed."))},e.defs(i,"$raise_double_negation_error",function(e){var t=this;return t.$raise("Isn't life confusing enough? You've already set a "["$+"]("negative message expectation and now you are trying to ")["$+"]("negate it again with `never`. What does an expression like ")["$+"]("`"+e+".not_to receive(:msg).never` even mean?"))}),i.$private(),s.$intro=function(){var e,t=this;return(e=t.name)===r||e.$$is_boolean&&1!=e?(e=c.get("TestDouble")["$==="](t.target))===r||e.$$is_boolean&&1!=e?(e=c.get("Class")["$==="](t.target))===r||e.$$is_boolean&&1!=e?(e=t.target)===r||e.$$is_boolean&&1!=e?"nil":t.target:"<"+t.target.$inspect()+" (class)>":"Double":"Double "+t.name.$inspect()},s.$__raise=function(e){var t,n=this;return((t=n.$opts()["$[]"]("message")["$nil?"]())===r||t.$$is_boolean&&1!=t)&&(e=n.$opts()["$[]"]("message")),c.get("Kernel").$raise(c.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError"),e)},s.$arg_message=function(e){var t,r=this;return e=n.call(arguments,0)," with "["$+"]((t=r).$format_args.apply(t,[].concat(e)))},s.$format_args=function(e){var t,$=this;return e=n.call(arguments,0),(t=e["$empty?"]())===r||t.$$is_boolean&&1!=t?"("["$+"]((t=$).$arg_list.apply(t,[].concat(e)))["$+"](")"):"(no args)"},s.$arg_list=function(e){var t,$,o,a=this;return e=n.call(arguments,0),(t=($=e).$collect,t.$$p=(o=function(e){var t,n=o.$$s||this;return null==e&&(e=r),(t=n.$arg_has_valid_description(e))===r||t.$$is_boolean&&1!=t?e.$inspect():e.$description()},o.$$s=a,o),t).call($).$join(", ")},s.$arg_has_valid_description=function(e){var t;return(t=e["$respond_to?"]("description"))===r||t.$$is_boolean&&1!=t?!1:(t=e.$description()["$nil?"]()["$!"](),t!==!1&&t!==r?e.$description()["$empty?"]()["$!"]():t)},s.$format_received_args=function(e){var t,$=this;return e=n.call(arguments,0),(t=e["$empty?"]())===r||t.$$is_boolean&&1!=t?"("["$+"]((t=$).$received_arg_list.apply(t,[].concat(e)))["$+"](")"):"(no args)"},s.$received_arg_list=function(e){var t,r;return e=n.call(arguments,0),(t=(r=e).$collect,t.$$p="inspect".$to_proc(),t).call(r).$join(", ")},s.$count_message=function(e,t){var n,$,o=this;return null==t&&(t=r),(n=($=e["$<"](0))!==!1&&$!==r?$:t["$=="]("at_least"))===r||n.$$is_boolean&&1!=n?t["$=="]("at_most")?"at most "+o.$pretty_print(e):o.$pretty_print(e):"at least "+o.$pretty_print(e.$abs())},s.$pretty_print=function(e){return""+e+" time"+function(){return e["$=="](1)?"":"s"}()},r&&"pretty_print"}(i,null)}(i)}(t)},Opal.modules["rspec/mocks/errors"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs([]),function(e){var t=n(e,"RSpec");t.$$proto,t.$$scope,function(e){var t=n(e,"Mocks"),o=(t.$$proto,t.$$scope);!function(e,$super){function t(){}var n=t=$(e,$super,"MockExpectationError",t);return n.$$proto,n.$$scope,r}(t,o.get("Exception")),function(e,$super){function t(){}var n=t=$(e,$super,"AmbiguousReturnError",t);return n.$$proto,n.$$scope,r}(t,o.get("StandardError"))}(t)}(t)},Opal.modules["rspec/mocks/example_methods"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.hash2;return e.add_stubs(["$require","$include","$declare_double","$for","$declare_verifying_double","$warn_about_expectations=","$proxy_for","$space","$stub","$hide","$new","$to_proc","$class_exec","$method_defined?","$private","$verify_doubled_constant_names?","$configuration","$!","$defined?","$raise","$+","$name","$===","$last","$<<"]),t.$require("rspec/mocks/object_reference"),function(t){var a=$(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=$(t,"Mocks");a.$$proto,a.$$scope,function(t){var a,i=$(t,"ExampleMethods"),s=i.$$proto,c=i.$$scope;i.$include(c.get("RSpec").$$scope.get("Mocks").$$scope.get("ArgumentMatchers")),s.$double=function(e){var t,r=this;return e=n.call(arguments,0),(t=r).$declare_double.apply(t,[c.get("Mock")].concat(e))},s.$instance_double=function(e,t){var $,o=this,a=r;return t=n.call(arguments,1),a=c.get("ObjectReference").$for(e),($=o).$declare_verifying_double.apply($,[c.get("InstanceVerifyingDouble"),a].concat(t))},s.$class_double=function(e,t){var $,o=this,a=r;return t=n.call(arguments,1),a=c.get("ObjectReference").$for(e),($=o).$declare_verifying_double.apply($,[c.get("ClassVerifyingDouble"),a].concat(t))},s.$object_double=function(e,t){var $,o=this,a=r;return t=n.call(arguments,1),a=c.get("ObjectReference").$for(e,"allow_direct_object_refs"),($=o).$declare_verifying_double.apply($,[c.get("ObjectVerifyingDouble"),a].concat(t))},s.$allow_message_expectations_on_nil=function(){var e,t;return e=[!1],t=c.get("RSpec").$$scope.get("Mocks").$space().$proxy_for(r),t["$warn_about_expectations="].apply(t,e),e[e.length-1]},s.$stub_const=function(e,t,r){return null==r&&(r=o([],{})),c.get("ConstantMutator").$stub(e,t,r)},s.$hide_const=function(e){return c.get("ConstantMutator").$hide(e)},s.$have_received=a=function(e){var t,n,$=a.$$p,o=$||r;return a.$$p=null,(t=(n=c.get("Matchers").$$scope.get("HaveReceived")).$new,t.$$p=o.$to_proc(),t).call(n,e)},e.defs(i,"$included",function(e){var t,n,$,o=this;return(t=(n=e).$class_exec,t.$$p=($=function(){var e,t=$.$$s||this;return(e=t["$method_defined?"]("expect"))===r||e.$$is_boolean&&1!=e?t.$include(c.get("ExpectHost")):r},$.$$s=o,$),t).call(n)}),i.$private(),s.$declare_verifying_double=function(e,t,$){var o,a,i=this;return $=n.call(arguments,2),a=c.get("RSpec").$$scope.get("Mocks").$configuration()["$verify_doubled_constant_names?"](),(o=a!==!1&&a!==r?t["$defined?"]()["$!"]():a)===r||o.$$is_boolean&&1!=o||i.$raise(c.get("NameError"),(""+t.$name()+" is not a defined constant. ")["$+"]("Perhaps you misspelt it? ")["$+"]("Disable check with verify_doubled_constant_names configuration option.")),(o=i).$declare_double.apply(o,[e,t].concat($))},s.$declare_double=function(e,t){var $;return t=n.call(arguments,1),(($=c.get("Hash")["$==="](t.$last()))===r||$.$$is_boolean&&1!=$)&&t["$<<"](o([],{})),($=e).$new.apply($,[].concat(t))},function(e){var t=$(e,"ExpectHost");t.$$proto,t.$$scope}(i),e.donate(i,["$double","$instance_double","$class_double","$object_double","$allow_message_expectations_on_nil","$stub_const","$hide_const","$have_received","$declare_verifying_double","$declare_double"])}(a)}(a)}(t)},Opal.modules["rspec/mocks/extensions/marshal"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module;return e.add_stubs(["$nil?","$space","$!","$registered?","$===","$dump_without_mocks","$dup","$alias_method","$undef_method"]),function(e){var t=$(e,"Marshal");t.$$proto,t.$$scope,function(e){var t=e.$$scope;return e.$$proto,e.$$proto.$dump_with_mocks=function(e,$){var o,a,i,s=this;return $=n.call(arguments,1),(o=(a=(i=Opal.get("RSpec").$$scope.get("Mocks").$space()["$nil?"]())!==!1&&i!==r?i:Opal.get("RSpec").$$scope.get("Mocks").$space()["$registered?"](e)["$!"]())!==!1&&a!==r?a:t.get("NilClass")["$==="](e))===r||o.$$is_boolean&&1!=o?(a=s).$dump_without_mocks.apply(a,[e.$dup()].concat($)):(o=s).$dump_without_mocks.apply(o,[e].concat($))},e.$alias_method("dump_without_mocks","dump"),e.$undef_method("dump"),e.$alias_method("dump","dump_with_mocks")}(t.$singleton_class())}(t)},Opal.modules["rspec/mocks/framework"]=function(e){e.dynamic_require_severity="warning";var t=e.top;return e.nil,e.breaker,e.slice,e.add_stubs(["$require"]),t.$require("rspec/support/caller_filter"),t.$require("rspec/support/warnings"),t.$require("rspec/mocks/instance_method_stasher"),t.$require("rspec/mocks/method_double"),t.$require("rspec/mocks/argument_matchers"),t.$require("rspec/mocks/example_methods"),t.$require("rspec/mocks/proxy"),t.$require("rspec/mocks/proxy_for_nil"),t.$require("rspec/mocks/test_double"),t.$require("rspec/mocks/mock"),t.$require("rspec/mocks/argument_list_matcher"),t.$require("rspec/mocks/message_expectation"),t.$require("rspec/mocks/order_group"),t.$require("rspec/mocks/errors"),t.$require("rspec/mocks/error_generator"),t.$require("rspec/mocks/space"),t.$require("rspec/mocks/extensions/marshal"),t.$require("rspec/mocks/any_instance/chain"),t.$require("rspec/mocks/any_instance/stub_chain"),t.$require("rspec/mocks/any_instance/stub_chain_chain"),t.$require("rspec/mocks/any_instance/expectation_chain"),t.$require("rspec/mocks/any_instance/message_chains"),t.$require("rspec/mocks/any_instance/recorder"),t.$require("rspec/mocks/mutate_const"),t.$require("rspec/mocks/matchers/have_received"),t.$require("rspec/mocks/matchers/receive"),t.$require("rspec/mocks/matchers/receive_messages"),t.$require("rspec/mocks/stub_chain"),t.$require("rspec/mocks/targets"),t.$require("rspec/mocks/syntax"),t.$require("rspec/mocks/configuration"),t.$require("rspec/mocks/verifying_double")},Opal.modules["rspec/mocks/instance_method_stasher"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$attr_reader","$<","$to_f","$!","$method_defined_directly_on_klass?","$__send__","$stashed_method_name","$private","$method_handle_for","$method_defined_on_klass?","$method_owned_by_klass?","$method_defined?","$private_method_defined?","$owner","$instance_method","$===","$class","$=="]),function(e){var t=n(e,"RSpec");t.$$proto,t.$$scope,function(e){var t=n(e,"Mocks");t.$$proto,t.$$scope,function(e,$super){function t(){}var n=t=$(e,$super,"InstanceMethodStasher",t),o=n.$$proto,a=n.$$scope;return o.method_is_stashed=o.klass=o.method=o.original_method=o.object=r,o.$initialize=function(e,t){var n=this;return n.object=e,n.method=t,n.klass=function(e){return e.$$scope,e.$$proto,e}(e.$singleton_class()),n.original_method=r,n.method_is_stashed=!1},n.$attr_reader("original_method"),a.get("RUBY_VERSION").$to_f()["$<"](1.9)?(o["$method_is_stashed?"]=function(){var e=this;return e.method_is_stashed},o.$stash=function(){var e,t,n=this;return(e=(t=n["$method_defined_directly_on_klass?"]()["$!"]())!==!1&&t!==r?t:n.method_is_stashed)===r||e.$$is_boolean&&1!=e?(n.klass.$__send__("alias_method",n.$stashed_method_name(),n.method),n.method_is_stashed=!0):r},o.$stashed_method_name=function(){var e=this;return"obfuscated_by_rspec_mocks__"+e.method},n.$private("stashed_method_name"),o.$restore=function(){var e,t=this;return(e=t.method_is_stashed)===r||e.$$is_boolean&&1!=e?r:((e=t.klass.$__send__("method_defined?",t.method))===r||e.$$is_boolean&&1!=e||t.klass.$__send__("undef_method",t.method),t.klass.$__send__("alias_method",t.method,t.$stashed_method_name()),t.klass.$__send__("remove_method",t.$stashed_method_name()),t.method_is_stashed=!1)}):(o["$method_is_stashed?"]=function(){var e=this;return e.original_method["$!"]()["$!"]()},o.$stash=function(){var e,t=this;return(e=t["$method_defined_directly_on_klass?"]()["$!"]())===r||e.$$is_boolean&&1!=e?(e=t.original_method)!==!1&&e!==r?e:t.original_method=Opal.get("RSpec").$$scope.get("Mocks").$method_handle_for(t.object,t.method):r},o.$restore=function(){var e,t=this;return(e=t.original_method)===r||e.$$is_boolean&&1!=e?r:((e=t.klass.$__send__("method_defined?",t.method))===r||e.$$is_boolean&&1!=e||t.klass.$__send__("undef_method",t.method),t.klass.$__send__("define_method",t.method,t.original_method),t.original_method=r)
}),n.$private(),o["$method_defined_directly_on_klass?"]=function(){var e,t=this;return e=t["$method_defined_on_klass?"](),e!==!1&&e!==r?t["$method_owned_by_klass?"]():e},o["$method_defined_on_klass?"]=function(e){var t,n=this;return null==e&&(e=n.klass),(t=e["$method_defined?"](n.method))!==!1&&t!==r?t:e["$private_method_defined?"](n.method)},o["$method_owned_by_klass?"]=function(){var e,t=this,n=r;return n=t.klass.$instance_method(t.method).$owner(),((e=a.get("Module")["$==="](n))===r||e.$$is_boolean&&1!=e)&&(n=n.$class()),(e=n["$=="](t.klass))!==!1&&e!==r?e:t["$method_defined_on_klass?"](n)["$!"]()},r&&"method_owned_by_klass?"}(t,null)}(t)}(t)},Opal.modules["rspec/mocks/matchers/have_received"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$+","$expect","$expected_messages_received_in_order?","$ensure_count_unconstrained","$never","$generate_failure_message","$description","$each","$define_method","$<<","$private","$build_expectation","$mock_proxy","$apply_constraints_to","$send","$count_constraint","$raise","$detect","$include?","$map","$to_proc","$check_for_unexpected_arguments","$generate_error","$message","$replay_received_message_on","$expected_messages_received?","$ensure_expected_ordering_received!","$proxy_for"]),function(t){var a=$(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=$(t,"Mocks");a.$$proto,a.$$scope,function(t){var a=$(t,"Matchers");a.$$proto,a.$$scope,function(t,$super){function $(){}var a,i,s,c,l,u=$=o(t,$super,"HaveReceived",$),_=u.$$proto,p=u.$$scope;return _.block=_.method_name=_.constraints=_.expectation=_.subject=r,e.cdecl(p,"COUNT_CONSTRAINTS",["exactly","at_least","at_most","times","once","twice"]),e.cdecl(p,"ARGS_CONSTRAINTS",["with"]),e.cdecl(p,"CONSTRAINTS",p.get("COUNT_CONSTRAINTS")["$+"](p.get("ARGS_CONSTRAINTS"))["$+"](["ordered"])),_.$initialize=a=function(e){var t=this,n=a.$$p,$=n||r;return a.$$p=null,t.method_name=e,t.block=$,t.constraints=[],t.subject=r},_.$name=function(){return"have_received"},_["$matches?"]=i=function(e){var t,n=this,$=i.$$p,o=$||r;return i.$$p=null,(t=n.block)!==!1&&t!==r?t:n.block=o,n.subject=e,n.expectation=n.$expect(),n["$expected_messages_received_in_order?"]()},_["$does_not_match?"]=function(e){var t=this;return t.subject=e,t.$ensure_count_unconstrained(),t.expectation=t.$expect().$never(),t["$expected_messages_received_in_order?"]()},_.$failure_message=function(){var e=this;return e.$generate_failure_message()},_.$negative_failure_message=function(){var e=this;return e.$generate_failure_message()},_.$description=function(){var e=this;return e.$expect().$description()},(s=(c=p.get("CONSTRAINTS")).$each,s.$$p=(l=function(e){var t,$,o,a=l.$$s||this;return null==e&&(e=r),(t=($=a).$define_method,t.$$p=(o=function(t){var $=o.$$s||this;return null==$.constraints&&($.constraints=r),t=n.call(arguments,0),$.constraints["$<<"]([e].concat(t)),$},o.$$s=a,o),t).call($,e)},l.$$s=u,l),s).call(c),u.$private(),_.$expect=function(){var e=this,t=r;return t=e.$mock_proxy().$build_expectation(e.method_name),e.$apply_constraints_to(t),t},_.$apply_constraints_to=function(e){var t,n,$,o=this;return(t=(n=o.constraints).$each,t.$$p=($=function(t){var n;return $.$$s||this,null==t&&(t=r),(n=e).$send.apply(n,[].concat(t))},$.$$s=o,$),t).call(n)},_.$ensure_count_unconstrained=function(){var e,t=this;return(e=t.$count_constraint())===r||e.$$is_boolean&&1!=e?r:t.$raise(p.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError"),"can't use "+t.$count_constraint()+" when negative")},_.$count_constraint=function(){var e,t,n,$,o,a=this;return(e=(t=($=(o=a.constraints).$map,$.$$p="first".$to_proc(),$).call(o)).$detect,e.$$p=(n=function(e){return n.$$s||this,null==e&&(e=r),p.get("COUNT_CONSTRAINTS")["$include?"](e)},n.$$s=a,n),e).call(t)},_.$generate_failure_message=function(){var t=this,n=r;try{return t.$mock_proxy().$check_for_unexpected_arguments(t.expectation),t.expectation.$generate_error()}catch($){if(e.$rescue($,[p.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError")]))return n=$,n.$message();throw $}},_["$expected_messages_received_in_order?"]=function(){var e,t,n=this;return(e=(t=n.$mock_proxy()).$replay_received_message_on,e.$$p=n.block.$to_proc(),e).call(t,n.expectation),e=n.expectation["$expected_messages_received?"](),e!==!1&&e!==r?n.expectation["$ensure_expected_ordering_received!"]():e},_.$mock_proxy=function(){var e=this;return p.get("RSpec").$$scope.get("Mocks").$proxy_for(e.subject)},r&&"mock_proxy"}(a,null)}(a)}(a)}(t)},Opal.modules["rspec/mocks/matchers/receive"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$first_non_rspec_line","$warn_if_any_instance","$setup_mock_proxy_method_substitute","$unshift","$new","$setup_expectation","$to_proc","$setup_any_instance_method_substitute","$each","$method_defined?","$define_method","$<<","$public_instance_methods","$private","$===","$warning","$klass","$proxy_for","$setup_method_substitute","$any_instance_recorder_for","$to_sym","$__send__","$playback_onto"]),function(t){var a=$(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=$(t,"Mocks");a.$$proto,a.$$scope,function(t){var a=$(t,"Matchers");a.$$proto,a.$$scope,function(t,$super){function $(){}var a,i,s,c,l,u,_,p,d,f=$=o(t,$super,"Receive",$),h=f.$$proto,m=f.$$scope;return h.recorded_customizations=h.backtrace_line=h.message=h.block=r,h.$initialize=function(e,t){var r=this;return r.message=e,r.block=t,r.recorded_customizations=[],r.backtrace_line=m.get("CallerFilter").$first_non_rspec_line()},h.$name=function(){return"receive"},h.$setup_expectation=a=function(e){var t=this,n=a.$$p,$=n||r;return a.$$p=null,t.$warn_if_any_instance("expect",e),t.$setup_mock_proxy_method_substitute(e,"add_message_expectation",$)},e.defn(f,"$matches?",h.$setup_expectation),h.$setup_negative_expectation=i=function(e){var t,n,$=this,o=i.$$p,a=o||r;return i.$$p=null,$.recorded_customizations.$unshift(m.get("Customization").$new("never",[],r)),$.$warn_if_any_instance("expect",e),(t=(n=$).$setup_expectation,t.$$p=a.$to_proc(),t).call(n,e)},e.defn(f,"$does_not_match?",h.$setup_negative_expectation),h.$setup_allowance=s=function(e){var t=this,n=s.$$p,$=n||r;return s.$$p=null,t.$warn_if_any_instance("allow",e),t.$setup_mock_proxy_method_substitute(e,"add_stub",$)},h.$setup_any_instance_expectation=c=function(e){var t=this,n=c.$$p,$=n||r;return c.$$p=null,t.$setup_any_instance_method_substitute(e,"should_receive",$)},h.$setup_any_instance_negative_expectation=l=function(e){var t=this,n=l.$$p,$=n||r;return l.$$p=null,t.$setup_any_instance_method_substitute(e,"should_not_receive",$)},h.$setup_any_instance_allowance=u=function(e){var t=this,n=u.$$p,$=n||r;return u.$$p=null,t.$setup_any_instance_method_substitute(e,"stub",$)},(_=(p=m.get("MessageExpectation").$public_instance_methods(!1)).$each,_.$$p=(d=function(e){var t,$,o,a=d.$$s||this;return null==e&&(e=r),(t=a["$method_defined?"](e))===r||t.$$is_boolean&&1!=t?(t=($=a).$define_method,t.$$p=(o=function(t){var $,a=o.$$s||this;return null==a.recorded_customizations&&(a.recorded_customizations=r),t=n.call(arguments,0),$=o.$$p||r,o.$$p=null,a.recorded_customizations["$<<"](m.get("Customization").$new(e,t,$)),a},o.$$s=a,o),t).call($,e):r},d.$$s=f,d),_).call(p),f.$private(),h.$warn_if_any_instance=function(e,t){var n;return(n=m.get("AnyInstance").$$scope.get("Recorder")["$==="](t))===r||n.$$is_boolean&&1!=n?r:m.get("RSpec").$warning(("`"+e+"("+t.$klass()+".any_instance).to` ")["$<<"]("is probably not what you meant, it does not operate on ")["$<<"]("any instance of `"+t.$klass()+"`. ")["$<<"]("Use `"+e+"_any_instance_of("+t.$klass()+").to` instead."))},h.$setup_mock_proxy_method_substitute=function(e,t,n){var $=this,o=r;return o=Opal.get("RSpec").$$scope.get("Mocks").$proxy_for(e),$.$setup_method_substitute(o,t,n,$.backtrace_line)},h.$setup_any_instance_method_substitute=function(e,t,n){var $=this,o=r;return o=Opal.get("RSpec").$$scope.get("Mocks").$any_instance_recorder_for(e),$.$setup_method_substitute(o,t,n)},h.$setup_method_substitute=function(e,t,$,o){var a,i,s,c,l=this,u=r;return o=n.call(arguments,3),o["$<<"](l.message.$to_sym()),u=(a=(i=e).$__send__,a.$$p=((s=l.block)!==!1&&s!==r?s:$).$to_proc(),a).apply(i,[t].concat(o)),(a=(s=l.recorded_customizations).$each,a.$$p=(c=function(e){return c.$$s||this,null==e&&(e=r),e.$playback_onto(u)},c.$$s=l,c),a).call(s),u},function(e,$super){function t(){}var n=t=o(e,$super,"Customization",t),$=n.$$proto;return n.$$scope,$.block=$.method_name=$.args=r,$.$initialize=function(e,t,r){var n=this;return n.method_name=e,n.args=t,n.block=r},$.$playback_onto=function(e){var t,r,n=this;return(t=(r=e).$__send__,t.$$p=n.block.$to_proc(),t).apply(r,[n.method_name].concat(n.args))},r&&"playback_onto"}(f,null)}(a,null)}(a)}(a)}(t)},Opal.modules["rspec/mocks/matchers/receive_messages"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=e.breaker,$=(e.slice,e.module),o=e.klass;return e.add_stubs(["$first_non_rspec_line","$warn_about_block","$each_message_on","$add_simple_expectation","$proxy_on","$raise","$+","$add_simple_stub","$and_return","$should_receive","$any_instance_of","$stub","$private","$proxy_for","$any_instance_recorder_for","$each"]),function(t){var a=$(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=$(t,"Mocks");a.$$proto,a.$$scope,function(t){var a=$(t,"Matchers");a.$$proto,a.$$scope,function(t,$super){function $(){}var a,i,s,c,l,u=$=o(t,$super,"ReceiveMessages",$),_=u.$$proto,p=u.$$scope;return _.message_return_value_hash=r,_.$initialize=function(e){var t=this;return t.message_return_value_hash=e,t.backtrace_line=p.get("CallerFilter").$first_non_rspec_line()},_.$name=function(){return"receive_messages"},_.$setup_expectation=a=function(e){var t,n,$,o=this,i=a.$$p,s=i||r;return a.$$p=null,s!==r&&o.$warn_about_block(),(t=(n=o).$each_message_on,t.$$p=($=function(e,t,n){var o=$.$$s||this;return null==o.backtrace_line&&(o.backtrace_line=r),null==e&&(e=r),null==t&&(t=r),null==n&&(n=r),e.$add_simple_expectation(t,n,o.backtrace_line)},$.$$s=o,$),t).call(n,o.$proxy_on(e))},e.defn(u,"$matches?",_.$setup_expectation),_.$setup_negative_expectation=function(){var e=this;return e.$raise(p.get("NegationUnsupportedError"),"`expect(...).to_not receive_messages` is not supported since it "["$+"]("doesn't really make sense. What would it even mean?"))},e.defn(u,"$does_not_match?",_.$setup_negative_expectation),_.$setup_allowance=i=function(e){var t,n,$,o=this,a=i.$$p,s=a||r;return i.$$p=null,s!==r&&o.$warn_about_block(),(t=(n=o).$each_message_on,t.$$p=($=function(e,t,n){return $.$$s||this,null==e&&(e=r),null==t&&(t=r),null==n&&(n=r),e.$add_simple_stub(t,n)},$.$$s=o,$),t).call(n,o.$proxy_on(e))},_.$setup_any_instance_expectation=s=function(e){var t,n,$,o=this,a=s.$$p,i=a||r;return s.$$p=null,i!==r&&o.$warn_about_block(),(t=(n=o).$each_message_on,t.$$p=($=function(e,t,n){return $.$$s||this,null==e&&(e=r),null==t&&(t=r),null==n&&(n=r),e.$should_receive(t).$and_return(n)},$.$$s=o,$),t).call(n,o.$any_instance_of(e))},_.$setup_any_instance_allowance=c=function(e){var t=this,n=c.$$p,$=n||r;return c.$$p=null,$!==r&&t.$warn_about_block(),t.$any_instance_of(e).$stub(t.message_return_value_hash)},_.$warn_about_block=function(){var e=this;return e.$raise("Implementation blocks aren't supported with `receive_messages`")},u.$private(),_.$proxy_on=function(e){return Opal.get("RSpec").$$scope.get("Mocks").$proxy_for(e)},_.$any_instance_of=function(e){return Opal.get("RSpec").$$scope.get("Mocks").$any_instance_recorder_for(e)},_.$each_message_on=l=function(t){var $,o,a,i=this,s=l.$$p,c=s||r;return l.$$p=null,($=(o=i.message_return_value_hash).$each,$.$$p=(a=function($,o){var i;return a.$$s||this,null==$&&($=r),null==o&&(o=r),i=e.$yieldX(c,[t,$,o]),i===n?i:i},a.$$s=i,a),$).call(o)},r&&"each_message_on"}(a,null)}(a)}(a)}(t)},Opal.modules["rspec/mocks/message_expectation"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=e.breaker,$=e.slice,o=e.module,a=e.klass,i=e.hash2;return e.add_stubs(["$==","$line","$raise_expectation_error","$attr_accessor","$attr_reader","$attr_writer","$protected","$opts=","$object","$method_name","$register","$new","$inner_implementation_action=","$expected_args","$negative?","$raise","$ignoring_args?","$max","$size","$terminal_implementation_action=","$===","$raise_only_valid_on_a_partial_mock","$inner_action","$implementation","$warning","$original_method","$respond_to?","$exception","$throw","$<<","$initial_implementation_action=","$args_match?","$yield_receiver_to_implementation_block?","$unshift","$orig_object","$+","$expectation_count_type","$handle_order_constraint","$present?","$call","$to_proc","$invoke","$!","$>","$>=","$expected_messages_received?","$failed_fast?","$generate_error","$matches_exact_count?","$matches_at_least_count?","$matches_at_most_count?","$verify_invocation_order","$<=","$similar_messages","$empty?","$raise_similar_message_args_error","$describe_expectation","$raise_out_of_order_error","$set_expected_received_count","$raise_double_negation_error","$private","$initial_action=","$inner_action=","$terminal_action=","$nil?","$raise_missing_block_error","$each","$arity","$length","$raise_wrong_arity_error","$instance_exec","$shift","$first","$last","$map","$actions","$any?","$compact","$initial_action","$terminal_action","$cannot_modify_further_error","$insert","$backtrace"]),function(t){var s=o(t,"RSpec");s.$$proto,s.$$scope,function(t){var s=o(t,"Mocks");s.$$proto,s.$$scope,function(e,$super){function t(){}var n=t=a(e,$super,"SimpleMessageExpectation",t),o=n.$$proto,i=n.$$scope;return o.response=o.message=o.backtrace_line=r,o.$initialize=function(e,t,n,$){var o,a=this;return null==$&&($=r),o=[e,t,n,$],a.message=o[0],a.response=o[1],a.error_generator=o[2],a.backtrace_line=o[3],a.received=!1},o.$invoke=function(e){var t=this;return e=$.call(arguments,0),t.received=!0,t.response},o["$matches?"]=function(e,t){var r=this;return t=$.call(arguments,1),r.message["$=="](e)},o["$called_max_times?"]=function(){return!1},o.$verify_messages_received=function(){var e,t,n,$=this;return(e=(t=i.get("InsertOntoBacktrace")).$line,e.$$p=(n=function(){var e,t=n.$$s||this;return null==t.received&&(t.received=r),null==t.error_generator&&(t.error_generator=r),null==t.message&&(t.message=r),(e=t.received)===r||e.$$is_boolean&&1!=e?t.error_generator.$raise_expectation_error(t.message,1,i.get("ArgumentListMatcher").$$scope.get("MATCH_ALL"),0,r):r},n.$$s=$,n),e).call(t,$.backtrace_line)},r&&"verify_messages_received"}(s,null),function(t,$super){function o(){}var s,c,l,u,_,p,d,f,h,m,g,v,b=o=a(t,$super,"MessageExpectation",o),y=b.$$proto,x=b.$$scope;return y.error_generator=y.method_double=y.order_group=y.argument_list_matcher=y.expected_received_count=y.at_least=y.yield_receiver_to_implementation_block=y.args_to_yield=y.eval_context=y.message=y.exactly=y.at_most=y.actual_received_count=y.expected_from=y.ordered=y.similar_messages=y.failed_fast=r,b.$attr_accessor("error_generator","implementation"),b.$attr_reader("message"),b.$attr_reader("orig_object"),b.$attr_writer("expected_received_count","expected_from","argument_list_matcher"),b.$protected("expected_received_count=","expected_from=","error_generator","error_generator=","implementation="),y.$initialize=s=function(e,t,n,$,o,a){var c,l,u=this,_=s.$$p,p=_||r;return null==o&&(o=1),null==a&&(a=i([],{})),s.$$p=null,u.error_generator=e,c=[a],l=u.error_generator,l["$opts="].apply(l,c),c[c.length-1],u.expected_from=n,u.method_double=$,u.orig_object=u.method_double.$object(),u.message=u.method_double.$method_name(),u.actual_received_count=0,u.expected_received_count=o,u.argument_list_matcher=x.get("ArgumentListMatcher").$$scope.get("MATCH_ALL"),u.order_group=t,u.order_group.$register(u),u.ordered=!1,u.at_least=u.at_most=u.exactly=r,u.args_to_yield=[],u.failed_fast=r,u.eval_context=r,u.yield_receiver_to_implementation_block=!1,u.implementation=x.get("Implementation").$new(),c=[p],l=u,l["$inner_implementation_action="].apply(l,c),c[c.length-1]},y.$expected_args=function(){var e=this;return e.argument_list_matcher.$expected_args()},y.$and_return=c=function(e){var t,n,o,a=this,i=c.$$p,s=i||r;return e=$.call(arguments,0),c.$$p=null,(t=a["$negative?"]())===r||t.$$is_boolean&&1!=t?(((t=(n=a["$ignoring_args?"]())!==!1&&n!==r?n:(o=a.expected_received_count["$=="](0))?a.at_least:o)===r||t.$$is_boolean&&1!=t)&&(a.expected_received_count=[a.expected_received_count,e.$size()].$max()),s!==!1&&s!==r?(t=[s],n=a,n["$inner_implementation_action="].apply(n,t),t[t.length-1]):(t=[x.get("AndReturnImplementation").$new(e)],n=a,n["$terminal_implementation_action="].apply(n,t),t[t.length-1]),r):a.$raise("`and_return` is not supported with negative message expectations")},y.$and_yield_receiver_to_implementation=function(){var e=this;return e.yield_receiver_to_implementation_block=!0,e},y["$yield_receiver_to_implementation_block?"]=function(){var e=this;return e.yield_receiver_to_implementation_block},y.$and_call_original=function(){var e,t=this;return(e=x.get("RSpec").$$scope.get("Mocks").$$scope.get("TestDouble")["$==="](t.method_double.$object()))===r||e.$$is_boolean&&1!=e?((e=t.$implementation().$inner_action())===r||e.$$is_boolean&&1!=e||x.get("RSpec").$warning("You're overriding a previous implementation for this stub"),t.implementation=x.get("AndCallOriginalImplementation").$new(t.method_double.$original_method()),t.yield_receiver_to_implementation_block=!1):t.error_generator.$raise_only_valid_on_a_partial_mock("and_call_original")},y.$and_raise=function(e,t){var n,$,o,a,i,s=this;return null==e&&(e=x.get("RuntimeError")),null==t&&(t=r),(n=e["$respond_to?"]("exception"))===r||n.$$is_boolean&&1!=n||(e=function(){return t!==!1&&t!==r?e.$exception(t):e.$exception()}()),n=[(o=(a=x.get("Proc")).$new,o.$$p=(i=function(){var t=i.$$s||this;return t.$raise(e)},i.$$s=s,i),o).call(a)],$=s,$["$terminal_implementation_action="].apply($,n),n[n.length-1],r},y.$and_throw=function(e){var t,n,o,a,i,s=this;return e=$.call(arguments,0),t=[(o=(a=x.get("Proc")).$new,o.$$p=(i=function(){var t,r=i.$$s||this;return(t=r).$throw.apply(t,[].concat(e))},i.$$s=s,i),o).call(a)],n=s,n["$terminal_implementation_action="].apply(n,t),t[t.length-1],r},y.$and_yield=l=function(t){var o,a,i=this,s=l.$$p,c=s||r;return t=$.call(arguments,0),l.$$p=null,c!==!1&&c!==r&&e.$yield1(c,i.eval_context=x.get("Object").$new())===n?n.$v:(i.args_to_yield["$<<"](t),o=[x.get("AndYieldImplementation").$new(i.args_to_yield,i.eval_context,i.error_generator)],a=i,a["$initial_implementation_action="].apply(a,o),o[o.length-1],i)},y["$matches?"]=function(e,t){var r,n,o=this;return t=$.call(arguments,1),(r=o.message["$=="](e))?(n=o.argument_list_matcher)["$args_match?"].apply(n,[].concat(t)):r},y.$invoke=u=function(e,t){var n,o,a,i,s=this,c=u.$$p,l=c||r;t=$.call(arguments,1),u.$$p=null,(n=s["$yield_receiver_to_implementation_block?"]())===r||n.$$is_boolean&&1!=n||t.$unshift(s.$orig_object()),(n=(o=s["$negative?"]())!==!1&&o!==r?o:(a=(i=s.exactly)!==!1&&i!==r?i:s.at_most,a!==!1&&a!==r?s.actual_received_count["$=="](s.expected_received_count):a))===r||n.$$is_boolean&&1!=n||(s.actual_received_count=s.actual_received_count["$+"](1),s.failed_fast=!0,(n=s.error_generator).$raise_expectation_error.apply(n,[s.message,s.expected_received_count,s.argument_list_matcher,s.actual_received_count,s.$expectation_count_type()].concat(t))),s.order_group.$handle_order_constraint(s);try{return(o=s.$implementation()["$present?"]())===r||o.$$is_boolean&&1!=o?e!==!1&&e!==r?(o=(i=e).$invoke,o.$$p=l.$to_proc(),o).apply(i,[r].concat(t)):r:(o=(a=s.$implementation()).$call,o.$$p=l.$to_proc(),o).apply(a,[].concat(t))}finally{s.actual_received_count=s.actual_received_count["$+"](1)}},y["$negative?"]=function(){var e,t=this;return(e=t.expected_received_count["$=="](0))?t.at_least["$!"]():e},y["$called_max_times?"]=function(){var e,t,n,$=this;return n=$.expected_received_count["$=="]("any")["$!"](),t=n!==!1&&n!==r?$.at_least["$!"]():n,e=t!==!1&&t!==r?$.expected_received_count["$>"](0):t,e!==!1&&e!==r?$.actual_received_count["$>="]($.expected_received_count):e},y.$matches_name_but_not_args=function(e,t){var r,n,o=this;return t=$.call(arguments,1),(r=o.message["$=="](e))?(n=o.argument_list_matcher)["$args_match?"].apply(n,[].concat(t))["$!"]():r},y.$verify_messages_received=function(){var e,t,n,$=this;return(e=(t=x.get("InsertOntoBacktrace")).$line,e.$$p=(n=function(){var e,t,$=n.$$s||this;return(e=(t=$["$expected_messages_received?"]())!==!1&&t!==r?t:$["$failed_fast?"]())===r||e.$$is_boolean&&1!=e?$.$generate_error():r},n.$$s=$,n),e).call(t,$.expected_from)},y["$expected_messages_received?"]=function(){var e,t,n,$=this;return(e=(t=(n=$["$ignoring_args?"]())!==!1&&n!==r?n:$["$matches_exact_count?"]())!==!1&&t!==r?t:$["$matches_at_least_count?"]())!==!1&&e!==r?e:$["$matches_at_most_count?"]()},y["$ensure_expected_ordering_received!"]=function(){var e,t=this;return(e=t.ordered)===r||e.$$is_boolean&&1!=e||t.order_group.$verify_invocation_order(t),!0},y["$ignoring_args?"]=function(){var e=this;return e.expected_received_count["$=="]("any")},y["$matches_at_least_count?"]=function(){var e,t=this;return e=t.at_least,e!==!1&&e!==r?t.actual_received_count["$>="](t.expected_received_count):e},y["$matches_at_most_count?"]=function(){var e,t=this;return e=t.at_most,e!==!1&&e!==r?t.actual_received_count["$<="](t.expected_received_count):e},y["$matches_exact_count?"]=function(){var e=this;return e.expected_received_count["$=="](e.actual_received_count)},y.$similar_messages=function(){var e,t=this;return(e=t.similar_messages)!==!1&&e!==r?e:t.similar_messages=[]},y.$advise=function(e){var t=this;return e=$.call(arguments,0),t.$similar_messages()["$<<"](e)},y.$generate_error=function(){var e,t,n=this;return(e=n.$similar_messages()["$empty?"]())===r||e.$$is_boolean&&1!=e?(t=n.error_generator).$raise_similar_message_args_error.apply(t,[n].concat(n.similar_messages)):(e=n.error_generator).$raise_expectation_error.apply(e,[n.message,n.expected_received_count,n.argument_list_matcher,n.actual_received_count,n.$expectation_count_type()].concat(n.$expected_args()))},y.$expectation_count_type=function(){var e,t=this;return(e=t.at_least)===r||e.$$is_boolean&&1!=e?(e=t.at_most)===r||e.$$is_boolean&&1!=e?r:"at_most":"at_least"},y.$description=function(){var e,t=this;return(e=t.error_generator).$describe_expectation.apply(e,[t.message,t.expected_received_count,t.actual_received_count].concat(t.$expected_args()))},y.$raise_out_of_order_error=function(){var e=this;return e.error_generator.$raise_out_of_order_error(e.message)},y.$with=_=function(e){var t,n,o=this,a=_.$$p,i=a||r;return e=$.call(arguments,0),_.$$p=null,(t=e["$empty?"]())===r||t.$$is_boolean&&1!=t||o.$raise(x.get("ArgumentError"),"`with` must have at least one argument. Use `no_args` matcher to set the expectation of receiving no arguments."),t=[i],n=o,n["$inner_implementation_action="].apply(n,t),t[t.length-1],o.argument_list_matcher=(t=x.get("ArgumentListMatcher")).$new.apply(t,[].concat(e)),o},y.$exactly=p=function(e){var t,n,$=this,o=p.$$p,a=o||r;return p.$$p=null,t=[a],n=$,n["$inner_implementation_action="].apply(n,t),t[t.length-1],$.$set_expected_received_count("exactly",e),$},y.$at_least=d=function(e){var t,n,$=this,o=d.$$p,a=o||r;return d.$$p=null,$.$set_expected_received_count("at_least",e),e["$=="](0)&&$.$raise("at_least(0) has been removed, use allow(...).to receive(:message) instead"),t=[a],n=$,n["$inner_implementation_action="].apply(n,t),t[t.length-1],$},y.$at_most=f=function(e){var t,n,$=this,o=f.$$p,a=o||r;return f.$$p=null,t=[a],n=$,n["$inner_implementation_action="].apply(n,t),t[t.length-1],$.$set_expected_received_count("at_most",e),$},y.$times=h=function(){var e,t,n=this,$=h.$$p,o=$||r;return h.$$p=null,e=[o],t=n,t["$inner_implementation_action="].apply(t,e),e[e.length-1],n},y.$never=function(){var e,t=this;return(e=t["$negative?"]())===r||e.$$is_boolean&&1!=e||x.get("ErrorGenerator").$raise_double_negation_error("expect(obj)"),t.expected_received_count=0,t},y.$once=m=function(){var e,t,n=this,$=m.$$p,o=$||r;return m.$$p=null,e=[o],t=n,t["$inner_implementation_action="].apply(t,e),e[e.length-1],n.$set_expected_received_count("exactly",1),n},y.$twice=g=function(){var e,t,n=this,$=g.$$p,o=$||r;return g.$$p=null,e=[o],t=n,t["$inner_implementation_action="].apply(t,e),e[e.length-1],n.$set_expected_received_count("exactly",2),n},y.$ordered=v=function(){var e,t,n=this,$=v.$$p,o=$||r;return v.$$p=null,e=[o],t=n,t["$inner_implementation_action="].apply(t,e),e[e.length-1],n.ordered=!0,n},y["$ordered?"]=function(){var e=this;return e.ordered},y["$negative_expectation_for?"]=function(e){var t,r=this;return(t=r.message["$=="](e))?r["$negative?"]():t},y["$actual_received_count_matters?"]=function(){var e,t,n=this;return(e=(t=n.at_least)!==!1&&t!==r?t:n.at_most)!==!1&&e!==r?e:n.exactly},y["$increase_actual_received_count!"]=function(){var e=this;return e.actual_received_count=e.actual_received_count["$+"](1)},b.$private(),y["$failed_fast?"]=function(){var e=this;return e.failed_fast},y.$set_expected_received_count=function(e,t){var n=this,$=r;return n.at_least=e["$=="]("at_least"),n.at_most=e["$=="]("at_most"),n.exactly=e["$=="]("exactly"),n.expected_received_count=function(){return $=t,x.get("Numeric")["$==="]($)?t:"once"["$==="]($)?1:"twice"["$==="]($)?2:r}()},y["$initial_implementation_action="]=function(e){var t,r,n=this;return t=[e],r=n.$implementation(),r["$initial_action="].apply(r,t),t[t.length-1]},y["$inner_implementation_action="]=function(e){var t,n,$=this;return(t=$.$implementation().$inner_action())===r||t.$$is_boolean&&1!=t||x.get("RSpec").$warning("You're overriding a previous implementation for this stub"),e!==!1&&e!==r?(t=[e],n=$.$implementation(),n["$inner_action="].apply(n,t),t[t.length-1]):r},y["$terminal_implementation_action="]=function(e){var t,r,n=this;return t=[e],r=n.$implementation(),r["$terminal_action="].apply(r,t),t[t.length-1]},r&&"terminal_implementation_action="}(s,null),function(e,$super){function t(){}var n,o=t=a(e,$super,"AndYieldImplementation",t),i=o.$$proto;return o.$$scope,i.args_to_yield=i.eval_context=i.error_generator=r,i.$initialize=function(e,t,r){var n=this;return n.args_to_yield=e,n.eval_context=t,n.error_generator=r},i.$call=n=function(e){var t,o,a,i=this,s=n.$$p,c=s||r,l=r;return e=$.call(arguments,0),n.$$p=null,o=i.args_to_yield["$empty?"](),(t=o!==!1&&o!==r?i.eval_context["$nil?"]():o)===r||t.$$is_boolean&&1!=t?(c!==!1&&c!==r||i.error_generator.$raise_missing_block_error(i.args_to_yield),l=r,(t=(o=i.args_to_yield).$each,t.$$p=(a=function(e){var t,n,$=a.$$s||this;return null==$.error_generator&&($.error_generator=r),null==$.eval_context&&($.eval_context=r),null==e&&(e=r),(t=(n=c.$arity()["$>"](-1))?e.$length()["$=="](c.$arity())["$!"]():n)===r||t.$$is_boolean&&1!=t||$.error_generator.$raise_wrong_arity_error(e,c.$arity()),l=function(){return(t=$.eval_context)===r||t.$$is_boolean&&1!=t?(t=c).$call.apply(t,[].concat(e)):(t=(n=$.eval_context).$instance_exec,t.$$p=c.$to_proc(),t).apply(n,[].concat(e))}()},a.$$s=i,a),t).call(o),l):r},r&&"call"}(s,null),function(e,$super){function t(){}var n,o=t=a(e,$super,"AndReturnImplementation",t),i=o.$$proto;return o.$$scope,i.values_to_return=r,i.$initialize=function(e){var t=this;return t.values_to_return=e},i.$call=n=function(e){var t=this;return n.$$p,e=$.call(arguments,0),n.$$p=null,t.values_to_return.$size()["$>"](1)?t.values_to_return.$shift():t.values_to_return.$first()},r&&"call"}(s,null),function(e,$super){function t(){}var n,o=t=a(e,$super,"Implementation",t),i=o.$$proto;return o.$$scope,o.$attr_accessor("initial_action","inner_action","terminal_action"),i.$call=n=function(e){var t,o,a,i=this,s=n.$$p,c=s||r;return e=$.call(arguments,0),n.$$p=null,(t=(o=i.$actions()).$map,t.$$p=(a=function(t){var n,$;return a.$$s||this,null==t&&(t=r),(n=($=t).$call,n.$$p=c.$to_proc(),n).apply($,[].concat(e))},a.$$s=i,a),t).call(o).$last()},i["$present?"]=function(){var e=this;return e.$actions()["$any?"]()},o.$private(),i.$actions=function(){var e=this;return[e.$initial_action(),e.$inner_action(),e.$terminal_action()].$compact()},r&&"actions"}(s,null),function(t,$super){function n(){}var o,i=n=a(t,$super,"AndCallOriginalImplementation",n),s=i.$$proto,c=i.$$scope;return s.method=r,s.$initialize=function(e){var t=this;return t.method=e},e.cdecl(c,"CannotModifyFurtherError",c.get("Class").$new(c.get("StandardError"))),s["$initial_action="]=function(){var e=this;return e.$raise(e.$cannot_modify_further_error())},s["$inner_action="]=function(){var e=this;return e.$raise(e.$cannot_modify_further_error())},s["$terminal_action="]=function(){var e=this;return e.$raise(e.$cannot_modify_further_error())},s["$present?"]=function(){return!0},s.$inner_action=function(){return!0},s.$call=o=function(e){var t,n,a=this,i=o.$$p,s=i||r;return e=$.call(arguments,0),o.$$p=null,(t=(n=a.method).$call,t.$$p=s.$to_proc(),t).apply(n,[].concat(e))},i.$private(),s.$cannot_modify_further_error=function(){return c.get("CannotModifyFurtherError").$new("This method has already been configured "["$+"]("to call the original implementation, and cannot be modified further."))},r&&"cannot_modify_further_error"}(s,null),function(t,$super){function $(){}var o,i=$=a(t,$super,"InsertOntoBacktrace",$),s=(i.$$proto,i.$$scope);return e.defs(i,"$line",o=function(t){var $,a=o.$$p,i=a||r,c=r;o.$$p=null;try{return $=e.$yieldX(i,[]),$===n?$:$}catch(l){if(e.$rescue(l,[s.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError")]))return c=l,c.$backtrace().$insert(0,t),s.get("Kernel").$raise(c);throw l}}),r&&"line"}(s,null)}(s)}(t)},Opal.modules["rspec/mocks/method_double"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$attr_reader","$new","$original_method","$method_handle_for","$method_name","$__send__","$to_proc","$alias_method","$===","$private_method_defined?","$object_singleton_class","$protected_method_defined?","$visibility","$stash","$define_proxy_method","$save_original_method!","$class_exec","$define_method","$proxy_method_invoked","$message_received","$method_is_stashed?","$restore","$restore_original_visibility","$method_defined?","$each","$verify_messages_received","$expectations","$restore_original_method","$clear","$stubs","$configure_method","$message_expectation_class","$<<","$unshift","$setup_simple_method_double","$any?","$add_stub","$empty?","$raise_method_not_stubbed_error","$reset","$delete","$raise"]),function(t){var i=$(t,"RSpec");i.$$proto,i.$$scope,function(t){var i=$(t,"Mocks");i.$$proto,i.$$scope,function(t,$super){function $(){}var i,s,c,l,u=$=o(t,$super,"MethodDouble",$),_=u.$$proto,p=u.$$scope;return _.original_method=_.method_stasher=_.proxy=_.object=_.method_name=_.method_is_proxied=_.original_visibility=r,u.$attr_reader("method_name","object","expectations","stubs"),_.$initialize=function(e,t,n){var $=this;return $.method_name=t,$.object=e,$.proxy=n,$.original_visibility=r,$.method_stasher=p.get("InstanceMethodStasher").$new(e,t),$.method_is_proxied=!1,$.expectations=[],$.stubs=[]},_.$original_method=function(){var e,t,$,o,a,i=this;return(e=i.original_method)!==!1&&e!==r?e:i.original_method=(t=($=i.method_stasher.$original_method())!==!1&&$!==r?$:i.proxy.$method_handle_for(i.$method_name()))!==!1&&t!==r?t:($=(o=p.get("Proc")).$new,$.$$p=(a=function(e){var t,$,o,i=a.$$s||this;return null==i.object&&(i.object=r),null==i.method_name&&(i.method_name=r),e=n.call(arguments,0),t=a.$$p||r,a.$$p=null,($=(o=i.object).$__send__,$.$$p=t.$to_proc(),$).apply(o,["method_missing",i.method_name].concat(e))},a.$$s=i,a),$).call(o)},u.$alias_method("save_original_method!","original_method"),_.$visibility=function(){var e,t=this;return(e=p.get("TestDouble")["$==="](t.object))===r||e.$$is_boolean&&1!=e?(e=t.$object_singleton_class()["$private_method_defined?"](t.method_name))===r||e.$$is_boolean&&1!=e?(e=t.$object_singleton_class()["$protected_method_defined?"](t.method_name))===r||e.$$is_boolean&&1!=e?"public":"protected":"private":"public"},_.$object_singleton_class=function(){var e=this;return function(e){return e.$$scope,e.$$proto,e}(e.object.$singleton_class())},_.$configure_method=function(){var e,t=this;return t.original_visibility=[t.$visibility(),t.$method_name()],((e=t.method_is_proxied)===r||e.$$is_boolean&&1!=e)&&t.method_stasher.$stash(),t.$define_proxy_method()},_.$define_proxy_method=function(){var e,t,$,o=this;return(e=o.method_is_proxied)===r||e.$$is_boolean&&1!=e?(o["$save_original_method!"](),(e=(t=o.$object_singleton_class()).$class_exec,e.$$p=($=function(e,t,o){var a,i,s,c=$.$$s||this;
return null==e&&(e=r),null==t&&(t=r),null==o&&(o=r),(a=(i=c).$define_method,a.$$p=(s=function(t){var $,o,a,i=s.$$s||this;return t=n.call(arguments,0),$=s.$$p||r,s.$$p=null,(o=(a=e).$proxy_method_invoked,o.$$p=$.$to_proc(),o).apply(a,[i].concat(t))},s.$$s=c,s),a).call(i,t),c.$__send__(o,t)},$.$$s=o,$),e).call(t,o,o.$method_name(),o.$visibility()),o.method_is_proxied=!0):r},_.$proxy_method_invoked=i=function(e,t){var $,o,a=this,s=i.$$p,c=s||r;return t=n.call(arguments,1),i.$$p=null,($=(o=a.proxy).$message_received,$.$$p=c.$to_proc(),$).apply(o,[a.$method_name()].concat(t))},_.$restore_original_method=function(){var e,t=this;return(e=t.method_is_proxied)===r||e.$$is_boolean&&1!=e?r:(t.$object_singleton_class().$__send__("remove_method",t.method_name),(e=t.method_stasher["$method_is_stashed?"]())===r||e.$$is_boolean&&1!=e||t.method_stasher.$restore(),t.$restore_original_visibility(),t.method_is_proxied=!1)},_.$restore_original_visibility=function(){var e,t,n,$=this;return t=$.original_visibility,(e=t!==!1&&t!==r?(n=$.$object_singleton_class()["$method_defined?"]($.method_name))!==!1&&n!==r?n:$.$object_singleton_class()["$private_method_defined?"]($.method_name):t)===r||e.$$is_boolean&&1!=e?r:(e=$.$object_singleton_class()).$__send__.apply(e,[].concat($.original_visibility))},_.$verify=function(){var e,t,n,$=this;return(e=(t=$.$expectations()).$each,e.$$p=(n=function(e){return n.$$s||this,null==e&&(e=r),e.$verify_messages_received()},n.$$s=$,n),e).call(t)},_.$reset=function(){var e=this;return e.$restore_original_method(),e.$clear()},_.$clear=function(){var e=this;return e.$expectations().$clear(),e.$stubs().$clear()},_.$message_expectation_class=function(){return p.get("MessageExpectation")},_.$add_expectation=s=function(e,t,n,$){var o,a,i=this,c=s.$$p,l=c||r,u=r;return s.$$p=null,i.$configure_method(),u=(o=(a=i.$message_expectation_class()).$new,o.$$p=l.$to_proc(),o).call(a,e,t,n,i,1,$),i.$expectations()["$<<"](u),u},_.$build_expectation=function(e,t){var n=this,$=r;return $=p.get("IGNORED_BACKTRACE_LINE"),n.$message_expectation_class().$new(e,t,$,n)},_.$add_stub=c=function(e,t,n,$){var o,i,s=this,l=c.$$p,u=l||r,_=r;return null==$&&($=a([],{})),c.$$p=null,s.$configure_method(),_=(o=(i=s.$message_expectation_class()).$new,o.$$p=u.$to_proc(),o).call(i,e,t,n,s,"any",$),s.$stubs().$unshift(_),_},_.$add_simple_stub=function(e,t){var r=this;return r.$setup_simple_method_double(e,t,r.$stubs())},_.$add_simple_expectation=function(e,t,r,n){var $=this;return $.$setup_simple_method_double(e,t,$.$expectations(),r,n)},_.$setup_simple_method_double=function(e,t,n,$,o){var a=this,i=r;return null==$&&($=r),null==o&&(o=r),a.$define_proxy_method(),i=p.get("SimpleMessageExpectation").$new(e,t,$,o),n.$unshift(i),i},_.$add_default_stub=l=function(e){var t,$,o=this,a=l.$$p,i=a||r;return e=n.call(arguments,0),l.$$p=null,(t=o.$stubs()["$any?"]())===r||t.$$is_boolean&&1!=t?(t=($=o).$add_stub,t.$$p=i.$to_proc(),t).apply($,[].concat(e)):r},_.$remove_stub=function(){var e,t=this;return(e=t.$stubs()["$empty?"]())===r||e.$$is_boolean&&1!=e||t.$raise_method_not_stubbed_error(),(e=t.$expectations()["$empty?"]())===r||e.$$is_boolean&&1!=e?t.$stubs().$clear():t.$reset()},_.$remove_single_stub=function(e){var t,n,$=this;return $.$stubs().$delete(e),n=$.$stubs()["$empty?"](),(t=n!==!1&&n!==r?$.$expectations()["$empty?"]():n)===r||t.$$is_boolean&&1!=t?r:$.$restore_original_method()},_.$raise_method_not_stubbed_error=function(){var e=this;return e.$raise(p.get("MockExpectationError"),"The method `"+e.$method_name()+"` was not stubbed or was already unstubbed")},e.cdecl(p,"IGNORED_BACKTRACE_LINE","this backtrace line is ignored")}(i,null)}(i)}(t)},Opal.modules["rspec/mocks/method_reference"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=e.breaker,$=(e.slice,e.module),o=e.klass;return e.add_stubs(["$when_loaded","$method_implemented?","$method_defined?","$original_method","$implemented?","$private","$defined?","$find_method","$==","$<","$to_i","$[]","$split","$instance_method","$dup","$respond_to?","$method"]),function(t){var a=$(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=$(t,"Mocks"),i=(a.$$proto,a.$$scope);!function(t,$super){function $(){}var a,i,s=$=o(t,$super,"MethodReference",$),c=s.$$proto;return s.$$scope,c.module_reference=r,c.$initialize=function(e,t){var r=this;return r.module_reference=e,r.method_name=t},c["$implemented?"]=function(){var e,t,n,$=this;return(e=(t=$.module_reference).$when_loaded,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=r),t["$method_implemented?"](e)},n.$$s=$,n),e).call(t)},c["$defined?"]=function(){var e,t,n,$=this;return(e=(t=$.module_reference).$when_loaded,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=r),t["$method_defined?"](e)},n.$$s=$,n),e).call(t)},c.$when_defined=a=function(){var t,$=this,o=a.$$p,i=o||r,s=r;return a.$$p=null,(t=s=$.$original_method())===r||t.$$is_boolean&&1!=t?r:(t=e.$yield1(i,s),t===n?t:t)},c.$when_unimplemented=i=function(){var t,$=this,o=i.$$p,a=o||r;return i.$$p=null,(t=$["$implemented?"]())===r||t.$$is_boolean&&1!=t?(t=e.$yieldX(a,[]),t===n?t:t):r},s.$private(),c.$original_method=function(){var e,t,n,$=this;return(e=(t=$.module_reference).$when_loaded,e.$$p=(n=function(e){var t,$=n.$$s||this;return null==e&&(e=r),t=$["$defined?"](),t!==!1&&t!==r?$.$find_method(e):t},n.$$s=$,n),e).call(t)},r&&"original_method"}(a,null),function(t,$super){function n(){}var $,a,i=n=o(t,$super,"InstanceMethodReference",n),s=i.$$proto,c=i.$$scope;return s.method_name=r,i.$private(),s["$method_implemented?"]=function(e){var t=this;return e["$method_defined?"](t.method_name)},e.defn(i,"$method_defined?",s["$method_implemented?"]),($=(a=c.get("RUBY_PLATFORM")["$=="]("java"))?c.get("JRUBY_VERSION").$split(".")["$[]"](-1).$to_i()["$<"](5):a)===r||$.$$is_boolean&&1!=$?(s.$find_method=function(e){var t=this;return e.$instance_method(t.method_name)},r&&"find_method"):(s.$find_method=function(e){var t=this;return e.$dup().$instance_method(t.method_name)},r&&"find_method")}(a,i.get("MethodReference")),function(e,$super){function t(){}var n=t=o(e,$super,"ObjectMethodReference",t),$=n.$$proto;return n.$$scope,$.method_name=r,n.$private(),$["$method_implemented?"]=function(e){var t=this;return e["$respond_to?"](t.method_name)},$["$method_defined?"]=function(e){var t=this;return function(e){return e.$$scope,e.$$proto,e}(e.$singleton_class())["$method_defined?"](t.method_name)},$.$find_method=function(e){var t=this;return e.$method(t.method_name)},r&&"find_method"}(a,i.get("MethodReference"))}(a)}(t)},Opal.modules["rspec/mocks/mock"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=(e.nil,e.breaker,e.slice,e.module),n=e.klass;return e.add_stubs(["$include"]),function(e){var t=r(e,"RSpec");t.$$proto,t.$$scope,function(e){var t=r(e,"Mocks");t.$$proto,t.$$scope,function(e,$super){function t(){}var r=t=n(e,$super,"Mock",t),$=(r.$$proto,r.$$scope);return r.$include($.get("TestDouble"))}(t,null)}(t)}(t)},Opal.modules["rspec/mocks/mutate_const"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=e.breaker,$=e.slice,o=e.module,a=e.klass,i=e.hash2,s=e.hash;return e.add_stubs(["$==","$arity","$method","$const_defined?","$const_defined_on?","$const_get","$raise","$name","$select","$constants","$inject","$get_const_defined_on","$split","$normalize_const_name","$!","$===","$join","$sub","$extend","$attr_reader","$attr_accessor","$attr_writer","$class","$new","$previously_defined=","$recursive_const_defined?","$stubbed=","$hidden=","$previously_defined?","$original_value=","$recursive_const_get","$private_class_method","$find","$to_constant","$unmutated","$to_proc","$raise_on_invalid_const","$mutate","$fetch","$transfer_nested_constants?","$configuration","$include","$pop","$full_constant_name","$original_value","$__send__","$const_set","$verify_constants_to_transfer!","$transfer_nested_constants","$each","$respond_to?","$+","$map","$-","$constants_defined_on","$any?","$dup","$shift","$first","$register_mutator","$rspec_reset","$reverse","$mutators","$clear","$<<","$lambda"]),function(t){var c=o(t,"RSpec");c.$$proto,c.$$scope,function(t){var c=o(t,"Mocks"),l=(c.$$proto,c.$$scope);!function(t){var $,a=o(t,"RecursiveConstMethods"),i=a.$$proto,s=a.$$scope;s.get("Module").$method("const_defined?").$arity()["$=="](1)?(i["$const_defined_on?"]=function(e,t){return e["$const_defined?"](t)},i.$get_const_defined_on=function(e,t){var n,$=this;return(n=$["$const_defined_on?"](e,t))===r||n.$$is_boolean&&1!=n?$.$raise(s.get("NameError"),"uninitialized constant "+e.$name()+"::"+t):e.$const_get(t)},i.$constants_defined_on=function(e){var t,n,$,o=this;return(t=(n=e.$constants()).$select,t.$$p=($=function(t){var n=$.$$s||this;return null==t&&(t=r),n["$const_defined_on?"](e,t)},$.$$s=o,$),t).call(n)}):(i["$const_defined_on?"]=function(e,t){return e["$const_defined?"](t,!1)},i.$get_const_defined_on=function(e,t){return e.$const_get(t,!1)},i.$constants_defined_on=function(e){return e.$constants(!1)}),i.$recursive_const_get=function(e){var t,n,$,o=this;return(t=(n=o.$normalize_const_name(e).$split("::")).$inject,t.$$p=($=function(e,t){var n=$.$$s||this;return null==e&&(e=r),null==t&&(t=r),n.$get_const_defined_on(e,t)},$.$$s=o,$),t).call(n,s.get("Object"))},i["$recursive_const_defined?"]=$=function(t){try{var o,a,i,c=this,l=$.$$p,u=l||r;return $.$$p=null,(o=(a=c.$normalize_const_name(t).$split("::")).$inject,o.$$p=(i=function(t,$){var o,a,c=i.$$s||this;return mod=t[0],full_name=t[1],null==$&&($=r),(o=(a=u!==r)?s.get("Module")["$==="](mod)["$!"]():a)===r||o.$$is_boolean&&1!=o||e.$yieldX(u,[full_name,$])!==n?(((o=c["$const_defined_on?"](mod,$))===r||o.$$is_boolean&&1!=o)&&e.$return(!1),[c.$get_const_defined_on(mod,$),[mod,$].$join("::")]):n.$v},i.$$s=c,i),o).call(a,[s.get("Object"),""])}catch(_){if(_===e.returner)return _.$v;throw _}},i.$normalize_const_name=function(e){return e.$sub(/\A::/,"")},e.donate(a,["$const_defined_on?","$get_const_defined_on","$constants_defined_on","$const_defined_on?","$get_const_defined_on","$constants_defined_on","$recursive_const_get","$recursive_const_defined?","$normalize_const_name"])}(c),function(t,$super){function n(){}var $=n=a(t,$super,"Constant",n),o=$.$$proto,i=$.$$scope;return o.previously_defined=o.stubbed=o.hidden=r,$.$extend(i.get("RecursiveConstMethods")),o.$initialize=function(e){var t=this;return t.name=e,t.previously_defined=!1,t.stubbed=!1,t.hidden=!1},$.$attr_reader("name"),$.$attr_accessor("original_value"),$.$attr_writer("previously_defined","stubbed","hidden"),o["$previously_defined?"]=function(){var e=this;return e.previously_defined},o["$mutated?"]=function(){var e,t=this;return(e=t.stubbed)!==!1&&e!==r?e:t.hidden},o["$stubbed?"]=function(){var e=this;return e.stubbed},o["$hidden?"]=function(){var e=this;return e.hidden},o.$to_s=function(){var e=this;return"#<"+e.$class().$name()+" "+e.$name()+">"},e.defn($,"$inspect",o.$to_s),e.defs($,"$unmutated",function(e){var t,n,$=this,o=r;return o=$.$new(e),t=[$["$recursive_const_defined?"](e)],n=o,n["$previously_defined="].apply(n,t),t[t.length-1],t=[!1],n=o,n["$stubbed="].apply(n,t),t[t.length-1],t=[!1],n=o,n["$hidden="].apply(n,t),t[t.length-1],(t=o["$previously_defined?"]())===r||t.$$is_boolean&&1!=t||(t=[$.$recursive_const_get(e)],n=o,n["$original_value="].apply(n,t),t[t.length-1]),o}),$.$private_class_method("unmutated"),e.defs($,"$original",function(e){var t=this,n=r;return n=i.get("ConstantMutator").$find(e),n!==!1&&n!==r?n.$to_constant():t.$unmutated(e)}),r&&"original"}(c,null),function(t,$super){function o(){}var c=o=a(t,$super,"ConstantMutator",o),l=(c.$$proto,c.$$scope);return c.$extend(l.get("RecursiveConstMethods")),e.defs(c,"$stub",function(e,t,n){var $,o,a,s=this,c=r;return null==n&&(n=i([],{})),c=function(){return($=(o=(a=s)["$recursive_const_defined?"],o.$$p=s.$raise_on_invalid_const().$to_proc(),o).call(a,e))===r||$.$$is_boolean&&1!=$?l.get("UndefinedConstantSetter"):l.get("DefinedConstantReplacer")}(),s.$mutate(c.$new(e,t,n.$fetch("transfer_nested_constants",l.get("RSpec").$$scope.get("Mocks").$configuration()["$transfer_nested_constants?"]()))),t}),e.defs(c,"$hide",function(e){var t,n=this;return(t=n["$recursive_const_defined?"](e))===r||t.$$is_boolean&&1!=t?r:(n.$mutate(l.get("ConstantHider").$new(e,r,i([],{}))),r)}),function(e,$super){function t(){}var n=t=a(e,$super,"BaseMutator",t),$=n.$$proto,o=n.$$scope;return $.full_constant_name=$.context_parts=r,n.$include(o.get("RecursiveConstMethods")),n.$attr_reader("original_value","full_constant_name"),$.$initialize=function(e,t,r){var n=this;return n.full_constant_name=n.$normalize_const_name(e),n.mutated_value=t,n.transfer_nested_constants=r,n.context_parts=n.full_constant_name.$split("::"),n.const_name=n.context_parts.$pop()},$.$to_constant=function(){var e,t,n=this,$=r;return $=o.get("Constant").$new(n.$full_constant_name()),e=[n.$original_value()],t=$,t["$original_value="].apply(t,e),e[e.length-1],$},r&&"to_constant"}(c,null),function(t,$super){function n(){}var o,i=n=a(t,$super,"ConstantHider",n),s=i.$$proto;return i.$$scope,s.context_parts=s.context=s.const_name=s.original_value=r,s.$mutate=function(){var e=this;return e.context=e.$recursive_const_get(e.context_parts.$join("::")),e.original_value=e.$get_const_defined_on(e.context,e.const_name),e.context.$__send__("remove_const",e.const_name)},s.$to_constant=o=function(){var t,n,a=$.call(arguments,0),i=this,s=o.$$p,c=r;return o.$$p=null,c=e.find_super_dispatcher(i,"to_constant",o,s).apply(i,a),t=[!0],n=c,n["$hidden="].apply(n,t),t[t.length-1],t=[!0],n=c,n["$previously_defined="].apply(n,t),t[t.length-1],c},s.$rspec_reset=function(){var e=this;return e.context.$const_set(e.const_name,e.original_value)},r&&"rspec_reset"}(c,l.get("BaseMutator")),function(t,$super){function n(){}var o,i=n=a(t,$super,"DefinedConstantReplacer",n),c=i.$$proto,l=i.$$scope;return c.context_parts=c.context=c.const_name=c.mutated_value=c.original_value=c.transfer_nested_constants=c.full_constant_name=r,c.$mutate=function(){var e=this,t=r;return e.context=e.$recursive_const_get(e.context_parts.$join("::")),e.original_value=e.$get_const_defined_on(e.context,e.const_name),t=e["$verify_constants_to_transfer!"](),e.context.$__send__("remove_const",e.const_name),e.context.$const_set(e.const_name,e.mutated_value),e.$transfer_nested_constants(t)},c.$to_constant=o=function(){var t,n,a=$.call(arguments,0),i=this,s=o.$$p,c=r;return o.$$p=null,c=e.find_super_dispatcher(i,"to_constant",o,s).apply(i,a),t=[!0],n=c,n["$stubbed="].apply(n,t),t[t.length-1],t=[!0],n=c,n["$previously_defined="].apply(n,t),t[t.length-1],c},c.$rspec_reset=function(){var e=this;return e.context.$__send__("remove_const",e.const_name),e.context.$const_set(e.const_name,e.original_value)},c.$transfer_nested_constants=function(e){var t,n,$,o=this;return(t=(n=e).$each,t.$$p=($=function(e){var t=$.$$s||this;return null==t.mutated_value&&(t.mutated_value=r),null==e&&(e=r),t.mutated_value.$const_set(e,t.$get_const_defined_on(t.$original_value(),e))},$.$$s=o,$),t).call(n)},c["$verify_constants_to_transfer!"]=function(){var e,t,n,$,o=this,a=r,i=r;return(e=o.transfer_nested_constants)===r||e.$$is_boolean&&1!=e?[]:((e=(t=s(o.original_value,"the original value",o.mutated_value,"the stubbed value")).$each,e.$$p=(n=function(e,t){var $,o=n.$$s||this;return null==o.full_constant_name&&(o.full_constant_name=r),null==e&&(e=r),null==t&&(t=r),($=e["$respond_to?"]("constants"))===r||$.$$is_boolean&&1!=$?o.$raise(l.get("ArgumentError"),("Cannot transfer nested constants for "+o.full_constant_name+" ")["$+"]("since "+t+" is not a class or module and only classes ")["$+"]("and modules support nested constants.")):r},n.$$s=o,n),e).call(t),(e=l.get("Array")["$==="](o.transfer_nested_constants))===r||e.$$is_boolean&&1!=e?o.$constants_defined_on(o.original_value):(l.get("RUBY_VERSION")["$=="]("1.8.7")&&(o.transfer_nested_constants=(e=($=o.transfer_nested_constants).$map,e.$$p="to_s".$to_proc(),e).call($)),a=o.transfer_nested_constants["$-"](o.$constants_defined_on(o.original_value)),(e=a["$any?"]())===r||e.$$is_boolean&&1!=e||(i=o.$constants_defined_on(o.original_value)["$-"](o.transfer_nested_constants),o.$raise(l.get("ArgumentError"),("Cannot transfer nested constant(s) "+a.$join(" and ")+" ")["$+"]("for "+o.full_constant_name+" since they are not defined. Did you mean ")["$+"](""+i.$join(" or ")+"?"))),o.transfer_nested_constants))},r&&"verify_constants_to_transfer!"}(c,l.get("BaseMutator")),function(t,$super){function o(){}var i,s=o=a(t,$super,"UndefinedConstantSetter",o),c=s.$$proto,l=s.$$scope;return c.context_parts=c.deepest_defined_const=c.const_name=c.mutated_value=c.const_to_remove=r,c.$mutate=function(){var e,t,$,o,a,i=this,s=r,c=r;return s=i.context_parts.$dup(),i.deepest_defined_const=(e=(t=i.context_parts).$inject,e.$$p=($=function(e,t){var o,a=$.$$s||this;return null==e&&(e=r),null==t&&(t=r),(o=a["$const_defined_on?"](e,t))===r||o.$$is_boolean&&1!=o?(n.$v=e,n):(s.$shift(),a.$get_const_defined_on(e,t))},$.$$s=i,$),e).call(t,l.get("Object")),c=(e=(o=s).$inject,e.$$p=(a=function(e,t){return a.$$s||this,null==e&&(e=r),null==t&&(t=r),e.$const_set(t,l.get("Module").$new())},a.$$s=i,a),e).call(o,i.deepest_defined_const),i.const_to_remove=(e=s.$first())!==!1&&e!==r?e:i.const_name,c.$const_set(i.const_name,i.mutated_value)},c.$to_constant=i=function(){var t,n,o=$.call(arguments,0),a=this,s=i.$$p,c=r;return i.$$p=null,c=e.find_super_dispatcher(a,"to_constant",i,s).apply(a,o),t=[!0],n=c,n["$stubbed="].apply(n,t),t[t.length-1],t=[!1],n=c,n["$previously_defined="].apply(n,t),t[t.length-1],c},c.$rspec_reset=function(){var e=this;return e.deepest_defined_const.$__send__("remove_const",e.const_to_remove)},r&&"rspec_reset"}(c,l.get("BaseMutator")),e.defs(c,"$mutate",function(e){var t=this;return t.$register_mutator(e),e.$mutate()}),e.defs(c,"$reset_all",function(){var e,t,n,$=this;return(e=(t=$.$mutators().$reverse()).$each,e.$$p=(n=function(e){return n.$$s||this,null==e&&(e=r),e.$rspec_reset()},n.$$s=$,n),e).call(t),$.$mutators().$clear()}),e.defs(c,"$mutators",function(){var e,t=this;return null==t.mutators&&(t.mutators=r),(e=t.mutators)!==!1&&e!==r?e:t.mutators=[]}),e.defs(c,"$register_mutator",function(e){var t=this;return t.$mutators()["$<<"](e)}),e.defs(c,"$find",function(e){var t,n,$,o=this;return(t=(n=o.$mutators()).$find,t.$$p=($=function(t){return $.$$s||this,null==t&&(t=r),t.$full_constant_name()["$=="](e)},$.$$s=o,$),t).call(n)}),e.defs(c,"$raise_on_invalid_const",function(){var e,t,n,$=this;return(e=(t=$).$lambda,e.$$p=(n=function(e,t){var $=n.$$s||this;return null==e&&(e=r),null==t&&(t=r),$.$raise(("Cannot stub constant "+t+" on "+e+" ")["$+"]("since "+e+" is not a module."))},n.$$s=$,n),e).call(t)}),r&&"raise_on_invalid_const"}(c,null),e.cdecl(l,"ConstantStubber",l.get("ConstantMutator"))}(c)}(t)},Opal.modules["rspec/mocks/object_reference"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=e.breaker,$=(e.slice,e.module),o=e.klass;return e.add_stubs(["$===","$new","$raise","$inspect","$name","$!","$object","$private","$original_value","$original"]),function(t){var a=$(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=$(t,"Mocks"),i=(a.$$proto,a.$$scope);!function(t,$super){function n(){}var $=n=o(t,$super,"ObjectReference",n),a=($.$$proto,$.$$scope);return e.defs($,"$for",function(e,t){var n=this,$=r;return null==t&&(t=!1),function(){return $=e,a.get("Module")["$==="]($)?a.get("DirectModuleReference").$new(e):a.get("String")["$==="]($)?a.get("NamedObjectReference").$new(e):t!==!1&&t!==r?a.get("DirectObjectReference").$new(e):n.$raise(a.get("ArgumentError"),"Module or String expected, got "+e.$inspect())}()}),r&&"for"}(a,null),function(t,$super){function $(){}var a,i=$=o(t,$super,"DirectObjectReference",$),s=i.$$proto,c=i.$$scope;return s.object=r,s.$initialize=function(e){var t=this;return t.object=e},s.$description=function(){var e=this;return e.object.$inspect()},s.$const_to_replace=function(){var e=this;return e.$raise(c.get("ArgumentError"),"Can not perform constant replacement with an object.")},s["$defined?"]=function(){return!0},s.$when_loaded=a=function(){var t,$=this,o=a.$$p,i=o||r;return a.$$p=null,t=e.$yield1(i,$.object),t===n?t:t},r&&"when_loaded"}(a,null),function(t,$super){function n(){}var $=n=o(t,$super,"DirectModuleReference",n),a=$.$$proto;return $.$$scope,a.object=r,a.$const_to_replace=function(){var e=this;return e.object.$name()},e.defn($,"$description",a.$const_to_replace)}(a,i.get("DirectObjectReference")),function(t,$super){function $(){}var a,i=$=o(t,$super,"NamedObjectReference",$),s=i.$$proto,c=i.$$scope;return s.const_name=s.object=r,s.$initialize=function(e){var t=this;return t.const_name=e},s["$defined?"]=function(){var e=this;return e.$object()["$!"]()["$!"]()},s.$const_to_replace=function(){var e=this;return e.const_name},e.defn(i,"$description",s.$const_to_replace),s.$when_loaded=a=function(){var t,$=this,o=a.$$p,i=o||r;return a.$$p=null,(t=$.$object())===r||t.$$is_boolean&&1!=t?r:(t=e.$yield1(i,$.$object()),t===n?t:t)},i.$private(),s.$object=function(){var e,t=this;return(e=t.object)!==!1&&e!==r?e:t.object=c.get("Constant").$original(t.const_name).$original_value()},r&&"object"}(a,null)}(a)}(t)},Opal.modules["rspec/mocks/order_group"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass,o=e.range;return e.add_stubs(["$<<","$==","$find","$to_proc","$remaining_expectations","$each_with_index","$ordered?","$+","$include?","$ready_for?","$consume","$raise_out_of_order_error","$expectations_invoked_in_order?","$clear","$empty?","$private","$[]","$invoked_expectations","$expected_invocations","$select","$compact","$map","$expectation_for"]),function(t){var a=n(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=n(t,"Mocks");a.$$proto,a.$$scope,function(t,$super){function n(){}var a=n=$(t,$super,"OrderGroup",n),i=a.$$proto;return a.$$scope,i.expectations=i.invocation_order=i.index=r,i.$initialize=function(){var e=this;return e.expectations=[],e.invocation_order=[],e.index=0},i.$register=function(e){var t=this;return t.expectations["$<<"](e)},i.$invoked=function(e){var t=this;return t.invocation_order["$<<"](e)},i["$ready_for?"]=function(e){var t,r,n=this;return(t=(r=n.$remaining_expectations()).$find,t.$$p="ordered?".$to_proc(),t).call(r)["$=="](e)},i.$consume=function(){try{var t,n,$,o=this;return(t=(n=o.$remaining_expectations()).$each_with_index,t.$$p=($=function(t,n){var o,a=$.$$s||this;return null==a.index&&(a.index=r),null==t&&(t=r),null==n&&(n=r),(o=t["$ordered?"]())===r||o.$$is_boolean&&1!=o?r:(a.index=a.index["$+"](n["$+"](1)),e.$return(t),void 0)},$.$$s=o,$),t).call(n),r}catch(a){if(a===e.returner)return a.$v;throw a}},i.$handle_order_constraint=function(e){var t,n,$=this;return n=e["$ordered?"](),(t=n!==!1&&n!==r?$.$remaining_expectations()["$include?"](e):n)===r||t.$$is_boolean&&1!=t?r:(t=$["$ready_for?"](e))===r||t.$$is_boolean&&1!=t?e.$raise_out_of_order_error():$.$consume()},i.$verify_invocation_order=function(e){var t,n=this;return((t=n["$expectations_invoked_in_order?"]())===r||t.$$is_boolean&&1!=t)&&e.$raise_out_of_order_error(),!0},i.$clear=function(){var e=this;return e.index=0,e.invocation_order.$clear(),e.expectations.$clear()},i["$empty?"]=function(){var e=this;return e.expectations["$empty?"]()},a.$private(),i.$remaining_expectations=function(){var e,t=this;return(e=t.expectations["$[]"](o(t.index,-1,!1)))!==!1&&e!==r?e:[]},i["$expectations_invoked_in_order?"]=function(){var e=this;return e.$invoked_expectations()["$=="](e.$expected_invocations())},i.$invoked_expectations=function(){var e,t,n,$=this;return(e=(t=$.expectations).$select,e.$$p=(n=function(e){var t,$=n.$$s||this;return null==$.invocation_order&&($.invocation_order=r),null==e&&(e=r),t=e["$ordered?"](),t!==!1&&t!==r?$.invocation_order["$include?"](e):t},n.$$s=$,n),e).call(t)},i.$expected_invocations=function(){var e,t,n,$=this;return(e=(t=$.invocation_order).$map,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=r),t.$expectation_for(e)},n.$$s=$,n),e).call(t).$compact()},i.$expectation_for=function(e){var t,n,$,o=this;return(t=(n=o.expectations).$find,t.$$p=($=function(t){return $.$$s||this,null==t&&(t=r),e["$=="](t)},$.$$s=o,$),t).call(n)},r&&"expectation_for"}(a,null)}(a)}(t)},Opal.modules["rspec/mocks/proxy"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=e.breaker,$=e.slice,o=e.module,a=e.klass,i=e.hash2;return e.add_stubs(["$new","$==","$orig_object","$object","$message","$expectation_ordering","$space","$[]=","$attr_reader","$method_double_for","$null_object?","$!","$add_default_stub","$add_expectation","$to_proc","$add_simple_expectation","$build_expectation","$any?","$expectations","$raise_expectation_on_mocked_method","$stubs","$raise_expectation_on_unstubbed_method","$each","$matches?","$invoke","$call","$matches_name_but_not_args","$raise_unexpected_message_args_error","$add_stub","$add_simple_stub","$remove_stub","$remove_single_stub","$each_value","$verify","$reset","$clear","$detect","$negative_expectation_for?","$invoked","$<<","$record_message_received","$find_matching_expectation","$find_matching_method_stub","$called_max_times?","$actual_received_count_matters?","$increase_actual_received_count!","$find_almost_matching_expectation","$expected_messages_received?","$advise","$has_negative_expectation?","$find_almost_matching_stub","$raise_missing_default_stub_error","$===","$__send__","$superclass","$raise_unexpected_message_error","$private","$[]","$to_sym","$find_best_matching_expectation_for","$find","$any_instance_class_recorder_observing_method?","$class","$build_alias_method_name","$any_instance_recorder_for","$method_handle_for","$configure_method","$already_observing?","$nil?"]),function(t){var s=o(t,"RSpec");s.$$proto,s.$$scope,function(t){var s=o(t,"Mocks"),c=(s.$$proto,s.$$scope);!function(t,$super){function o(){}var s,c,l,u,_,p,d,f,h,m,g=o=a(t,$super,"Proxy",o),v=g.$$proto,b=g.$$scope;return v.null_object=v.object=v.error_generator=v.expectation_ordering=v.messages_received=v.method_doubles=v.order_group=r,e.cdecl(b,"SpecificMessage",(s=(c=b.get("Struct")).$new,s.$$p=(l=function(){var t=l.$$s||this;return e.defn(t,"$==",function(e){var t,r=this;return(t=e.$orig_object()["$=="](r.$object()))?e.$message()["$=="](r.$message()):t}),r&&"=="},l.$$s=g,l),s).call(c,"object","message")),v.$initialize=function(e,t,n,$){var o,a,s,c=this;return null==n&&(n=r),null==$&&($=i([],{})),c.object=e,c.order_group=t,c.name=n,c.error_generator=b.get("ErrorGenerator").$new(e,n),c.expectation_ordering=b.get("RSpec").$$scope.get("Mocks").$space().$expectation_ordering(),c.messages_received=[],c.options=$,c.null_object=!1,c.method_doubles=(o=(a=b.get("Hash")).$new,o.$$p=(s=function(e,t){var n=s.$$s||this;return null==n.object&&(n.object=r),null==e&&(e=r),null==t&&(t=r),e["$[]="](t,b.get("MethodDouble").$new(n.object,t,n))},s.$$s=c,s),o).call(a)},g.$attr_reader("object"),v["$null_object?"]=function(){var e=this;return e.null_object},v.$as_null_object=function(){var e=this;return e.null_object=!0,e.object},v.$method_handle_for=function(){return r},v.$add_message_expectation=u=function(e,t,n){var $,o,a,s,c=this,l=u.$$p,_=l||r,p=r;return null==n&&(n=i([],{})),u.$$p=null,p=c.$method_double_for(t),o=c["$null_object?"](),($=o!==!1&&o!==r?_["$!"]():o)===r||$.$$is_boolean&&1!=$||($=(o=p).$add_default_stub,$.$$p=(a=function(){var e=a.$$s||this;return null==e.object&&(e.object=r),e.object},a.$$s=c,a),$).call(o,c.error_generator,c.expectation_ordering,e,n),($=(s=p).$add_expectation,$.$$p=_.$to_proc(),$).call(s,c.error_generator,c.expectation_ordering,e,n)},v.$add_simple_expectation=function(e,t,r){var n=this;return n.$method_double_for(e).$add_simple_expectation(e,t,n.error_generator,r)},v.$build_expectation=function(e){var t=this,n=r;return n=t.$method_double_for(e),n.$build_expectation(t.error_generator,t.expectation_ordering)},v.$replay_received_message_on=_=function(e){var t,n,$,o=this,a=_.$$p,i=a||r,s=r,c=r;return _.$$p=null,s=e.$message(),c=o.$method_double_for(s),(t=c.$expectations()["$any?"]())===r||t.$$is_boolean&&1!=t||o.error_generator.$raise_expectation_on_mocked_method(s),((t=(n=o["$null_object?"]())!==!1&&n!==r?n:c.$stubs()["$any?"]())===r||t.$$is_boolean&&1!=t)&&o.error_generator.$raise_expectation_on_unstubbed_method(s),(t=(n=o.messages_received).$each,t.$$p=($=function(t,n,o){var a,s;return $.$$s||this,null==t&&(t=r),null==n&&(n=r),null==o&&(o=r),(a=(s=e)["$matches?"].apply(s,[t].concat(n)))===r||a.$$is_boolean&&1!=a?r:(e.$invoke(r),i!==!1&&i!==r?(a=i).$call.apply(a,[].concat(n)):r)},$.$$s=o,$),t).call(n)},v.$check_for_unexpected_arguments=function(e){var t,n,$,o=this;return(t=(n=o.messages_received).$each,t.$$p=($=function(t,n,o){var a,i,s=$.$$s||this;return null==t&&(t=r),null==n&&(n=r),null==o&&(o=r),(a=(i=e).$matches_name_but_not_args.apply(i,[t].concat(n)))===r||a.$$is_boolean&&1!=a?r:(a=s).$raise_unexpected_message_args_error.apply(a,[e].concat(n))},$.$$s=o,$),t).call(n)},v.$add_stub=p=function(e,t,n){var $,o,a=this,s=p.$$p,c=s||r;return null==n&&(n=i([],{})),p.$$p=null,($=(o=a.$method_double_for(t)).$add_stub,$.$$p=c.$to_proc(),$).call(o,a.error_generator,a.expectation_ordering,e,n)},v.$add_simple_stub=function(e,t){var r=this;return r.$method_double_for(e).$add_simple_stub(e,t)},v.$remove_stub=function(e){var t=this;return t.$method_double_for(e).$remove_stub()},v.$remove_single_stub=function(e,t){var r=this;return r.$method_double_for(e).$remove_single_stub(t)},v.$verify=function(){var e,t,n,$=this;try{return(e=(t=$.method_doubles).$each_value,e.$$p=(n=function(e){return n.$$s||this,null==e&&(e=r),e.$verify()},n.$$s=$,n),e).call(t)}finally{$.$reset()}},v.$reset=function(){var e,t,n,$=this;return(e=(t=$.method_doubles).$each_value,e.$$p=(n=function(e){return n.$$s||this,null==e&&(e=r),e.$reset()},n.$$s=$,n),e).call(t),$.messages_received.$clear()},v["$received_message?"]=d=function(e,t){var n,o,a,i=this,s=d.$$p,c=s||r;return t=$.call(arguments,1),d.$$p=null,(n=(o=i.messages_received)["$any?"],n.$$p=(a=function(n){return a.$$s||this,null==n&&(n=r),n["$=="]([e,t,c])},a.$$s=i,a),n).call(o)},v["$has_negative_expectation?"]=function(e){var t,n,$,o=this;return(t=(n=o.$method_double_for(e).$expectations()).$detect,t.$$p=($=function(t){return $.$$s||this,null==t&&(t=r),t["$negative_expectation_for?"](e)},$.$$s=o,$),t).call(n)},v.$record_message_received=f=function(e,t){var n=this,o=f.$$p,a=o||r;return t=$.call(arguments,1),f.$$p=null,n.order_group.$invoked(b.get("SpecificMessage").$new(n.$object(),e)),n.messages_received["$<<"]([e,t,a])},v.$message_received=h=function(e,t){var n,o,a,i,s,c,l,u,_,p,d,f,m,g,v,y,x=this,k=h.$$p,w=k||r,S=r,E=r;return t=$.call(arguments,1),h.$$p=null,(n=(o=x).$record_message_received,n.$$p=w.$to_proc(),n).apply(o,[e].concat(t)),S=(n=x).$find_matching_expectation.apply(n,[e].concat(t)),E=(a=x).$find_matching_method_stub.apply(a,[e].concat(t)),c=(l=E!==!1&&E!==r)?S:l,(i=(s=c!==!1&&c!==r?S["$called_max_times?"]():c)!==!1&&s!==r?s:(c=E!==!1&&E!==r)?S["$!"]():c)===r||i.$$is_boolean&&1!=i?S!==!1&&S!==r?(c=(u=S).$invoke,c.$$p=w.$to_proc(),c).apply(u,[E].concat(t)):(c=S=(_=x).$find_almost_matching_expectation.apply(_,[e].concat(t)))===r||c.$$is_boolean&&1!=c?(d=E=(f=x).$find_almost_matching_stub.apply(f,[e].concat(t)))===r||d.$$is_boolean&&1!=d?(g=b.get("Class")["$==="](x.object))===r||g.$$is_boolean&&1!=g?(g=(y=x.object).$__send__,g.$$p=w.$to_proc(),g).apply(y,["method_missing",e].concat(t)):(g=(v=x.object.$superclass()).$__send__,g.$$p=w.$to_proc(),g).apply(v,[e].concat(t)):((d=E).$advise.apply(d,[].concat(t)),(m=x).$raise_missing_default_stub_error.apply(m,[E].concat(t))):(((c=S["$expected_messages_received?"]())===r||c.$$is_boolean&&1!=c)&&((c=x["$null_object?"]())===r||c.$$is_boolean&&1!=c||(c=S).$advise.apply(c,[].concat(t))),(p=(d=x["$has_negative_expectation?"](e))!==!1&&d!==r?d:x["$null_object?"]())===r||p.$$is_boolean&&1!=p?(p=x).$raise_unexpected_message_args_error.apply(p,[S].concat(t)):r):((i=(s=S!==!1&&S!==r)?S["$actual_received_count_matters?"]():s)===r||i.$$is_boolean&&1!=i||S["$increase_actual_received_count!"](),(i=S=(s=x).$find_almost_matching_expectation.apply(s,[e].concat(t)))===r||i.$$is_boolean&&1!=i||((i=S["$expected_messages_received?"]())===r||i.$$is_boolean&&1!=i)&&(i=S).$advise.apply(i,[].concat(t)),(c=(l=E).$invoke,c.$$p=w.$to_proc(),c).apply(l,[r].concat(t)))},v.$raise_unexpected_message_error=function(e,t){var r,n=this;return t=$.call(arguments,1),(r=n.error_generator).$raise_unexpected_message_error.apply(r,[e].concat(t))},v.$raise_unexpected_message_args_error=function(e,t){var r,n=this;return t=$.call(arguments,1),(r=n.error_generator).$raise_unexpected_message_args_error.apply(r,[e].concat(t))
},v.$raise_missing_default_stub_error=function(e,t){var r,n=this;return t=$.call(arguments,1),(r=n.error_generator).$raise_missing_default_stub_error.apply(r,[e].concat(t))},g.$private(),v.$method_double_for=function(e){var t=this;return t.method_doubles["$[]"](e.$to_sym())},v.$find_matching_expectation=function(e,t){var n,o,a,i=this;return t=$.call(arguments,1),(n=(o=i).$find_best_matching_expectation_for,n.$$p=(a=function(n){var $;return a.$$s||this,null==n&&(n=r),($=n)["$matches?"].apply($,[e].concat(t))},a.$$s=i,a),n).call(o,e)},v.$find_almost_matching_expectation=function(e,t){var n,o,a,i=this;return t=$.call(arguments,1),(n=(o=i).$find_best_matching_expectation_for,n.$$p=(a=function(n){var $;return a.$$s||this,null==n&&(n=r),($=n).$matches_name_but_not_args.apply($,[e].concat(t))},a.$$s=i,a),n).call(o,e)},v.$find_best_matching_expectation_for=m=function(t){try{var $,o,a,i=this,s=m.$$p,c=s||r,l=r;return m.$$p=null,l=r,($=(o=i.$method_double_for(t).$expectations()).$each,$.$$p=(a=function(t){var $,o;return a.$$s||this,null==t&&(t=r),($=(o=e.$yield1(c,t))===n?n.$v:o)===r||$.$$is_boolean&&1!=$?r:((($=t["$called_max_times?"]())===r||$.$$is_boolean&&1!=$)&&e.$return(t),($=l)!==!1&&$!==r?$:l=t)},a.$$s=i,a),$).call(o),l}catch(u){if(u===e.returner)return u.$v;throw u}},v.$find_matching_method_stub=function(e,t){var n,o,a,i=this;return t=$.call(arguments,1),(n=(o=i.$method_double_for(e).$stubs()).$find,n.$$p=(a=function(n){var $;return a.$$s||this,null==n&&(n=r),($=n)["$matches?"].apply($,[e].concat(t))},a.$$s=i,a),n).call(o)},v.$find_almost_matching_stub=function(e,t){var n,o,a,i=this;return t=$.call(arguments,1),(n=(o=i.$method_double_for(e).$stubs()).$find,n.$$p=(a=function(n){var $;return a.$$s||this,null==n&&(n=r),($=n).$matches_name_but_not_args.apply($,[e].concat(t))},a.$$s=i,a),n).call(o)},r&&"find_almost_matching_stub"}(s,null),function(t,$super){function n(){}var o,i,s=n=a(t,$super,"PartialMockProxy",n),c=s.$$proto,l=s.$$scope;return c.object=r,c.$method_handle_for=function(t){var n,$=this;try{return(n=$["$any_instance_class_recorder_observing_method?"]($.object.$class(),t))===r||n.$$is_boolean&&1!=n||(t=Opal.get("RSpec").$$scope.get("Mocks").$any_instance_recorder_for($.object.$class()).$build_alias_method_name(t)),Opal.get("RSpec").$$scope.get("Mocks").$method_handle_for($.object,t)}catch(o){if(e.$rescue(o,[l.get("NameError")]))return r;throw o}},c.$add_simple_expectation=o=function(t){var r=$.call(arguments,0),n=this,a=o.$$p;return o.$$p=null,n.$method_double_for(t).$configure_method(),e.find_super_dispatcher(n,"add_simple_expectation",o,a).apply(n,r)},c.$add_simple_stub=i=function(t){var r=$.call(arguments,0),n=this,o=i.$$p;return i.$$p=null,n.$method_double_for(t).$configure_method(),e.find_super_dispatcher(n,"add_simple_stub",i,o).apply(n,r)},s.$private(),c["$any_instance_class_recorder_observing_method?"]=function(e,t){var n,$=this,o=r;return(n=Opal.get("RSpec").$$scope.get("Mocks").$any_instance_recorder_for(e)["$already_observing?"](t))===r||n.$$is_boolean&&1!=n?(o=e.$superclass(),(n=o["$nil?"]())===r||n.$$is_boolean&&1!=n?$["$any_instance_class_recorder_observing_method?"](o,t):!1):!0},r&&"any_instance_class_recorder_observing_method?"}(s,c.get("Proxy"))}(s)}(t)},Opal.modules["rspec/mocks/proxy_for_nil"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$attr_accessor","$warn_about_expectations?","$warn","$private","$first_non_rspec_line"]),function(t){var i=$(t,"RSpec");i.$$proto,i.$$scope,function(t){var i=$(t,"Mocks"),s=(i.$$proto,i.$$scope);!function(t,$super){function $(){}var i,s,c,l,u=$=o(t,$super,"ProxyForNil",$),_=u.$$proto,p=u.$$scope;return _.$initialize=i=function(t){var n=this;return i.$$p,i.$$p=null,n.warn_about_expectations=!0,e.find_super_dispatcher(n,"initialize",i,null).apply(n,[r,t])},u.$attr_accessor("warn_about_expectations"),e.defn(u,"$warn_about_expectations?",_.$warn_about_expectations),_.$add_message_expectation=s=function(t,$,o){var i,c=n.call(arguments,0),l=this,u=s.$$p;return null==o&&(o=a([],{})),s.$$p=null,(i=l["$warn_about_expectations?"]())===r||i.$$is_boolean&&1!=i||l.$warn($),e.find_super_dispatcher(l,"add_message_expectation",s,u).apply(l,c)},_.$add_negative_message_expectation=c=function(t,$){var o,a=n.call(arguments,0),i=this,s=c.$$p;return c.$$p=null,(o=i["$warn_about_expectations?"]())===r||o.$$is_boolean&&1!=o||i.$warn($),e.find_super_dispatcher(i,"add_negative_message_expectation",c,s).apply(i,a)},_.$add_stub=l=function(t,$,o){var i,s=n.call(arguments,0),c=this,u=l.$$p;return null==o&&(o=a([],{})),l.$$p=null,(i=c["$warn_about_expectations?"]())===r||i.$$is_boolean&&1!=i||c.$warn($),e.find_super_dispatcher(c,"add_stub",l,u).apply(c,s)},u.$private(),_.$warn=function(e){var t=r;return t=p.get("CallerFilter").$first_non_rspec_line(),p.get("Kernel").$warn("An expectation of :"+e+" was set on nil. Called from "+t+". Use allow_message_expectations_on_nil to disable warnings.")},r&&"warn"}(i,s.get("Proxy"))}(i)}(t)},Opal.modules["rspec/mocks/space"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass,o=e.hash2;return e.add_stubs(["$attr_reader","$each_value","$verify","$proxies","$any_instance_recorders","$reset_all","$reset","$clear","$expectation_ordering","$new","$__id__","$fetch","$[]=","$delete","$select","$===","$object","$values","$id_for","$__build_mock_proxy","$verify_partial_doubles?","$configuration","$has_key?","$!","$method_defined?","$require","$equal?","$_id2ref","$instance_exec","$uuid"]),function(t){var a=n(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=n(t,"Mocks");a.$$proto,a.$$scope,function(t,$super){function n(){}var a,i,s=n=$(t,$super,"Space",n),c=s.$$proto,l=s.$$scope;return c.expectation_ordering=r,s.$attr_reader("proxies","any_instance_recorders"),c.$initialize=function(){var e=this;return e.proxies=o([],{}),e.any_instance_recorders=o([],{})},c.$verify_all=function(){var e,t,n,$,o,a=this;return(e=(t=a.$proxies()).$each_value,e.$$p=(n=function(e){return n.$$s||this,null==e&&(e=r),e.$verify()},n.$$s=a,n),e).call(t),(e=($=a.$any_instance_recorders()).$each_value,e.$$p=(o=function(e){return o.$$s||this,null==e&&(e=r),e.$verify()},o.$$s=a,o),e).call($)},c.$reset_all=function(){var e,t,n,$=this;return l.get("ConstantMutator").$reset_all(),(e=(t=$.$proxies()).$each_value,e.$$p=(n=function(e){return n.$$s||this,null==e&&(e=r),e.$reset()},n.$$s=$,n),e).call(t),$.$proxies().$clear(),$.$any_instance_recorders().$clear(),$.$expectation_ordering().$clear()},c.$expectation_ordering=function(){var e,t=this;return(e=t.expectation_ordering)!==!1&&e!==r?e:t.expectation_ordering=l.get("OrderGroup").$new()},c.$any_instance_recorder_for=function(e){var t,n,$,o=this,a=r;return a=e.$__id__(),(t=(n=o.$any_instance_recorders()).$fetch,t.$$p=($=function(){var t=$.$$s||this;return t.$any_instance_recorders()["$[]="](a,l.get("AnyInstance").$$scope.get("Recorder").$new(e))},$.$$s=o,$),t).call(n,a)},c.$remove_any_instance_recorder_for=function(e){var t=this;return t.$any_instance_recorders().$delete(e.$__id__())},c.$proxies_of=function(e){var t,n,$,o=this;return(t=(n=o.$proxies().$values()).$select,t.$$p=($=function(t){return $.$$s||this,null==t&&(t=r),e["$==="](t.$object())},$.$$s=o,$),t).call(n)},c.$proxy_for=function(e){var t,n,$,o=this,a=r;return a=o.$id_for(e),(t=(n=o.$proxies()).$fetch,t.$$p=($=function(){var t,n=$.$$s||this,o=r;return n.$proxies()["$[]="](a,function(){return o=e,l.get("NilClass")["$==="](o)?l.get("ProxyForNil").$new(n.$expectation_ordering()):l.get("TestDouble")["$==="](o)?e.$__build_mock_proxy(n.$expectation_ordering()):(t=l.get("RSpec").$$scope.get("Mocks").$configuration()["$verify_partial_doubles?"]())===r||t.$$is_boolean&&1!=t?l.get("PartialMockProxy").$new(e,n.$expectation_ordering()):l.get("VerifyingPartialMockProxy").$new(e,n.$expectation_ordering())}())},$.$$s=o,$),t).call(n,a)},e.defn(s,"$ensure_registered",c.$proxy_for),c["$registered?"]=function(e){var t=this;return t.$proxies()["$has_key?"](t.$id_for(e))},i=null==e.Object.$$scope.BasicObject?r:"constant",(a=i!==!1&&i!==r?Opal.get("BasicObject")["$method_defined?"]("__id__")["$!"]():i)===r||a.$$is_boolean&&1!=a?(c.$id_for=function(e){return e.$__id__()},r&&"id_for"):(s.$require("securerandom"),c.$id_for=function(e){var t,n,$,o=this,a=r;return a=e.$__id__(),(t=e["$equal?"](Opal.get("ObjectSpace").$_id2ref(a)))===r||t.$$is_boolean&&1!=t?(t=(n=e).$instance_exec,t.$$p=($=function(){var e,t=$.$$s||this;return null==t.__id_for_rspec_mocks_space&&(t.__id_for_rspec_mocks_space=r),(e=t.__id_for_rspec_mocks_space)!==!1&&e!==r?e:t.__id_for_rspec_mocks_space=Opal.get("SecureRandom").$uuid()},$.$$s=o,$),t).call(n):a},r&&"id_for")}(a,null)}(a)}(t)},Opal.modules["rspec/mocks/standalone"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e;return e.nil,e.breaker,e.slice,e.add_stubs(["$require","$setup"]),t.$require("rspec/mocks"),r.get("RSpec").$$scope.get("Mocks").$setup(t)},Opal.modules["rspec/mocks/stub_chain"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$stub_chain","$new","$to_proc","$attr_reader","$format_chain","$>","$length","$chain","$find_matching_stub","$shift","$block","$invoke","$stub","$object","$stub_chain_on","$private","$===","$last","$pop","$each","$<<","$lambda","$split","$join","$__send__","$proxy_for","$to_sym","$first"]),function(t){var a=$(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=$(t,"Mocks");a.$$proto,a.$$scope,function(t,$super){function $(){}var a,i,s,c=$=o(t,$super,"StubChain",$),l=c.$$proto,u=c.$$scope;return e.defs(c,"$stub_chain_on",a=function(e,t){var $,o,i=this,s=a.$$p,c=s||r;return t=n.call(arguments,1),a.$$p=null,($=(o=i).$new,$.$$p=c.$to_proc(),$).apply(o,[e].concat(t)).$stub_chain()}),c.$attr_reader("object","chain","block"),l.$initialize=i=function(t,$){var o,a,s,c=this,l=i.$$p,u=l||r;return $=n.call(arguments,1),i.$$p=null,c.object=t,o=e.to_ary((a=(s=c).$format_chain,a.$$p=u.$to_proc(),a).apply(s,[].concat($))),c.chain=null==o[0]?r:o[0],c.block=null==o[1]?r:o[1]},l.$stub_chain=function(){var e,t,n,$,o,a,i=this,s=r,c=r;return i.$chain().$length()["$>"](1)?(e=s=i.$find_matching_stub())===r||e.$$is_boolean&&1!=e?(c=u.get("Mock").$new(),(e=(n=i.$object()).$stub,e.$$p=($=function(){return $.$$s||this,c},$.$$s=i,$),e).call(n,i.$chain().$shift()),(e=(o=u.get("StubChain")).$stub_chain_on,e.$$p=i.$block().$to_proc(),e).apply(o,[c].concat(i.$chain()))):(i.$chain().$shift(),(e=(t=s.$invoke(r)).$stub_chain,e.$$p=i.$block().$to_proc(),e).apply(t,[].concat(i.$chain()))):(e=(a=i.$object()).$stub,e.$$p=i.$block().$to_proc(),e).call(a,i.$chain().$shift())},c.$private(),l.$format_chain=s=function(e){var t,$,o,a=this,i=s.$$p,c=i||r,l=r;return e=n.call(arguments,0),s.$$p=null,(t=u.get("Hash")["$==="](e.$last()))===r||t.$$is_boolean&&1!=t||(l=e.$pop(),(t=($=l).$each,t.$$p=(o=function(t,n){var $,a,i,s=o.$$s||this;return null==t&&(t=r),null==n&&(n=r),e["$<<"](t),c=($=(a=s).$lambda,$.$$p=(i=function(){return i.$$s||this,n},i.$$s=s,i),$).call(a)},o.$$s=a,o),t).call($)),[e.$join(".").$split("."),c]},l.$find_matching_stub=function(){var e=this;return Opal.get("RSpec").$$scope.get("Mocks").$proxy_for(e.$object()).$__send__("find_matching_method_stub",e.$chain().$first().$to_sym())},r&&"find_matching_stub"}(a,null)}(a)}(t)},Opal.modules["rspec/mocks/syntax"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.hash2;return e.add_stubs(["$deprecate","$should_enabled?","$class_exec","$warn_unless_should_configured","$[]","$[]=","$first_non_rspec_line","$expect_message","$to_proc","$never","$===","$each","$and_return","$stub","$allow_message","$remove_stub","$proxy_for","$space","$stub_chain_on","$as_null_object","$received_message?","$respond_to?","$any_instance_recorder_for","$default_should_syntax_host","$expect_enabled?","$new","$warn_about_block","$method_defined?","$==","$>","$to_f","$last","$ancestors"]),function(t){var a=$(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=$(t,"Mocks");a.$$proto,a.$$scope,function(t){var a=$(t,"Syntax"),i=a.$$proto,s=a.$$scope;e.defs(a,"$warn_about_should!",function(){var e=this;return e.warn_about_should=!0}),e.defs(a,"$warn_unless_should_configured",function(e){var t,n=this;return null==n.warn_about_should&&(n.warn_about_should=r),(t=n.warn_about_should)===r||t.$$is_boolean&&1!=t?r:(s.get("RSpec").$deprecate("Using `"+e+"` from rspec-mocks' old `:should` syntax without explicitly enabling the syntax",o(["replacement"],{replacement:"the new `:expect` syntax or explicitly enable `:should`"})),n.warn_about_should=!1)}),e.defs(a,"$enable_should",function(t){var $,a,i,c=this;return null==t&&(t=c.$default_should_syntax_host()),c.warn_about_should=!1,($=c["$should_enabled?"](t))===r||$.$$is_boolean&&1!=$?($=(a=t).$class_exec,$.$$p=(i=function(){var t,$,a,c,l,u,_,p,d=i.$$s||this;return e.defn(d,"$should_receive",t=function(e,n){var $,a,i,c=this,l=t.$$p,u=l||r;return null==n&&(n=o([],{})),t.$$p=null,Opal.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("should_receive"),$="expected_from",a=n,(i=a["$[]"]($))!==!1&&i!==r?i:a["$[]="]($,s.get("CallerFilter").$first_non_rspec_line()),($=(a=Opal.get("RSpec").$$scope.get("Mocks")).$expect_message,$.$$p=u.$to_proc(),$).call(a,c,e,n)}),e.defn(d,"$should_not_receive",$=function(e){var t,n,a=this,i=$.$$p,c=i||r,l=r;return $.$$p=null,Opal.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("should_not_receive"),l=o(["expected_from"],{expected_from:s.get("CallerFilter").$first_non_rspec_line()}),(t=(n=Opal.get("RSpec").$$scope.get("Mocks")).$expect_message,t.$$p=c.$to_proc(),t).call(n,a,e,l).$never()}),e.defn(d,"$stub",a=function(e,t){var n,$,i,c,l=this,u=a.$$p,_=u||r;return null==t&&(t=o([],{})),a.$$p=null,Opal.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("stub"),(n=Opal.get("Hash")["$==="](e))===r||n.$$is_boolean&&1!=n?(t["$[]="]("expected_from",s.get("CallerFilter").$first_non_rspec_line()),(n=(c=Opal.get("RSpec").$$scope.get("Mocks")).$allow_message,n.$$p=_.$to_proc(),n).call(c,l,e,t)):(n=($=e).$each,n.$$p=(i=function(e,t){var n=i.$$s||this;return null==e&&(e=r),null==t&&(t=r),n.$stub(e).$and_return(t)},i.$$s=l,i),n).call($)}),e.defn(d,"$unstub",function(e){var t=this;return Opal.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("unstub"),Opal.get("RSpec").$$scope.get("Mocks").$space().$proxy_for(t).$remove_stub(e)}),e.defn(d,"$stub_chain",c=function(e){var t,$,o=this,a=c.$$p,i=a||r;return e=n.call(arguments,0),c.$$p=null,Opal.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("stub_chain"),(t=($=Opal.get("RSpec").$$scope.get("Mocks").$$scope.get("StubChain")).$stub_chain_on,t.$$p=i.$to_proc(),t).apply($,[o].concat(e))}),e.defn(d,"$as_null_object",function(){var e=this;return Opal.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("as_null_object"),e._null_object=!0,Opal.get("RSpec").$$scope.get("Mocks").$proxy_for(e).$as_null_object()}),e.defn(d,"$null_object?",function(){var e,t=this;return Opal.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("null_object?"),e=t._null_object,null!=e&&e!==r?"instance-variable":r}),e.defn(d,"$received_message?",l=function(e,t){var $,o,a=this,i=l.$$p,s=i||r;return t=n.call(arguments,1),l.$$p=null,Opal.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("received_message?"),($=(o=Opal.get("RSpec").$$scope.get("Mocks").$proxy_for(a))["$received_message?"],$.$$p=s.$to_proc(),$).apply(o,[e].concat(t))}),(u=s.get("Class")["$respond_to?"]("any_instance"))===r||u.$$is_boolean&&1!=u?(u=(_=s.get("Class")).$class_exec,u.$$p=(p=function(){var t=p.$$s||this;return e.defn(t,"$any_instance",function(){var e=this;return Opal.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("any_instance"),Opal.get("RSpec").$$scope.get("Mocks").$any_instance_recorder_for(e)}),r&&"any_instance"},p.$$s=d,p),u).call(_):r},i.$$s=c,i),$).call(a):r}),e.defs(a,"$disable_should",function(e){var t,n,$,o,a,c=this;return null==e&&(e=c.$default_should_syntax_host()),(t=c["$should_enabled?"](e))===r||t.$$is_boolean&&1!=t?r:((t=(n=e).$class_exec,t.$$p=($=function(){return $.$$s||this,delete i.$should_receive,delete i.$should_not_receive,delete i.$stub,delete i.$unstub,delete i.$stub_chain,delete i.$as_null_object,delete i["$null_object?"],delete i["$received_message?"]},$.$$s=c,$),t).call(n),(t=(o=s.get("Class")).$class_exec,t.$$p=(a=function(){return a.$$s||this,delete i.$any_instance},a.$$s=c,a),t).call(o))}),e.defs(a,"$enable_expect",function(t){var n,$,o,a,i,c=this;return null==t&&(t=Opal.get("RSpec").$$scope.get("Mocks").$$scope.get("ExampleMethods")),(n=c["$expect_enabled?"](t))===r||n.$$is_boolean&&1!=n?((n=($=t).$class_exec,n.$$p=(o=function(){var t,n,$=o.$$s||this;return e.defn($,"$receive",t=function(e){var n=t.$$p,$=n||r;return t.$$p=null,s.get("Matchers").$$scope.get("Receive").$new(e,$)}),e.defn($,"$receive_messages",n=function(e){var t=n.$$p,$=t||r,o=r;return n.$$p=null,o=s.get("Matchers").$$scope.get("ReceiveMessages").$new(e),$!==r&&o.$warn_about_block(),o}),e.defn($,"$allow",function(e){return s.get("AllowanceTarget").$new(e)}),e.defn($,"$expect_any_instance_of",function(e){return s.get("AnyInstanceExpectationTarget").$new(e)}),e.defn($,"$allow_any_instance_of",function(e){return s.get("AnyInstanceAllowanceTarget").$new(e)}),r&&"allow_any_instance_of"},o.$$s=c,o),n).call($),(n=(a=s.get("RSpec").$$scope.get("Mocks").$$scope.get("ExampleMethods").$$scope.get("ExpectHost")).$class_exec,n.$$p=(i=function(){var t=i.$$s||this;return e.defn(t,"$expect",function(e){return s.get("ExpectationTarget").$new(e)}),r&&"expect"},i.$$s=c,i),n).call(a)):r}),e.defs(a,"$disable_expect",function(e){var t,n,$,o,a,c=this;return null==e&&(e=Opal.get("RSpec").$$scope.get("Mocks").$$scope.get("ExampleMethods")),(t=c["$expect_enabled?"](e))===r||t.$$is_boolean&&1!=t?r:((t=(n=e).$class_exec,t.$$p=($=function(){return $.$$s||this,delete i.$receive,delete i.$receive_messages,delete i.$allow,delete i.$expect_any_instance_of,delete i.$allow_any_instance_of},$.$$s=c,$),t).call(n),(t=(o=s.get("RSpec").$$scope.get("Mocks").$$scope.get("ExampleMethods").$$scope.get("ExpectHost")).$class_exec,t.$$p=(a=function(){return a.$$s||this,delete i.$expect},a.$$s=c,a),t).call(o))}),e.defs(a,"$should_enabled?",function(e){var t=this;return null==e&&(e=t.$default_should_syntax_host()),e["$method_defined?"]("should_receive")}),e.defs(a,"$expect_enabled?",function(e){return null==e&&(e=Opal.get("RSpec").$$scope.get("Mocks").$$scope.get("ExampleMethods")),e["$method_defined?"]("allow")}),e.defs(a,"$default_should_syntax_host",function(){var t,n,$;return $=null!=s.JRUBY_VERSION,n=$!==!1&&$!==r?s.get("JRUBY_VERSION")["$=="]("1.7.4"):$,(t=n!==!1&&n!==r?s.get("RUBY_VERSION").$to_f()["$>"](1.8):n)===r||t.$$is_boolean&&1!=t?(t=null==e.Object.$$scope.BasicObject?r:"constant")===r||t.$$is_boolean&&1!=t?s.get("Object"):s.get("Object").$ancestors().$last()["$=="](Opal.get("BasicObject"))?Opal.get("BasicObject"):s.get("Object"):Opal.get("BasicObject")})}(a)}(a)}(t)},Opal.modules["rspec/mocks/targets"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$new","$define_method","$===","$raise_unsupported_matcher","$define_matcher","$to_proc","$fetch","$raise_negation_unsupported","$private","$__send__","$raise","$+","$expression","$name","$class","$delegate_to","$disallow_negation","$delegate_not_to"]),function(t){var i=$(t,"RSpec");i.$$proto,i.$$scope,function(t){var i=$(t,"Mocks"),s=(i.$$proto,i.$$scope);e.cdecl(s,"UnsupportedMatcherError",s.get("Class").$new(s.get("StandardError"))),e.cdecl(s,"NegationUnsupportedError",s.get("Class").$new(s.get("StandardError"))),function(t,$super){function $(){}var i,s=$=o(t,$super,"TargetBase",$),c=s.$$proto,l=s.$$scope;return c.target=r,c.$initialize=function(e){var t=this;return t.target=e},e.defs(s,"$delegate_to",function(e){var t,n,$,o=this;return(t=(n=o).$define_method,t.$$p=($=function(t){var n,o,a,i=$.$$s||this;return null==t&&(t=r),n=$.$$p||r,$.$$p=null,((o=(a=l.get("Matchers").$$scope.get("Receive")["$==="](t))!==!1&&a!==r?a:l.get("Matchers").$$scope.get("ReceiveMessages")["$==="](t))===r||o.$$is_boolean&&1!=o)&&i.$raise_unsupported_matcher("to",t),(o=(a=i).$define_matcher,o.$$p=n.$to_proc(),o).call(a,t,e)},$.$$s=o,$),t).call(n,"to")}),e.defs(s,"$delegate_not_to",function(e,t){var n,$,o,i=this,s=r;return null==t&&(t=a([],{})),s=t.$fetch("from"),(n=($=i).$define_method,n.$$p=(o=function(t){var n,$,a,i=o.$$s||this,c=r;return null==t&&(t=r),n=o.$$p||r,o.$$p=null,function(){return c=t,l.get("Matchers").$$scope.get("Receive")["$==="](c)?($=(a=i).$define_matcher,$.$$p=n.$to_proc(),$).call(a,t,e):l.get("Matchers").$$scope.get("ReceiveMessages")["$==="](c)?i.$raise_negation_unsupported(s,t):i.$raise_unsupported_matcher(s,t)}()},o.$$s=i,o),n).call($,s)}),e.defs(s,"$disallow_negation",function(e){var t,$,o,a=this;return(t=($=a).$define_method,t.$$p=(o=function(t,$){var a=o.$$s||this;return null==t&&(t=r),$=n.call(arguments,1),a.$raise_negation_unsupported(e,t)},o.$$s=a,o),t).call($,e)}),s.$private(),c.$define_matcher=i=function(e,t){var n,$,o=this,a=i.$$p,s=a||r;return i.$$p=null,(n=($=e).$__send__,n.$$p=s.$to_proc(),n).call($,t,o.target)},c.$raise_unsupported_matcher=function(e,t){var r=this;return r.$raise(l.get("UnsupportedMatcherError"),"only the `receive` or `receive_messages` matchers are supported "["$+"]("with `"+r.$expression()+"(...)."+e+"`, but you have provided: "+t))},c.$raise_negation_unsupported=function(e,t){var r=this;return r.$raise(l.get("NegationUnsupportedError"),("`"+r.$expression()+"(...)."+e+" "+t.$name()+"` is not supported since it ")["$+"]("doesn't really make sense. What would it even mean?"))},c.$expression=function(){var e=this;return e.$class().$$scope.get("EXPRESSION")},r&&"expression"}(i,null),function(t,$super){function r(){}var n=r=o(t,$super,"AllowanceTarget",r),$=(n.$$proto,n.$$scope);return e.cdecl($,"EXPRESSION","allow"),n.$delegate_to("setup_allowance"),n.$disallow_negation("not_to"),n.$disallow_negation("to_not")}(i,s.get("TargetBase")),function(t,$super){function r(){}var n=r=o(t,$super,"ExpectationTarget",r),$=(n.$$proto,n.$$scope);return e.cdecl($,"EXPRESSION","expect"),n.$delegate_to("setup_expectation"),n.$delegate_not_to("setup_negative_expectation",a(["from"],{from:"not_to"})),n.$delegate_not_to("setup_negative_expectation",a(["from"],{from:"to_not"}))}(i,s.get("TargetBase")),function(t,$super){function r(){}var n=r=o(t,$super,"AnyInstanceAllowanceTarget",r),$=(n.$$proto,n.$$scope);return e.cdecl($,"EXPRESSION","allow_any_instance_of"),n.$delegate_to("setup_any_instance_allowance"),n.$disallow_negation("not_to"),n.$disallow_negation("to_not")}(i,s.get("TargetBase")),function(t,$super){function r(){}var n=r=o(t,$super,"AnyInstanceExpectationTarget",r),$=(n.$$proto,n.$$scope);return e.cdecl($,"EXPRESSION","expect_any_instance_of"),n.$delegate_to("setup_any_instance_expectation"),n.$delegate_not_to("setup_any_instance_negative_expectation",a(["from"],{from:"not_to"})),n.$delegate_not_to("setup_any_instance_negative_expectation",a(["from"],{from:"to_not"}))}(i,s.get("TargetBase"))}(i)}(t)},Opal.modules["rspec/mocks/test_double"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.hash2;return e.add_stubs(["$extend","$send","$__initialize_as_test_double","$as_null_object","$__mock_proxy","$null_object?","$==","$class","$sprintf","$object_id","$inspect","$gsub","$alias_method","$new","$private","$===","$empty?","$assign_stubs","$record_message_received","$to_proc","$include?","$raise","$raise_unexpected_message_error","$each_pair","$add_simple_stub","$proxy_for"]),function(t){var a=$(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=$(t,"Mocks");a.$$proto,a.$$scope,function(t){var a,i,s=$(t,"TestDouble"),c=s.$$proto,l=s.$$scope;e.defs(s,"$extend_onto",function(e,t,n){var $=this;return null==t&&(t=r),null==n&&(n=o([],{})),e.$extend($),e.$send("__initialize_as_test_double",t,n)}),c.$initialize=function(e,t){var n=this;return null==e&&(e=r),null==t&&(t=o([],{})),n.$__initialize_as_test_double(e,t)},c.$as_null_object=function(){var e=this;return e.$__mock_proxy().$as_null_object()},c["$null_object?"]=function(){var e=this;return e.$__mock_proxy()["$null_object?"]()},c["$=="]=function(e){var t=this;return e["$=="](t.$__mock_proxy())},c.$inspect=function(){var e=this;return null==e.name&&(e.name=r),"#<"+e.$class()+":"+e.$sprintf("0x%x",e.$object_id())+" @name="+e.name.$inspect()+">"},c.$to_s=function(){var e=this;return e.$inspect().$gsub("<","[").$gsub(">","]")},s.$alias_method("to_str","to_s"),c["$respond_to?"]=a=function(t,$){var o,i=n.call(arguments,0),s=this,c=a.$$p;return null==$&&($=!1),a.$$p=null,(o=s.$__mock_proxy()["$null_object?"]())===r||o.$$is_boolean&&1!=o?e.find_super_dispatcher(s,"respond_to?",a,c).apply(s,i):!0},c.$__build_mock_proxy=function(e){var t=this;return null==t.name&&(t.name=r),l.get("Proxy").$new(t,e,t.name)},s.$private(),c.$__initialize_as_test_double=function(e,t){var n,$,a=this;return null==e&&(e=r),null==t&&(t=o([],{})),$=l.get("Hash")["$==="](e),(n=$!==!1&&$!==r?t["$empty?"]():$)===r||n.$$is_boolean&&1!=n?a.name=e:(t=e,a.name=r),a.$assign_stubs(t)},c.$method_missing=i=function(t,$){var o,a,s=n.call(arguments,0),c=this,u=i.$$p,_=u||r,p=r;if($=n.call(arguments,1),i.$$p=null,(o=c.$__mock_proxy()["$null_object?"]())!==r&&(!o.$$is_boolean||1==o)){if(p=t,"to_int"["$==="](p))return 0;if("to_a"["$==="](p)||"to_ary"["$==="](p))return r}(o=(a=c.$__mock_proxy()).$record_message_received,o.$$p=_.$to_proc(),o).apply(a,[t].concat($));try{return(o=c.$__mock_proxy()["$null_object?"]())===r||o.$$is_boolean&&1!=o?e.find_super_dispatcher(c,"method_missing",i,u).apply(c,s):c}catch(d){if(e.$rescue(d,[l.get("NameError")]))return(o=["to_a","to_ary"]["$include?"](t))===r||o.$$is_boolean&&1!=o||c.$raise(l.get("NoMethodError")),(o=c.$__mock_proxy()).$raise_unexpected_message_error.apply(o,[t].concat($));throw d}},c.$assign_stubs=function(e){var t,n,$,o=this;return(t=(n=e).$each_pair,t.$$p=($=function(e,t){var n=$.$$s||this;return null==e&&(e=r),null==t&&(t=r),n.$__mock_proxy().$add_simple_stub(e,t)},$.$$s=o,$),t).call(n)},c.$__mock_proxy=function(){var e=this;return Opal.get("RSpec").$$scope.get("Mocks").$proxy_for(e)},e.donate(s,["$initialize","$as_null_object","$null_object?","$==","$inspect","$to_s","$respond_to?","$__build_mock_proxy","$__initialize_as_test_double","$method_missing","$assign_stubs","$__mock_proxy"])}(a)}(a)}(t)},Opal.modules["rspec/mocks/verifying_double"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$require","$null_object?","$ensure_implemented","$__mock_proxy","$include","$__initialize_as_test_double","$new","$stub","$const_to_replace"]),t.$require("rspec/mocks/mock"),t.$require("rspec/mocks/verifying_proxy"),function(t){var i=$(t,"RSpec");i.$$proto,i.$$scope,function(t){var i=$(t,"Mocks"),s=(i.$$proto,i.$$scope);!function(t){var o,a=$(t,"VerifyingDouble"),i=a.$$proto;a.$$scope,i.$method_missing=o=function(t,$){var a,i=n.call(arguments,0),s=this,c=o.$$p;return $=n.call(arguments,1),o.$$p=null,(a=s["$null_object?"]())===r||a.$$is_boolean&&1!=a||s.$__mock_proxy().$ensure_implemented(t),e.find_super_dispatcher(s,"method_missing",o,c).apply(s,i)},e.donate(a,["$method_missing"])}(i),function(e,$super){function t(){}var $=t=o(e,$super,"InstanceVerifyingDouble",t),a=$.$$proto,i=$.$$scope;return a.doubled_module=r,$.$include(i.get("TestDouble")),$.$include(i.get("VerifyingDouble")),a.$initialize=function(e,t){var r,$=this;return t=n.call(arguments,1),$.doubled_module=e,(r=$).$__initialize_as_test_double.apply(r,[e].concat(t))},a.$__build_mock_proxy=function(e){var t=this;return i.get("VerifyingProxy").$new(t,e,t.doubled_module,i.get("InstanceMethodReference"))},r&&"__build_mock_proxy"}(i,null),function(t){var o=$(t,"ObjectVerifyingDoubleMethods"),i=o.$$proto,s=o.$$scope;o.$include(s.get("TestDouble")),o.$include(s.get("VerifyingDouble")),i.$initialize=function(e,t){var r,$=this;return t=n.call(arguments,1),$.doubled_module=e,(r=$).$__initialize_as_test_double.apply(r,[e].concat(t))},i.$__build_mock_proxy=function(e){var t=this;return null==t.doubled_module&&(t.doubled_module=r),s.get("VerifyingProxy").$new(t,e,t.doubled_module,s.get("ObjectMethodReference"))},i.$as_stubbed_const=function(e){var t=this;return null==t.doubled_module&&(t.doubled_module=r),null==e&&(e=a([],{})),s.get("ConstantMutator").$stub(t.doubled_module.$const_to_replace(),t,e),t},e.donate(o,["$initialize","$__build_mock_proxy","$as_stubbed_const"])}(i),function(e,$super){function t(){}var r=t=o(e,$super,"ObjectVerifyingDouble",t),n=(r.$$proto,r.$$scope);return r.$include(n.get("ObjectVerifyingDoubleMethods"))}(i,null),function(e,$super){function t(){}var r=t=o(e,$super,"ClassVerifyingDouble",t),n=(r.$$proto,r.$$scope);return r.$include(n.get("ObjectVerifyingDoubleMethods"))}(i,s.get("Module"))}(i)}(t)},Opal.modules["rspec/mocks/verifying_message_expecation"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$require","$attr_accessor","$===","$first","$>","$length","$ensure_arity!","$private","$nil?","$method_reference","$when_defined","$new","$within_range?","$raise_arity_error"]),t.$require("rspec/mocks/arity_calculator"),function(t){var a=$(t,"RSpec");a.$$proto,a.$$scope,function(t){var a=$(t,"Mocks"),i=(a.$$proto,a.$$scope);!function(t,$super){function $(){}var a,i,s=$=o(t,$super,"VerifyingMessageExpectation",$),c=s.$$proto,l=s.$$scope;return s.$attr_accessor("method_reference"),c.$initialize=a=function(t){var r=n.call(arguments,0),$=this,o=a.$$p;return t=n.call(arguments,0),a.$$p=null,e.find_super_dispatcher($,"initialize",a,o).apply($,r)},c.$with=i=function(t){var $,o=n.call(arguments,0),a=this,s=i.$$p,c=r;return t=n.call(arguments,0),i.$$p=null,(($=l.get("ArgumentMatchers").$$scope.get("AnyArgsMatcher")["$==="](t.$first()))===r||$.$$is_boolean&&1!=$)&&(c=function(){return($=l.get("ArgumentMatchers").$$scope.get("NoArgsMatcher")["$==="](t.$first()))===r||$.$$is_boolean&&1!=$?t.$length()["$>"](0)?t.$length():e.find_super_dispatcher(a,"with",i,s).apply(a,o):0}(),a["$ensure_arity!"](c)),e.find_super_dispatcher(a,"with",i,s).apply(a,o)},s.$private(),c["$ensure_arity!"]=function(e){var t,n,$,o=this;return(t=o.$method_reference()["$nil?"]())===r||t.$$is_boolean&&1!=t?(t=(n=o.$method_reference()).$when_defined,t.$$p=($=function(t){var n,o=$.$$s||this,a=r;return null==o.error_generator&&(o.error_generator=r),null==t&&(t=r),a=l.get("ArityCalculator").$new(t),(n=a["$within_range?"](e))===r||n.$$is_boolean&&1!=n?(o.failed_fast=!0,o.error_generator.$raise_arity_error(a,e)):r},$.$$s=o,$),t).call(n):r},r&&"ensure_arity!"}(a,i.get("MessageExpectation"))}(a)}(t)},Opal.modules["rspec/mocks/verifying_proxy"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=e.breaker,$=e.slice,o=e.module,a=e.hash2,i=e.klass;return e.add_stubs(["$require","$ensure_implemented","$defined?","$when_unimplemented","$raise_unimplemented_error","$[]","$method_reference","$include","$new","$[]=","$tap","$method_reference=","$ensure_arity!","$length","$private","$when_defined","$within_range?","$raise","$arity","$respond_to?","$save_original_method!","$original_method"]),t.$require("rspec/mocks/verifying_message_expecation"),t.$require("rspec/mocks/method_reference"),function(t){var s=o(t,"RSpec");s.$$proto,s.$$scope,function(t){var s=o(t,"Mocks"),c=(s.$$proto,s.$$scope);!function(t){var n,i,s,c=o(t,"VerifyingProxyMethods"),l=c.$$proto;c.$$scope,l.$add_stub=n=function(t,r,o){var i=$.call(arguments,0),s=this,c=n.$$p;return null==o&&(o=a([],{})),n.$$p=null,s.$ensure_implemented(r),e.find_super_dispatcher(s,"add_stub",n,c).apply(s,i)},l.$add_simple_stub=i=function(t,r){var n=$.call(arguments,0),o=this,a=i.$$p;return r=$.call(arguments,1),i.$$p=null,o.$ensure_implemented(t),e.find_super_dispatcher(o,"add_simple_stub",i,a).apply(o,n)},l.$add_message_expectation=s=function(t,r,n){var o=$.call(arguments,0),i=this,c=s.$$p;return null==n&&(n=a([],{})),s.$$p=null,i.$ensure_implemented(r),e.find_super_dispatcher(i,"add_message_expectation",s,c).apply(i,o)},l.$ensure_implemented=function(e){var t,n,$,o=this;
return null==o.doubled_module&&(o.doubled_module=r),(t=o.doubled_module["$defined?"]())===r||t.$$is_boolean&&1!=t?r:(t=(n=o.$method_reference()["$[]"](e)).$when_unimplemented,t.$$p=($=function(){var t=$.$$s||this;return null==t.error_generator&&(t.error_generator=r),null==t.doubled_module&&(t.doubled_module=r),t.error_generator.$raise_unimplemented_error(t.doubled_module,e)},$.$$s=o,$),t).call(n)},e.donate(c,["$add_stub","$add_simple_stub","$add_message_expectation","$ensure_implemented"])}(s),function(t,$super){function n(){}var $,o=n=i(t,$super,"VerifyingProxy",n),a=o.$$proto,s=o.$$scope;return a.method_reference=r,o.$include(s.get("VerifyingProxyMethods")),a.$initialize=$=function(t,n,o,a){var i,c,l,u=this;return $.$$p,$.$$p=null,e.find_super_dispatcher(u,"initialize",$,null).apply(u,[t,n]),u.object=t,u.doubled_module=o,u.method_reference_class=a,u.method_doubles=(i=(c=s.get("Hash")).$new,i.$$p=(l=function(e,t){var n=l.$$s||this;return null==n.object&&(n.object=r),null==e&&(e=r),null==t&&(t=r),e["$[]="](t,s.get("VerifyingMethodDouble").$new(n.object,t,n,n.$method_reference()["$[]"](t)))},l.$$s=u,l),i).call(c)},a.$method_reference=function(){var e,t,n,$,o=this;return(e=o.method_reference)!==!1&&e!==r?e:o.method_reference=(t=(n=s.get("Hash")).$new,t.$$p=($=function(e,t){var n=$.$$s||this;return null==n.method_reference_class&&(n.method_reference_class=r),null==n.doubled_module&&(n.doubled_module=r),null==e&&(e=r),null==t&&(t=r),e["$[]="](t,n.method_reference_class.$new(n.doubled_module,t))},$.$$s=o,$),t).call(n)},r&&"method_reference"}(s,c.get("Proxy")),function(t,$super){function n(){}var $,o=n=i(t,$super,"VerifyingPartialMockProxy",n),a=o.$$proto,s=o.$$scope;return a.method_doubles=r,o.$include(s.get("VerifyingProxyMethods")),a.$initialize=$=function(t,n){var o,a,i,c=this;return $.$$p,$.$$p=null,e.find_super_dispatcher(c,"initialize",$,null).apply(c,[t,n]),c.doubled_module=s.get("DirectObjectReference").$new(t),c.method_doubles=(o=(a=s.get("Hash")).$new,o.$$p=(i=function(e,n){var $=i.$$s||this;return null==e&&(e=r),null==n&&(n=r),e["$[]="](n,s.get("VerifyingExistingMethodDouble").$new(t,n,$))},i.$$s=c,i),o).call(a)},a.$method_reference=function(){var e=this;return e.method_doubles},r&&"method_reference"}(s,c.get("PartialMockProxy")),function(t,$super){function n(){}var o,a,s,c=n=i(t,$super,"VerifyingMethodDouble",n),l=c.$$proto,u=c.$$scope;return l.method_reference=r,l.$initialize=o=function(t,r,n,$){var a=this;return o.$$p,o.$$p=null,e.find_super_dispatcher(a,"initialize",o,null).apply(a,[t,r,n]),a.method_reference=$},l.$message_expectation_class=function(){return u.get("VerifyingMessageExpectation")},l.$add_expectation=a=function(t){var n,o,i,s=$.call(arguments,0),c=this,l=a.$$p;return t=$.call(arguments,0),a.$$p=null,(n=(o=e.find_super_dispatcher(c,"add_expectation",a,l).apply(c,s)).$tap,n.$$p=(i=function(e){var t,n,$=i.$$s||this;return null==$.method_reference&&($.method_reference=r),null==e&&(e=r),t=[$.method_reference],n=e,n["$method_reference="].apply(n,t),t[t.length-1]},i.$$s=c,i),n).call(o)},l.$proxy_method_invoked=s=function(t,r){var n=$.call(arguments,0),o=this,a=s.$$p;return r=$.call(arguments,1),s.$$p=null,o["$ensure_arity!"](r.$length()),e.find_super_dispatcher(o,"proxy_method_invoked",s,a).apply(o,n)},c.$private(),l["$ensure_arity!"]=function(e){var t,n,$,o=this;return(t=(n=o.method_reference).$when_defined,t.$$p=($=function(t){var n,o=$.$$s||this,a=r;return null==t&&(t=r),a=u.get("ArityCalculator").$new(t),(n=a["$within_range?"](e))===r||n.$$is_boolean&&1!=n?o.$raise(u.get("ArgumentError"),"wrong number of arguments ("+e+" for "+t.$arity()+")"):r},$.$$s=o,$),t).call(n)},r&&"ensure_arity!"}(s,c.get("MethodDouble")),function(t,$super){function $(){}var o,a,s,c=$=i(t,$super,"VerifyingExistingMethodDouble",$),l=c.$$proto;return c.$$scope,l.valid_method=r,l.$initialize=o=function(t,r,n){var $=this;return o.$$p,o.$$p=null,e.find_super_dispatcher($,"initialize",o,null).apply($,[t,r,n,$]),$.valid_method=t["$respond_to?"](r),$["$save_original_method!"]()},l.$when_defined=a=function(){var t,$=this,o=a.$$p,i=o||r;return a.$$p=null,t=e.$yield1(i,$.$original_method()),t===n?t:t},l.$when_unimplemented=s=function(){var t,$=this,o=s.$$p,a=o||r;return s.$$p=null,(t=$.valid_method)===r||t.$$is_boolean&&1!=t?(t=e.$yieldX(a,[]),t===n?t:t):r},r&&"when_unimplemented"}(s,c.get("VerifyingMethodDouble"))}(s)}(t)},Opal.modules["rspec/mocks/version"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=(e.nil,e.breaker,e.slice,e.module);return e.add_stubs([]),function(t){var n=r(t,"RSpec");n.$$proto,n.$$scope,function(t){var n=r(t,"Mocks");n.$$proto,n.$$scope,function(t){var n=r(t,"Version"),$=(n.$$proto,n.$$scope);e.cdecl($,"STRING","3.0.0.beta1")}(n)}(n)}(t)},Opal.modules["rspec/mocks"]=function(e){e.dynamic_require_severity="warning";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.hash2;return e.add_stubs(["$require","$attr_accessor","$class_exec","$include","$space","$space=","$new","$verify_all","$reset_all","$proxy_for","$proxies_of","$any_instance_recorder_for","$fetch","$first_non_rspec_line","$add_stub","$to_proc","$add_message_expectation","$instance_method","$===","$call","$bind","$method"]),t.$require("rspec/mocks/framework"),t.$require("rspec/mocks/version"),function(t){var o=n(t,"RSpec");o.$$proto,o.$$scope,function(t){var o=n(t,"Mocks"),a=(o.$$proto,o.$$scope);!function(t){var n=t.$$scope;return t.$$proto,t.$attr_accessor("space"),t.$$proto.$setup=function(e){var t,$,o,a,i=this;return(t=($=function(e){return e.$$scope,e.$$proto,e}(e.$singleton_class())).$class_exec,t.$$p=(o=function(){var e=o.$$s||this;return e.$include(n.get("RSpec").$$scope.get("Mocks").$$scope.get("ExampleMethods"))},o.$$s=i,o),t).call($),t=i,(a=t.$space())!==!1&&a!==r?a:t["$space="](n.get("RSpec").$$scope.get("Mocks").$$scope.get("Space").$new())},t.$$proto.$verify=function(){var e=this;return e.$space().$verify_all()},t.$$proto.$teardown=function(){var e=this;return e.$space().$reset_all()},t.$$proto.$proxy_for=function(e){var t=this;return t.$space().$proxy_for(e)},t.$$proto.$proxies_of=function(e){var t=this;return t.$space().$proxies_of(e)},t.$$proto.$any_instance_recorder_for=function(e){var t=this;return t.$space().$any_instance_recorder_for(e)},t.$$proto.$allow_message=TMP_2=function(e,t,o){var a,i,s,c,l=this,u=TMP_2.$$p,_=u||r,p=r;return null==o&&(o=$([],{})),TMP_2.$$p=null,p=(a=(i=o).$fetch,a.$$p=(s=function(){return s.$$s||this,n.get("CallerFilter").$first_non_rspec_line()},s.$$s=l,s),a).call(i,"expected_from"),(a=(c=Opal.get("RSpec").$$scope.get("Mocks").$proxy_for(e)).$add_stub,a.$$p=_.$to_proc(),a).call(c,p,t,o)},t.$$proto.$expect_message=TMP_4=function(e,t,o){var a,i,s,c,l=this,u=TMP_4.$$p,_=u||r,p=r;return null==o&&(o=$([],{})),TMP_4.$$p=null,p=(a=(i=o).$fetch,a.$$p=(s=function(){return s.$$s||this,n.get("CallerFilter").$first_non_rspec_line()},s.$$s=l,s),a).call(i,"expected_from"),(a=(c=Opal.get("RSpec").$$scope.get("Mocks").$proxy_for(e)).$add_message_expectation,a.$$p=_.$to_proc(),a).call(c,p,t,o)},e.cdecl(n,"KERNEL_METHOD_METHOD",Opal.get("Kernel").$instance_method("method")),t.$$proto.$method_handle_for=function(e,t){var $;return($=Opal.get("Kernel")["$==="](e))===r||$.$$is_boolean&&1!=$?e.$method(t):n.get("KERNEL_METHOD_METHOD").$bind(e).$call(t)},r&&"method_handle_for"}(o.$singleton_class()),e.cdecl(a,"IGNORED_BACKTRACE_LINE","this backtrace line is ignored")}(o)}(t)},Opal.modules.shellwords=function(e){e.dynamic_require_severity="error";var t=(e.top,e.nil);return e.breaker,e.slice,e.add_stubs([]),t},Opal.modules.fileutils=function(e){e.dynamic_require_severity="error";var t=(e.top,e.nil);return e.breaker,e.slice,e.add_stubs([]),t},Opal.modules.optparse=function(e){e.dynamic_require_severity="error";var t=(e.top,e.nil);return e.breaker,e.slice,e.add_stubs([]),t},Opal.mark_as_loaded(Opal.normalize_loadable_path("opal/rspec/rspec")),Opal.modules["opal/rspec/fixes"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e,n=e.nil,$=e.breaker,o=(e.slice,e.module),a=e.klass,i=e.gvars;return e.add_stubs(["$flatten","$map","$module_function","$!","$raise","$+","$new","$dup","$to_s","$gsub","$tr","$downcase","$=~","$[]","$empty?","$description","$upcase","$lstrip","$const_defined?","$next","$__id__","$original_method"]),function(t){var r,a=o(t,"FlatMap"),i=a.$$proto;a.$$scope,i.$flat_map=r=function(t){var o,a,i,s=this,c=r.$$p,l=c||n;return r.$$p=null,(o=(a=t).$map,o.$$p=(i=function(t){var r;return i.$$s||this,null==t&&(t=n),r=e.$yield1(l,t),r===$?r:r},i.$$s=s,i),o).call(a).$flatten()},a.$module_function("flat_map"),e.donate(a,["$flat_map"])}(r.get("RSpec").$$scope.get("Core")),function(t,$super){function r(){}var $=r=a(t,$super,"CallerFilter",r);return $.$$proto,$.$$scope,e.defs($,"$first_non_rspec_line",function(){return""}),n&&"first_non_rspec_line"}(r.get("RSpec"),null),function(t){var r=o(t,"Expectations"),$=(r.$$proto,r.$$scope);e.defs(r,"$fail_with",function(e,t,r){var o,a=this;return null==t&&(t=n),null==r&&(r=n),(o=e["$!"]())===n||o.$$is_boolean&&1!=o||a.$raise($.get("ArgumentError"),"Failure message is nil. Does your matcher define the "["$+"]("appropriate failure_message_for_* method to return a string?")),a.$raise($.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationNotMetError").$new(e))})}(r.get("RSpec")),function(t){var r=o(t,"RSpec");r.$$proto,r.$$scope,function(t){var r=o(t,"Matchers");r.$$proto,r.$$scope,function(t){var r=o(t,"Pretty"),$=r.$$proto;r.$$scope,$.$underscore=function(e){var t=n;return t=e.$to_s().$dup(),t=t.$gsub(/([A-Z]+)([A-Z][a-z])/,"$1_$2"),t=t.$gsub(/([a-z\d])([A-Z])/,"$1_$2"),t=t.$tr("-","_"),t=t.$downcase()},e.donate(r,["$underscore"])}(r)}(r)}(t),function(e,$super){function t(){}var r=t=a(e,$super,"BePredicate",t),$=r.$$proto;return r.$$scope,$.$prefix_and_expected=function(e){return null==i["~"]&&(i["~"]=n),e.$to_s()["$=~"](/^(be_(an?_)?)(.*)/),[i["~"]["$[]"](1),i["~"]["$[]"](3)]},n&&"prefix_and_expected"}(r.get("RSpec").$$scope.get("Matchers").$$scope.get("BuiltIn"),null),function(t){var r=o(t,"ExampleGroups");r.$$proto,r.$$scope,e.defs(r,"$base_name_for",function(e){var t,r,$,o=this,a=n;return(t=e.$description()["$empty?"]())===n||t.$$is_boolean&&1!=t?(a=" "["$+"](e.$description()),a=(t=(r=a).$gsub,t.$$p=($=function(e){return $.$$s||this,null==e&&(e=n),e["$[]"](1).$upcase()},$.$$s=o,$),t).call(r,/[^0-9a-zA-Z]+([0-9a-zA-Z])/),a=a.$lstrip(),a=a.$gsub(/\W/,""),a=a.$gsub(/^([^A-Z]|$)/,"Nested$1")):"Anonymous"}),e.defs(r,"$disambiguate",function(e,t){var r,$;if((r=t["$const_defined?"](e))===n||r.$$is_boolean&&1!=r)return e;for(e=e["$+"]("_2");($=t["$const_defined?"](e))!==n&&(!$.$$is_boolean||1==$);)e=e.$next();return e})}(r.get("RSpec")),function(e,$super){function t(){}var r=t=a(e,$super,"Space",t),$=r.$$proto;return r.$$scope,$.$id_for=function(e){return e.$__id__()},n&&"id_for"}(r.get("RSpec").$$scope.get("Mocks"),null),function(e,$super){function t(){}var r=t=a(e,$super,"MethodDouble",t),$=r.$$proto;return r.$$scope,$.original_method=$.method_stasher=n,$["$save_original_method!"]=function(){var e,t=this;return(e=t.original_method)!==!1&&e!==n?e:t.original_method=t.method_stasher.$original_method()},n&&"save_original_method!"}(r.get("RSpec").$$scope.get("Mocks"),null)},Opal.modules["opal/rspec/text_formatter"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$empty?","$failed_examples","$puts","$each_with_index","$dump_failure","$short_padding","$next","$full_description","$dump_failure_info","$[]","$execution_result","$to_s","$name","$class","$red","$long_padding","$each","$split","$message","$==","$green","$finish_with_code"]),function(e){var t=n(e,"Opal");t.$$proto,t.$$scope,function(e){var t=n(e,"RSpec");t.$$proto,t.$$scope,function(e,$super){function t(){}var n=t=$(e,$super,"TextFormatter",t),o=n.$$proto;return n.$$scope,o.$dump_failures=function(){var e,t,n,$=this;return(e=$.$failed_examples()["$empty?"]())===r||e.$$is_boolean&&1!=e?($.$puts("\nFailures:"),(e=(t=$.$failed_examples()).$each_with_index,e.$$p=(n=function(e,t){var $=n.$$s||this;return null==e&&(e=r),null==t&&(t=r),$.$puts("\n"),$.$dump_failure(e,t)},n.$$s=$,n),e).call(t)):$.$puts("\nFinished")},o.$dump_failure=function(e,t){var r=this;return r.$puts(""+r.$short_padding()+t.$next()+") "+e.$full_description()),r.$dump_failure_info(e)},o.$dump_failure_info=function(e){var t,n,$,o=this,a=r,i=r;return a=e.$execution_result()["$[]"]("exception"),i=a.$class().$name().$to_s(),o.$red(""+o.$long_padding()+i+":"),(t=(n=a.$message().$to_s().$split("\n")).$each,t.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=r),t.$red(""+t.$long_padding()+"  "+e)},$.$$s=o,$),t).call(n)},o.$dump_summary=function(e,t,n,$){var o=this,a=r;return o.duration=e,o.example_count=t,o.failure_count=n,o.pending_count=$,a="\n"+t+" examples, "+n+" failures (time taken: "+e+")",n["$=="](0)?(o.$green(a),o.$finish_with_code(0)):(o.$red(a),o.$finish_with_code(1))},o.$finish_with_code=function(e){"undefined"!=typeof phantom?phantom.exit(e):Opal.global.OPAL_SPEC_CODE=e},o.$green=function(e){return console.log("[32m"+e+"[0m")},o.$red=function(e){return console.log("[31m"+e+"[0m")},o.$short_padding=function(){return"  "},o.$long_padding=function(){return"     "},r&&"long_padding"}(t,Opal.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("BaseFormatter"))}(t)}(t)},Opal.modules.template=function(e){e.dynamic_require_severity="error";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.klass),$=e.hash2;return e.add_stubs(["$[]","$[]=","$keys","$attr_reader","$instance_exec","$to_proc","$new","$<<","$join"]),function(t,$super){function o(){}var a,i=o=n(t,$super,"Template",o),s=i.$$proto,c=i.$$scope;return s.name=s.body=r,i._cache=$([],{}),e.defs(i,"$[]",function(e){var t,n=this;return null==n._cache&&(n._cache=r),(t=n._cache["$[]"](e))!==!1&&t!==r?t:n._cache["$[]"]("templates/"+e)}),e.defs(i,"$[]=",function(e,t){var n=this;return null==n._cache&&(n._cache=r),n._cache["$[]="](e,t)}),e.defs(i,"$paths",function(){var e=this;return null==e._cache&&(e._cache=r),e._cache.$keys()}),i.$attr_reader("body"),s.$initialize=a=function(e){var t,n=this,$=a.$$p,o=$||r;return a.$$p=null,t=[e,o],n.name=t[0],n.body=t[1],c.get("Template")["$[]="](e,n)},s.$inspect=function(){var e=this;return"#<Template: '"+e.name+"'>"},s.$render=function(e){var t,r,n=this;return null==e&&(e=n),(t=(r=e).$instance_exec,t.$$p=n.body.$to_proc(),t).call(r,c.get("OutputBuffer").$new())},function(t,$super){function $(){}var o=$=n(t,$super,"OutputBuffer",$),a=o.$$proto;return o.$$scope,a.buffer=r,a.$initialize=function(){var e=this;return e.buffer=[]},a.$append=function(e){var t=this;return t.buffer["$<<"](e)},e.defn(o,"$append=",a.$append),a.$join=function(){var e=this;return e.buffer.$join()},r&&"join"}(i,null)}(t,null)},Opal.modules.erb=function(e){e.dynamic_require_severity="error";var t=e.top,r=(e.nil,e.breaker,e.slice,e.klass),n=e.module;return e.add_stubs(["$require","$module_function"]),t.$require("template"),function(t,$super){function $(){}var o=$=r(t,$super,"ERB",$);return o.$$proto,o.$$scope,function(t){var r=n(t,"Util"),$=r.$$proto;r.$$scope;var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},a=/[&<>"']/g;$.$html_escape=function(e){return(""+e).replace(a,function(e){return o[e]})},e.defn(r,"$h",$.$html_escape),r.$module_function("h"),r.$module_function("html_escape"),e.donate(r,["$html_escape","$h"])}(o)}(t,null)},Opal.modules["opal/rspec/browser_formatter"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$require","$include","$new","$<<","$id","$+","$append_to_head","$size","$parent_groups","$description","$style","$*","$-","$class_name=","$sprintf","$[]","$execution_result","$to_s","$name","$class","$short_padding","$each","$long_padding","$split","$message","$h","$html=","$add_scripts","$attr_reader","$===","$__send__","$gsub","$native"]),t.$require("erb"),function(t){var i=$(t,"Opal");i.$$proto,i.$$scope,function(t){var i=$(t,"RSpec");i.$$proto,i.$$scope,function(t,$super){function $(){}var i,s,c,l,u,_,p=$=o(t,$super,"BrowserFormatter",$),d=p.$$proto,f=p.$$scope;return d.rspec_group=d.rspec_dl=d.rspec_dt=d.rspec_results=d.example_group_failed=r,p.$include(f.get("ERB").$$scope.get("Util")),e.cdecl(f,"CSS_STYLES",Opal.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("HtmlPrinter").$$scope.get("GLOBAL_STYLES")),d.$start=i=function(){var t=n.call(arguments,0),$=this,o=i.$$p,s=r,c=r,l=r;return i.$$p=null,e.find_super_dispatcher($,"start",i,o).apply($,t),s=f.get("Element").$new(document.body),s["$<<"](f.get("Element").$new("div",a(["html"],{html:f.get("REPORT_TEMPLATE")}))),$.rspec_results=f.get("Element").$id("rspec-results"),c=f.get("CSS_STYLES")["$+"]("\n body { padding: 0; margin: 0 }"),l=f.get("Element").$new("style",a(["type","css_text"],{type:"text/css",css_text:c})),l.$append_to_head()},d.$example_group_started=s=function(t){var $=n.call(arguments,0),o=this,i=s.$$p,c=r;return s.$$p=null,e.find_super_dispatcher(o,"example_group_started",s,i).apply(o,$),o.example_group_failed=!1,c=t.$parent_groups().$size(),o.rspec_group=f.get("Element").$new("div",a(["class_name"],{class_name:"example_group passed"})),o.rspec_dl=f.get("Element").$new("dl"),o.rspec_dt=f.get("Element").$new("dt",a(["class_name","text"],{class_name:"passed",text:t.$description()})),o.rspec_group["$<<"](o.rspec_dl),o.rspec_dl["$<<"](o.rspec_dt),o.rspec_dl.$style("margin-left",""+c["$-"](2)["$*"](15)+"px"),o.rspec_results["$<<"](o.rspec_group)},d.$example_group_finished=c=function(){var t,$,o=n.call(arguments,0),a=this,i=c.$$p;return c.$$p=null,e.find_super_dispatcher(a,"example_group_finished",c,i).apply(a,o),(t=a.example_group_failed)===r||t.$$is_boolean&&1!=t?r:(t=["example_group failed"],$=a.rspec_group,$["$class_name="].apply($,t),t[t.length-1],t=["failed"],$=a.rspec_dt,$["$class_name="].apply($,t),t[t.length-1],t=["failed"],$=f.get("Element").$id("rspec-header"),$["$class_name="].apply($,t),t[t.length-1])},d.$example_failed=l=function(t){var $,o,i,s=n.call(arguments,0),c=this,u=l.$$p,_=r,p=r,d=r,h=r;return l.$$p=null,e.find_super_dispatcher(c,"example_failed",l,u).apply(c,s),_=c.$sprintf("%0.5f",t.$execution_result()["$[]"]("run_time")),p=t.$execution_result()["$[]"]("exception"),d=p.$class().$name().$to_s(),h=""+c.$short_padding()+d+":\n",($=(o=p.$message().$to_s().$split("\n")).$each,$.$$p=(i=function(e){var t=i.$$s||this;return null==e&&(e=r),h=h["$+"](""+t.$long_padding()+"  "+e+"\n")},i.$$s=c,i),$).call(o),c.example_group_failed=!0,c.rspec_dl["$<<"](f.get("Element").$new("dd",a(["class_name","html"],{class_name:"example failed",html:'          <span class="failed_spec_name">'+c.$h(t.$description())+'</span>\n          <span class="duration">'+_+'s</span>\n          <div class="failure">\n            <div class="message"><pre>'+c.$h(h)+"</pre></div>\n          </div>\n"})))},d.$example_passed=u=function(t){var $=n.call(arguments,0),o=this,i=u.$$p,s=r;return u.$$p=null,e.find_super_dispatcher(o,"example_passed",u,i).apply(o,$),s=o.$sprintf("%0.5f",t.$execution_result()["$[]"]("run_time")),o.rspec_dl["$<<"](f.get("Element").$new("dd",a(["class_name","html"],{class_name:"example passed",html:'          <span class="passed_spec_name">'+o.$h(t.$description())+'</span>\n          <span class="duration">'+s+"s</span>\n"})))},d.$dump_summary=_=function(t,$,o){var a,i,s=n.call(arguments,0),c=this,l=_.$$p,u=r;return _.$$p=null,e.find_super_dispatcher(c,"dump_summary",_,l).apply(c,s),u=""+$+" examples, "+o+" failures",a=[u],i=f.get("Element").$id("totals"),i["$html="].apply(i,a),a[a.length-1],t="Finished in <strong>"+c.$sprintf("%.5f",t)+" seconds</strong>",a=[t],i=f.get("Element").$id("duration"),i["$html="].apply(i,a),a[a.length-1],c.$add_scripts()},d.$add_scripts=function(){var e=r;return e=Opal.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("HtmlPrinter").$$scope.get("GLOBAL_SCRIPTS"),window.eval(e)},d.$short_padding=function(){return"  "},d.$long_padding=function(){return"     "},function(t,$super){function n(){}var $=n=o(t,$super,"Element",n),i=$.$$proto,s=$.$$scope;return i["native"]=r,$.$attr_reader("native"),e.defs($,"$id",function(e){var t=this;return t.$new(document.getElementById(e))}),i.$initialize=function(e,t){var n,$,o,i=this;return null==t&&(t=a([],{})),i["native"]=(n=s.get("String")["$==="](e))===r||n.$$is_boolean&&1!=n?e:document.createElement(e),(n=($=t).$each,n.$$p=(o=function(e,t){var n=o.$$s||this;return null==e&&(e=r),null==t&&(t=r),n.$__send__(""+e+"=",t)},o.$$s=i,o),n).call($)},i["$class_name="]=function(e){var t=this;return t["native"].className=e},i["$html="]=function(e){var t=this;return t["native"].innerHTML=e},i["$text="]=function(e){var t,r,n=this;return t=[e.$gsub(/</,"&lt").$gsub(/>/,"&gt")],r=n,r["$html="].apply(r,t),t[t.length-1]},i["$type="]=function(e){var t=this;return t["native"].type=e},i.$append=function(e){var t=this;return t["native"].appendChild(e.$native())},e.defn($,"$<<",i.$append),i["$css_text="]=function(e){var t=this;t["native"].styleSheet?t["native"].styleSheet.cssText=e:t["native"].appendChild(document.createTextNode(e))},i.$style=function(e,t){var r=this;return r["native"].style[e]=t},i.$append_to_head=function(){var e=this;return document.getElementsByTagName("head")[0].appendChild(e["native"])},r&&"append_to_head"}(p,null),e.cdecl(f,"REPORT_TEMPLATE",'<div class="rspec-report">\n\n  <div id="rspec-header">\n    <div id="label">\n      <h1>RSpec Code Examples</h1>\n    </div>\n\n    <div id="display-filters">\n      <input id="passed_checkbox"  name="passed_checkbox"  type="checkbox" checked="checked" onchange="apply_filters()" value="1" /> <label for="passed_checkbox">Passed</label>\n      <input id="failed_checkbox"  name="failed_checkbox"  type="checkbox" checked="checked" onchange="apply_filters()" value="2" /> <label for="failed_checkbox">Failed</label>\n      <input id="pending_checkbox" name="pending_checkbox" type="checkbox" checked="checked" onchange="apply_filters()" value="3" /> <label for="pending_checkbox">Pending</label>\n    </div>\n\n    <div id="summary">\n      <p id="totals">&#160;</p>\n      <p id="duration">&#160;</p>\n    </div>\n  </div>\n\n  <div id="rspec-results" class="results">\n  </div>\n</div>\n')}(i,Opal.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("BaseFormatter"))}(i)}(t)},Opal.modules["opal/rspec/runner"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e.nil,n=(e.breaker,e.slice,e.module),$=e.klass,o=e.hash2,a=e.gvars;return e.add_stubs(["$phantom?","$browser?","$run","$new","$world","$configuration","$error_stream=","$output_stream","$output_stream=","$start","$run_examples","$run_async_examples","$finish","$all?","$map","$example_groups","$reporter","$example_count","$run_hook"]),function(e){var t=n(e,"Opal");t.$$proto,t.$$scope,function(e){var t=n(e,"RSpec");t.$$proto,t.$$scope,function(e,$super){function t(){}var n,i=t=$(e,$super,"Runner",t),s=i.$$proto,c=i.$$scope;return s.configuration=s.world=s.reporter=r,function(e){var t=e.$$scope;return e.$$proto,e.$$proto["$browser?"]=function(){return"undefined"!=typeof document},e.$$proto["$phantom?"]=function(){return"undefined"!=typeof phantom||"undefined"!=typeof OPAL_SPEC_PHANTOM},e.$$proto.$default_formatter=function(){var e,n=this;return(e=n["$phantom?"]())===r||e.$$is_boolean&&1!=e?t.get("BrowserFormatter"):t.get("TextFormatter")},e.$$proto.$autorun=function(){var e,n=this;return(e=n["$browser?"]())===r||e.$$is_boolean&&1!=e?t.get("Runner").$new().$run():setTimeout(function(){t.get("Runner").$new().$run()},0)},r&&"autorun"}(i.$singleton_class()),s.$initialize=function(e){var t=this;return null==e&&(e=o([],{})),t.options=e,t.world=Opal.get("RSpec").$world(),t.configuration=Opal.get("RSpec").$configuration()},s.$run=function(e,t){var n,$,o,i=this;return null==a.stdout&&(a.stdout=r),null==e&&(e=a.stdout),null==t&&(t=a.stdout),n=[e],$=i.configuration,$["$error_stream="].apply($,n),n[n.length-1],n=i.configuration,($=n.$output_stream())!==!1&&$!==r?$:n["$output_stream="](t),i.$start(),i.$run_examples(),(n=($=i).$run_async_examples,n.$$p=(o=function(){var e=o.$$s||this;return e.$finish()},o.$$s=i,o),n).call($)},s.$run_examples=function(){var e,t,n,$=this;return(e=(t=$.world.$example_groups()).$map,e.$$p=(n=function(e){var t=n.$$s||this;return null==t.reporter&&(t.reporter=r),null==e&&(e=r),e.$run(t.reporter)},n.$$s=$,n),e).call(t)["$all?"]()},s.$run_async_examples=n=function(){var e=this,t=n.$$p,$=t||r;return n.$$p=null,c.get("AsyncRunner").$new(e,e.reporter,$).$run()},s.$start=function(){var e=this;return e.reporter=e.configuration.$reporter(),e.reporter.$start(e.world.$example_count()),e.configuration.$run_hook("before","suite")},s.$finish=function(){var e=this;return e.configuration.$run_hook("after","suite"),e.reporter.$finish()},r&&"finish"}(t,null)}(t)}(t)},Opal.modules["opal/rspec/async"]=function(e){e.dynamic_require_severity="error";var t=e.top,r=e.nil,n=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$build_hash_from","$register","$continue_async","$clone","$examples","$run_next_example","$empty?","$finish","$run_example","$pop","$example_group","$example_group_started","$new","$run","$example_finished","$example_group_finished","$call","$<<","$include","$current_example=","$instance_variable_set","$start","$run_before_each","$instance_exec","$to_proc","$set_exception","$delay","$finished?","$async_example_finished","$[]","$options","$run_after_each","$each","$instance_variables","$assign_generated_description"]),function(t){var a=$(t,"Opal");a.$$proto,a.$$scope,function(t){var a=$(t,"RSpec");a.$$proto,a.$$scope,function(t){var o,a=$(t,"AsyncDefinitions"),i=a.$$proto,s=a.$$scope;i.$async=o=function(e,t){var $=this,a=o.$$p,i=a||r,c=r;return t=n.call(arguments,1),o.$$p=null,c=Opal.get("RSpec").$$scope.get("Core").$$scope.get("Metadata").$build_hash_from(t),s.get("Opal").$$scope.get("RSpec").$$scope.get("AsyncExample").$register($,e,c,i)},e.donate(a,["$async"])}(a),function(t){var n,o,a=$(t,"AsyncHelpers"),i=a.$$proto;a.$$scope,i.$async=n=function(){var e=this,t=n.$$p,$=t||r;return null==e.example&&(e.example=r),n.$$p=null,e.example.$continue_async($)},e.defn(a,"$run_async",i.$async),i.$delay=o=function(e){var t=this,n=o.$$p,$=n||r;return o.$$p=null,setTimeout($,1e3*e),t},e.defn(a,"$set_timeout",i.$delay),e.donate(a,["$async","$run_async","$delay","$set_timeout"])}(a),function(e,$super){function t(){}var n=t=o(e,$super,"AsyncRunner",t),$=n.$$proto,a=n.$$scope;return $.examples=$.reporter=$.finish_block=r,$.$initialize=function(e,t,r){var n=this;return n.runner=e,n.reporter=t,n.finish_block=r},$.$run=function(){var e=this;return e.examples=a.get("AsyncExample").$examples().$clone(),e.$run_next_example()},$.$run_next_example=function(){var e,t=this;return(e=t.examples["$empty?"]())===r||e.$$is_boolean&&1!=e?t.$run_example(t.examples.$pop()):t.$finish()},$.$run_example=function(e){var t,n,$,o=this,a=r,i=r;return a=e.$example_group(),o.reporter.$example_group_started(a),i=a.$new(),(t=(n=e).$run,t.$$p=($=function(){var t=$.$$s||this;return t.$example_finished(e)},$.$$s=o,$),t).call(n,i,o.reporter)},$.$example_finished=function(e){var t=this;return t.reporter.$example_group_finished(e.$example_group()),t.$run_next_example()},$.$finish=function(){var e=this;return e.finish_block.$call()},r&&"finish"}(a,null),function(t,$super){function $(){}var a,i=$=o(t,$super,"AsyncExample",$),s=i.$$proto,c=i.$$scope;return s.example_block=s.example_group_instance=s.finished=s.reporter=s.after_run_block=r,e.defs(i,"$register",function(e){var t,r=this;return e=n.call(arguments,0),r.$examples()["$<<"]((t=r).$new.apply(t,[].concat(e)))}),e.defs(i,"$examples",function(){var e,t=this;return null==t.examples&&(t.examples=r),(e=t.examples)!==!1&&e!==r?e:t.examples=[]}),i.$include(c.get("AsyncHelpers")),s.$run=a=function(t,n){var $,o,i,s,l,u=this,_=a.$$p,p=_||r,d=r,f=r;a.$$p=null,u.example_group_instance=t,u.reporter=n,u.after_run_block=p,u.finished=!1,d=!0,$=[u],o=Opal.get("RSpec"),o["$current_example="].apply(o,$),$[$.length-1],t.$instance_variable_set("@example",u),u.$start(n);try{u.$run_before_each(),($=(o=u.example_group_instance).$instance_exec,$.$$p=u.example_block.$to_proc(),$).call(o,u)}catch(h){if(!e.$rescue(h,[c.get("Exception")]))throw h;f=h,u.$set_exception(f),d=!1}return d!==!1&&d!==r?($=(i=u).$delay,$.$$p=(s=function(){var e,t=s.$$s||this;return(e=t["$finished?"]())===r||e.$$is_boolean&&1!=e?(t.$set_exception(c.get("RuntimeError").$new("timeout")),t.$async_example_finished()):r},s.$$s=u,s),$).call(i,(l=u.$options()["$[]"]("timeout"))!==!1&&l!==r?l:10):u.$async_example_finished()},s.$continue_async=function(t){var n,$=this,o=r;if((n=$["$finished?"]())!==r&&(!n.$$is_boolean||1==n))return r;try{t.$call()}catch(a){if(!e.$rescue(a,[c.get("Exception")]))throw a;o=a,$.$set_exception(o)}return $.$async_example_finished()},s["$finished?"]=function(){var e=this;return e.finished},s.$async_example_finished=function(){var t,n,$,o,a=this,i=r;a.finished=!0;try{try{a.$run_after_each()}catch(s){if(!e.$rescue(s,[c.get("Exception")]))throw s;i=s,a.$set_exception(i)}}finally{(t=(n=a.example_group_instance.$instance_variables()).$each,t.$$p=($=function(e){var t=$.$$s||this;return null==t.example_group_instance&&(t.example_group_instance=r),null==e&&(e=r),t.example_group_instance.$instance_variable_set(e,r)},$.$$s=a,$),t).call(n),a.example_group_instance=r;try{a.$assign_generated_description()}catch(s){if(!e.$rescue(s,[c.get("Exception")]))throw s;i=s,a.$set_exception(i,"while assigning the example description")}}return a.$finish(a.reporter),t=[r],o=Opal.get("RSpec"),o["$current_example="].apply(o,t),t[t.length-1],a.after_run_block.$call()},r&&"async_example_finished"}(a,Opal.get("RSpec").$$scope.get("Core").$$scope.get("Example"))}(a)}(t)},Opal.modules["opal/rspec"]=function(e){e.dynamic_require_severity="error";var t,r,n,$,o,a=e.top,i=e,s=e.nil,c=(e.breaker,e.slice,e.klass);return e.add_stubs(["$require","$each","$configure","$formatter=","$default_formatter","$include","$extend","$expect_with","$syntax="]),function(e,$super){function t(){}var r=t=c(e,$super,"MiniTest",t);return r.$$proto,r.$$scope,function(e,$super){function t(){}var r=t=c(e,$super,"Unit",t);return r.$$proto,r.$$scope,s}(r,null)}(a,null),e.cdecl(i,"Test",i.get("MiniTest")),a.$require("file"),a.$require("corelib/dir"),a.$require("thread"),a.$require("set"),a.$require("time"),a.$require("rbconfig"),a.$require("pathname"),a.$require("opal/rspec/rspec"),(t=(r=["rspec","rspec/core/formatters/base_text_formatter","rspec/core/formatters/html_printer","rspec/matchers/pretty","rspec/matchers/built_in/base_matcher","rspec/matchers/built_in/be"]).$each,t.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=s),t.$require(e)},n.$$s=a,n),t).call(r),a.$require("opal/rspec/fixes"),a.$require("opal/rspec/text_formatter"),a.$require("opal/rspec/browser_formatter"),a.$require("opal/rspec/runner"),a.$require("opal/rspec/async"),(t=($=i.get("RSpec")).$configure,t.$$p=(o=function(e){var t,r,n,$=o.$$s||this;return null==e&&(e=s),t=[i.get("Opal").$$scope.get("RSpec").$$scope.get("Runner").$default_formatter()],r=e,r["$formatter="].apply(r,t),t[t.length-1],e.$include(i.get("Opal").$$scope.get("RSpec").$$scope.get("AsyncHelpers")),e.$extend(i.get("Opal").$$scope.get("RSpec").$$scope.get("AsyncDefinitions")),(t=(r=e).$expect_with,t.$$p=(n=function(e){var t,r;return n.$$s||this,null==e&&(e=s),t=[["should","expect"]],r=e,r["$syntax="].apply(r,t),t[t.length-1]},n.$$s=$,n),t).call(r,"rspec")},o.$$s=a,o),t).call($)},Opal.modules["opal-rspec"]=function(e){e.dynamic_require_severity="error";var t=e.top;return e.nil,e.breaker,e.slice,e.add_stubs(["$require"]),t.$require("opal/rspec")},function(e){e.dynamic_require_severity="error";var t=e.top;return e.nil,e.breaker,e.slice,e.add_stubs(["$require"]),t.$require("opal"),t.$require("opal-rspec")}(Opal);